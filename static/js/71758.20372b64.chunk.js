(self.webpackChunkweb=self.webpackChunkweb||[]).push([[71758],{568642:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ut});var o=n(256666),r=n(539144),a=n(196234),l=n(877531),i=n(783723),s=n(18861),u=n(10918),d=n(737790),c=n(634795),f=n(284405),m=n(669083),g=n(561220),p=n(866904),h=n(202784),y=n(472719),v=n(783112),b=n(626015),k=n(119804),x=n(134662),_=n(63450),j=n(292147),w=n(945821),A=n(859071),M=n(826771),I=n(958698),P=n(395795),T=n(481047),O=n(432986),S=n(776553),C=n(365553),D=n(331639),R=n(423114),B=n(552322);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(){var e,t=(0,y.useRoute)().params;if("query"in t){var n=JSON.parse(t.query).options,o=n.address,r=n.symbol,a=n.decimals,l=n.image,i=n.sendAddress;e={name:null!=r?r:"",address:o,symbol:null!=r?r:"",decimal:null!=a?a:0,logoURI:null!=l?l:"",sendAddress:null!=i?i:void 0}}else e=t;if("query"in t){var s,u=JSON.parse(t.query).options,d=u.address,c=u.symbol,f=u.decimals,m=u.image,g=u.sendAddress;return{name:null!=c?c:"",address:d,symbol:null!=c?c:"",decimal:null!=f?f:0,logoURI:null!=m?m:"",riskLevel:null!=(s=e.riskLevel)?s:_.TokenRiskLevel.UNKNOWN,sendAddress:null!=g?g:void 0}}return t};function z(e){var t,n,o=(0,A.useActiveWalletAccount)(),r=o.account,a=o.network,y=o.networkId,_=o.accountId,j=(0,P.default)(a).openAddressDetails,M=(0,A.useAccountTokensBalance)(y,_),T=(0,v.default)(),O=(0,I.default)().sourceInfo,S=N(),R=S.name,E=S.symbol,z=S.decimal,F=S.address,W=(0,h.useCallback)((function(e){return(0,B.jsx)(g.default,L(L({accessibilityLabel:"More options menu"},e),{},{children:(0,B.jsx)(p.default,{typography:{sm:"Body1Strong",md:"Body2Strong"},maxW:"56",textAlign:"right",children:(0,b.shortenAddress)(F)})}))}),[F]),U=(0,h.useCallback)((function(){setTimeout((function(){F&&(0,k.copyToClipboard)(F)}),200),m.default.show({title:T.formatMessage({id:"msg__copied"})})}),[F,T]),V=(0,h.useCallback)((function(){j(F,T.formatMessage({id:"form__explorers"}))}),[T,F,j]),q=(0,h.useMemo)((function(){var e,t=[{label:T.formatMessage({id:"form__name",defaultMessage:"Name"}),value:R},{label:T.formatMessage({id:"form__symbol",defaultMessage:"Symbol"}),value:E},{label:T.formatMessage({id:"form__contract",defaultMessage:"Contact"}),value:(0,B.jsxs)(f.default,{w:"190",trigger:W,offset:D.defaultMenuOffset,placement:"bottom right",children:[(0,B.jsx)(f.default.CustomItem,{onPress:U,icon:"DocumentDuplicateMini",children:T.formatMessage({id:"action__copy_address"})}),!(null!=a&&null!=(e=a.settings)&&e.hiddenBlockBrowserTokenDetailLink)&&(0,B.jsx)(f.default.CustomItem,{onPress:V,icon:"ArrowTopRightOnSquareMini",children:T.formatMessage({id:"action__view_in_browser"})})]})},{label:T.formatMessage({id:"form__decimal",defaultMessage:"Decimal"}),value:String(z)}].filter((function(e){return!!e.value})),n=(M[(0,x.getBalanceKey)(S)]||{balance:"0"}).balance;return n&&t.push({label:T.formatMessage({id:"content__balance",defaultMessage:"Balance"}),value:null!=n?n:"0"}),t}),[R,E,z,M,T,S,null==a||null==(t=a.settings)?void 0:t.hiddenBlockBrowserTokenDetailLink,U,W,V]);return(0,h.useEffect)((function(){function e(){return(e=(0,c.default)((function*(){r&&a&&(yield w.default.serviceToken.fetchAndSaveAccountTokenBalance({accountId:r.id,networkId:a.id,tokenIds:[F]}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r,a,F]),(0,B.jsx)(l.default,L({height:"560px",footer:null,scrollViewProps:{children:(0,B.jsx)(i.default,{children:(0,B.jsxs)(s.default,{children:[(0,B.jsxs)(s.default,{flexDirection:"column",alignItems:"center",justifyContent:"center",mb:"8",mt:"6",children:[(0,B.jsx)(d.default,{token:S,size:"56px"}),(0,B.jsxs)(s.default,{alignItems:"center",flexDirection:"row",justifyContent:"center",mt:"4",children:[(0,B.jsx)(u.default.PageHeading,{children:T.formatMessage({id:"title__adding_str"},{0:E})}),(0,B.jsx)(d.TokenVerifiedIcon,{token:L(L({},S),{},{networkId:null!=(n=null==a?void 0:a.id)?n:""})})]}),null!=O&&O.origin?(0,B.jsx)(C.SiteSection,{mt:"2",url:null==O?void 0:O.origin}):null]}),q.map((function(e,t){return(0,B.jsxs)(s.default,{display:"flex",flexDirection:"row",justifyContent:"space-between",p:"4",alignItems:"center",borderTopColor:"divider",borderTopWidth:0!==t?"1":void 0,children:[(0,B.jsx)(p.default,{typography:{sm:"Body1Strong",md:"Body2Strong"},color:"text-subdued",children:e.label}),"string"===typeof e.value?(0,B.jsx)(p.default,{typography:{sm:"Body1Strong",md:"Body2Strong"},maxW:"56",textAlign:"right",children:e.value}):e.value]},t)}))]})})}},e))}const F=function(){var e,t,n=(0,A.useActiveWalletAccount)(),o=n.walletId,r=n.account,l=n.network,i=(0,v.default)(),s=(0,h.useState)(!1),u=(0,a.default)(s,2),d=u[0],f=u[1],g=(0,A.useAccountTokensOnChain)(null==l?void 0:l.id,null==r?void 0:r.id),p=(0,y.useNavigation)(),b=N(),k=(0,I.default)(),x=b.address,_=b.logoURI,P=(0,M.default)({id:null!=(e=null==(t=k.sourceInfo)?void 0:t.id)?e:""}),C=(0,h.useCallback)((0,c.default)((function*(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).close;if(r&&l){try{f(!0);var t={address:x};g.some((function(e){return e.tokenIdOnNetwork===x}))?m.default.show({title:i.formatMessage({id:"msg__token_already_existed"})}):(t=yield w.default.serviceToken.addAccountToken(l.id,r.id,x,_))&&((0,R.notifyIfRiskToken)(t),m.default.show({title:i.formatMessage({id:"msg__token_added",defaultMessage:"Token Added"})})),yield(0,S.wait)(1e3),yield P.resolve({close:e,result:t}),p.canGoBack()&&p.goBack()}catch(n){j.default.common.error("add token faild",n,x)}f(!1)}})),[g,r,l,x,i,P,_,p]),D=(0,h.useCallback)((0,c.default)((function*(){if(r&&l){var e=yield w.default.engine.getVaultSettings(null==l?void 0:l.id);null!=e&&e.activateTokenRequired?p.navigate(T.ManageTokenModalRoutes.ActivateToken,{walletId:o,accountId:null==r?void 0:r.id,networkId:null==l?void 0:l.id,tokenId:x,onSuccess:function(){C()},onFailure:function(e){O.deviceUtils.showErrorToast(e,"msg__failed_to_add_token")}}):C()}})),[r,l,C,x,p,o]);return(0,B.jsx)(z,{footer:!0,hideSecondaryAction:!0,primaryActionTranslationId:"action__confirm",onModalClose:function(){P.reject()},primaryActionProps:{isLoading:d},onPrimaryActionPress:D})};var W=n(386499),U=n(459740),V=n(435581),q=n(510374),G=n(795116),K=n(719392),$=n(592923),Y=n(433996),H=n(612210),J=n(301842),Q=n.n(J),X=n(534159),Z=n(671029),ee=n(759275),te=n(793525),ne=n(840248),oe=n(219932),re=n(361301),ae=n(470310),le=n(321668),ie=n(311631),se=n(433423);function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce=function(e){var t,n,o=e.title,r=e.content,a=e.hidePrimaryAction,l=e.hideSecondaryAction,i=e.primaryActionTranslationId,s=e.secondaryActionTranslationId,d=e.onPrimaryActionPress,c=e.onSecondaryActionPress,f=e.secondaryActionProps,m=e.primaryActionProps,g=e.onClose,h=(0,v.default)(),y=(0,ie.useSafeAreaInsets)().bottom;return(0,B.jsxs)(re.default,{pb:`${y}px`,children:[(0,B.jsx)(p.default,{fontWeight:"700",fontSize:"56px",textAlign:"center",mb:"3",children:"\u2139\ufe0f"}),(0,B.jsx)(u.default.DisplayMedium,{textAlign:"center",mb:"2",children:o}),(0,B.jsx)(u.default.Body2,{textAlign:"center",mb:"8",color:"text-subdued",children:r}),(0,B.jsxs)(ae.default,{alignItems:"center",space:"3",justifyContent:"flex-end",children:[!l&&(0,B.jsx)(le.default,de(de({flex:1,lineHeight:"50px",size:"xl",onPress:function(){null==c||c({close:function(){return null==g?void 0:g()}}),null==g||g()}},f),{},{children:null!=(t=null==f?void 0:f.children)?t:h.formatMessage({id:null!=s?s:"action__cancel"})})),!a&&(0,B.jsx)(le.default,de(de({flex:1,type:"primary",lineHeight:"50px",size:"xl",onPress:function(){null==d||d({onClose:g,close:function(){return null==g?void 0:g()}})}},m),{},{children:null!=(n=null==m?void 0:m.children)?n:h.formatMessage({id:null!=i?i:"action__ok"})}))]})]})},fe=n(849423),me=(0,fe.atom)(!1),ge=(0,fe.atom)(""),pe=(0,fe.atom)(Date.now()),he=(0,fe.atom)([]),ye=(0,fe.createJotaiContext)(),ve=ye.withProvider,be=ye.useContextAtom,ke=["isOwned"];function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(){var e=function(){var e=(0,A.useActiveWalletAccount)(),t=e.networkId,n=e.accountId,o=be(ge),r=(0,a.default)(o,1)[0],l=be(pe),i=(0,a.default)(l,1)[0];return(0,ee.usePromiseResult)((function(){return w.default.serviceToken.buildManageTokensList({networkId:t,accountId:n,search:r})}),[n,t,r,i],{debounced:600,watchLoading:!0})}(),t=(0,y.useIsFocused)(),n=be(he),o=(0,a.default)(n,2)[1],r=be(me),l=(0,a.default)(r,2)[1],i=be(pe),s=(0,a.default)(i,2)[1];return(0,h.useEffect)((function(){var t=e.result;t&&o(t)}),[e.result,o]),(0,h.useEffect)((function(){Q()(e.isLoading)||l(e.isLoading)}),[e.isLoading,l]),(0,h.useEffect)((function(){t&&s(Date.now())}),[t,s]),null}var we=(0,h.memo)((function(e){var t=(0,v.default)(),n=e.balance,o=(0,A.useActiveWalletAccount)(),r=o.networkId,l=o.accountId,i=be(pe),s=(0,a.default)(i,2)[1],u=(0,y.useNavigation)(),f=(0,h.useCallback)((function(){var t,n;u.navigate(T.ManageTokenModalRoutes.ViewToken,{name:e.name,symbol:e.symbol,address:null!=(t=e.address)?t:"",decimal:e.tokens[0].decimals,logoURI:null!=(n=e.logoURI)?n:"",sendAddress:e.sendAddress,riskLevel:e.riskLevel})}),[u,e]),m=(0,h.useCallback)((function(){(0,te.showOverlay)((function(n){return(0,B.jsx)(H.default,{visible:!0,onClose:n,footerButtonProps:{primaryActionTranslationId:"action__delete",primaryActionProps:{type:"destructive",onPromise:function(){var t=(0,c.default)((function*(){var t,o;if(l&&e)return w.default.serviceToken.deleteAccountToken({accountId:l,networkId:r,tokenId:`${e.networkId}--${null!=(t=e.address)?t:""}`,address:null!=(o=e.address)?o:""}).finally((function(){n(),s(Date.now())}))}));return function(){return t.apply(this,arguments)}}()}},contentProps:{iconType:"danger",title:t.formatMessage({id:"modal__delete_this_token",defaultMessage:"Delete this token?"}),content:t.formatMessage({id:"modal__delete_this_token_desc",defaultMessage:"{token} will be removed from my tokens"},{token:null==e?void 0:e.name})}})}))}),[l,t,r,s,e]);return e?(0,B.jsxs)(g.default,{onPress:f,flexDirection:"row",justifyContent:"space-between",p:"8px",borderRadius:"12px",alignItems:"center",_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},children:[(0,B.jsx)(d.default,{size:8,token:e,showInfo:!0,flex:1,showExtra:!1,description:(0,B.jsx)(X.FormatBalance,{balance:n||0,suffix:e.symbol,formatOptions:{fixed:6}})}),(0,B.jsx)(Y.default,{name:"TrashMini",type:"plain",circle:!0,onPress:m})]}):null}));function Ae(){var e=(0,v.default)(),t=be(ge),n=(0,a.default)(t,2),o=n[0],r=n[1],l=(0,h.useCallback)((function(){return r("")}),[r]);return(0,B.jsx)(s.default,{px:"8px",mb:"6",children:(0,B.jsx)($.default,{w:"full",placeholder:e.formatMessage({id:"form__search_tokens",defaultMessage:"Search Tokens"}),value:o,onClear:l,onChangeText:r})})}var Me=(0,h.memo)((function(){var e=(0,v.default)(),t=be(me),n=(0,a.default)(t,1)[0],o=be(ge),r=(0,a.default)(o,1)[0],l=(0,y.useNavigation)();return n?(0,B.jsx)(G.default,{w:"full",h:"20",children:(0,B.jsx)(K.default,{size:"lg"})}):r.length>0?(0,B.jsx)(q.default,{emoji:"\ud83d\udd0d",title:e.formatMessage({id:"content__no_results",defaultMessage:"No Result"}),subTitle:e.formatMessage({id:"content__no_results_desc",defaultMessage:"The token you searched for was not found"}),actionTitle:e.formatMessage({id:"action__add_custom_tokens",defaultMessage:"Add Custom Token"}),handleAction:function(){var e={};42===r.length&&(e.address=r),l.navigate(T.ManageTokenModalRoutes.CustomToken,e)}}):null}));var Ie=(0,h.memo)((function(e){var t=e.isOwned,n=e.onPress,o=(0,h.useState)(!1),r=(0,a.default)(o,2),l=r[0],i=r[1],u=(0,h.useCallback)((function(){return i(!0),n().finally((function(){setTimeout((function(){i(!1)}),1e3)})),Promise.resolve()}),[n]);return l?(0,B.jsx)(s.default,{p:"2",children:(0,B.jsx)(K.default,{size:"sm"})}):t?(0,B.jsx)(s.default,{p:2,children:(0,B.jsx)(V.default,{name:"CheckMini",color:"interactive-disabled"})}):(0,B.jsx)(Y.default,{name:"PlusMini",type:"plain",circle:!0,p:"4",onPromise:u})}));var Pe=(0,h.memo)((function(e){var t=e.isOwned,n=(0,U.default)(e,ke),o=(0,v.default)(),r=(0,y.useNavigation)(),l=(0,A.useActiveWalletAccount)(),i=l.walletId,u=l.accountId,f=l.networkId,p=(0,A.useAppSelector)((function(e){return e.settings.hideSmallBalance})),b=(0,A.useAppSelector)((function(e){return e.settings.hideRiskTokens})),k=be(pe),x=(0,a.default)(k,2)[1],M=n.tokenIdOnNetwork,I=n.symbol,P=n.riskLevel,S=(0,h.useCallback)((0,c.default)((function*(){var e=yield w.default.engine.getVaultSettings(f);if(null!=e&&e.activateTokenRequired)return new Promise((function(e,t){r.navigate(T.ManageTokenModalRoutes.ActivateToken,{walletId:i,accountId:u,networkId:f,tokenId:M,onSuccess:function(){e(!0)},onFailure:function(e){t(e)}})}))})),[i,u,f,M,r]),C=(0,h.useCallback)((0,c.default)((function*(){var e={title:o.formatMessage({id:"msg__str_has_been_added_but_is_hidden"},{0:I}),content:""};if(b&&P&&P>_.TokenRiskLevel.WARN&&(e.content=o.formatMessage({id:"msg__str_has_been_added_but_is_hidden_desc"},{0:I})),p){var t,r=w.default.serviceToken,l=w.default.servicePrice,i=yield r.getAccountBalanceFromRpc(f,u,[M],!1,(t={},t[M]=n,t)),s=(0,a.default)(i,1)[0],d=yield l.getSimpleTokenPrice({networkId:f,tokenId:M}),c=(0,ne.getTokenValue)({token:n,price:d,balances:s});c&&c.isLessThan(1)&&(e.content=o.formatMessage({id:"msg__token_has_been_added_but_is_hiddendesc_desc"}))}if(e.content)var m,g=(m=_e(_e({},e),{},{primaryActionTranslationId:"action__show_it",onPrimaryActionPress:function(){null==g||g(),(0,oe.showHomeBalanceSettings)({networkId:f})}}),(0,te.showOverlay)((function(e){return(0,B.jsx)(se.BottomSheetSettings,{closeOverlay:e,children:(0,B.jsx)(ce,de(de({},m),{},{onClose:e}))})})))})),[n,M,u,p,b,o,f,I,P]),D=(0,h.useCallback)((0,c.default)((function*(){var e=w.default.serviceToken;try{yield S(),yield e.addAccountToken(f,u,M)}catch(t){return j.default.common.error("add token error",t),void O.deviceUtils.showErrorToast(t,"msg__failed_to_add_token")}yield C(),m.default.show({title:o.formatMessage({id:"msg__token_added"})})})),[M,u,f,o,S,C]),E=(0,h.useCallback)((0,c.default)((function*(){u&&f&&(yield D(),(0,R.notifyIfRiskToken)(n),x(Date.now()))})),[n,u,f,D,x]),L=(0,h.useCallback)((function(){var e=t?T.ManageTokenModalRoutes.ViewToken:T.ManageTokenModalRoutes.AddToken;r.navigate(e,{name:n.name,symbol:n.symbol,address:n.tokenIdOnNetwork,decimal:n.decimals,logoURI:n.logoURI,source:n.source||"",sendAddress:n.sendAddress,riskLevel:n.riskLevel})}),[r,n,t]);return(0,B.jsxs)(g.default,{borderTopRadius:"12px",borderBottomRadius:"12px",flexDirection:"row",justifyContent:"space-between",p:2,alignItems:"center",overflow:"hidden",onPress:L,_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},children:[(0,B.jsx)(s.default,{display:"flex",alignItems:"center",flexDirection:"row",flex:1,children:(0,B.jsx)(d.default,{size:8,showInfo:!0,token:n,showExtra:!0,nameProps:{color:t?"text-disabled":"text-default"},descProps:{color:t?"text-disabled":"text-subdued"},extraProps:{color:t?"text-disabled":"text-subdued"}})}),(0,B.jsx)(Ie,{isOwned:t,onPress:E})]},M)}));var Te=(0,h.memo)((function(e){var t=e.title,n=e.mt,o=(0,v.default)(),r=be(ge);return(0,a.default)(r,1)[0]?null:(0,B.jsx)(u.default.Subheading,{px:"8px",color:"text-subdued",mb:"2",mt:n,children:o.formatMessage({id:t})})}));function Oe(){var e=be(he),t=(0,a.default)(e,1)[0],n=be(ge),o=(0,a.default)(n,1)[0],r=be(me),l=(0,a.default)(r,1)[0],i=(0,h.useCallback)((function(e){var t=e;return`${(0,x.getBalanceKey)(t)}`}),[]),u=(0,h.useCallback)((function(e){var t=e.item;return"undefined"===typeof t.isOwned?(0,B.jsx)(we,_e({},t)):(0,B.jsx)(Pe,_e({},t))}),[]);return(0,h.useMemo)((function(){return!t.find((function(e){return e.data.length>0}))}),[t])||o&&l?(0,B.jsx)(Me,{}):(0,B.jsx)(B.Fragment,{children:t.map((function(e,t){var n=e.title,o=e.data;return(0,B.jsxs)(s.default,{children:[(0,B.jsx)(Te,{title:n,mt:0===t?0:6}),o.map((function(e){return(0,B.jsx)(s.default,{children:u({item:e})},i(e))}))]},n)}))})}const Se=(0,h.memo)(ve((function(){var e=(0,v.default)(),t=(0,y.useNavigation)(),n=(0,A.useActiveWalletAccount)().network;return(0,B.jsx)(l.default,{header:e.formatMessage({id:"title__manage_tokens",defaultMessage:"Manage Tokens"}),height:"560px",hidePrimaryAction:!0,headerDescription:null==n?void 0:n.shortName,onSecondaryActionPress:function(){t.navigate(T.ManageTokenModalRoutes.CustomToken)},secondaryActionProps:{type:"basic",leftIconName:"PlusOutline"},secondaryActionTranslationId:"action__add_custom_tokens",scrollViewProps:{children:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(je,{}),(0,B.jsx)(Ae,{}),(0,B.jsx)(Z.LazyDisplayView,{delay:100,children:(0,B.jsx)(Oe,{})})]})}})})));var Ce=n(759900),De=n(225447);const Re=n.p+"static/media/NoRisks.51a2d40f32412b66ec37.png";var Be=n(918242);const Ee=(0,h.memo)((function(){var e,t,n=(0,v.default)(),o=(0,A.useNavigation)(),r=(0,y.useRoute)(),a=(0,Be.useTokenSourceList)(),i=a.loading,c=a.data,f=r.params,m=f.token,b=f.token.source,k=(0,Be.useTokenSecurityInfo)(m.networkId,null!=(e=null!=(t=m.tokenIdOnNetwork)?t:m.address)?e:""),x=k.loading,_=k.data.safe,j=(0,h.useCallback)((function(){o.navigate(T.RootRoutes.Modal,{screen:T.ModalRoutes.ManageToken,params:{screen:T.ManageTokenModalRoutes.TokenRiskDetail,params:{token:m}}})}),[o,m]),w=(0,h.useMemo)((function(){var e;return(0,B.jsxs)(s.default,{flexDirection:"column",alignItems:"center",mb:4,children:[(0,B.jsx)(V.default,{size:44,name:"BadgeCheckMini",color:"icon-success"}),(0,B.jsx)(p.default,{typography:"DisplayXLarge",mt:3,mb:"1",children:n.formatMessage({id:"title__verified_token"})}),(0,B.jsx)(p.default,{typography:"Body1",mt:2,children:n.formatMessage({id:"title__verified_token_desc"})}),0===(null==_?void 0:_.length)?null:(0,B.jsx)(g.default,{w:"full",onPress:j,children:(0,B.jsxs)(ae.default,{mt:"9",w:"full",alignItems:"center",children:[(0,B.jsx)(De.default,{size:"40px",source:Re}),(0,B.jsxs)(re.default,{flex:"1",ml:"3",children:[(0,B.jsx)(u.default.Body1Strong,{mb:"1",children:n.formatMessage({id:"form__no_risks"})}),x?(0,B.jsx)(Ce.default,{shape:"Body2"}):(0,B.jsx)(u.default.Body2,{color:"text-subdued",children:n.formatMessage({id:"form__no_risks_desc"},{0:null!=(e=null==_?void 0:_.length)?e:0})})]}),(0,B.jsx)(V.default,{name:"ChevronRightMini",color:"icon-subdued",size:20})]})}),(0,B.jsx)(u.default.Subheading,{w:"full",mb:"2",mt:"8",color:"text-subdued",children:n.formatMessage({id:"form__token_lists__uppercase"})})]})}),[n,j,_,x]),M=(0,h.useCallback)((function(e){var t=e.item,n=null==b?void 0:b.includes(t.name);return(0,B.jsxs)(s.default,{flexDirection:"row",alignItems:"center",mb:4,children:[(0,B.jsx)(d.default,{flex:1,showInfo:!0,token:{logoURI:t.logo,name:t.name},description:`${t.count} tokens`,size:8,nameProps:{maxW:56,numberOfLines:2,color:n?"text-default":"text-disabled"},descProps:{maxW:"56",numberOfLines:1,color:n?"text-subdued":"text-disabled"}}),n&&(0,B.jsx)(V.default,{size:16,name:"BadgeCheckMini",color:"icon-success"})]})}),[b]);return i||x?(0,B.jsx)(l.default,{height:"560px",hidePrimaryAction:!0,hideSecondaryAction:!0,footer:null,children:(0,B.jsx)(G.default,{flex:1,children:(0,B.jsx)(K.default,{size:"lg"})})}):(0,B.jsx)(l.default,{height:"560px",hidePrimaryAction:!0,hideSecondaryAction:!0,footer:null,flatListProps:{data:c.sort((function(e){return null!=b&&b.includes(e.name)?-1:1})),renderItem:M,keyExtractor:function(e){return e.name},showsVerticalScrollIndicator:!1,ListHeaderComponent:w}})}));var Le=n(268883),Ne=function(e){var t=e.password,n=e.accountId,o=e.networkId,r=e.tokenId,a=e.onSuccess,l=e.onFailure,i=(0,y.useNavigation)();return(0,h.useEffect)((function(){n&&o&&r&&(0,c.default)((function*(){try{(yield w.default.engine.activateToken(t,n,o,r))?null==a||a():null==l||l()}catch(e){j.default.sendTx.error(e),null==l||l(e)}i.goBack()}))()}),[]),(0,B.jsx)(G.default,{h:"full",w:"full",children:(0,B.jsx)(K.default,{size:"lg"})})};const ze=function(e){var t=e.route,n=(0,v.default)(),o=t.params||{},r=o.walletId,a=o.accountId,i=o.networkId,s=o.tokenId,u=o.onSuccess,d=o.onFailure;return(0,B.jsx)(l.default,{header:n.formatMessage({id:"action__add_custom_tokens",defaultMessage:"Add Token"}),headerDescription:n.formatMessage({id:"msg__aptos_first_activation_token"}),hideSecondaryAction:!0,hidePrimaryAction:!0,footer:null,children:(0,B.jsx)(Le.default,{walletId:r,skipSavePassword:!0,field:Le.ValidationFields.Payment,children:function(e){return(0,B.jsx)(Ne,{accountId:a,networkId:i,tokenId:s,password:e,onSuccess:u,onFailure:d})}})})};var Fe=n(505240),We=n(418687),Ue=n(785192),Ve=n(849472);var qe=n(627009);const Ge=function(){var e=(0,v.default)(),t=(0,ie.useSafeAreaInsets)(),n=(0,y.useRoute)().params.token,o=n.networkId,r=n.address,a=(0,Be.useTokenSecurityInfo)(o,r),i=a.loading,s=a.data,d=s.safe,c=s.danger,f=s.hasSecurity,m=s.warn,p=(0,h.useMemo)((function(){return!f||(!(null!=c&&c.length)||!(null!=m&&m.length))}),[c,m,f]),b=(0,h.useCallback)((function(){(0,qe.openUrl)("https://gopluslabs.io/")}),[]),k=(0,h.useMemo)((function(){var t;return f?null!=c&&c.length?(0,B.jsxs)(G.default,{mt:"6",mb:"8",children:[(0,B.jsx)(V.default,{name:"ExclamationTriangleMini",color:"icon-warning",size:44}),(0,B.jsx)(u.default.DisplayLarge,{mt:"2",children:e.formatMessage({id:"title__possible_risky_token"})})]}):(0,B.jsxs)(G.default,{mt:"6",mb:"8",children:[(0,B.jsx)(V.default,{name:"ExclamationCircleMini",color:"icon-subdued",size:44}),(0,B.jsx)(u.default.DisplayLarge,{mt:"2",children:e.formatMessage({id:"title__token_that_needs_caution"})})]}):(0,B.jsxs)(G.default,{mt:"6",mb:"8",children:[(0,B.jsx)(De.default,{size:"56px",source:Re,mb:"2"}),(0,B.jsx)(u.default.DisplayLarge,{mb:"2",children:e.formatMessage({id:"form__no_risks"})}),(0,B.jsx)(u.default.Body1,{color:"text-subdued",children:e.formatMessage({id:"form__no_risks_desc"},{0:null!=(t=null==d?void 0:d.length)?t:0})})]})}),[f,e,d,c]),x=(0,h.useMemo)((function(){return(0,B.jsxs)(re.default,{pb:`${t.bottom}px`,mt:"8",children:[(0,B.jsx)(Ue.default,{}),(0,B.jsx)(g.default,{onPress:b,children:(0,B.jsxs)(ae.default,{alignItems:"center",justifyContent:"center",mt:"4",children:[(0,B.jsx)(u.default.Body2,{color:"text-subdued",children:"Powered By"}),(0,B.jsx)(De.default,{size:"20px",source:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAUCAYAAABiS3YzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHySURBVHgB7ZM/TNNBFMe/d78WAwTTuKgTRKMmJlZqnBxMSExEYxxNTFww0dYJdWEw0Q4ODgxO9Be0qaPROAgDCWEoC1sphYWQEBggkLCU/4G29/jer6Q/CIWWsPKS3/u9d3fv8+69uwPO5UyScwcwkYgeHFLHLhZRyPTfgmOuVJ2PvEsjl+gl4gW9BcBJ4u6bpJ0KHFmcTYUQ2H2PSbcbQRWqnld+U6Uh6hKUtAC6ETDN1XeaTbTB0SPc5XUG5hn0h/bSoTWOXkWpIYVIV97zJ1i+VmMIR79Vh+bcQepnUKqfgT2VwFOKD824nWzGEATDaI89xnSyBYXiRxhzj0kuctfCUhXtZdyJvjwJ6vc0iKcEsmr0ev5O4T91h5fXjltlsEYVRw3xoYLbZfhWBln3hgc0Mkr4KzQ3FsqJzDrux7ZqQbVvyor32wg0AdvW3mWprWgKPoIUn3hfQDox/rO1fqjRs97/QsNzRD7kWWqclbexl6nKp/APTjGNyb5rJ0H9g5r6cRmmNMM2bPIaPeDlnveumFYPeUDl5KLaqbu5JsXDfF0baiWb+ETIV1rzEN3DF/KXLZAD8zbJHKPSCMc66oOWA+MM/LLv2QNa9CfFvrAQlO5C+O2v+qFWbM9K6jPhN+ldrYwbYRLdh0j0O87lONkDPy+j0BarmOUAAAAASUVORK5CYII=",ml:"2",mr:"1"}),(0,B.jsx)(u.default.Body2,{children:"Go Plus"})]})})]})}),[t.bottom,b]),_=(0,h.useCallback)((function(t){var n,o,r,a,l,i,s,d,c,g,p,h,y,v,b,k=t.item,x=m.includes(k),_=null==(n=Ve.tokenSecurityRiskItems[k])?void 0:n[f?"danger":"safe"],j=null==(o=Ve.tokenSecurityRiskItems[k])?void 0:o.warn;if(x&&j&&(_=j),!_)return null;var w=(0,B.jsx)(V.default,{size:20,name:"BadgeCheckMini",color:"icon-success"});return f&&(w=x?(0,B.jsx)(V.default,{size:20,name:"ExclamationCircleMini",color:"icon-subdued"}):(0,B.jsx)(V.default,{size:20,name:"ExclamationTriangleMini",color:"icon-warning"})),(0,B.jsxs)(ae.default,{mt:f?4:0,mb:f?0:4,alignItems:"flex-start",w:"full",children:[w,(0,B.jsxs)(re.default,{ml:"3",flex:"1",children:[(0,B.jsx)(u.default.Body1Strong,{children:e.formatMessage({id:"string"===typeof(null==(r=_)?void 0:r[0])?null==(a=_)?void 0:a[0]:null==(l=_)||null==(i=l[0])?void 0:i[0]},null!=(s=null==(d=_)||null==(c=d[0])?void 0:c[1])?s:{})}),(0,B.jsx)(u.default.Body2,{color:"text-subdued",children:e.formatMessage({id:"string"===typeof(null==(g=_)?void 0:g[1])?null==(p=_)?void 0:p[1]:null==(h=_)?void 0:h[1][0]},null!=(y=null==(v=_)||null==(b=v[1])?void 0:b[1])?y:{})})]})]})}),[e,f,m]),j=(0,h.useMemo)((function(){var t,n;return[{headerProps:{title:e.formatMessage({id:"form__str_risky_item_uppercase"},{0:null!=(t=null==c?void 0:c.length)?t:0})},data:c},{headerProps:{title:e.formatMessage({id:"form__str_attention_item_uppercase"},{0:null!=(n=null==m?void 0:m.length)?n:0})},data:m}]}),[c,e,m]),w=(0,h.useMemo)((function(){return p?f?null!=c&&c.length?c:m:d:j}),[p,j,d,m,c,f]);return i?(0,B.jsx)(l.default,{height:"560px",hidePrimaryAction:!0,hideSecondaryAction:!0,footer:null,children:(0,B.jsx)(G.default,{flex:1,children:(0,B.jsx)(K.default,{size:"lg"})})}):(0,B.jsx)(l.default,{height:"560px",hidePrimaryAction:!0,hideSecondaryAction:!0,footer:null,children:p?(0,B.jsx)(Fe.default,{ListHeaderComponent:function(){return k},data:w,renderItem:_,keyExtractor:function(e,t){return`${e}_${t}`},ListFooterComponent:function(){return x},paddingX:"2"}):(0,B.jsx)(We.default,{ListHeaderComponent:function(){return k},stickySectionHeadersEnabled:!1,sections:w,renderItem:_,keyExtractor:function(e,t){return`${e}_${t}`},ListFooterComponent:function(){return x},paddingX:"2"})})};n(231052);var Ke=n(206391),$e=n.n(Ke),Ye=n(13334),He=n(445425),Je=(n(213208),n(747225)),Qe=n(920453),Xe=n(857280),Ze=n(586874),et=n(821919),tt=n(485573),nt=n(662856);function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var at=n(679978);function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var it=(0,n(324665).default)(),st=[{name:T.ManageTokenModalRoutes.Listing,component:Se},{name:T.ManageTokenModalRoutes.AddToken,component:F},{name:T.ManageTokenModalRoutes.ActivateToken,component:ze},{name:T.ManageTokenModalRoutes.ViewToken,component:z},{name:T.ManageTokenModalRoutes.CustomToken,component:W.default},{name:T.ManageTokenModalRoutes.VerifiedToken,component:Ee},{name:T.ManageTokenModalRoutes.PriceAlertList,component:function(){var e=(0,v.default)(),t=(0,Ze.default)().themeVariant,n=(0,h.useState)(!1),o=(0,a.default)(n,2),r=o[0],i=o[1],u=(0,h.useState)([]),d=(0,a.default)(u,2),f=d[0],m=d[1],g=(0,y.useRoute)(),p=(0,Je.useSettings)().pushNotification,b=g.params,k=b.token,x=b.price,_=(0,y.useNavigation)(),A=w.default.serviceNotification,M=w.default.dispatch,I=(0,h.useMemo)((function(){return f.length>=50}),[f.length]),P=(0,h.useCallback)((0,c.default)((function*(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{if(!e)return;i(!0);var t=yield A.queryPriceAlertList(k.coingeckoId);m(t)}catch(n){j.default.common.error("queryPriceAlertList failed",n instanceof Error?null==n?void 0:n.message:n)}setTimeout((function(){i(!1)}),100)})),[k,A]),O=(0,h.useCallback)((function(){null!=p&&p.pushEnable&&p.priceAlertEnable||M((0,et.setPushNotificationConfig)({pushEnable:!0,priceAlertEnable:!0})),_.navigate(T.ManageTokenModalRoutes.PriceAlertAdd,{price:x,token:k,alerts:f})}),[p,M,_,k,f,x]);(0,y.useFocusEffect)((0,h.useCallback)((function(){var e=!0;return P(e),function(){e=!1}}),[P]));var S=(0,h.useMemo)((function(){return(0,B.jsx)(s.default,{w:"full",mt:"2",mb:6,borderRadius:"12",bg:"surface-default",borderWidth:"light"===t?1:void 0,borderColor:"border-subdued",children:f.map((function(e,t){return(0,B.jsx)(nt.default,rt({alert:e,divider:t!==f.length-1,onRemove:function(){return P(!0)}},k),`${e.price}${e.currency}`)}))})}),[f,t,k,P]);return(0,h.useMemo)((function(){var t={header:e.formatMessage({id:"form__price_alert"}),height:"560px",headerDescription:k.symbol,hideSecondaryAction:!0,onPrimaryActionPress:O,primaryActionProps:{type:I?"basic":"primary",leftIconName:"PlusOutline",disabled:I},primaryActionTranslationId:"action__add_alert"};return!f.length||r?(0,B.jsx)(l.default,rt(rt({},t),{},{children:(0,B.jsx)(tt.ListEmptyComponent,{isLoading:r,symbol:k.symbol})})):(0,B.jsx)(l.default,rt(rt({},t),{},{scrollViewProps:{children:S}}))}),[S,e,f,I,r,O,k.symbol])}},{name:T.ManageTokenModalRoutes.PriceAlertAdd,component:function(){var e,t=(0,v.default)(),n=(0,h.useState)(!1),o=(0,a.default)(n,2),i=o[0],d=o[1],f=(0,y.useRoute)().params,p=f.token,b=f.alerts,k=f.price,x=((0,Ye.default)().height,(0,r.default)()),_=(0,Je.useSettings)().pushNotification,A=(0,y.useNavigation)(),M=(0,Qe.useCurrentNetworkTokenInfoByCoingeckoId)(null!=(e=p.coingeckoId)?e:""),I=(0,Je.useSettings)().selectedFiatMoneySymbol,P=w.default.serviceNotification,T=(0,h.useMemo)((function(){return(0,ne.getSuggestedDecimals)(+k)}),[k]),O=(0,h.useCallback)((function(e,n){return t.formatNumber(+(e||0),{currencyDisplay:"narrowSymbol",style:(null==n?void 0:n.style)||"currency",currency:I,minimumFractionDigits:2,maximumFractionDigits:T,useGrouping:(null==n?void 0:n.useGrouping)||!1})}),[t,I,T]),S=(0,h.useState)(""),C=(0,a.default)(S,2),D=C[0],R=C[1],E=i||!D,L=(0,h.useMemo)((function(){return O(k,{style:"decimal",useGrouping:!1})}),[O,k]),N=(0,h.useMemo)((function(){return(0,B.jsx)(g.default,{onPress:function(){R(L)},w:"100%",flexDirection:"row",children:(0,B.jsx)(u.default.Body1Strong,{textAlign:"center",flex:"1",children:t.formatMessage({id:"content__current_price_str"},{0:O(k,{style:"currency",useGrouping:!0})})})})}),[O,t,k,L]),z=(0,h.useCallback)((0,c.default)((function*(){var e=O(new($e())(D).toFixed(T),{style:"decimal",useGrouping:!1}),n=I;if(b.find((function(t){return t.price===e&&t.currency===n})))return null!=A.canGoBack&&A.canGoBack()&&A.goBack(),void m.default.show({title:t.formatMessage({id:"msg__alert_already_exists"})});d(!0);try{var o,r,a;yield P.addPriceAlertConfig({symbol:null!=(o=p.symbol)?o:null==M?void 0:M.symbol,logoURI:null!=(r=p.logoURI)?r:null==M?void 0:M.logoURI,operator:new($e())(D).isGreaterThanOrEqualTo(k)?He.PriceAlertOperator.greater:He.PriceAlertOperator.less,price:e,currency:I,coingeckoId:null!=(a=p.coingeckoId)?a:""})}catch(l){j.default.common.error("changePriceAlertConfig",l instanceof Error?null==l?void 0:l.message:l)}setTimeout((function(){d(!1),null!=A.canGoBack&&A.canGoBack()&&A.goBack()}),100)})),[t,b,T,A,I,D,p,M,k,P,O]);return(0,h.useEffect)((function(){null!=_&&_.pushEnable||!A.canGoBack()||A.goBack()}),[null==_?void 0:_.pushEnable,A]),(0,B.jsx)(l.default,{header:t.formatMessage({id:"form__price_alert"}),height:"560px",headerDescription:p.symbol,hideSecondaryAction:!0,onPrimaryActionPress:z,primaryActionProps:{type:E?"basic":"primary",leftIconName:"PlusOutline",isLoading:i,disabled:E},primaryActionTranslationId:"action__add_alert",children:(0,B.jsxs)(s.default,{flex:1,flexDirection:"column",style:{userSelect:"none"},children:[(0,B.jsx)(s.default,{py:x?4:void 0,my:6,flex:1,justifyContent:"center",children:(0,B.jsx)(Xe.PreSendAmountPreview,{title:t.formatMessage({id:"content__when_price_reaches"}),desc:N,text:D,placeholder:L,onChangeText:function(e){R(e)}})}),(0,B.jsx)(s.default,{mt:"auto",children:!1})]})})}},{name:T.ManageTokenModalRoutes.TokenRiskDetail,component:Ge}];const ut=function(){var e=(0,r.default)();return(0,B.jsx)(it.Navigator,{screenOptions:function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({headerShown:!1},(0,at.buildModalStackNavigatorOptions)({isVerticalLayout:e,navInfo:t}))},children:st.map((function(e){return(0,B.jsx)(it.Screen,{name:e.name,component:e.component},e.name)}))})}},386499:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AddCustomToken:()=>b,default:()=>k});var o=n(877531),r=n(783723),a=n(566147),l=n(669083),i=n(634795),s=n(921311),u=n(539144),d=n(196234),c=n(202784),f=n(472719),m=n(783112),g=n(945821),p=n(859071),h=n(481047),y=n(423114),v=n(552322),b=function(e){var t,n,b=e.route,k=null==(t=b.params)?void 0:t.address,x=null==(n=b.params)?void 0:n.networkId,_=(0,m.default)(),j=(0,f.useNavigation)(),w=(0,c.useState)(!1),A=(0,d.default)(w,2),M=A[0],I=A[1],P=(0,c.useState)(!1),T=(0,d.default)(P,2),O=T[0],S=T[1],C=(0,c.useState)(!1),D=(0,d.default)(C,2),R=D[0],B=D[1],E=(0,p.useActiveWalletAccount)(),L=E.walletId,N=E.account,z=E.network,F=(0,p.useNetworkSimple)(null!=x?x:null,z),W=(0,u.default)(),U=(0,p.useAccountTokensOnChain)(null==F?void 0:F.id,null==N?void 0:N.id),V=_.formatMessage({id:"form__searching_token"}),q=(0,s.default)({defaultValues:{address:"",symbol:"",decimal:""},mode:"onChange"}),G=q.control,K=q.handleSubmit,$=q.setValue,Y=q.formState.isValid,H=q.trigger,J=q.setError,Q=q.watch;(0,c.useEffect)((function(){k&&$("address",k)}),[k,$]);var X=Q("address"),Z=(0,p.useDebounce)(X,1e3),ee=(0,c.useCallback)(function(){var e=(0,i.default)((function*(e,t,n){var o=yield g.default.serviceToken.addAccountToken(t,e,n);o&&((0,y.notifyIfRiskToken)(o),l.default.show({title:_.formatMessage({id:"msg__token_added",defaultMessage:"Token Added"})}),yield g.default.serviceToken.fetchAccountTokens({accountId:e,networkId:t}),null!=j&&null!=j.canGoBack&&j.canGoBack()&&j.goBack())}));return function(t,n,o){return e.apply(this,arguments)}}(),[_,j]),te=(0,c.useCallback)(function(){var e=(0,i.default)((function*(e){if(F&&N){I(!0);var t=N.id,n=F.id,o=e.address,r=yield g.default.engine.getVaultSettings(F.id);null!=r&&r.activateTokenRequired?j.navigate(h.RootRoutes.Modal,{screen:h.ModalRoutes.ManageToken,params:{screen:h.ManageTokenModalRoutes.ActivateToken,params:{walletId:L,accountId:t,networkId:n,tokenId:o,onSuccess:function(){ee(t,n,o).finally((function(){I(!1)}))}}}}):ee(t,n,o).finally((function(){I(!1)}))}}));return function(t){return e.apply(this,arguments)}}(),[F,N,j,L,ee]),ne=(0,c.useCallback)((function(e){e?($("decimal",String(e.decimals)),$("symbol",e.symbol),B(!0),H("address")):(J("address",{message:_.formatMessage({id:"msg__wrong_address_format"})}),B(!1),$("decimal",""),$("symbol",""))}),[$,H,J,_]);return(0,c.useEffect)((function(){function e(){return(e=(0,i.default)((function*(){if(F){var e=yield g.default.validator.normalizeTokenAddress(null==F?void 0:F.id,Z);if(!U.some((function(t){return t.tokenIdOnNetwork===e}))&&N&&e){var t;S(!0);try{var n,o;if(null!=(n=t=yield g.default.engine.preAddToken(N.id,F.id,e))&&n[1])ne(null==(o=t)?void 0:o[1]);else ne(void 0)}catch(r){console.error(r),ne(void 0)}finally{S(!1)}}}}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[k,N,F,ne,Z]),(0,v.jsx)(o.default,{header:_.formatMessage({id:"action__add_custom_tokens",defaultMessage:"Add Custom Token"}),hideSecondaryAction:!0,primaryActionTranslationId:"action__add",primaryActionProps:{type:"primary",isDisabled:!Y&&!O,isLoading:M},onPrimaryActionPress:function(){return K(te)()},children:(0,v.jsx)(r.default,{children:(0,v.jsxs)(a.default,{children:[(0,v.jsx)(a.default.Item,{name:"address",label:_.formatMessage({id:"transaction__contract_address",defaultMessage:"Contract Address"}),control:G,defaultValue:"",labelAddon:["paste"],helpText:O?V:void 0,rules:{required:_.formatMessage({id:"form__field_is_required"}),validate:function(){var e=(0,i.default)((function*(e){if(F){var t=yield g.default.validator.normalizeTokenAddress(null==F?void 0:F.id,e);return U.some((function(e){return e.tokenIdOnNetwork===t}))?_.formatMessage({id:"msg__token_already_existed"}):void 0}}));return function(t){return e.apply(this,arguments)}}()},children:(0,v.jsx)(a.default.Textarea,{trimValue:!0,placeholder:_.formatMessage({id:"form__enter_or_paste_contract_address",defaultMessage:"Enter or paste contract address"})})}),(0,v.jsx)(a.default.Item,{name:"symbol",label:_.formatMessage({id:"form__token_symbol",defaultMessage:"Token Symbol"}),rules:{required:_.formatMessage({id:"form__field_is_required"})},defaultValue:"",control:G,children:(0,v.jsx)(a.default.Input,{size:W?"xl":"default",isDisabled:R})}),(0,v.jsx)(a.default.Item,{name:"decimal",label:_.formatMessage({id:"form__decimal",defaultMessage:"Decimal"}),control:G,defaultValue:"",rules:{required:_.formatMessage({id:"form__field_is_required"})},children:(0,v.jsx)(a.default.Input,{size:W?"xl":"default",isDisabled:R})})]})})})};const k=b},925743:(e,t,n)=>{"use strict";n.r(t),n.d(t,{useCurrencyData:()=>d,useCurrencyListData:()=>c,useCurrencyUnit:()=>f});var o=n(968079),r=n(230898),a=n.n(r),l=n(202784),i=n(859071),s=["usd","eur","gbp","jpy","cny","hkd"],u=["btc","eth","sats","bits"],d=function(e){var t=(0,i.useAppSelector)((function(e){return e.fiatMoney.map}));return(0,l.useMemo)((function(){var n;return null!=(n=t[e])?n:{}}),[t,e])},c=function(){var e=(0,i.useAppSelector)((function(e){return e.fiatMoney.symbolList})),t=(0,i.useAppSelector)((function(e){return e.fiatMoney.map})),n=a()(s,e),r=a()(u,e);return{popularList:n,ratesSectionList:[{title:"crypto",data:(0,o.default)(r)},{title:"fiat",data:e.filter((function(e){var n,o;return null==(n=t[e])||null==(o=n.type)?void 0:o.includes("fiat")}))}]}},f=function(e){var t=d(e).unit;return(0,l.useMemo)((function(){return null!=t?t:"$"}),[t])}},485573:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ListEmptyComponent:()=>s});var o=n(510374),r=n(795116),a=n(719392),l=n(783112),i=n(552322),s=function(e){var t=e.isLoading,n=e.symbol,s=e.desc,u=(0,l.default)();if(t)return(0,i.jsx)(r.default,{w:"full",h:"20",children:(0,i.jsx)(a.default,{size:"lg"})});var d=n?u.formatMessage({id:"title__no_alert_desc"},{0:n}):"";return(0,i.jsx)(r.default,{w:"full",h:"full",children:(0,i.jsx)(o.default,{emoji:"\ud83d\udd14",title:u.formatMessage({id:"title__no_alert"}),subTitle:s||d})})}},662856:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FormatCurrencyNumber:()=>x,default:()=>_});var o=n(18861),r=n(433996),a=n(719392),l=n(866904),i=n(737790),s=n(413888),u=n.n(s),d=n(634795),c=n(196234),f=n(459740),m=n(202784),g=n(815749),p=n(292147),h=n(945821),y=n(516535),v=n(925743),b=n(552322),k=["divider","alert"];function x(e){var t=e.value,n=e.onlyNumber,o=e.unit;return"number"!==typeof t?null:"sats"===o.toLowerCase()?(0,b.jsxs)(b.Fragment,{children:[t<.01?`${(0,y.formatDecimalZero)(t)}`:(0,b.jsx)(g.FormattedNumber,{value:null!=t?t:0,style:"decimal",minimumFractionDigits:2,maximumFractionDigits:10}),` ${n?"":o}`]}):(0,b.jsxs)(b.Fragment,{children:[`${n?"":o}`,t<.01?`${(0,y.formatDecimalZero)(t)}`:(0,b.jsx)(g.FormattedNumber,{value:null!=t?t:0,style:"decimal",minimumFractionDigits:2,maximumFractionDigits:10})]})}const _=function(e){var t=e.divider,n=e.alert,s=(0,f.default)(e,k),g=n.price,y=n.currency,_=(0,v.useCurrencyUnit)(y),j=(0,m.useState)(!1),w=(0,c.default)(j,2),A=w[0],M=w[1],I=(0,m.useCallback)((0,d.default)((function*(){M(!0);try{yield h.default.serviceNotification.removePriceAlertConfig(u()(n,"price","currency","coingeckoId"))}catch(e){p.default.common.error("remove PriceAlert",e instanceof Error?null==e?void 0:e.message:e)}setTimeout((function(){M(!1),null==s||s.onRemove(n.price)}),200)})),[s,n]);return(0,b.jsx)(o.default,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",py:4,px:{base:4,md:6},borderBottomWidth:t?"1 ":void 0,borderBottomColor:"divider",borderBottomRadius:t?void 0:"12px",children:(0,b.jsxs)(o.default,{flex:"1",flexDirection:"row",alignItems:"center",children:[(0,b.jsx)(i.default,{size:8,token:n,showNetworkIcon:!0}),(0,b.jsxs)(l.default,{typography:"Body1Strong",numberOfLines:1,ml:3,flex:"1",children:[`1 ${n.symbol} = `,(0,b.jsx)(x,{value:+(g||0),unit:_})]}),(0,b.jsx)(o.default,{w:"8",h:"8",alignItems:"center",justifyContent:"center",children:A?(0,b.jsx)(a.default,{size:"sm"}):(0,b.jsx)(r.default,{name:"TrashMini",type:"plain",circle:!0,onPress:I})})]})})}},988390:(e,t,n)=>{var o=n(645386),r=n(238333),a=n(834893),l=n(150343),i=n(947826),s=n(759950),u=Math.min;e.exports=function(e,t,n){for(var d=n?a:r,c=e[0].length,f=e.length,m=f,g=Array(f),p=1/0,h=[];m--;){var y=e[m];m&&t&&(y=l(y,i(t))),p=u(y.length,p),g[m]=!n&&(t||c>=120&&y.length>=120)?new o(m&&y):void 0}y=e[0];var v=-1,b=g[0];e:for(;++v<c&&h.length<p;){var k=y[v],x=t?t(k):k;if(k=n||0!==k?k:0,!(b?s(b,x):d(h,x,n))){for(m=f;--m;){var _=g[m];if(!(_?s(_,x):d(e[m],x,n)))continue e}b&&b.push(x),h.push(k)}}return h}},105642:(e,t,n)=>{var o=n(93746);e.exports=function(e){return o(e)?e:[]}},230898:(e,t,n)=>{var o=n(150343),r=n(988390),a=n(636060),l=n(105642),i=a((function(e){var t=o(e,l);return t.length&&t[0]===e[0]?r(t):[]}));e.exports=i}}]);