"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[4473],{786141:(e,t,r)=>{r.r(t),r.d(t,{VaultBase:()=>N,VaultBaseChainOnly:()=>k});var n=r(72579),o=r.n(n),i=r(256666),a=r(301842),u=r.n(a),c=r(634795),s=r(887371),d=r(545754),l=r(411987),f=r(695058),p=r(206391),h=r.n(p),y=r(636393),v=r(613549),g=r(292147),w=r(213208),m=r(992431),T=r(940915),x=r(278489),I=r(969618),A=r(398514),E=r(114540),b=r(348834).Buffer;function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}if(w.default.isExtensionUi)throw new Error("engine/VaultBase is not allowed imported from ui");var k=function(e){(0,d.default)(r,e);var t=C(r);function r(){return t.apply(this,arguments)}var n=r.prototype;return n.initProvider=function(){var e=(0,c.default)((function*(){var e=(yield this.getNetwork()).impl;u()(I.IMPL_MAPPINGS[e])||(this.engineProvider=yield this.engine.providerManager.getProvider(this.networkId))}));return function(){return e.apply(this,arguments)}}(),n.proxyJsonRPCCall=function(){var e=(0,c.default)((function*(e){throw new T.NotImplemented}));return function(t){return e.apply(this,arguments)}}(),n.createClientFromURL=function(e){throw new T.NotImplemented},n.getEthersProvider=function(){var e=(0,c.default)((function*(){throw new T.NotImplemented}));return function(){return e.apply(this,arguments)}}(),n.getClientEndpointStatus=function(){var e=(0,c.default)((function*(e){var t=this.createClientFromURL(e),r=performance.now(),n=(yield t.getInfo()).bestBlockNumber;return{responseTime:Math.floor(performance.now()-r),latestBlock:n}}));return function(t){return e.apply(this,arguments)}}(),n.checkRpcBatchSupport=function(){var e=(0,c.default)((function*(e){throw new T.NotImplemented}));return function(t){return e.apply(this,arguments)}}(),n.getDisplayAddress=function(){var e=(0,c.default)((function*(e){return Promise.resolve(e)}));return function(t){return e.apply(this,arguments)}}(),n.validateAddress=function(){var e=(0,c.default)((function*(e){var t=yield this.engineProvider.verifyAddress(e),r=t.normalizedAddress;if(!t.isValid||!r)throw new T.InvalidAddress;return Promise.resolve(r)}));return function(t){return e.apply(this,arguments)}}(),n.validateImportedCredential=function(e){return Promise.resolve(this.settings.importedAccountEnabled&&/^(0x)?[0-9a-zA-Z]{64}$/.test(e))},n.validateWatchingCredential=function(){var e=(0,c.default)((function*(e){return Promise.resolve(this.settings.watchingAccountEnabled&&(yield this.engineProvider.verifyAddress(e)).isValid)}));return function(t){return e.apply(this,arguments)}}(),n.validateTokenAddress=function(){var e=(0,c.default)((function*(e){var t=yield this.engineProvider.verifyTokenAddress(e),r=t.normalizedAddress;if(!t.isValid||"undefined"===typeof r)throw new T.InvalidTokenAddress;return Promise.resolve(r)}));return function(t){return e.apply(this,arguments)}}(),n.validateCanCreateNextAccount=function(){var e=(0,c.default)((function*(e,t){return Promise.resolve(!0)}));return function(t,r){return e.apply(this,arguments)}}(),n.checkAccountExistence=function(){var e=(0,c.default)((function*(e,t){return Promise.resolve(!0)}));return function(t,r){return e.apply(this,arguments)}}(),n.getBalances=function(){var e=(0,c.default)((function*(e,t,r){return(yield this.engine.providerManager.getClient(this.networkId)).getBalances(e.map((function(e){var t=e.address,r=e.tokenAddress;return{address:t,coin:P({},"string"===typeof r?{tokenAddress:r}:{})}})))}));return function(t,r,n){return e.apply(this,arguments)}}(),n.getFrozenBalance=function(){var e=(0,c.default)((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.password,e.useRecycleBalance,e.ignoreInscriptions,e.useCustomAddressesBalance;return 0}));return function(){return e.apply(this,arguments)}}(),n.fetchBalanceDetails=function(){var e=(0,c.default)((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.password,e.useRecycleBalance,e.ignoreInscriptions,e.useCustomAddressesBalance;return Promise.resolve(void 0)}));return function(){return e.apply(this,arguments)}}(),n.getTransactionStatuses=function(e){return this.engine.providerManager.getTransactionStatuses(this.networkId,e)},n.getTransactionFeeInNative=function(e){return Promise.resolve("")},n.isContractAddress=function(){var e=(0,c.default)((function*(e){return!1}));return function(t){return e.apply(this,arguments)}}(),n.getAccountNameInfoMap=function(){var e=(0,c.default)((function*(){var e=yield this.getNetwork();return(0,x.getAccountNameInfoByImpl)(e.impl)}));return function(){return e.apply(this,arguments)}}(),n.canAutoCreateNextAccount=function(){var e=(0,c.default)((function*(e){return Promise.resolve(!1)}));return function(t){return e.apply(this,arguments)}}(),n.filterAccounts=function(){var e=(0,c.default)((function*(e){var t=e.accounts;e.networkId;return Promise.resolve(t)}));return function(t){return e.apply(this,arguments)}}(),n.shouldChangeAccountWhenNetworkChanged=function(){var e=(0,c.default)((function*(e){e.previousNetwork,e.newNetwork,e.activeAccountId;return Promise.resolve({shouldReloadAccountList:!1,shouldChangeActiveAccount:!1})}));return function(t){return e.apply(this,arguments)}}(),n.getAccountNameInfosByImportedOrWatchingCredential=function(){var e=(0,c.default)((function*(e){return Promise.resolve([])}));return function(t){return e.apply(this,arguments)}}(),n.checkIsUnlimitedAllowance=function(){var e=(0,c.default)((function*(e){throw new T.NotImplemented}));return function(t){return e.apply(this,arguments)}}(),n.checkIsApprovedForAll=function(){var e=(0,c.default)((function*(e){throw new T.NotImplemented}));return function(t){return e.apply(this,arguments)}}(),n.checkIsBatchTransfer=function(){var e=(0,c.default)((function*(e){throw new T.NotImplemented}));return function(t){return e.apply(this,arguments)}}(),n.getFeePricePerUnit=function(){var e=(0,c.default)((function*(){throw new T.NotImplemented}));return function(){return e.apply(this,arguments)}}(),n.fetchRpcChainId=function(){var e=(0,c.default)((function*(e){return null}));return function(t){return e.apply(this,arguments)}}(),n.getTxWaitingSeconds=function(){var e=(0,c.default)((function*(){return[]}));return function(){return e.apply(this,arguments)}}(),n.getUserNFTAssets=function(){var e=(0,c.default)((function*(e){e.serviceData;return Promise.resolve(void 0)}));return function(t){return e.apply(this,arguments)}}(),n.getTransactionDetail=function(){var e=(0,c.default)((function*(e){return Promise.resolve(void 0)}));return function(t){return e.apply(this,arguments)}}(),(0,s.default)(r)}(E.VaultContext),N=function(e){(0,d.default)(r,e);var t=C(r);function r(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).uuid=y.default.v4().toString(),e}var n=r.prototype;return n.init=function(){var e=(0,c.default)((function*(e){yield this.initProvider(),yield this.initKeyring(e)}));return function(t){return e.apply(this,arguments)}}(),n.initKeyring=function(){var e=(0,c.default)((function*(e){this.keyring=yield e.keyringCreator(this)}));return function(t){return e.apply(this,arguments)}}(),n.signTransaction=function(){var e=(0,c.default)((function*(e,t){return this.keyring.signTransaction(e,t)}));return function(t,r){return e.apply(this,arguments)}}(),n.signAndSendTransaction=function(){var e=(0,c.default)((function*(e,t,r){var n=yield this.signTransaction(e,t);return r?P(P({},n),{},{encodedTx:e.encodedTx}):this.broadcastTransaction(P(P({},n),{},{encodedTx:e.encodedTx}))}));return function(t,r,n){return e.apply(this,arguments)}}(),n.broadcastTransaction=function(){var e=(0,c.default)((function*(e,t){g.default.engine.info("broadcastTransaction START:",{rawTx:e.rawTx});var r=yield this.engine.providerManager.broadcastTransaction(this.networkId,e.rawTx,t);return g.default.engine.info("broadcastTransaction END:",{txid:r,rawTx:e.rawTx}),P(P({},e),{},{txid:r,encodedTx:e.encodedTx})}));return function(t,r){return e.apply(this,arguments)}}(),n.buildEncodedTxFromBatchTransfer=function(){var e=(0,c.default)((function*(e){throw new T.NotImplemented}));return function(t){return e.apply(this,arguments)}}(),n.buildEncodedTxsFromSetApproveForAll=function(){var e=(0,c.default)((function*(e,t){throw new T.NotImplemented}));return function(t,r){return e.apply(this,arguments)}}(),n.activateAccount=function(){var e=(0,c.default)((function*(){throw new T.NotImplemented}));return function(){return e.apply(this,arguments)}}(),n.activateToken=function(){var e=(0,c.default)((function*(e,t){throw new T.NotImplemented}));return function(t,r){return e.apply(this,arguments)}}(),n.getTokenAllowance=function(){var e=(0,c.default)((function*(e,t){throw new T.NotImplemented}));return function(t,r){return e.apply(this,arguments)}}(),n.batchTokensAllowance=function(){var e=(0,c.default)((function*(e,t){throw new T.NotImplemented}));return function(t,r){return e.apply(this,arguments)}}(),n.getOutputAccount=function(){var e=(0,c.default)((function*(){var e=yield this.getDbAccount({noCache:!0});return{id:e.id,name:e.name,type:e.type,path:e.path,coinType:e.coinType,tokens:[],address:e.address,template:e.template,pubKey:o()(e,"pub","")}}));return function(){return e.apply(this,arguments)}}(),n.getAccountBalance=function(){var e=(0,c.default)((function*(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=(yield this.getDbAccount()).address;return this.getBalances((t?[{address:o}]:[]).concat(e.map((function(e){return{address:o,tokenAddress:e}}))),r,n)}));return function(t){return e.apply(this,arguments)}}(),n.updatePendingTxs=function(){var e=(0,c.default)((function*(e){throw new T.NotImplemented}));return function(t){return e.apply(this,arguments)}}(),n.getAccountNonce=function(){var e=(0,c.default)((function*(){return Promise.resolve(null)}));return function(){return e.apply(this,arguments)}}(),n.fixActionDirection=function(){var e=(0,c.default)((function*(e){var t,r,n,o,i=e.action,a=e.accountAddress;(i.direction=A.IDecodedTxDirection.OTHER,i.type===A.IDecodedTxActionType.NATIVE_TRANSFER)&&(i.direction=yield this.buildTxActionDirection({from:(null==(t=i.nativeTransfer)?void 0:t.from)||"",to:(null==(r=i.nativeTransfer)?void 0:r.to)||"",address:a}));i.type===A.IDecodedTxActionType.TOKEN_TRANSFER&&(i.direction=yield this.buildTxActionDirection({from:(null==(n=i.tokenTransfer)?void 0:n.from)||"",to:(null==(o=i.tokenTransfer)?void 0:o.to)||"",address:a}));return i}));return function(t){return e.apply(this,arguments)}}(),n.fixDecodedTx=function(){var e=(0,c.default)((function*(e){var t,r;e.createdAt=null!=(t=e.createdAt)?t:Date.now();var n=null==(r=e.encodedTx)?void 0:r.nonce;e.nonce=u()(n)?e.nonce:new(h())(n).toNumber();for(var o=e.owner,i=0;i<e.actions.length;i+=1){var a=e.actions[i];yield this.fixActionDirection({action:a,accountAddress:o})}if(e.outputActions)for(var c=0;c<e.outputActions.length;c+=1){var s=e.outputActions[c];yield this.fixActionDirection({action:s,accountAddress:o})}return Promise.resolve(e)}));return function(t){return e.apply(this,arguments)}}(),n.fixHistoryTx=function(){var e=(0,c.default)((function*(e){return e.decodedTx=yield this.fixDecodedTx(e.decodedTx),Promise.resolve(e)}));return function(t){return e.apply(this,arguments)}}(),n.buildHistoryTx=function(){var e=(0,c.default)((function*(e){var t=e.historyTxToMerge,r=(e.encodedTx,e.decodedTx),n=e.signedTx,o=e.isSigner,i=e.isLocalCreated,a=(null==n?void 0:n.txid)||(null==r?void 0:r.txid)||"";if(!a)throw new Error("buildHistoryTx txid not found");var u=yield this.getAccountAddress();r.txid=a||r.txid,r.owner=u,o&&(r.signer=u),null!=n&&n.txKey&&(r.extraInfo?r.extraInfo.txKey=n.txKey:r.extraInfo={txKey:n.txKey});var c=P(P({id:`${this.networkId}_${a}_${this.accountId}`,isLocalCreated:Boolean(i)},t),{},{decodedTx:r});return c=yield this.fixHistoryTx(c),Promise.resolve(c)}));return function(t){return e.apply(this,arguments)}}(),n.checkIsScamHistoryTx=function(){var e=(0,c.default)((function*(e){return!1}));return function(t){return e.apply(this,arguments)}}(),n.fetchOnChainHistory=function(){var e=(0,c.default)((function*(e){throw new T.NotImplemented}));return function(t){return e.apply(this,arguments)}}(),n.fixAddressCase=function(e){return Promise.resolve(e)},n.buildTxActionDirection=function(){var e=(0,c.default)((function*(e){var t=e.from,r=e.to,n=e.address;return t=yield this.fixAddressCase(t||""),r=yield this.fixAddressCase(r),n=yield this.fixAddressCase(n),t===r&&t===n?A.IDecodedTxDirection.SELF:t&&t===n?A.IDecodedTxDirection.OUT:r&&r===n?A.IDecodedTxDirection.IN:A.IDecodedTxDirection.OTHER}));return function(t){return e.apply(this,arguments)}}(),n.getNextNonce=function(){var e=(0,c.default)((function*(e,t){var r,n=null==(r=(yield this.engine.providerManager.getAddresses(e,[t.address]))[0])?void 0:r.nonce;if(u()(n))throw new T.OneKeyError("Get on-chain nonce failed.");yield this.engine.getHistory(e,t.id,void 0,!1);var o=yield m.default.history.getMaxPendingNonce({accountId:this.accountId,networkId:e}),i=yield m.default.history.getPendingNonceList({accountId:this.accountId,networkId:e}),a=Math.max(u()(o)?0:o+1,n);if(Number.isNaN(a)&&(a=n),a>n)for(var c=n;c<a;c+=1)if(!i.includes(c)){a=c;break}if(a<n&&(a=n),a-n>=v.HISTORY_CONSTS.PENDING_QUEUE_MAX_LENGTH)throw new T.PendingQueueTooLong(v.HISTORY_CONSTS.PENDING_QUEUE_MAX_LENGTH);return a}));return function(t,r){return e.apply(this,arguments)}}(),n.validateSendAmount=function(e,t,r){return Promise.resolve(!0)},n.notifyChainChanged=function(e,t){},n.getFetchBalanceAddress=function(e){return Promise.resolve(e.address)},n.getPrivateKeyByCredential=function(e){return Promise.resolve(b.from(e.startsWith("0x")?e.slice(2):e,"hex"))},n.getMinDepositAmount=function(){var e=(0,c.default)((function*(){return"0"}));return function(){return e.apply(this,arguments)}}(),n.specialCheckEncodedTx=function(){var e=(0,c.default)((function*(e){return{success:!0}}));return function(t){return e.apply(this,arguments)}}(),n.getAllUsedAddress=function(){var e=(0,c.default)((function*(){return Promise.resolve([])}));return function(){return e.apply(this,arguments)}}(),(0,s.default)(r)}(k)},704473:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Be});var n=r(968079),o=r(545455),i=r.n(o),a=r(196234),u=r(301842),c=r.n(u),s=r(256666),d=r(634795),l=r(887371),f=r(545754),p=r(411987),h=r(695058),y=r(510760),v=r(299780),g=r(789644),w=r.n(g),m=r(206391),T=r.n(m),x=r(901187),I=r(776553),A=r(292147),E=r(85397),b=r(396564),O=r(665417),P=r(940915),C=r(534756),k=r(794292),N=r(398514),D=r(392853),B=r(786141),S=r(399686),R=r.n(S),H=r(291026),F=r(368445),K=r(153546),M=r(613549),j=r(398145),U=r(572801),_=r(82406),V=r(811293),$=r.n(V)(),L=r(348834).Buffer;function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.default)(e);if(t){var o=(0,h.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var X,Y=$.Transaction,q=$.address,J=`m/44'/${M.COINTYPE_CFX}'/0'/0`,Q=function(e){(0,f.default)(r,e);var t=z(r);function r(){return t.apply(this,arguments)}var n=r.prototype;return n.signTransaction=function(){var e=(0,d.default)((function*(e){var t,r,n,o,i,a,u=yield this.getHardwareSDKInstance(),c=yield this.getAccountPath(),s=yield this.getHardwareInfo(),d=s.connectId,l=s.deviceId,f=yield this.getWalletPassphraseState(),p=e.encodedTx,h=G(G({},p),{},{epochHeight:(0,O.toBigIntHex)(new(T())(null!=(t=p.epochHeight)?t:0)),to:p.to?`0x${q.decodeCfxAddress(p.to).hexAddress.toString("hex")}`:"",storageLimit:(0,O.toBigIntHex)(new(T())(null!=(r=p.storageLimit)?r:0)),nonce:(0,O.toBigIntHex)(new(T())(null!=(n=p.nonce)?n:0)),gasPrice:(0,O.toBigIntHex)(new(T())(null!=(o=p.gasPrice)?o:0)),data:null!=(i=p.data)?i:"0x",value:(0,O.toBigIntHex)(new(T())(null!=(a=p.value)?a:0))}),y=yield u.confluxSignTransaction(d,l,G({path:c,transaction:h},f));if(y.success){var v=y.payload,g=v.r,w=v.s,m=v.v,x=new Y(G(G({},R()(h,(function(e){return!e}))),{},{r:g,s:w,v:new(T())(m).toNumber()}));return Promise.resolve({txid:x.hash,rawTx:x.serialize()})}throw(0,K.convertDeviceError)(y.payload)}));return function(t){return e.apply(this,arguments)}}(),n.signMessage=function(){var e=(0,d.default)((function*(e,t){var r=this;return Promise.all(e.map(function(){var e=(0,d.default)((function*(e){return r.handleSignMessage(e)}));return function(t){return e.apply(this,arguments)}}()))}));return function(t,r){return e.apply(this,arguments)}}(),n.prepareAccounts=function(){var e=(0,d.default)((function*(e){var t,r=this,n=e.indexes,o=e.names,i=n.map((function(e){return`${J}/${e}`})),a=new(T())(yield this.getNetworkChainId()).toNumber(),u=yield this.getHardwareSDKInstance(),c=yield this.getHardwareInfo(),s=c.connectId,d=c.deviceId,l=yield this.getWalletPassphraseState();try{t=yield u.confluxGetAddress(s,d,G({bundle:i.map((function(e){return{path:e,showOnOneKey:false,chainId:a}}))},l))}catch(f){throw A.default.common.error(f),new P.OneKeyHardwareError(f)}if(!t.success)throw A.default.common.error(t.payload),(0,K.convertDeviceError)(t.payload);return t.payload.map((function(e,t){var i,a=e.address,u=e.path;return{id:`${r.walletId}--${u}`,name:(o||[])[t]||`CFX #${n[t]+1}`,type:j.AccountType.VARIANT,path:u,coinType:M.COINTYPE_CFX,pub:"",address:`0x${q.decodeCfxAddress(null!=a?a:"").hexAddress.toString("hex")}`,addresses:(i={},i[r.networkId]=null!=a?a:"",i)}})).filter((function(e){return!!e.address}))}));return function(t){return e.apply(this,arguments)}}(),n.getAddress=function(){var e=(0,d.default)((function*(e){var t,r=yield this.getHardwareSDKInstance(),n=yield this.getHardwareInfo(),o=n.connectId,i=n.deviceId,a=yield this.getWalletPassphraseState(),u=new(T())(yield this.getNetworkChainId()).toNumber(),c=yield r.confluxGetAddress(o,i,G({path:e.path,showOnOneKey:e.showOnOneKey,chainId:u},a));if(c.success&&null!=(t=c.payload)&&t.address)return c.payload.address;throw(0,K.convertDeviceError)(c.payload)}));return function(t){return e.apply(this,arguments)}}(),n.batchGetAddress=function(){var e=(0,d.default)((function*(e){var t=yield this.getHardwareSDKInstance(),r=yield this.getHardwareInfo(),n=r.connectId,o=r.deviceId,i=yield this.getWalletPassphraseState(),a=new(T())(yield this.getNetworkChainId()).toNumber(),u=yield t.confluxGetAddress(n,o,G(G({},i),{},{bundle:e.map((function(e){return{path:e.path,showOnOneKey:!!e.showOnOneKey,chainId:a}}))}));if(!u.success)throw(0,K.convertDeviceError)(u.payload);return u.payload.map((function(e){var t,r;return{path:null!=(t=e.path)?t:"",address:null!=(r=e.address)?r:""}}))}));return function(t){return e.apply(this,arguments)}}(),n.handleSignMessage=function(){var e=(0,d.default)((function*(e){var t=yield this.getHardwareSDKInstance(),r=yield this.getAccountPath(),n=yield this.getHardwareInfo(),o=n.connectId,i=n.deviceId,a=yield this.getWalletPassphraseState();if(e.type===U.ETHMessageTypes.TYPED_DATA_V1)throw H.web3Errors.provider.unsupportedMethod(`Sign message method=${e.type} not supported for this device`);if(e.type===U.ETHMessageTypes.ETH_SIGN||e.type===U.ETHMessageTypes.PERSONAL_SIGN){var u;try{if(!(0,I.isHexString)(e.message))throw new Error("not hex string");u=L.from(e.message.replace("0x",""),"hex")}catch(T){u=L.from("")}var c=e.message;0===u.length&&(c=L.from(e.message,"utf-8").toString("hex"));var s=yield t.confluxSignMessage(o,i,G({path:r,messageHex:c},a));if(!s.success)throw(0,K.convertDeviceError)(s.payload);return`0x${s.payload.signature||""}`}if(e.type===U.ETHMessageTypes.TYPED_DATA_V3||e.type===U.ETHMessageTypes.TYPED_DATA_V4){var d,l,f,p=e.type===U.ETHMessageTypes.TYPED_DATA_V4,h=JSON.parse(e.message),y=F.TypedDataUtils.sanitizeData(h),v=(null==y||null==(d=y.types)||null==(l=d.CIP23Domain)?void 0:l.length)>0?"CIP23Domain":"EIP712Domain",g=F.TypedDataUtils.hashStruct(v,y.domain,y.types,p).toString("hex"),w=F.TypedDataUtils.hashStruct(y.primaryType,y.message,y.types,p).toString("hex"),m=yield t.confluxSignMessageCIP23(o,i,G({path:r,domainHash:g,messageHash:w},a));if(!m.success)throw(0,K.convertDeviceError)(m.payload);return`0x${(null==m||null==(f=m.payload)?void 0:f.signature)||""}`}throw H.web3Errors.rpc.methodNotFound(`Sign message method=${e.type} not found`)}));return function(t){return e.apply(this,arguments)}}(),(0,l.default)(r)}(_.KeyringHardwareBase),Z=r(605851),ee=r(810887),te=r(967640),re=r(59256);!function(e){e.Transaction="transaction",e.Call="call",e.Transfer20="transfer_20"}(X||(X={}));var ne=r(348834).Buffer;function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ae=$.Transaction,ue=(0,b.memoizee)(function(){var e=(0,d.default)((function*(e,t){return t.getCode(e)}));return function(t,r){return e.apply(this,arguments)}}(),{promise:!0,normalizer:function(e){return(0,a.default)(e,1)[0]}});function ce(){return(ce=(0,d.default)((function*(e,t){var r=e.data,n=e.to;if(n&&"0x"===(yield ue(n,t)))return!0;return!r||"0x"===r||"0x0"===r||"0"===r}))).apply(this,arguments)}function se(e,t){return de.apply(this,arguments)}function de(){return(de=(0,d.default)((function*(e,t){var r=new ae(e.encodedTx),n=(0,re.keccak256)(r.encode(!1)),o=yield t.sign(ne.from(n.slice(2),"hex")),i=(0,a.default)(o,2),u=i[0],c=i[1],s=[u.slice(0,32),u.slice(32)],d=s[0],l=s[1],f=new ae(ie(ie({},e.encodedTx),{},{r:(0,te.hexZeroPad)(`0x${d.toString("hex")}`,32),s:(0,te.hexZeroPad)(`0x${l.toString("hex")}`,32),v:c}));return{digest:n,txid:f.hash,rawTx:f.serialize()}}))).apply(this,arguments)}function le(){return le=(0,d.default)((function*(e,t){var r,n=yield function(e,t){return ce.apply(this,arguments)}({data:e.data,to:null!=(r=e.contract)?r:e.to},t);if(n)return{actionType:N.IDecodedTxActionType.NATIVE_TRANSFER,abiDecodeResult:null};try{var o,i=t.CRC20(null!=(o=e.contract)?o:e.to),a=N.IDecodedTxActionType.UNKNOWN,u=i.abi.decodeData(e.data);if(u)switch(u.name){case"transfer":a=N.IDecodedTxActionType.TOKEN_TRANSFER;break;case"transferFrom":a=N.IDecodedTxActionType.TOKEN_TRANSFER;var c=u.object,s=c.sender,d=c.recipient;if(s!==e.from&&d!==e.from)return{actionType:N.IDecodedTxActionType.UNKNOWN,abiDecodeResult:null};break;case"approve":a=N.IDecodedTxActionType.TOKEN_APPROVE;break;default:a=N.IDecodedTxActionType.UNKNOWN}return{actionType:a,abiDecodeResult:u}}catch(l){return{actionType:N.IDecodedTxActionType.UNKNOWN,abiDecodeResult:null}}})),le.apply(this,arguments)}function fe(e){switch(e){case 0:default:return N.IDecodedTxStatus.Confirmed;case 1:return N.IDecodedTxStatus.Failed;case 2:case null:return N.IDecodedTxStatus.Dropped}}function pe(e,t){return he.apply(this,arguments)}function he(){return(he=(0,d.default)((function*(e,t){var r=(yield e.getPubkey(!1)).slice(1),n=`0x1${(0,re.keccak256)(r).slice(-40).toLowerCase().slice(1)}`,o=parseInt(t);return(0,y.encode)(n,o)}))).apply(this,arguments)}var ye="secp256k1";function ve(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.default)(e);if(t){var o=(0,h.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var ge=`m/44'/${M.COINTYPE_CFX}'/0'/0`,we=function(e){(0,f.default)(r,e);var t=ve(r);function r(){return t.apply(this,arguments)}var n=r.prototype;return n.getSigners=function(){var e=(0,d.default)((function*(e,t){var r,n=yield this.getDbAccount(),o=n.addresses[this.networkId];if(1!==t.length)throw new P.OneKeyInternalError("CFX signers number should be 1.");if(t[0]!==o)throw new P.OneKeyInternalError("Wrong address required for signing.");var i=(yield this.getPrivateKeys(e))[n.path];if("undefined"===typeof i)throw new P.OneKeyInternalError("Unable to get signer.");return(r={})[o]=new k.Signer(i,e,ye),r}));return function(t,r){return e.apply(this,arguments)}}(),n.prepareAccounts=function(){var e=(0,d.default)((function*(e){var t=e.password,r=e.indexes,n=e.names,o=(yield this.engine.dbApi.getCredential(this.walletId,t)).seed,i=(0,Z.batchGetPublicKeys)(ye,o,t,ge,r.map((function(e){return e.toString()})));if(i.length!==r.length)throw new P.OneKeyInternalError("Unable to get publick key.");var a=[],u=0;for(var c of i){var s,d=c.path,l=c.extendedKey.key.toString("hex"),f=yield this.vault.getNetworkChainId(),p=yield pe(new k.Verifier(l,ye),f),h=yield this.vault.addressToBase(p),y=(n||[])[u]||`CFX #${r[u]+1}`;a.push({id:`${this.walletId}--${d}`,name:y,type:j.AccountType.VARIANT,path:d,coinType:M.COINTYPE_CFX,pub:l,address:h,addresses:(s={},s[this.networkId]=p,s)}),u+=1}return a}));return function(t){return e.apply(this,arguments)}}(),n.signTransaction=function(){var e=(0,d.default)((function*(e,t){var r=(yield this.getDbAccount()).addresses[this.networkId];return se(e,(yield this.getSigners(t.password||"",[r]))[r])}));return function(t,r){return e.apply(this,arguments)}}(),n.signMessage=function(){var e=(0,d.default)((function*(e,t){var r=this;if("undefined"===typeof t.password)throw new P.OneKeyInternalError("Software signing requires a password.");var n=(yield this.getDbAccount()).addresses[this.networkId],o=(yield this.getSigners(t.password||"",[n]))[n];return Promise.all(e.map((function(e){return r.engine.providerManager.signMessage(r.networkId,e,o)})))}));return function(t,r){return e.apply(this,arguments)}}(),(0,l.default)(r)}(ee.KeyringHdBase),me=r(478557);function Te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.default)(e);if(t){var o=(0,h.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var xe=function(e){(0,f.default)(r,e);var t=Te(r);function r(){return t.apply(this,arguments)}var n=r.prototype;return n.getSigners=function(){var e=(0,d.default)((function*(e,t){var r,n=(yield this.getDbAccount()).addresses[this.networkId];if(1!==t.length)throw new P.OneKeyInternalError("CFX signers number should be 1.");if(t[0]!==n)throw new P.OneKeyInternalError("Wrong address required for signing.");var o=Object.values(yield this.getPrivateKeys(e)),i=(0,a.default)(o,1)[0];return(r={})[n]=new k.Signer(i,e,ye),r}));return function(t,r){return e.apply(this,arguments)}}(),n.prepareAccounts=function(){var e=(0,d.default)((function*(e){var t,r=e.name,n=e.privateKey;if(32!==n.length)throw new P.OneKeyInternalError("Invalid private key.");var o=me.secp256k1.publicFromPrivate(n).toString("hex"),i=yield this.vault.getNetworkChainId(),a=yield pe(new k.Verifier(o,ye),i),u=yield this.vault.addressToBase(a);return Promise.resolve([{id:`imported--${M.COINTYPE_CFX}--${o}`,name:r||"",type:j.AccountType.VARIANT,path:"",coinType:M.COINTYPE_CFX,pub:o,address:u,addresses:(t={},t[this.networkId]=a,t)}])}));return function(t){return e.apply(this,arguments)}}(),n.signTransaction=function(){var e=(0,d.default)((function*(e,t){var r=(yield this.getDbAccount()).addresses[this.networkId];return se(e,(yield this.getSigners(t.password||"",[r]))[r])}));return function(t,r){return e.apply(this,arguments)}}(),(0,l.default)(r)}(r(255942).KeyringImportedBase);function Ie(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.default)(e);if(t){var o=(0,h.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var Ae=function(e){(0,f.default)(r,e);var t=Ie(r);function r(){return t.apply(this,arguments)}return r.prototype.prepareAccounts=function(){var e=(0,d.default)((function*(e){var t,r=e.name,n=e.target,o=e.accountIdPrefix,i=yield this.vault.validateAddress(n),a=yield this.vault.addressToBase(i);return[{id:`${o}--${M.COINTYPE_CFX}--${a}`,name:r||"",type:j.AccountType.VARIANT,path:"",coinType:M.COINTYPE_CFX,pub:"",address:a,addresses:(t={},t[this.networkId]=i,t)}]}));return function(t){return e.apply(this,arguments)}}(),(0,l.default)(r)}(r(701625).KeyringWatchingBase),Ee=r(718306);function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.default)(e);if(t){var o=(0,h.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var Ce=$.Conflux,ke=$.address,Ne="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",De="latest_state",Be=function(e){(0,f.default)(r,e);var t=Pe(r);function r(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).settings=Ee.default,e.keyringMap={hd:we,hw:Q,imported:xe,watching:Ae,external:Ae},e.getApiExplorerCache=(0,b.memoizee)(function(){var e=(0,d.default)((function*(e){return w().create({baseURL:e})}));return function(t){return e.apply(this,arguments)}}(),{promise:!0,max:1,maxAge:(0,I.getTimeDurationMs)({minute:3})}),e.getClientCache=(0,b.memoizee)(function(){var t=(0,d.default)((function*(t,r){return e.getConfluxClient(t,r)}));return function(e,r){return t.apply(this,arguments)}}(),{promise:!0,max:1,maxAge:(0,I.getTimeDurationMs)({minute:3})}),e.getRpcClientCache=(0,b.memoizee)(function(){var e=(0,d.default)((function*(e){return new E.JsonRPCRequest(e)}));return function(t){return e.apply(this,arguments)}}(),{promise:!0,max:1,maxAge:(0,I.getTimeDurationMs)({minute:3})}),e}var o=r.prototype;return o.getApiExplorer=function(){var e=(0,d.default)((function*(){var e=yield this.engine.getNetwork(this.networkId),t=e.blockExplorerURL.name.replace(/(https:\/\/)/,"$1"+(e.isTestnet?"api-":"api."));return this.getApiExplorerCache(t)}));return function(){return e.apply(this,arguments)}}(),o.getClient=function(){var e=(0,d.default)((function*(e){var t=yield this.getRpcUrl(),r=yield this.getNetworkChainId();return this.getClientCache(null!=e?e:t,r)}));return function(t){return e.apply(this,arguments)}}(),o.getRpcClient=function(){var e=(0,d.default)((function*(e){var t=yield this.getRpcUrl();return this.getRpcClientCache(null!=e?e:t)}));return function(t){return e.apply(this,arguments)}}(),o.getConfluxClient=function(e,t){return new Ce({url:e,networkId:Number(t)})},o.getBalances=function(){var e=(0,d.default)((function*(e){var t=e.map((function(e){var t=e.address,r=e.tokenAddress;return{address:t,coin:Oe({},"string"===typeof r?{tokenAddress:r}:{})}})).map((function(e){var t;return null!=(t=e.coin)&&t.tokenAddress?["cfx_call",[{to:e.coin.tokenAddress,data:`0x70a08231000000000000000000000000${(0,y.decode)(e.address).hexAddress.toString("hex")}`},De]]:["cfx_getBalance",[e.address,De]]})),r=yield this.getRpcClient();return(yield r.batchCall(t,void 0,void 0,!0)).map((function(e){var t;return"undefined"!==typeof e&&(t=(0,O.fromBigIntHex)(e.slice(0,66))).isNaN()&&(t=void 0),t}))}));return function(t){return e.apply(this,arguments)}}(),o.attachFeeInfoToEncodedTx=function(){var e=(0,d.default)((function*(e){var t=yield this.getNetwork(),r=e.encodedTx,n=e.feeInfoValue,o=n.limit,i=n.price,a=Oe({},r);return c()(o)||(a.gas=(0,O.toBigIntHex)(new(T())(o)),a.gasLimit=(0,O.toBigIntHex)(new(T())(o))),c()(i)||(a.gasPrice=(0,D.convertFeeGweiToValue)({value:i||"0.000000001",network:t})),Promise.resolve(a)}));return function(t){return e.apply(this,arguments)}}(),o.decodedTxToLegacy=function(e){return Promise.resolve({})},o.decodeTx=function(){var e=(0,d.default)((function*(e,t){var r,n=yield this.getAccountAddress(),o=yield this.getNetwork();return{txid:e.hash||"",owner:n,signer:e.from||n,nonce:e.nonce||0,actions:yield this.buildEncodedTxActions(e),status:N.IDecodedTxStatus.Pending,networkId:this.networkId,accountId:this.accountId,encodedTx:e,feeInfo:{limit:e.gasLimit,price:(0,D.convertFeeValueToGwei)({value:null!=(r=e.gasPrice)?r:"1",network:o}),priceValue:e.gasPrice},payload:t,extraInfo:null}}));return function(t,r){return e.apply(this,arguments)}}(),o.buildEncodedTxFromTransfer=function(){var e=(0,d.default)((function*(e){if(!e.to)throw new Error("Invalid transferInfo.to params");var t=yield this.getNetwork(),r=e.amount,n=Boolean(e.token),o=new(T())(r);if(o.isNaN()&&(o=new(T())("0")),n){var i,a,u=yield this.engine.ensureTokenInDB(this.networkId,null!=(i=e.token)?i:"");if(!u)throw new Error(`Token not found: ${e.token}`);var c=(0,O.toBigIntHex)(o.shiftedBy(u.decimals)),s=`0x${ke.decodeCfxAddress(e.to).hexAddress.toString("hex")}`,d=`0xa9059cbb${v.defaultAbiCoder.encode(["address","uint256"],[s,c]).slice(2)}`;return{from:e.from,to:null!=(a=e.token)?a:"",value:"0x0",data:d}}var l=(0,O.toBigIntHex)(o.shiftedBy(t.decimals));return{from:e.from,to:e.to,value:l,data:"0x"}}));return function(t){return e.apply(this,arguments)}}(),o.buildEncodedTxFromApprove=function(e){throw new Error("Method not implemented.")},o.updateEncodedTxTokenApprove=function(){var e=(0,d.default)((function*(e,t){var r=(yield this.decodeTx(e)).actions[0];if(!r||r.type!==N.IDecodedTxActionType.TOKEN_APPROVE||!r.tokenApprove)throw new Error("Not a approve transaction.");var n,o=r.tokenApprove,i=o.tokenInfo,a=o.spender;if("Infinite"===t||t===Ne)n=Ne;else{var u=new(T())(t);if(u.isNaN())throw new Error(`Invalid amount input: ${t}`);n=(0,O.toBigIntHex)(u.shiftedBy(i.decimals))}var c=`0x095ea7b3${v.defaultAbiCoder.encode(["address","uint256"],[`0x${ke.decodeCfxAddress(a).hexAddress.toString("hex")}`,n]).slice(2)}`;return Oe(Oe({},e),{},{data:c})}));return function(t,r){return e.apply(this,arguments)}}(),o.buildUnsignedTxFromEncodedTx=function(){var e=(0,d.default)((function*(e){var t=e.from,r=e.to,n=e.value,o=e.data,i=yield this.getClient(),u=yield Promise.all([i.getStatus(),i.getNextNonce(e.from),i.estimateGasAndCollateral({from:t,to:r,value:n,data:o})]),c=(0,a.default)(u,3),s=c[0],d=c[1],l=c[2];e.nonce=Number(d),e.epochHeight=s.epochNumber,e.chainId=s.chainId,e.storageLimit=new(T())(l.storageCollateralized).toFixed();var f={inputs:[],outputs:[],payload:{encodedTx:e},encodedTx:e};return Promise.resolve(f)}));return function(t){return e.apply(this,arguments)}}(),o.verifyAddress=function(){var e=(0,d.default)((function*(e){var t=ke.isValidCfxAddress(e);return Promise.resolve({normalizedAddress:t?e.toLowerCase():void 0,displayAddress:t?e.toLowerCase():void 0,isValid:t})}));return function(t){return e.apply(this,arguments)}}(),o.fetchFeeInfo=function(){var e=(0,d.default)((function*(e){var t,r=e.gas,n=e.gasLimit,o=yield this.getNetwork(),i=yield this.getClient(),u=e.from,c=e.to,s=e.value,d=e.data,l=yield Promise.all([i.getGasPrice(),i.estimateGasAndCollateral({from:u,to:c,value:s,data:d})]),f=(0,a.default)(l,2),p=f[0],h=f[1],y=T().max(null!=(t=h.gasLimit)?t:"0",null!=r?r:"0",null!=n?n:"0").toFixed();return{nativeSymbol:o.symbol,nativeDecimals:o.decimals,feeSymbol:o.feeSymbol,feeDecimals:o.feeDecimals,limit:y,prices:[new(T())(p.toString()).shiftedBy(-o.decimals).toFixed()],defaultPresetIndex:"1",tx:null}}));return function(t){return e.apply(this,arguments)}}(),o.updateEncodedTx=function(){var e=(0,d.default)((function*(e,t,r){if(r.type===N.IEncodedTxUpdateType.transfer){var n=yield this.getNetwork();e.value=new(T())(t.amount).shiftedBy(n.decimals).toFixed()}return Promise.resolve(e)}));return function(t,r,n){return e.apply(this,arguments)}}(),o.getExportedCredential=function(){var e=(0,d.default)((function*(e){var t=yield this.getDbAccount();if(t.id.startsWith("hd-")||t.id.startsWith("imported")){var r=this.keyring,n=Object.values(yield r.getPrivateKeys(e)),o=(0,a.default)(n,1)[0];return`0x${(0,x.decrypt)(e,o).toString("hex")}`}throw new P.OneKeyInternalError("Only credential of HD or imported accounts can be exported")}));return function(t){return e.apply(this,arguments)}}(),o.validateWatchingCredential=function(){var e=(0,d.default)((function*(e){return Promise.resolve(this.settings.watchingAccountEnabled&&(yield this.verifyAddress(e)).isValid)}));return function(t){return e.apply(this,arguments)}}(),o.validateTokenAddress=function(){var e=(0,d.default)((function*(e){var t=yield this.verifyAddress(e),r=t.normalizedAddress;if(!t.isValid||"undefined"===typeof r)throw new P.InvalidTokenAddress;return Promise.resolve(r)}));return function(t){return e.apply(this,arguments)}}(),o.getOutputAccount=function(){var e=(0,d.default)((function*(){var e=yield this.getDbAccount({noCache:!0}),t={id:e.id,name:e.name,type:e.type,path:e.path,coinType:e.coinType,tokens:[],address:e.address||"",template:e.template};if(0===t.address.length&&(0,C.isAccountCompatibleWithNetwork)(e.id,this.networkId)){var r;if(!!e.pub&&!i()(e.pub)?r=yield this.engine.providerManager.addressFromPub(this.networkId,e.pub):i()(e.address.trim())||(r=yield this.addressFromBase(e)),!r)return t;t.address=r,yield this.engine.dbApi.updateAccountAddresses(e.id,this.networkId,r)}return t}));return function(){return e.apply(this,arguments)}}(),o.getAccountAddress=function(){var e=(0,d.default)((function*(){return(yield this.getOutputAccount()).address}));return function(){return e.apply(this,arguments)}}(),o.getAccountBalance=function(){var e=(0,d.default)((function*(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=yield this.getAccountAddress();return this.getBalances((t?[{address:r}]:[]).concat(e.map((function(e){return{address:r,tokenAddress:e}}))))}));return function(t){return e.apply(this,arguments)}}(),o.validateAddress=function(){var e=(0,d.default)((function*(e){var t=yield this.verifyAddress(e),r=t.isValid,n=t.normalizedAddress;if(!r||"undefined"===typeof n)throw new P.InvalidAddress;return Promise.resolve(n)}));return function(t){return e.apply(this,arguments)}}(),o.fetchOnChainHistory=function(){var e=(0,d.default)((function*(e){var t,r=this,o=e.tokenIdOnNetwork,i=e.localHistory,a=void 0===i?[]:i,u=yield this.getApiExplorer(),s=yield this.getAccountAddress(),l=yield this.getNetwork(),f={account:s,limit:50};t=""===o?[u.get("/account/transfers",{params:Oe(Oe({},f),{},{transferType:X.Call})})]:o?[u.get("/account/transfers",{params:{account:s,limit:50,transferType:X.Transfer20,contract:o}})]:[u.get("/account/transfers",{params:Oe(Oe({},f),{},{transferType:X.Transaction})}),u.get("/account/transfers",{params:Oe(Oe({},f),{},{transferType:X.Transfer20})})];try{var p=yield Promise.all(t),h=c()(o)?[].concat((0,n.default)(p[0].data.data.list),(0,n.default)(p[1].data.data.list)):p[0].data.data.list,y=new Set,v=h.map(function(){var e=(0,d.default)((function*(e){var t,n=[],o=a.find((function(t){return t.decodedTx.txid===e.transactionHash}));if("0xundefined"===e.transactionHash||o&&o.decodedTx.isFinal)return Promise.resolve(null);if(y.has(e.transactionHash))return Promise.resolve(null);y.add(e.transactionHash);var i=Oe(Oe({},e),{},{hash:e.transactionHash,value:e.type===X.Transfer20?"0x":(0,O.toBigIntHex)(new(T())(e.amount)),data:e.input});if(e.type===X.Transfer20){var u,c=yield r.engine.findToken({networkId:r.networkId,tokenIdOnNetwork:null!=(u=e.contract)?u:e.to});c&&n.push({type:N.IDecodedTxActionType.TOKEN_TRANSFER,tokenTransfer:r.buildTokenTransferAction({from:e.from,to:e.to,token:c,amount:e.amount})})}var d={txid:i.hash||"",owner:s,signer:i.from||s,nonce:i.nonce||0,actions:n.length?n:yield r.buildEncodedTxActions(i),status:fe(e.status),networkId:r.networkId,accountId:r.accountId,encodedTx:i,extraInfo:null,totalFeeInNative:e.gasFee?new(T())(e.gasFee).shiftedBy(-l.decimals).toFixed():void 0};return d.updatedAt=1e3*e.timestamp,d.createdAt=null!=(t=null==o?void 0:o.decodedTx.createdAt)?t:d.updatedAt,d.isFinal=d.status===N.IDecodedTxStatus.Confirmed,r.buildHistoryTx({decodedTx:d,historyTxToMerge:{}})}));return function(t){return e.apply(this,arguments)}}());return(yield Promise.all(v)).filter(Boolean)}catch(g){return Promise.resolve([])}}));return function(t){return e.apply(this,arguments)}}(),o.getTransactionFeeInNative=function(){var e=(0,d.default)((function*(e){try{var t=yield this.getClient(),r=yield this.getNetwork(),n=yield t.getTransactionReceipt(e);return n?new(T())(n.gasFee).shiftedBy(-r.decimals).toFixed():""}catch(o){return""}}));return function(t){return e.apply(this,arguments)}}(),o.buildEncodedTxActions=function(){var e=(0,d.default)((function*(e){var t,r=yield this.getAccountAddress(),n=yield this.getClient(),o=yield function(e,t){return le.apply(this,arguments)}(e,n),i=o.actionType,a=o.abiDecodeResult,u={type:N.IDecodedTxActionType.UNKNOWN,direction:yield this.buildTxActionDirection({from:e.from,to:e.to,address:r}),unknownAction:{extraInfo:{}}};if(e.value){var c=new(T())(e.value);!c.isNaN()&&c.gt(0)&&(t={type:N.IDecodedTxActionType.NATIVE_TRANSFER,nativeTransfer:yield this.buildNativeTransferAction(e)})}if(i===N.IDecodedTxActionType.NATIVE_TRANSFER&&(u.type=N.IDecodedTxActionType.NATIVE_TRANSFER,u.nativeTransfer=yield this.buildNativeTransferAction(e),t=void 0),i===N.IDecodedTxActionType.TOKEN_TRANSFER||i===N.IDecodedTxActionType.TOKEN_APPROVE){var s,d=yield this.engine.findToken({networkId:this.networkId,tokenIdOnNetwork:null!=(s=e.contract)?s:e.to});if(d&&a){var l,f,p=a.object,h=p.from,y=p.to,v=p.sender,g=p.recipient,w=p.amount,m=p.spender;if(u.type=i,i===N.IDecodedTxActionType.TOKEN_TRANSFER)u.tokenTransfer=this.buildTokenTransferAction({from:null!=(l=null!=(f=null!=h?h:v)?f:e.from)?l:r,to:null!=y?y:g,token:d,amount:w});i===N.IDecodedTxActionType.TOKEN_APPROVE&&(u.tokenApprove=this.buildTokenApproveAction({owner:e.from||r,spender:m,token:d,amount:w}))}}return[u,t].filter(Boolean)}));return function(t){return e.apply(this,arguments)}}(),o.buildNativeTransferAction=function(){var e=(0,d.default)((function*(e){var t=yield this.engine.getNativeTokenInfo(this.networkId),r=new(T())(e.value),n=yield this.getNetwork();return{tokenInfo:t,from:e.from,to:e.to,amount:r.shiftedBy(-n.decimals).toFixed(),amountValue:r.toFixed(),extraInfo:null}}));return function(t){return e.apply(this,arguments)}}(),o.buildTokenTransferAction=function(e){var t=e.from,r=e.to,n=e.token,o=e.amount,i=new(T())(o);return{from:t,to:r,tokenInfo:n,amount:i.shiftedBy(-n.decimals).toFixed(),amountValue:i.toFixed(),extraInfo:null}},o.buildTokenApproveAction=function(e){var t=e.owner,r=e.spender,n=e.token,o=e.amount,i=new(T())(o);return{owner:t,spender:r,isMax:(0,O.toBigIntHex)(new(T())(o))===Ne,tokenInfo:n,amount:i.shiftedBy(-n.decimals).toFixed(),amountValue:i.toFixed(),extraInfo:null}},o.proxyJsonRPCCall=function(){var e=(0,d.default)((function*(e){var t=yield this.getClient();try{return t.request(e)}catch(r){throw(0,k.extractResponseError)(r)}}));return function(t){return e.apply(this,arguments)}}(),o.getClientEndpointStatus=function(){var e=(0,d.default)((function*(e){var t=yield this.getClient(e),r=performance.now(),n=yield t.getEpochNumber();return{responseTime:Math.floor(performance.now()-r),latestBlock:n}}));return function(t){return e.apply(this,arguments)}}(),o.addressFromBase=function(){var e=(0,d.default)((function*(e){var t=yield this.getNetworkChainId();return(0,y.encode)(e.address,parseInt(t))}));return function(t){return e.apply(this,arguments)}}(),o.addressToBase=function(){var e=(0,d.default)((function*(e){return Promise.resolve(`0x${(0,y.decode)(e).hexAddress.toString("hex")}`)}));return function(t){return e.apply(this,arguments)}}(),o.fetchTokenInfos=function(e){return this.engine.providerManager.getTokenInfos(this.networkId,e)},o.broadcastTransaction=function(){var e=(0,d.default)((function*(e,t){A.default.engine.info("broadcastTransaction START:",{rawTx:e.rawTx});var r=yield this.getClient(),n=yield r.sendRawTransaction(e.rawTx);return A.default.engine.info("broadcastTransaction END:",{txid:n,rawTx:e.rawTx}),Oe(Oe({},e),{},{txid:n,encodedTx:e.encodedTx})}));return function(t,r){return e.apply(this,arguments)}}(),(0,l.default)(r)}(B.VaultBase)},565147:(e,t,r)=>{r.r(t),r.d(t,{KeyringBase:()=>s,KeyringBaseMock:()=>d});var n=r(634795),o=r(887371),i=r(545754),a=r(411987),u=r(695058);function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,a.default)(this,r)}}var s=function(e){(0,i.default)(r,e);var t=c(r);function r(e){var r;return(r=t.call(this,e.options)).vault=e,r}return r.prototype.addressFromBase=function(){var e=(0,n.default)((function*(e){return this.vault.addressFromBase(e)}));return function(t){return e.apply(this,arguments)}}(),(0,o.default)(r)}(r(114540).VaultContext),d=function(e){(0,i.default)(r,e);var t=c(r);function r(){return t.apply(this,arguments)}return(0,o.default)(r)}(s)},82406:(e,t,r)=>{r.r(t),r.d(t,{KeyringHardwareBase:()=>l});var n=r(634795),o=r(887371),i=r(545754),a=r(411987),u=r(695058),c=r(799075),s=r(814817);function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,a.default)(this,r)}}var l=function(e){(0,i.default)(a,e);var t=d(a);function a(){return t.apply(this,arguments)}var u=a.prototype;return u.getHardwareInfo=function(){var e=(0,n.default)((function*(){var e,t,r,n=yield this.engine.getHWDeviceByWalletId(this.vault.walletId);return{connectId:null!=(e=null==n?void 0:n.mac)?e:"",deviceId:null!=(t=null==n?void 0:n.deviceId)?t:"",deviceType:null!=(r=null==n?void 0:n.deviceType)?r:""}}));return function(){return e.apply(this,arguments)}}(),u.getWalletPassphraseState=function(){var e=(0,n.default)((function*(){var e=yield this.engine.getWallet(this.vault.walletId);return{passphraseState:null==e?void 0:e.passphraseState,useEmptyPassphrase:!(0,s.isPassphraseWallet)(e)}}));return function(){return e.apply(this,arguments)}}(),u.getHardwareSDKInstance=function(){var e=(0,n.default)((function*(){var e,t,n,o,i;return null!=(i=yield null==(e=r.g)||null==(t=e.$backgroundApiProxy)||null==(n=t.backgroundApi)||null==(o=n.serviceHardware)||null==o.getSDKInstance?void 0:o.getSDKInstance())?i:c.HardwareSDK}));return function(){return e.apply(this,arguments)}}(),u.prepareAccountByAddressIndex=function(e){throw new Error("Method not implemented.")},(0,o.default)(a)}(r(565147).KeyringBase)},810887:(e,t,r)=>{r.r(t),r.d(t,{KeyringHdBase:()=>h});var n=r(256666),o=r(634795),i=r(887371),a=r(545754),u=r(411987),c=r(695058),s=r(605851),d=r(940915);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}var h=function(e){(0,a.default)(r,e);var t=p(r);function r(){return t.apply(this,arguments)}var n=r.prototype;return n.getPrivateKeys=function(){var e=(0,o.default)((function*(e,t){var r=(yield this.getDbAccount()).path.split("/"),n=t||[r.pop()],o=r.join("/"),i=(yield this.engine.dbApi.getCredential(this.walletId,e)).seed;if("undefined"===typeof i)throw new d.OneKeyInternalError("Unable to get credential.");var a=(yield this.engine.providerManager.getChainInfoByNetworkId(this.networkId)).curve;return(0,s.batchGetPrivateKeys)(a,i,e,o,n).reduce((function(e,t){var r;return f(f({},e),{},((r={})[t.path]=t.extendedKey.key,r))}),{})}));return function(t,r){return e.apply(this,arguments)}}(),n.getAddress=function(){throw new Error("Method not implemented.")},n.batchGetAddress=function(){throw new Error("Method not implemented.")},n.prepareAccountByAddressIndex=function(e){throw new Error("Method not implemented.")},(0,i.default)(r)}(r(280306).KeyringSoftwareBase)},255942:(e,t,r)=>{r.r(t),r.d(t,{KeyringImportedBase:()=>d});var n=r(634795),o=r(887371),i=r(545754),a=r(411987),u=r(695058),c=r(940915);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,a.default)(this,r)}}var d=function(e){(0,i.default)(r,e);var t=s(r);function r(){return t.apply(this,arguments)}var a=r.prototype;return a.getPrivateKeys=function(){var e=(0,n.default)((function*(e,t){if("undefined"!==typeof t)throw new c.NotImplemented("Getting private keys from extended private key");var r=(yield this.engine.dbApi.getCredential(this.accountId,e)).privateKey;if("undefined"===typeof r)throw new c.OneKeyInternalError("Unable to get credential.");return{"":r}}));return function(t,r){return e.apply(this,arguments)}}(),a.getAddress=function(){throw new Error("Method not implemented.")},a.batchGetAddress=function(){throw new Error("Method not implemented.")},a.prepareAccountByAddressIndex=function(){throw new Error("Method not implemented.")},(0,o.default)(r)}(r(280306).KeyringSoftwareBase)},280306:(e,t,r)=>{r.r(t),r.d(t,{KeyringSoftwareBase:()=>y});var n=r(196234),o=r(256666),i=r(634795),a=r(887371),u=r(545754),c=r(411987),s=r(695058),d=r(292147),l=r(940915);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var o=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var y=function(e){(0,u.default)(r,e);var t=h(r);function r(){return t.apply(this,arguments)}var o=r.prototype;return o.signTransaction=function(){var e=(0,i.default)((function*(e,t){var r=t.password;if("undefined"===typeof r)throw new l.OneKeyInternalError("Software signing requires a password.");var n=yield this.getSigners(r,e.inputs.map((function(e){return e.address})));return d.default.engine.info("signTransaction",this.networkId,e),p(p({},yield this.engine.providerManager.signTransaction(this.networkId,e,n)),{},{encodedTx:e.encodedTx})}));return function(t,r){return e.apply(this,arguments)}}(),o.signMessage=function(){var e=(0,i.default)((function*(e,t){var r=this,o=t.password;if("undefined"===typeof o)throw new l.OneKeyInternalError("Software signing requires a password.");var i=yield this.getDbAccount(),a=Object.values(yield this.getSigners(o,[i.address])),u=(0,n.default)(a,1)[0];return d.default.engine.info("signMessage",this.networkId,e),Promise.all(e.map((function(e){return r.engine.providerManager.signMessage(r.networkId,e,u)})))}));return function(t,r){return e.apply(this,arguments)}}(),o.getAddress=function(){throw new Error("Method not implemented.")},o.batchGetAddress=function(){throw new Error("Method not implemented.")},o.prepareAccountByAddressIndex=function(e){throw new Error("Method not implemented.")},(0,a.default)(r)}(r(565147).KeyringBase)},701625:(e,t,r)=>{r.r(t),r.d(t,{KeyringWatchingBase:()=>d});var n=r(634795),o=r(887371),i=r(545754),a=r(411987),u=r(695058),c=r(940915);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,a.default)(this,r)}}var d=function(e){(0,i.default)(r,e);var t=s(r);function r(){return t.apply(this,arguments)}var a=r.prototype;return a.signTransaction=function(){var e=(0,n.default)((function*(e,t){throw new c.OneKeyInternalError("signTransaction is not supported for watching accounts")}));return function(t,r){return e.apply(this,arguments)}}(),a.signMessage=function(){var e=(0,n.default)((function*(e,t){throw new c.OneKeyInternalError("signMessage is not supported for watching accounts")}));return function(t,r){return e.apply(this,arguments)}}(),a.getAddress=function(){throw new Error("Method not implemented.")},a.batchGetAddress=function(){throw new Error("Method not implemented.")},a.prepareAccountByAddressIndex=function(){throw new Error("Method not implemented.")},(0,o.default)(r)}(r(565147).KeyringBase)},153546:(e,t,r)=>{r.r(t),r.d(t,{convertDeviceError:()=>u});var n=r(703599),o=r(302478),i=r(292147);r(213208);function a(e,t){return"string"!==typeof t?null:e===n.HardwareErrorCode.DeviceInitializeFailed&&t.includes("ECONNABORTED")?new o.ConnectTimeoutError({message:t}):t.includes("Bridge network error")?new o.BridgeNetworkError({message:t}):null}function u(e){var t,r=e||{},u=r.code,c=r.error,s=r.message,d=null!=(t=null!=c?c:s)?t:"Unknown error";if(a(u,d))return a(u,d);switch(i.default.hardwareSDK.info("Device Utils Convert Device Error:",u,d),u){case n.HardwareErrorCode.UnknownError:return new o.UnknownHardwareError(e);case n.HardwareErrorCode.DeviceFwException:return new o.FirmwareVersionTooLow(e);case n.HardwareErrorCode.DeviceUnexpectedMode:return"string"===typeof d&&-1!==d.indexOf("ui-device_bootloader_mode")?new o.NotInBootLoaderMode(e):new o.UnknownHardwareError(e);case n.HardwareErrorCode.DeviceCheckDeviceIdError:return new o.DeviceNotSame(e);case n.HardwareErrorCode.DeviceNotFound:return new o.DeviceNotFind(e);case n.HardwareErrorCode.DeviceUnexpectedBootloaderMode:return new o.NotInBootLoaderMode(e);case n.HardwareErrorCode.DeviceInterruptedFromOutside:case n.HardwareErrorCode.DeviceInterruptedFromUser:return new o.UserCancelFromOutside(e);case n.HardwareErrorCode.DeviceNotSupportPassphrase:return new o.NotSupportPassphraseError(e);case n.HardwareErrorCode.IFrameLoadFail:return new o.InitIframeLoadFail(e);case n.HardwareErrorCode.IframeTimeout:return new o.InitIframeTimeout(e);case n.HardwareErrorCode.FirmwareUpdateDownloadFailed:return new o.FirmwareDownloadFailed(e);case n.HardwareErrorCode.FirmwareUpdateManuallyEnterBoot:return new o.FirmwareUpdateManuallyEnterBoot(e);case n.HardwareErrorCode.FirmwareUpdateAutoEnterBootFailure:return new o.FirmwareUpdateAutoEnterBootFailure(e);case n.HardwareErrorCode.FirmwareUpdateLimitOneDevice:return new o.FirmwareUpdateLimitOneDevice(e);case n.HardwareErrorCode.CallMethodNeedUpgradeFirmware:return new o.FirmwareVersionTooLow(e);case n.HardwareErrorCode.NewFirmwareUnRelease:return new o.NewFirmwareUnRelease(e);case n.HardwareErrorCode.NewFirmwareForceUpdate:return new o.NewFirmwareForceUpdate(e);case n.HardwareErrorCode.NetworkError:return new o.NetworkError(e);case n.HardwareErrorCode.BlePermissionError:return new o.NeedBluetoothTurnedOn(e);case n.HardwareErrorCode.BleLocationError:return new o.NeedBluetoothPermissions({message:d});case n.HardwareErrorCode.BleLocationServicesDisabled:return new o.BleLocationServiceError({message:d});case n.HardwareErrorCode.BleDeviceNotBonded:return new o.DeviceNotBonded(e);case n.HardwareErrorCode.BleDeviceBondError:return new o.DeviceBondError(e);case n.HardwareErrorCode.BleWriteCharacteristicError:return new o.BleWriteCharacteristicError(e);case n.HardwareErrorCode.BleScanError:return new o.BleScanError({message:d});case n.HardwareErrorCode.BleAlreadyConnected:return new o.BleAlreadyConnectedError(e);case n.HardwareErrorCode.RuntimeError:return-1!==d.indexOf("EIP712 blind sign is disabled")?new o.OpenBlindSign(e):-1!==d.indexOf("Unknown message")||-1!==d.indexOf("Failure_UnexpectedMessage")?new o.UnknownMethod(e):new o.UnknownHardwareError(e);case n.HardwareErrorCode.PinInvalid:return new o.InvalidPIN(e);case n.HardwareErrorCode.DeviceCheckPassphraseStateError:return new o.InvalidPassphrase(e);case n.HardwareErrorCode.DeviceOpenedPassphrase:return new o.DeviceOpenedPassphrase(e);case n.HardwareErrorCode.DeviceNotOpenedPassphrase:return new o.DeviceNotOpenedPassphrase(e);case n.HardwareErrorCode.PinCancelled:case n.HardwareErrorCode.ActionCancelled:return new o.UserCancel(e);case n.HardwareErrorCode.BridgeNotInstalled:case o.CustomOneKeyHardwareError.NeedOneKeyBridge:return new o.NeedOneKeyBridge(e);case n.HardwareErrorCode.BridgeNetworkError:return new o.BridgeNetworkError(e);case n.HardwareErrorCode.BridgeTimeoutError:return new o.BridgeTimeoutError(e);case n.HardwareErrorCode.PollingTimeout:return new o.ConnectTimeoutError(e);case n.HardwareErrorCode.PollingStop:return new o.ConnectPollingStopError(e);case n.HardwareErrorCode.BlindSignDisabled:return new o.OpenBlindSign(e);case n.HardwareErrorCode.FileAlreadyExists:return new o.FileAlreadyExistError(e);case n.HardwareErrorCode.CheckDownloadFileError:return new o.IncompleteFileError(e);case n.HardwareErrorCode.NotInSigningMode:return new o.NotInSigningModeError(e);case n.HardwareErrorCode.DataOverload:return new o.DeviceDataOverload(e);default:return new o.UnknownHardwareError(e)}}}}]);