"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[47949],{945821:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var r=n(64715),o=n(213208),l=n(443224);const a=function(){return new l.default};var i=null;o.default.isExtensionUi||(i=a());var u=new r.default({backgroundApi:i});n.g.$backgroundApiProxy=u;const s=u},265999:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});var r=n(18861),o=n(561220),l=n(10918),a=n(435581),i=n(785192),u=n(256666),s=n(605616),c=n(634795),d=n(196234),f=n(459740),p=n(202784),v=n(783112),h=n(119804),m=n(213208),g=n(945821),w=n(859071),y=n(481047),b=n(249831),S=n(239594),O=n(903730),k=n(552322),_=["value","onChange","onChangeAddressName","plugins","networkId","contactExcludeWalletAccount","placeholder","description","addressFilter"];function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const j=function(e){var t=e.value,n=e.onChange,u=e.onChangeAddressName,A=e.plugins,j=void 0===A?["paste","scan"]:A,E=e.networkId,C=e.contactExcludeWalletAccount,I=e.placeholder,T=e.description,P=e.addressFilter,N=(0,f.default)(e,_),R=(0,v.default)(),M=(0,w.useNavigation)(),L=(0,p.useState)(!1),D=(0,d.default)(L,2),W=D[0],B=D[1],V=(0,p.useCallback)(function(){var e=(0,c.default)((function*(e,r){if(e!==t){var o=e,l=(0,S.parseUriScheme)(e);if(!1!==l&&(o=l.address),r&&E)try{yield g.default.validator.validateAddress(E,o),null==n||n(o)}catch(a){null==n||n(e)}else null==n||n(e)}}));return function(t,n){return e.apply(this,arguments)}}(),[t,E,n]),U=(0,p.useCallback)((0,c.default)((function*(){var e=yield(0,h.getClipboard)();null==V||V(e,!0)})),[V]),F=(0,p.useCallback)((function(){(0,b.gotoScanQrcode)((function(e){null==V||V(e,!0)}))}),[V]),H=(0,p.useCallback)((function(){M.navigate(y.RootRoutes.Modal,{screen:y.ModalRoutes.AddressBook,params:{screen:O.AddressBookRoutes.PickAddressRoute,params:{networkId:E,contactExcludeWalletAccount:C,addressFilter:P,onSelected:function(e){var t=e.address,n=e.name;null==V||V(t,!1),n&&(null==u||u(n))}}}})}),[M,E,C,P,V,u]),z=(0,p.useCallback)((function(){B(!1)}),[]);return(0,k.jsxs)(r.default,{children:[(0,k.jsxs)(r.default,{w:"full",borderRadius:12,overflow:"hidden",borderWidth:"1",borderColor:W?"focused-default":"border-default",children:[(0,k.jsx)(s.default,x(x({trimValue:!0,borderRadius:0,w:"full",value:t,onChangeText:n,placeholder:I||R.formatMessage({id:"form__address_and_domain_placeholder"}),borderWidth:"0",onFocus:function(){B(!0)}},N),{},{onBlur:z})),(0,k.jsx)(i.default,{}),(0,k.jsxs)(r.default,{display:"flex",flexDirection:"row",bg:"action-secondary-default",children:[j.includes("paste")&&m.default.canGetClipboard?(0,k.jsxs)(o.default,{flex:"1",justifyContent:"center",alignItems:"center",py:"3",onPress:U,flexDirection:"row",children:[(0,k.jsx)(a.default,{size:20,name:"ClipboardMini"}),(0,k.jsx)(l.default.Body2,{ml:"3",children:R.formatMessage({id:"action__paste"})})]}):null,j.includes("contact")?(0,k.jsxs)(o.default,{flex:"1",justifyContent:"center",alignItems:"center",py:"3",onPress:H,flexDirection:"row",children:[(0,k.jsx)(a.default,{size:20,name:"BookOpenMini"}),(0,k.jsx)(l.default.Body2,{ml:"3",children:R.formatMessage({id:"action__contact"})})]}):null,j.includes("scan")?(0,k.jsxs)(o.default,{flex:"1",justifyContent:"center",alignItems:"center",py:"3",onPress:F,flexDirection:"row",children:[(0,k.jsx)(a.default,{size:20,name:"ViewfinderCircleMini"}),(0,k.jsx)(l.default.Body2,{ml:"3",children:R.formatMessage({id:"action__scan"})})]}):null]})]}),T&&(0,k.jsx)(l.default.Body2,{mt:"8px",color:"text-subdued",children:T})]})}},609813:(e,t,n)=>{n.r(t),n.d(t,{AddressLabel:()=>S});var r=n(470310),o=n(256666),l=n(854787),a=n(968079),i=n(18861),u=n(301842),s=n.n(u),c=n(196234),d=n(459740),f=n(202784),p=n(783112),v=n(240634),h=n(945821),m=n(552322),g=["address","networkId","securityInfo","isAccount","isWatchAccount","accountLabel","addressBookLabel","walletId","isAddressBook","isContractAddress","isInscribeAddress","shouldCheckSecurity","isValidAddress","showValidAddressLabel","validAddressMessage","validAddressMessageProperty","labelStyle","labelProps","isLoading"];function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={honeypot_related_address:"badge__honeypot_related",phishing_activities:"badge__phishing",blackmail_activities:"badge__blackmail",stealing_attack:"badge__stealing_attack",fake_kyc:"badge__fake_kyc",malicious_mining_activities:"badge__malicious_mining",darkweb_transactions:"badge__darkweb_txns",cybercrime:"badge__cybercrime",money_laundering:"badge__money_laudering",financial_crime:"badge__financial_crime",blacklist_doubt:"badge__blacklist_doubt"};function S(e){var t,n=e.address,o=e.networkId,u=e.securityInfo,w=e.isAccount,S=e.isWatchAccount,O=e.accountLabel,k=e.addressBookLabel,_=e.walletId,A=e.isAddressBook,x=e.isContractAddress,j=e.isInscribeAddress,E=e.shouldCheckSecurity,C=e.isValidAddress,I=e.showValidAddressLabel,T=void 0!==I&&I,P=e.validAddressMessage,N=e.validAddressMessageProperty,R=e.labelStyle,M=e.labelProps,L=e.isLoading,D=(0,d.default)(e,g),W=(0,p.default)(),B=(0,f.useState)(!1),V=(0,c.default)(B,2),U=V[0],F=V[1],H=(0,f.useState)(O),z=(0,c.default)(H,2),$=z[0],K=z[1],Y=(0,f.useState)(),G=(0,c.default)(Y,2),q=G[0],X=G[1],Q=(0,f.useState)(k),J=(0,c.default)(Q,2),Z=J[0],ee=J[1],te=(0,f.useState)(!1),ne=(0,c.default)(te,2),re=ne[0],oe=ne[1],le=(0,f.useState)(!1),ae=(0,c.default)(le,2),ie=ae[0],ue=ae[1],se=(0,f.useState)(!1),ce=(0,c.default)(se,2),de=ce[0],fe=ce[1],pe=(0,f.useState)(!1),ve=(0,c.default)(pe,2),he=ve[0],me=ve[1],ge=(0,f.useState)(!1),we=(0,c.default)(ge,2),ye=we[0],be=we[1],Se=(0,f.useState)(!1),Oe=(0,c.default)(Se,2),ke=Oe[0],_e=Oe[1],Ae=(0,f.useState)(!1),xe=(0,c.default)(Ae,2),je=xe[0],Ee=xe[1],Ce=(0,f.useState)([]),Ie=(0,c.default)(Ce,2),Te=Ie[0],Pe=Ie[1],Ne=(0,f.useState)(!1),Re=(0,c.default)(Ne,2),Me=Re[0],Le=Re[1];(0,f.useEffect)((function(){s()(w)?(oe(!0),h.default.serviceAccount.getAddressLabel({address:n,networkId:o}).then((function(e){F(!!e.label),K(e.label),me(e.accountId.startsWith("watching--")),e.walletId&&h.default.engine.getWallet(e.walletId).then((function(e){return X(e)}))})).finally((function(){return oe(!1)}))):(F(w),K(O),s()(S)||me(S),_&&h.default.engine.getWallet(_).then((function(e){return X(e)}))),s()(A)?(fe(!0),h.default.serviceAddressbook.getItem({address:n}).then((function(e){ue(!!e),ee(null==e?void 0:e.name)})).finally((function(){return fe(!1)}))):(ue(A),ee(k)),s()(x)?o&&(_e(!0),h.default.validator.isContractAddress(o,n).then((function(e){return be(e)})).finally((function(){return _e(!1)}))):be(x)}),[_,O,n,k,w,A,x,S,o]),(0,f.useEffect)((function(){E&&(s()(u)?s()(u)&&o&&n&&(Le(!0),h.default.serviceToken.getAddressRiskyItems({address:n,networkId:o,apiName:v.GoPlusSupportApis.address_security}).then((function(e){return Pe(e.map((function(e){return{title:b[e],type:"critical"}})))})).finally((function(){return Le(!1)}))):Pe(u.map((function(e){return{title:b[e],type:"critical"}}))))}),[n,o,u,E]),(0,f.useEffect)((function(){T&&(s()(C)?o&&h.default.validator.validateAddress(o,n).then((function(){Ee(!0)})).catch((function(){return Ee(!1)})):Ee(C))}),[n,C,o,T]);var De=(0,f.useMemo)((function(){var e,t,n;return[U&&{title:null!=(e=null==q?void 0:q.name)?e:he?"form__watched_address":"form__my_account",type:"success",icon:null!=(t=null==q||null==(n=q.avatar)?void 0:n.emoji)?t:"\ud83d\udc64",desc:$},ie&&{title:"title__address_book",type:"info",icon:"\ud83d\udcd6",desc:Z},ye&&{title:"content__contract_address",type:"warning",icon:"\ud83d\udcdd"},j&&{title:"content__inscribe_address",type:"warning",icon:"\ud83d\udcdd"}].filter(Boolean)}),[$,null==q||null==(t=q.avatar)?void 0:t.emoji,null==q?void 0:q.name,Z,U,ie,ye,j,he]),We=(0,f.useMemo)((function(){var e;return[je&&!(U||ie||ye||(null!=(e=null==u?void 0:u.length)?e:0)>0||re||de||ke||Me)&&{title:P||"form__enter_recipient_address_valid",type:"default",icon:"\ud83d\udc4c",description:N}].filter(Boolean)}),[U,ie,ye,re,de,ke,Me,je,null==u?void 0:u.length,P,N]),Be=(0,f.useCallback)((function(e){var t=N&&"object"===typeof N?N:void 0;return e.icon?e.desc?`${e.icon} ${W.formatMessage({id:e.title},t)}: ${e.desc}`:`${e.icon} ${W.formatMessage({id:e.title},t)}`:e.desc?`${W.formatMessage({id:e.title},t)}: ${e.desc}`:`${W.formatMessage({id:e.title},t)}`}),[W,N]);return 0===Te.length&&0===De.length&&0===We.length?null:L?(0,m.jsx)(i.default,{height:"28px"}):(0,m.jsx)(r.default,y(y({space:1,flexWrap:"wrap"},D),{},{children:[].concat((0,a.default)(We),(0,a.default)(De),(0,a.default)(Te)).map((function(e){return(0,f.createElement)(i.default,y(y({},R),{},{key:e.title}),(0,m.jsx)(l.default,y({size:"sm",title:Be(e),type:e.type},M)))}))}))}},97450:(e,t,n)=>{n.r(t),n.d(t,{AppLock:()=>J,AppLockBypass:()=>Y,SkipAppLock:()=>G});var r=n(18861),o=n(208593),l=n(202784),a=n(213208),i=n(945821),u=n(884747),s=n(195212),c=n(793525),d=n(355231),f=n(671029),p=n(964295),v=n(859071),h=function(){var e=(0,l.useCallback)((function(){"active"===p.default.currentState&&i.default.serviceApp.refreshLastActivity()}),[]);return(0,v.useInterval)(e,5e3),(0,l.useEffect)(e,[]),null},m=n(783723),g=n(795116),w=n(321668),y=n(566147),b=n(435581),S=n(634795),O=n(539144),k=n(612210),_=n(170766),A=n(561220),x=n(10918),j=n(196234),E=n(783112),C=n(554295),I=n(901187),T=n(447325),P=n(239014),N=n(776553),R=n(7236),M=n(433996),L=n(669083),D=n(124241),W=n(597476),B=n(552322),V=function(){var e=(0,E.default)(),t=(0,v.useAppSelector)((function(e){return e.settings.enableWebAuthn})),n=(0,l.useCallback)((0,S.default)((function*(){(yield(0,D.webAuthenticate)())?i.default.serviceApp.webPureUnlock():L.default.show({title:e.formatMessage({id:"msg__unknown_error"})})})),[e]);return D.isContextSupportWebAuthn&&t?(0,B.jsx)(M.default,{size:"xl",name:"FingerPrintOutline",onPromise:n}):null};const U=function(e){var t=e.onOk,n=e.onNg,r=(0,v.useAppSelector)((function(e){return e.settings.enableLocalAuthentication}));return(0,v.useLocalAuthentication)().isOk&&r?(0,B.jsx)(W.default,{onOk:t,onNg:n}):(0,B.jsx)(V,{})};var F=function(){var e=(0,E.default)(),t=(0,l.useState)(""),n=(0,j.default)(t,2),o=n[0],a=n[1],u=(0,l.useState)(!1),s=(0,j.default)(u,2),c=s[0],d=s[1],f=(0,l.useCallback)((function(){return(0,R.showSplashScreen)(),i.default.serviceApp.resetApp()}),[]);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(r.default,{justifyContent:"center",alignItems:"center",pb:"10",children:(0,B.jsx)(A.default,{onPress:function(){return d(!0)},flexDirection:"row",py:"1.5",px:"2.5",children:(0,B.jsx)(x.default.CaptionStrong,{color:"interactive-default",mr:"2",children:e.formatMessage({id:"action__forget_password"})})})}),(0,B.jsx)(k.default,{visible:c,onClose:function(){return d(!1)},footerButtonProps:{primaryActionTranslationId:"action__delete",primaryActionProps:{type:"destructive",isDisabled:"RESET"!==o.toUpperCase(),onPromise:f}},contentProps:{iconType:"danger",title:e.formatMessage({id:"form__reset_app",defaultMessage:"Reset App"}),content:e.formatMessage({id:"modal__reset_app_desc"},{0:"RESET"}),input:(0,B.jsx)(r.default,{w:"full",mt:"4",children:(0,B.jsx)(_.default,{w:"full",value:o,placeholder:"RESET",onChangeText:function(e){return a(e.trim())}})})}})]})},H=function(){var e=(0,E.default)(),t=(0,O.default)(),n=t?"space-between":"center",o=t?"16":void 0,u=(0,l.useState)(""),s=(0,j.default)(u,2),c=s[0],d=s[1],f=(0,l.useState)(""),p=(0,j.default)(f,2),v=p[0],h=p[1];(0,P.useHtmlPreloadSplashLogoRemove)();var k=(0,l.useCallback)((function(e){d(e),h("")}),[]),_=(0,l.useCallback)(function(){var e=(0,S.default)((function*(e){var t=yield i.default.serviceApp.unlock(e);return t&&T.appUIEventBus.emit(T.AppUIEventBusNames.Unlocked),t}));return function(t){return e.apply(this,arguments)}}(),[]),A=(0,l.useCallback)((0,S.default)((function*(){var t=yield i.default.servicePassword.getBgSensitiveTextEncodeKey();(yield _((0,I.encodeSensitiveText)({key:t,text:c})))?(a.default.isNativeAndroid&&C.default.dismiss(),yield(0,N.wait)(500)):h(e.formatMessage({id:"msg__wrong_password",defaultMessage:"Wrong password."}))})),[_,c,e]),R=(0,l.useCallback)((function(e){_(e)}),[_]);return(0,B.jsx)(m.default,{children:(0,B.jsx)(g.default,{testID:"AppStateUnlock",w:"full",h:"full",bg:"background-default",children:(0,B.jsxs)(r.default,{maxW:"96",p:"8",w:"full",h:"full",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:n,position:"relative",children:[(0,B.jsxs)(r.default,{width:"full",py:o,children:[(0,B.jsxs)(r.default,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,B.jsx)(r.default,{minH:50,children:(0,B.jsx)(b.default,{name:"BrandLogoIllus",size:50})}),(0,B.jsx)(x.default.DisplayXLarge,{my:"2",children:"OneKey"}),(0,B.jsx)(x.default.Body1,{color:"text-subdued",children:e.formatMessage({id:"content__the_decentralized_web_awaits",defaultMessage:"The decentralized web awaits"})})]}),(0,B.jsxs)(r.default,{mt:"8",children:[(0,B.jsx)(y.default.PasswordInput,{value:c,onChangeText:k,onSubmitEditing:A}),v?(0,B.jsx)(y.default.FormErrorMessage,{message:v}):null,(0,B.jsx)(w.default,{size:"xl",isDisabled:!c,type:"primary",onPromise:A,mt:"7",children:e.formatMessage({id:"action__unlock",defaultMessage:"Unlock"})})]}),(0,B.jsx)(g.default,{mt:"8",children:(0,B.jsx)(U,{onOk:R})})]}),(0,B.jsx)(g.default,{position:t?"relative":"absolute",bottom:"0",children:(0,B.jsx)(F,{})})]})})})},z=n(747225),$=n(550441),K=n(887371),Y=function(){function e(){this.value=!1}var t=e.prototype;return t.isOK=function(){return this.value},t.bypass=function(){this.value=!0},t.release=function(){this.value=!1},t.runSync=function(e){if(!this.value){this.value=!0;try{return e()}finally{this.value=!1}}},t.runAsync=function(){var e=(0,S.default)((function*(e){if(!this.value){this.value=!0;try{return yield e()}finally{this.value=!1}}}));return function(t){return e.apply(this,arguments)}}(),(0,K.default)(e)}();Y.Singleton=new Y;var G=function(){return(0,l.useEffect)((function(){return Y.Singleton.bypass(),function(){Y.Singleton.release()}}),[]),null},q=function(){var e=(0,l.useCallback)((function(){Y.Singleton.isOK()||i.default.serviceApp.checkLockStatus()}),[]);return(0,$.useAppStateChange)(e),null},X=function(){var e=(0,z.useAppSelector)((function(e){return e.settings.enableAppLock})),t=(0,z.useAppSelector)((function(e){return e.data.isPasswordSet}));return e&&t?(0,B.jsx)(q,{}):null},Q=function(e){var t=e.children,n=e.renderAsOverlay,a=(0,u.useAppLock)(),i=a.showUnlockView,s=a.isPasswordSet,p=a.isUnlock;if(i&&!n)return(0,B.jsx)(H,{});var v=!(0,d.isPortalExisted)(c.FULLWINDOW_OVERLAY_PORTAL)&&i&&n?f.LazyDisplayView:l.Fragment;return(0,B.jsxs)(r.default,{w:"full",h:"full",testID:"AppLockView",children:[i&&n?(0,B.jsx)(v,{children:(0,B.jsx)(o.default,{children:(0,B.jsx)(H,{})})}):null,s&&p?(0,B.jsx)(X,{}):null,p?(0,B.jsx)(h,{}):null,t]})},J=function(e){var t=e.children,n=i.default.dispatch;return(0,l.useEffect)((function(){n((0,s.setAppRenderReady)())}),[n]),(0,B.jsx)(Q,{renderAsOverlay:!0,children:t})}},270225:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var r,o=n(634795),l=n(35116),a=n(447325),i=n(213208),u=n(380845),s=n(776553);function c(){return c=(0,o.default)((function*(e){var t,n;(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreExt;return yield(0,s.wait)(0),(null==(t=u.default.getState())||null==(n=t.status)?void 0:n.isUnlock)?e():new Promise((function(t){r=function(){var n=(0,o.default)((function*(){yield(0,s.wait)(600),t(yield e())}));return function(){return n.apply(this,arguments)}}(),i.default.isExtensionBackground?(r&&l.appEventBus.off(l.AppEventBusNames.Unlocked,r),l.appEventBus.once(l.AppEventBusNames.Unlocked,r)):(r&&a.appUIEventBus.off(a.AppUIEventBusNames.Unlocked,r),a.appUIEventBus.once(a.AppUIEventBusNames.Unlocked,r))}))})),c.apply(this,arguments)}const d={runAfterUnlock:function(e){return c.apply(this,arguments)}}},245927:(e,t,n)=>{n.r(t),n.d(t,{AppStatusActiveListener:()=>r});n(202784),n(213208),n(552322);var r=function(e){e.onActive;return null}},585665:(e,t,n)=>{n.r(t),n.d(t,{AutoSizeText:()=>l});var r=n(170766),o=n(552322),l=function(e){var t=e.text,n=e.onChangeText,l=e.placeholder,a=e.autoFocus;return(0,o.jsx)(r.default,{autoFocus:a,flex:1,height:"112",size:"xl",textAlign:"center",borderWidth:"0",fontSize:"40px",placeholder:l,placeholderTextColor:"text-disabled",focusOutlineColor:"transparent",lineHeight:"64px",fontWeight:"bold",bgColor:"transparent",onChangeText:n,value:t})}},174276:(e,t,n)=>{n.r(t),n.d(t,{ErrorBoundary:()=>c,ErrorBoundaryBase:()=>s});n(10918),n(321668);var r=n(887371),o=n(545754),l=n(411987),a=n(695058),i=n(202784);n(213208),n(552322);function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.default)(e);if(t){var o=(0,a.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}var s=function(e){(0,o.default)(n,e);var t=u(n);function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={error:null},e}var l=n.prototype;return l.componentDidCatch=function(e,t){var n;null==(n=this.props)||null==n.onError||n.onError(e,(null==t?void 0:t.componentStack)||null),this.setState({error:e})},l.render=function(){return this.props.children},(0,r.default)(n)}(i.PureComponent),c=function(e){(0,o.default)(n,e);var t=u(n);function n(){return t.apply(this,arguments)}return n.prototype.render=function(){return this.props.children},(0,r.default)(n)}(s)},324639:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var r=n(256666),o=n(566147),l=n(196234),a=n(539144),i=n(459740),u=n(202784),s=n(783112),c=n(849877),d=n(859071),f=n(747225),p=n(942013),v=n(552322),h=["selectableNetworks","networkId","hideHelpText","disabledNetworkIds"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const w=function(e){var t=e.selectableNetworks,n=e.networkId,r=e.hideHelpText,m=void 0!==r&&r,w=e.disabledNetworkIds,y=(0,i.default)(e,h),b=(0,s.default)(),S=(0,d.useManageNetworks)(void 0).enabledNetworks,O=(0,f.useGeneral)().activeNetworkId,k=(0,a.default)(),_=(null!=n?n:(0,c.isAllNetworks)(O))?p.OnekeyNetwork.eth:O;if("undefined"!==typeof t&&("undefined"===typeof O||!t.includes(null!=O?O:""))){var A=(0,l.default)(t,1);_=A[0]}var x=(0,u.useMemo)((function(){return S?S.filter((function(e){return(null==w||!w.includes(null==e?void 0:e.id))&&("undefined"===typeof t||t.includes(e.id))})).map((function(e){return{label:e.shortName,value:e.id,tokenProps:{token:{logoURI:null==e?void 0:e.logoURI,name:null==e?void 0:e.shortName}},badge:"evm"===e.impl?"EVM":void 0}})):[]}),[S,t,w]),j=(0,u.useCallback)((function(e){if(!S)return null;var t=null;return S.forEach((function(n){n.id===e&&(t=n)})),t}),[S]);return(0,v.jsx)(o.default.Item,g(g({label:b.formatMessage({id:"network__network"}),helpText:m?void 0:function(){var e,t=j(arguments.length>0&&void 0!==arguments[0]?arguments[0]:_);return b.formatMessage({id:"form__network_helperText"},{impl:null!=(e=null==t?void 0:t.impl)?e:"-"})},defaultValue:_},y),{},{children:(0,v.jsx)(o.default.Select,{title:b.formatMessage({id:"network__network"}),footer:null,triggerSize:k?"xl":"default",options:x,headerShown:!1,dropdownProps:k?void 0:{maxHeight:"272px"},dropdownPosition:"right"})}))}},534159:(e,t,n)=>{n.r(t),n.d(t,{FormatBalance:()=>E,FormatBalanceToken:()=>I,FormatBalanceTokenOfAccount:()=>C,FormatCurrency:()=>k,FormatCurrencyNative:()=>j,FormatCurrencyNativeOfAccount:()=>x,FormatCurrencyNumber:()=>T,FormatCurrencyToken:()=>A,FormatCurrencyTokenOfAccount:()=>_,formatBalanceDisplay:()=>S,formatNumber:()=>b,useFormatAmount:()=>O});var r=n(866904),o=n(256666),l=n(301842),a=n.n(l),i=n(196234),u=n(202784),s=n(206391),c=n.n(s),d=n(815749),f=n(859071),p=n(920453),v=n(840248),h=n(516535),m=n(552322);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=new(c())(e);if(t.unit&&(n=n.div(`1${"0".repeat(t.unit)}`)),!n.isFinite())return null;var r=function(){var e,t,n;return null!=(e=null==(t=c().config(void 0))||null==(n=t.FORMAT)?void 0:n.decimalSeparator)?e:""}(),o=("number"===typeof t.fixed?t.fullPrecision?n.toFormat(t.fixed,c().ROUND_FLOOR):n.decimalPlaces(t.fixed,c().ROUND_FLOOR).toFormat():n.toFormat()).split(r),l=(0,i.default)(o,2);return{int:l[0],dec:l[1],sep:r}}catch(a){return null}}function b(e,t){var n=y(e,t);return n?void 0===n.dec?`${n.int}`:`${n.int}${n.sep}${n.dec}`:null}function S(e,t,n){var r,o,l=n||{},i=l.unit,u=l.fixed,s=l.fullPrecision,c=t?t.toUpperCase().trim():void 0;c&&c.length>(null!=(r=null==n?void 0:n.unitMaxLength)?r:20)&&(c=`${c.slice(0,null!=(o=null==n?void 0:n.unitMaxLength)?o:11)}...`);return a()(e)?{amount:void 0,unit:c}:{amount:b(e,{unit:i,fixed:u,fullPrecision:s})||"0",unit:c}}function O(){return{useFormatCurrencyDisplay:function(e,t){var n,r,o=(0,f.useSettings)().selectedFiatMoneySymbol,l=void 0===o?"usd":o,a=null!=(n=null==(r=(0,f.useAppSelector)((function(e){return e.fiatMoney.map}))[l])?void 0:r.unit)?n:"",i=(0,u.useMemo)((function(){var t=new(c())(1);if(!t.isNaN())return e.reduce((function(e,t){if(void 0===t||void 0===e)return e;var n=new(c())(null!=e?e:"0"),r=new(c())(null!=t?t:"0");return n.multipliedBy(r)}),t)}),[1,e]);return(0,u.useMemo)((function(){return void 0===i||"0"===i?{amount:void 0,unit:void 0}:{amount:b(i,w({fixed:"btc"===l?8:2,fullPrecision:!0},t))||"0",unit:a}}),[i,t,l,a])},useFormatBalanceDisplay:function(e,t,n){return(0,u.useMemo)((function(){return S(e,t,n)}),[e,n,t])}}}c().config({DECIMAL_PLACES:25});var k=function(e){var t=e.numbers,n=e.formatOptions,o=void 0===n?{}:n,l=e.as,a=void 0===l?r.default:l,i=e.render,s=(0,O().useFormatCurrencyDisplay)(t,o),c=(0,u.useMemo)((function(){var e;return"sats"===(null==(e=s.unit)?void 0:e.toLowerCase())?(0,m.jsxs)(m.Fragment,{children:[t.length?s.amount:"--",` ${s.unit}`]}):(0,m.jsxs)(m.Fragment,{children:[s.unit,t.length?s.amount:"--"]})}),[s.amount,s.unit,t.length]);if(i)return null==i?void 0:i(c);var d=a;return(0,m.jsx)(d,{children:c})};function _(e){var t=e.token,n=e.value,r=e.formatOptions,o=void 0===r?{}:r,l=e.as,a=e.render,i=e.networkId,u=(0,p.useSimpleTokenPriceValue)({networkId:i,contractAdress:null==t?void 0:t.tokenIdOnNetwork}),s=void 0===u||null===u;return(0,m.jsx)(k,{numbers:s?[]:[u,n,n?1:void 0],render:a,formatOptions:o,as:l})}function A(e){var t=(0,f.useActiveWalletAccount)(),n=t.accountId,r=t.networkId;return(0,m.jsx)(_,w(w({},e),{},{accountId:n,networkId:r}))}function x(e){var t=e.value,n=e.formatOptions,r=void 0===n?{}:n,o=e.as,l=e.render,a=e.accountId,i=e.networkId;return(0,m.jsx)(_,{accountId:a,networkId:i,token:null,value:t,formatOptions:r,render:l,as:o})}function j(e){var t=(0,f.useActiveWalletAccount)(),n=t.accountId,r=t.networkId;return(0,m.jsx)(x,w(w({},e),{},{accountId:n,networkId:r}))}var E=function(e){var t=e.balance,n=e.formatOptions,o=void 0===n?{}:n,l=e.as,a=void 0===l?r.default:l,i=e.render,s=e.suffix,c=(0,O().useFormatBalanceDisplay)(t,s,o),d=(0,u.useMemo)((function(){return(0,m.jsxs)(m.Fragment,{children:[c.amount,null!=c&&c.unit?` ${null==c?void 0:c.unit}`:null]})}),[c.amount,null==c?void 0:c.unit]);if(i)return null==i?void 0:i(d);var f=a;return(0,m.jsx)(f,{numberOfLines:1,children:d})};function C(e){var t,n=e.token,o=e.render,l=e.accountId,a=e.networkId,i=e.useRecycleBalance,u=e.useCustomAddressesBalance,s=(0,f.useTokenBalanceWithoutFrozen)({networkId:a,accountId:l,token:n,fallback:"0",useRecycleBalance:null==(t=null!=i?i:null==n?void 0:n.isNative)||t,useCustomAddressesBalance:u}),c=(0,f.useActiveSideAccount)({accountId:l,networkId:a}).network,d=!(null!=n&&n.tokenIdOnNetwork)?null==c?void 0:c.nativeDisplayDecimals:null==c?void 0:c.tokenDisplayDecimals;return(0,m.jsx)(E,{balance:s,suffix:null==n?void 0:n.symbol,formatOptions:{fixed:null!=d?d:4},render:null!=o?o:function(e){return(0,m.jsx)(r.default,{typography:{sm:"Body1Strong",md:"Body2Strong"},children:e})}})}function I(e){var t=e.token,n=e.render,r=(0,f.useActiveWalletAccount)(),o=r.networkId,l=r.accountId;return(0,m.jsx)(C,{token:t,render:n,accountId:l,networkId:o})}function T(e){var t,n,r=e.decimals,o=e.value,l=e.onlyNumber,a=e.convertValue,i=(0,f.useSettings)().selectedFiatMoneySymbol,u=void 0===i?"usd":i,s=(0,f.useAppSelector)((function(e){return e.fiatMoney.map}));if("number"!==typeof o&&!(o instanceof c()))return null;var p=(null==(t=s[u])?void 0:t.value)||0,g=(null==(n=s[u])?void 0:n.unit)||"",w=null!=r?r:(0,v.getSuggestedDecimals)(o instanceof c()?o.toNumber():o),y=(o instanceof c()?o.toNumber():o)+(a?new(c())(p).multipliedBy(a).toNumber():0);return"sats"===g.toLowerCase()?(0,m.jsxs)(m.Fragment,{children:[y<.01?`${(0,h.formatDecimalZero)(y)}`:(0,m.jsx)(d.FormattedNumber,{value:null!=y?y:0,style:"decimal",minimumFractionDigits:2,maximumFractionDigits:w}),` ${l?"":g}`]}):(0,m.jsxs)(m.Fragment,{children:[`${l?"":g}`,y<.01?`${(0,h.formatDecimalZero)(y)}`:(0,m.jsx)(d.FormattedNumber,{value:null!=y?y:0,style:"decimal",minimumFractionDigits:2,maximumFractionDigits:w})]})}},419246:(e,t,n)=>{n.r(t),n.d(t,{GridList:()=>m});var r=n(25655),o=n(256666),l=n(196234),a=n(459740),i=n(202784),u=n(972584),s=n(552322),c=["gridLayout","data","renderItem"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=112,v=3,h=8;function m(e){var t,n,o,d=e.gridLayout,m=e.data,g=e.renderItem,w=(0,a.default)(e,c),y=(0,i.useState)(0),b=(0,l.default)(y,2),S=b[0],O=b[1],k=(0,u.useGridListLayout)({maxCardWidth:null!=(t=null==d?void 0:d.maxCardWidth)?t:p,numColumns:null!=(n=null==d?void 0:d.numColumns)?n:v,margin:null!=(o=null==d?void 0:d.margin)?o:h,pageWidth:S}),_=k.cardWidth,A=k.numColumns,x=(0,i.useCallback)((function(e){return g(f(f({},e),{},{cardWidth:_}))}),[_,g]);return(0,s.jsx)(r.default,f({onLayout:function(e){S!==e.nativeEvent.layout.width&&O(e.nativeEvent.layout.width)},numColumns:A,data:m,renderItem:x,showsVerticalScrollIndicator:!1,padding:0},w),A)}},671029:(e,t,n)=>{n.r(t),n.d(t,{LazyDisplayView:()=>l,LazyLoadingDisplayView:()=>a});n(795116),n(719392);var r=n(196234),o=n(202784);n(213208),n(552322);function l(e){var t=e.delay,n=void 0===t?0:t,l=e.hideOnUnmount,a=void 0!==l&&l,i=e.children,u=e.isLazyDisabled,s=void 0!==u&&u,c=e.defaultView,d=void 0===c?null:c,f=(0,o.useState)(d),p=(0,r.default)(f,2),v=p[0],h=p[1];return(0,o.useEffect)((function(){if(!s){var e=setTimeout((function(){return h(i)}),n);return function(){clearTimeout(e),a&&h(null)}}}),[i,n,a,s]),s?i:v}function a(e){var t=e.children,n=void 0===t?null:t;e.delay;return n}},597476:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var r=n(859071),o=n(433996),l=n(669083),a=n(634795),i=n(196234),u=n(202784),s=n(783112),c=n(945821),d=n(747225),f=n(245927),p=n(552322);const v=function(e){var t=e.onOk,n=e.onNg,v=(0,s.default)(),h=(0,u.useState)(!1),m=(0,i.default)(h,2),g=m[0],w=m[1],y=(0,u.useRef)(!1),b=(0,u.useRef)(0),S=(0,d.useAppSelector)((function(e){return e.status.authenticationType})),O=(0,d.useAppSelector)((function(e){return e.data.handOperatedLock})),k=(0,r.useLocalAuthentication)(),_=k.localAuthenticate,A=k.getPassword,x=(0,u.useCallback)((0,a.default)((function*(){if(!y.current){y.current=!0,w(!0);try{var e=yield _();if(e.success){var r=yield A();if(r)if(yield c.default.serviceApp.verifyPassword(r))return void(null==t||t(r))}else{e.error.includes("cancelled")||l.default.show({title:v.formatMessage({id:"msg__verification_failure"})},{type:"error"}),null==n||n()}}finally{y.current=!1,w(!1)}}})),[t,n,_,A,v]);(0,u.useLayoutEffect)((function(){O||setTimeout(x,500)}),[]);var j=(0,u.useCallback)((function(){var e=Date.now();e-b.current>1e3&&(b.current=e,x())}),[x]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.default,{isLoading:g,size:"xl",name:"FACIAL"===S?"FaceIdOutline":"FingerPrintOutline",onPress:x}),(0,p.jsx)(f.AppStatusActiveListener,{onActive:j})]})};const h=function(e){var t=e.onOk,n=e.onNg,o=(0,r.useAppSelector)((function(e){return e.settings.enableLocalAuthentication}));return(0,r.useLocalAuthentication)().isOk&&o?(0,p.jsx)(v,{onOk:t,onNg:n}):null}},28580:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var r=n(18861),o=n(795116),l=n(561220),a=n(435581),i=n(719392),u=n(550398),s=n(634795),c=n(196234),d=n(202784),f=n(696884),p=n(552322);const v=function(e){var t=e.url,n=e.size,v=e.poster,h=(0,d.useState)(null),m=(0,c.default)(h,2),g=m[0],w=m[1],y=(0,d.useState)(),b=(0,c.default)(y,2),S=b[0],O=b[1],k=(0,d.useState)(null),_=(0,c.default)(k,2),A=_[0],x=_[1];function j(){return(j=(0,s.default)((function*(){if(t)if(null===g){var e=yield f.Sound.createAsync({uri:t}),n=e.sound,r=e.status;w(n),O(r),yield n.playAsync(),x(!0)}else null!=S&&S.isLoaded&&!A&&(yield g.playAsync(),x(!0))}))).apply(this,arguments)}function E(){return(E=(0,s.default)((function*(){g&&null!=S&&S.isLoaded&&A&&(yield g.pauseAsync(),x(!1))}))).apply(this,arguments)}var C=(0,d.useCallback)((0,s.default)((function*(){if(null===g&&t){var e=yield f.Sound.createAsync({uri:t}),n=e.sound,r=e.status;w(n),O(r),x(!1)}})),[t,g]);return(0,d.useEffect)((function(){C()}),[C]),(0,d.useEffect)((function(){return function(){g&&g.stopAsync()}}),[g]),(0,p.jsxs)(r.default,{size:`${n}px`,children:[(0,p.jsx)(u.default,{src:v,width:n,height:n}),(0,p.jsx)(o.default,{position:"absolute",bottom:0,right:0,size:"96px",children:null===A?(0,p.jsx)(i.default,{size:"sm"}):(0,p.jsx)(l.default,{onPress:function(){A?function(){E.apply(this,arguments)}():function(){j.apply(this,arguments)}()},children:(0,p.jsx)(a.default,{name:A?"PauseMini":"PlayMini",size:53,color:"text-on-primary"})})})]})}},348711:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var r=n(256666),o=n(634795),l=n(459740),a=n(202784),i=n(550398),u=n(790656),s=n(552322),c=["nftSource"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const p=function(e){var t,n=e.nftSource,r=(0,l.default)(e,c),d=null!=(t=r.url)?t:r.s3Url,p=(0,a.useCallback)((0,o.default)((function*(){return(0,u.syncImage)({contractAddress:n.contractAddress,tokenId:n.tokenId,imageURI:null==n?void 0:n.url})})),[n]);return(0,s.jsx)(i.default,f(f({},r),{},{src:d,onErrorWithTask:r.s3Url?p:void 0}))}},502348:(e,t,n)=>{n.r(t),n.d(t,{MemoFallbackElement:()=>m});var r=n(256666),o=n(795116),l=n(435581),a=n(18861),i=n(550398),u=n(225447),s=n(333665),c=n(202784),d=n(566319),f=n(733712),p=n(552322);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=(0,c.memo)((function(e){var t=Object.assign({},((0,s.default)(e),e)),n=t.contentType,r=t.size,c=t.logoUrl,v=r*(72/155),m=(null==n?void 0:n.startsWith("audio"))||(null==n?void 0:n.startsWith("video"));return(0,p.jsxs)(o.default,h(h({},t),{},{size:`${r}px`,overflow:"hidden",children:[(0,p.jsx)(u.default,{position:"absolute",size:`${r}px`,source:f}),(0,p.jsx)(a.default,{size:`${v}px`,overflow:"hidden",borderRadius:v/2+"px",children:c?(0,p.jsx)(i.default,{width:`${v}px`,height:`${v}px`,borderRadius:v/2+"px",src:c}):(0,p.jsx)(u.default,{width:`${v}px`,height:`${v}px`,borderRadius:v/2+"px",source:d})}),m?(0,p.jsx)(a.default,{position:"absolute",bottom:r*(28/256)+"px",right:r*(28/256)+"px",children:(0,p.jsx)(l.default,{name:"PlayMini",size:.125*r,color:"text-on-primary"})}):null]}))}))},298711:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var r=n(256666),o=n(795116),l=n(225447),a=n(550398),i=n(333665),u=n(552322);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var c=function(e){var t=Object.assign({},((0,i.default)(e),e)),n=t.url,r=t.size,s=!(null!=n&&n.startsWith("data:image/svg+xml"));return(0,u.jsx)(o.default,{size:r,borderRadius:"20px",overflow:"hidden",children:s?(0,u.jsx)(a.default,{width:`${r}px`,height:`${r}px`,resizeMode:"contain",skeleton:!0,src:n}):(0,u.jsx)(l.default,{width:`${r}px`,height:`${r}px`,resizeMode:"contain",source:{uri:n}})})};const d=function(e){var t=Object.assign({},((0,i.default)(e),e));return(0,u.jsx)(c,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))}},449708:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var r=n(18861),o=n(280960),l=n(552322);const a=function(e){var t=e.url,n=e.size;return(0,l.jsx)(r.default,{size:`${n}px`,children:(0,l.jsx)(o.default,{width:n,height:n,url:t,loop:!0,playing:!0,controls:!0,muted:!0})})}},79722:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k,useNameServiceStatus:()=>O});var r=n(719392),o=n(328012),l=n(435581),a=n(10918),i=n(634795),u=n(539144),s=n(196234),c=n(256666),d=n(18861),f=n(459740),p=n(202784),v=n(783112),h=n(945821),m=n(859071),g=n(552322),w=["children"];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(e){var t=e.children,n=(0,f.default)(e,w);return(0,g.jsx)(d.default,b(b({flexDirection:"row",alignSelf:"stretch",px:"12px",py:"8px",rounded:"12px",bgColor:"action-secondary-default",borderWidth:1,borderColor:"border-default"},n),{},{children:t}))},O=function(){var e=(0,p.useState)(),t=(0,s.default)(e,2),n=t[0],r=t[1],o=(0,p.useMemo)((function(){return!(null==n||!n.isValidName)&&(!(null==n||!n.isSearching)||(!(null==n||!n.errorMessage)||void 0))}),[null==n?void 0:n.isSearching,null==n?void 0:n.isValidName,null==n?void 0:n.errorMessage]);return(0,p.useMemo)((function(){return{onChange:r,address:null==n?void 0:n.activeAddress,disableSubmitBtn:o,name:null==n?void 0:n.name,isSearching:null==n?void 0:n.isSearching,isValid:null==n?void 0:n.isValidName}}),[null==n?void 0:n.activeAddress,null==n?void 0:n.name,null==n?void 0:n.isSearching,null==n?void 0:n.isValidName,o])};const k=(0,p.memo)((function(e){var t,n=e.name,c=e.onChange,f=e.disableBTC,w=e.networkId,y=e.disable,O=void 0!==y&&y,k=(0,m.useDebounce)(n,500),_=(0,u.default)(),A=(0,v.default)(),x=h.default.serviceNameResolver,j=(0,p.useState)({isSearching:!1,isValidName:!1,length:0,options:[],activeAddress:"",shownSymbol:"",name:""}),E=(0,s.default)(j,2),C=E[0],I=E[1],T=(0,p.useCallback)((function(e){I((function(t){var n=e(t);return null==c||c(n),n}))}),[c,I]),P=(0,p.useCallback)(function(){var e=(0,i.default)((function*(e){var t=yield x.checkIsValidName(e,w);return T((function(e){return b(b({},e),{},{isValidName:t,activeAddress:"",name:""})})),t}));return function(t){return e.apply(this,arguments)}}(),[w,x,T]),N=(0,p.useCallback)((0,i.default)((function*(){T((function(e){return b(b({},e),{},{isSearching:!0,options:[],errorMessage:""})}));try{var e=yield x.resolveName(k,{disableBTC:f,networkId:w}),t=e.success,n=e.names,r=e.message,o=e.length,l=e.shownSymbol;if(t){var a,i,u,s,c=(null!=(a=null==n||null==(i=n[0])||null==(u=i.options)||null==(s=u[0])?void 0:s.value)?a:"").split("-")[1];T((function(e){var t,r,a;return b(b({},e),{},{length:o,options:n,activeAddress:null!=c?c:"",shownSymbol:l,name:null!=(t=null==k||null==(r=k.split("."))||null==(a=r.slice(0,-1))?void 0:a.join("."))?t:""})}))}else T((function(e){return b(b({},e),{},{options:[],shownSymbol:l,activeAddress:"",name:"",errorMessage:r})}))}catch(d){}finally{T((function(e){return b(b({},e),{},{isSearching:!1})}))}})),[x,k,T,f,w]);if((0,p.useEffect)((function(){O||P(k)}),[k,P,O]),(0,p.useEffect)((function(){O||C.isValidName&&N()}),[N,C.isValidName,k,O]),O)return null;if(null==C||!C.isValidName)return null;if(null!=C&&C.errorMessage)return(0,g.jsx)(a.default.Body1,{color:"action-critical-default",children:A.formatMessage({id:null==C?void 0:C.errorMessage},{0:null==C?void 0:C.shownSymbol})});if(null!=C&&null!=(t=C.options)&&t.length){var R,M,L,D,W,B,V,U=null!=(R=C.options)?R:[],F=null!=(M=null==U||null==(L=U[0])||null==(D=L.options)||null==(W=D[0])?void 0:W.value)?M:"",H=null==U||null==(B=U[0])?void 0:B.title,z=null==C?void 0:C.length;return Number(z)<=1?(0,g.jsxs)(S,{children:[(0,g.jsx)(a.default.Body2Strong,{mr:"12px",color:"text-subdued",children:null!=H?H:"-"}),(0,g.jsx)(a.default.Body2,{flex:1,wordBreak:"break-all",color:"text-default",children:null!=(V=null==C?void 0:C.activeAddress)?V:"-"})]}):(0,g.jsx)(o.default,{defaultValue:F,onChange:function(e){var t=e.split("-")[1];T((function(e){return b(b({},e),{},{activeAddress:t})}))},title:A.formatMessage({id:"message__choose_address"}),headerShown:!!_,renderTrigger:function(e){var t,n=e.activeOption,r=e.isHovered,o=e.isPressed,i=e.visible,u=U.find((function(e){return!!e.options.find((function(e){return e.value===n.value}))})),s=n.value.split("-")[1];return(0,g.jsxs)(S,{bgColor:r?"action-secondary-hovered":o?"action-secondary-pressed":i?"surface-selected":"action-secondary-default",children:[(0,g.jsx)(a.default.Body2Strong,{mr:"12px",color:"text-subdued",children:null!=(t=null==u?void 0:u.title)?t:"-"}),(0,g.jsx)(a.default.Body2,{flex:1,wordBreak:"break-all",color:"text-default",children:s}),(0,g.jsx)(d.default,{ml:"12px",children:(0,g.jsx)(l.default,{name:"ChevronDownMini",color:"icon-subdued",size:20})})]})},dropdownPosition:"left",dropdownProps:{height:_?"70%":"240px"},footer:null,options:U})}return(0,g.jsxs)(d.default,{py:"8px",flexDirection:"row",children:[(0,g.jsx)(r.default,{size:"sm"}),(0,g.jsx)(a.default.Body2,{ml:"12px",color:"text-subdued",children:A.formatMessage({id:"message__fetching_addresses"})})]})}))},794953:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(795116),o=n(202784),l=n(783112),a=n(612210),i=n(435581),u=n(670165),s=n(627009),c=n(552322),d=function(e){var t=e.onClose,n=e.update,d=e.version,f=(0,l.default)(),p=(0,o.useMemo)((function(){return n?(0,c.jsx)(r.default,{p:3,rounded:"full",bgColor:"surface-warning-default",children:(0,c.jsx)(i.default,{name:"UploadOutline",color:"icon-warning",size:24})}):(0,c.jsx)(i.default,{name:"ExclamationTriangleOutline",size:48})}),[n]),v=(0,o.useMemo)((function(){return n?"title__requires_updating_of_onekey_bridge":"modal__need_install_onekey_bridge"}),[n]),h=(0,o.useMemo)((function(){return n?"content__onekey_bridge_str_is_now_available_do_you_want_to_download":"modal__need_install_onekey_bridge_desc"}),[n]);return(0,c.jsx)(a.default,{visible:!0,onClose:t,contentProps:{icon:p,title:f.formatMessage({id:v}),content:f.formatMessage({id:h},n?{0:null!=d?d:""}:void 0)},footerButtonProps:{primaryActionTranslationId:"action__download",onPrimaryActionPress:function(e){var t=e.onClose;(0,s.openUrlExternal)(u.HARDWARE_BRIDGE_DOWNLOAD_URL),null==t||t()}}})};d.displayName="NeedBridgeDialog";const f=d},381815:(e,t,n)=>{n.r(t),n.d(t,{ACCOUNT_SELECTOR_AUTO_SCROLL_DELAY_ACCOUNT:()=>w,ACCOUNT_SELECTOR_AUTO_SCROLL_DELAY_WALLET:()=>y,ACCOUNT_SELECTOR_CHANGE_ACCOUNT_CLOSE_DRAWER_DELAY:()=>v,ACCOUNT_SELECTOR_EMPTY_VIEW_SELECTED_WALLET_DEBOUNCED:()=>m,ACCOUNT_SELECTOR_EMPTY_VIEW_SHOW_DELAY:()=>g,ACCOUNT_SELECTOR_IS_CLOSE_RESET_DELAY:()=>d,ACCOUNT_SELECTOR_IS_OPEN_REFRESH_DELAY:()=>f,ACCOUNT_SELECTOR_IS_OPEN_VISIBLE_DELAY:()=>p,ACCOUNT_SELECTOR_PRE_FRESH_BEFORE_OPEN:()=>h,ACCOUNT_SELECTOR_REFRESH_DEBOUNCE:()=>c,MONERO_GUI_URL:()=>o,WALLET_SELECTOR_DESKTOP_ACTION_DELAY_AFTER_CLOSE:()=>b});var r=n(213208),o="https://www.getmonero.org/downloads/",l=0,a=300,i=200,u=500,s=!1;r.default.isNativeIOS&&(l=0,a=0,i=0,u=0,s=!0);var c=300,d=l,f=a,p=a+300+i,v=u,h=s,m=0,g=200,w=300,y=300,b=300},68132:(e,t,n)=>{n.r(t),n.d(t,{useAccountSelectorChangeAccountOnPress:()=>g});var r=n(634795),o=n(539144),l=n(202784),a=n(749888),i=n(447325),u=n(292147),s=n(945821),c=n(859071),d=n(493877),f=n(481047),p=n(379573),v=n(776553),h=n(381815),m=p.default.actions.updateIsRefreshDisabled;function g(){var e=(0,a.default)(),t=(0,c.useNavigationActions)().closeWalletSelector,n=(0,d.default)(),g=(0,o.default)(),w=(0,l.useCallback)(function(){var o=(0,r.default)((function*(r){var o=r.accountId,l=r.networkId,a=r.walletId,c=r.accountSelectorMode,d=s.default.dispatch,w=s.default.serviceNetwork,y=s.default.serviceAccount,b=s.default.serviceAccountSelector;if(e(),t(),yield(0,v.wait)(0),c!==p.EAccountSelectorMode.Transfer){if(c===p.EAccountSelectorMode.Wallet){d(m(!0));try{g&&(yield(0,v.wait)(h.ACCOUNT_SELECTOR_CHANGE_ACCOUNT_CLOSE_DRAWER_DELAY)),l&&(yield w.changeActiveNetwork(l)),o&&(yield y.changeActiveAccount({accountId:o||"",walletId:null!=a?a:""})),yield b.setSelectedWalletToActive(),i.appUIEventBus.emit(i.AppUIEventBusNames.AccountChanged)}catch(S){u.default.common.error("onPressChangeAccount ERROR: ",S)}finally{yield(0,v.wait)(100),d(m(!1))}}}else n.navigate(f.RootRoutes.Modal,{screen:f.ModalRoutes.Send,params:{screen:f.SendModalRoutes.PreSendToken,params:{accountId:o||"",networkId:l||"",from:"",to:"",amount:""}}})}));return function(e){return o.apply(this,arguments)}}(),[e,t,g,n]);return{onPressChangeAccount:w}}},717073:(e,t,n)=>{n.r(t),n.d(t,{useAccountSelectorInfo:()=>d});var r=n(539144),o=n(202784),l=n(945821),a=n(859071),i=n(747225),u=n(759275),s=n(381815),c=n(240061);function d(){var e=l.default.engine,t=(0,r.default)(),n=(0,a.useAppSelector)((function(e){return e.accountSelector})),d=n.networkId,f=n.walletId,p=n.accountsGroup,v=n.isLoading,h=n.preloadingCreateAccount,m=n.isOpenDelay,g=n.isOpen,w=n.accountSelectorMode,y=(0,a.useDebounce)(g,t?s.ACCOUNT_SELECTOR_IS_OPEN_VISIBLE_DELAY:s.ACCOUNT_SELECTOR_EMPTY_VIEW_SHOW_DELAY+100),b=(0,a.usePrevious)(g),S=!b&&g,O=b&&!g,k=(0,i.useRuntimeWallets)().wallets,_=(0,a.useManageNetworks)(void 0).enabledNetworks,A=(0,c.useDeviceStatusOfHardwareWallet)().devicesStatus,x=(0,a.useActiveWalletAccount)(),j=x.account,E=x.wallet,C=x.network,I=(0,o.useRef)(j);I.current=j;var T=(0,o.useRef)(E);T.current=E;var P=(0,o.useRef)(C);P.current=C;var N=(0,a.useAppSelector)((function(e){return e.refresher.refreshAccountSelectorTs})),R=d,M=f,L=(0,o.useCallback)((function(){}),[]),D=(0,u.usePromiseResult)((function(){return f?e.getWalletSafe(f):Promise.resolve(null)}),[e,f,k]).result,W=(0,u.usePromiseResult)((function(){return d?e.getNetworkSafe(d):Promise.resolve(null)}),[d,e,_]).result,B=(0,u.usePromiseResult)((function(){return d?e.getVaultSettings(d):Promise.resolve(null)}),[d,e,_]).result,V=(0,o.useMemo)((function(){if(null==p||!p.length)return!0;var e=0;return p.forEach((function(t){var n;return e+=(null==t||null==(n=t.data)?void 0:n.length)||0})),e<=0}),[p]);return(0,o.useMemo)((function(){return{wallets:k,refreshAccountSelectorTs:N,devicesStatus:A,isOpenFromClose:S,isCloseFromOpen:O,isOpenDelay:m,isOpenDelayForShow:y,isOpen:g,selectedNetwork:W,selectedNetworkId:R,selectedNetworkSettings:B,selectedWallet:D,selectedWalletId:M,accountsGroup:p,isLoading:v,isAccountsGroupEmpty:V,preloadingCreateAccount:h,refreshAccounts:L,activeAccount:j,activeWallet:E,activeNetwork:C,activeAccountRef:I,activeNetworkRef:P,activeWalletRef:T,accountSelectorMode:w}}),[k,N,A,S,O,m,y,g,W,R,B,D,M,p,v,V,h,L,j,E,C,w])}},659781:(e,t,n)=>{n.r(t),n.d(t,{useAccountSelectorModalInfo:()=>f});var r=n(202784),o=n(213208),l=n(945821),a=n(379573),i=n(381815),u=n(717073),s=a.default.actions,c=s.updateIsOpenDelay,d=s.updateIsOpen;function f(){var e=l.default.dispatch,t=(0,r.useRef)(!1);(0,r.useEffect)((function(){return setTimeout((function(){t.current=!0,e(d(!0))}),50),setTimeout((function(){e(c(!0))}),i.ACCOUNT_SELECTOR_IS_OPEN_REFRESH_DELAY),function(){setTimeout((function(){t.current=!1,e(d(!1))}),50),setTimeout((function(){e(c(!1))}),i.ACCOUNT_SELECTOR_IS_OPEN_REFRESH_DELAY)}}),[e]);var n=(0,u.useAccountSelectorInfo)(),a=!0;return!n.isOpenDelay&&o.default.isNativeAndroid&&(a=!1),{accountSelectorInfo:n,shouldShowModal:a}}},722363:(e,t,n)=>{n.r(t),n.d(t,{AllNetwork:()=>g,NETWORK_NOT_SUPPORT_CREATE_ACCOUNT_I18N_KEY:()=>w,useCreateAccountInWallet:()=>y});var r=n(669083),o=n(634795),l=n(202784),a=n(783112),i=n(849877),u=n(292147),s=n(945821),c=n(493877),d=n(759275),f=n(481047),p=n(432986),v=n(752425),h=n(526002),m=n(486756),g="all",w="content__str_chain_is_unsupprted";function y(e){var t=e.networkId,n=e.walletId,y=e.isFromAccountSelector,b=s.default.engine,S=(0,c.default)(),O=(0,a.default)(),k=(0,v.useConnectAndCreateExternalAccount)({networkId:t}).connectAndCreateExternalAccount,_=(0,d.usePromiseResult)((0,o.default)((function*(){var e,r,o,l,a=t&&t!==g?t:void 0;a&&(r=yield b.getNetwork(a),l=yield b.getVaultSettings(a)),n&&(o=yield b.getWallet(n));var u=!1,s=!1,c=!0;if(null!=(e=r)&&e.id)if((0,i.isAllNetworks)(r.id))u=!0,s=!1,c=!0;else{var d,f,p,v,h,m,w,y,S,O;"external"===(null==(d=o)?void 0:d.type)&&null!=(f=l)&&f.externalAccountEnabled&&(u=!0,s=!1),"imported"===(null==(p=o)?void 0:p.type)&&null!=(v=l)&&v.importedAccountEnabled&&(u=!0,s=!1),"watching"===(null==(h=o)?void 0:h.type)&&null!=(m=l)&&m.watchingAccountEnabled&&(u=!0,s=!1),"hw"===(null==(w=o)?void 0:w.type)&&null!=(y=l)&&y.hardwareAccountEnabled&&(u=!0,s=!0),"hd"===(null==(S=o)?void 0:S.type)&&(u=!0,s=!0),null!=(O=l)&&O.addressDerivationDisabled&&(c=!1)}else u=!0,s=!1,c=!0;return{selectedNetworkId:a,network:r,activeWallet:o,vaultSettings:l,isCreateAccountSupported:u,isAddressDerivationSupported:c,showCreateAccountMenu:s}})),[b,t,n]).result,A=(0,l.useRef)(),x=(0,l.useCallback)((0,o.default)((function*(){var e=s.default.serviceAllNetwork;if(n)try{return yield e.createAllNetworksFakeAccount({walletId:n})}catch(t){console.error(t),u.default.common.error("createAllNetworksFakeAccount error: ",t),p.deviceUtils.showErrorToast(t)}})),[n]),j=(0,l.useCallback)(function(){var e=(0,o.default)((function*(e){var t=(null!=_?_:{}).selectedNetworkId;if(n&&t){var r=s.default.serviceDerivationPath;try{var o,l=(yield r.getNetworkDerivations(n,t)).quickCreateAccountInfo;yield r.createNewAccount(e,n,t,A.current?A.current.template:null!=(o=null==l?void 0:l.template)?o:"")}catch(i){console.error(i),p.deviceUtils.showErrorToast(i)}finally{var a;if(S.getParent())null==(a=S.getParent())||null==a.goBack||a.goBack();else null==S.goBack||S.goBack()}}}));return function(t){return e.apply(this,arguments)}}(),[_,n,S]);return{createAccount:(0,l.useCallback)((0,o.default)((function*(){if(n){var e=null!=_?_:{},t=e.activeWallet,o=e.vaultSettings,l=e.network,a=e.selectedNetworkId,u=e.isCreateAccountSupported,c=s.default.serviceDerivationPath,d=function(){r.default.show({title:O.formatMessage({id:w},{0:null==l?void 0:l.shortName})})};if(u)if("external"!==(null==t?void 0:t.type)){if("imported"===(null==t?void 0:t.type))return null==l||!l.id||null!=o&&o.importedAccountEnabled?(null==S.goBack||S.goBack(),S.navigate(f.RootRoutes.Onboarding,{screen:h.EOnboardingRoutes.RecoveryWallet,params:{mode:"imported"}})):void d();if("watching"===(null==t?void 0:t.type))return null==l||!l.id||null!=o&&o.watchingAccountEnabled?(null==S.goBack||S.goBack(),S.navigate(f.RootRoutes.Onboarding,{screen:h.EOnboardingRoutes.RecoveryWallet,params:{mode:"watching"}})):void d();if(a){if((yield c.getNetworkDerivations(n,a)).shouldQuickCreate)return A.current=null,(0,i.isAllNetworks)(a)?x():S.navigate(f.RootRoutes.Modal,{screen:f.ModalRoutes.CreateAccount,params:{screen:f.CreateAccountModalRoutes.CreateAccountAuthentication,params:{walletId:(null==t?void 0:t.id)||"",onDone:j}}});(0,m.default)({type:"create",walletId:n,networkId:a,onSelect:function(e){return A.current=e,S.navigate(f.RootRoutes.Modal,{screen:f.ModalRoutes.CreateAccount,params:{screen:f.CreateAccountModalRoutes.CreateAccountAuthentication,params:{walletId:(null==t?void 0:t.id)||"",onDone:j}}})}})}}else yield k();else d()}})),[x,k,O,y,S,_,n,j]),isCreateAccountSupported:null==_?void 0:_.isCreateAccountSupported,showCreateAccountMenu:null==_?void 0:_.showCreateAccountMenu,isAddressDerivationSupported:null==_?void 0:_.isAddressDerivationSupported}}},94668:(e,t,n)=>{n.r(t),n.d(t,{useDerivationPath:()=>u});var r=n(196234),o=n(202784),l=n(613549),a=n(945821),i=n(859071);function u(e,t){var n=(0,i.useNetwork)({networkId:t}).network,u=(0,o.useState)([]),s=(0,r.default)(u,2),c=s[0],d=s[1];(0,o.useEffect)((function(){a.default.serviceDerivationPath.getDerivationSelectOptions(e,t).then((function(e){d(e)}))}),[e,t]);var f=(0,o.useMemo)((function(){return null==n?void 0:n.settings.isUTXOModel}),[n]);return{derivationOptions:c,isUTXOModel:f,showTemplate:!f||(null==n?void 0:n.impl)===l.IMPL_ADA}}},240061:(e,t,n)=>{n.r(t),n.d(t,{useDeviceStatusOfHardwareWallet:()=>s});var r=n(634795),o=n(196234),l=n(202784),a=n(292147),i=n(945821),u=n(747225);function s(){var e=(0,u.useRuntimeWallets)().hardwareWallets,t=(0,u.useAppSelector)((function(e){return e.settings.deviceUpdates})),n=(0,u.useAppSelector)((function(e){return e.hardware.connected})),s=(0,l.useState)(),c=(0,o.default)(s,2),d=c[0],f=c[1],p=(0,l.useCallback)((function(e){var r,o;if(e)return{isConnected:n.includes(e),hasUpgrade:!(null==t||null==(r=t[e])||!r.ble)||!(null==t||null==(o=t[e])||!o.firmware)}}),[n,t]);return(0,l.useEffect)((function(){a.default.accountSelector.info("useEffect hardwareWallets changed >>> useDeviceStatusOfHardwareWallet"),(0,r.default)((function*(){var t=(yield i.default.engine.getHWDevices()).reduce((function(e,t){return e[t.id]=t,e}),{});f(e.reduce((function(e,n){if(!n.associatedDevice)return e;var r=t[n.associatedDevice];return r&&(e[n.associatedDevice]=p(r.mac)),e}),{}))}))()}),[p,e]),{devicesStatus:d}}},313132:(e,t,n)=>{n.r(t),n.d(t,{NetworkAccountSelectorModal:()=>Et,NetworkAccountSelectorTrigger:()=>b,NetworkAccountSelectorTriggerDesktop:()=>S,NetworkAccountSelectorTriggerMobile:()=>O});var r=n(256666),o=n(470310),l=n(539144),a=n(859071),i=n(707406),u=n(18861),s=n(737790),c=n(202784),d=n(381786),f=n(201663),p=n(314527),v=n(552322);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){var t,n=e.showName,r=void 0===n||n,o=e.type,l=void 0===o?"plain":o,i=e.bg,h=e.mode,g=e.iconSize,w=void 0===g?6:g,y=e.allowSelectAllNetworks,b=(0,a.useActiveWalletAccount)().network,S=(0,a.useNavigationActions)().openNetworkSelector,O=(0,d.useRpcMeasureStatus)(null!=(t=null==b?void 0:b.id)?t:""),k=O.status,_=O.loading,A=(0,c.useMemo)((function(){return{label:null==b?void 0:b.name,value:null==b?void 0:b.id,tokenProps:{token:{logoURI:null==b?void 0:b.logoURI,name:null==b?void 0:b.shortName}},badge:"evm"===(null==b?void 0:b.impl)?"EVM":void 0}}),[null==b?void 0:b.id,null==b?void 0:b.impl,null==b?void 0:b.logoURI,null==b?void 0:b.name,null==b?void 0:b.shortName]);return(0,v.jsx)(p.BaseSelectorTrigger,{type:l,bg:i,icon:(0,v.jsxs)(u.default,{position:"relative",children:[(0,v.jsx)(s.default,m({size:w},A.tokenProps)),k&&!_&&(0,v.jsx)(f.default,{position:"absolute",top:-1,right:-1,size:"10px",backgroundColor:null==k?void 0:k.iconColor})]}),label:r&&A.label,onPress:function(){S({mode:h,allowSelectAllNetworks:y})}})};function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){var t=e.type,n=void 0===t?"plain":t,r=e.bg,u=e.mode,s=e.iconSize,c=e.labelTypography,d=e.allowSelectAllNetworks,f=(0,a.useActiveWalletAccount)().wallet,p=(0,l.default)();return f?(0,v.jsxs)(o.default,{space:2,alignItems:"center",children:[(0,v.jsx)(g,{iconSize:s,type:n,bg:r,mode:u,showName:!p,allowSelectAllNetworks:d}),(0,v.jsx)(i.AccountSelectorTrigger,{type:n,bg:r,mode:u,labelTypography:c,showAddress:!p})]}):null};function S(e){return(0,v.jsx)(b,y({type:"plain"},e))}function O(e){return(0,v.jsx)(b,y({type:"basic"},e))}var k=n(877531),_=n(321668),A=n(561220),x=n(10918),j=n(225447),E=n(468702),C=n(592923),I=n(196234),T=n(472719),P=n(783112),N=n(749888),R=n(849877),M=n(671029),L=n(659781),D=n(465022),W=n(254073),B=n.n(W),V=n(311631),U=n(568674),F=n(968079),H=n(866904),z=n(510374),$=n(669083),K=n(626015),Y=n(945821),G=n(632861),q=n(759900),X=(0,c.memo)((function(e){return e.isLoading?(0,v.jsxs)(u.default,{mx:"2",borderRadius:12,p:"2",children:[(0,v.jsx)(q.default,{shape:"Body2"}),(0,v.jsx)(q.default,{shape:"Body2"})]}):null}));X.displayName="AccountSectionLoadingSkeleton";var Q=n(381815),J=n(634795),Z=n(534756),ee=n(409325),te=n(292147),ne=n(461576),re=B()(function(){var e=(0,J.default)((function*(e){var t=e.selectedNetworkId,n=e.selectedWallet,r=(e.wallets,e.setData),o=Y.default.engine,l=Y.default.serviceDerivationPath,a=[];te.default.accountSelector.info("rebuild NetworkAccountSelector accountList data",{selectedNetworkId:t,selectedWalletId:null==n?void 0:n.id});var i=function(){var e=(0,J.default)((function*(e){if(t){var n=yield l.getNetworkDerivations(e.id,t),r=n.networkDerivations,i=n.accountNameInfo;if(r.length>1){var u=[];Object.values(i).forEach((function(e){var t=r.find((function(t){return t.template===e.template}));t&&u.push(t)}));var s=u.map(function(){var n=(0,J.default)((function*(n,l){var a=yield o.getAccounts(n.accounts,t);l===r.length-1&&a.length&&(a[a.length-1].$isLastItem=!0);var u=Object.values(i).find((function(e){return e.template===n.template}));return{wallet:e,networkId:t,data:a||[],derivationInfo:u,collapsed:!1}}));return function(e,t){return n.apply(this,arguments)}}()),c=yield Promise.all(s);a.push.apply(a,(0,F.default)(c))}else{var d=yield o.getAccounts(e.accounts,t);d.length&&(d[d.length-1].$isLastItem=!0),a.push({wallet:e,networkId:t,data:d||[],derivationInfo:i.default,collapsed:!1})}}}));return function(t){return e.apply(this,arguments)}}();n&&(yield i(n)),r(a)}));return function(t){return e.apply(this,arguments)}}(),150,{leading:!1,trailing:!0}),oe=[];var le=n(722363),ae=n(206195),ie=n(213208),ue=n(840248),se=n(342954),ce=n(68132),de=n(433996),fe=n(785192),pe=n(459740),ve=n(331639),he=n(613549),me=n(493877),ge=n(850167),we=n(481047),ye=n(480601),be=n(793525),Se=n(27172),Oe=n(146571),ke=["onChange","showAllUsedAddressOption","showCopyAddressOption"];function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe=function(e){var t=e.onChange,n=e.showAllUsedAddressOption,r=e.showCopyAddressOption,o=(0,pe.default)(e,ke),l=(0,c.useCallback)((function(e){null==t||t(e)}),[t]),a=(0,c.useMemo)((function(){return[r&&{id:"action__copy_address",onPress:function(){return l("copy")},icon:"Square2StackOutline"},{id:"action__rename",onPress:function(){return l("rename")},icon:"TagOutline"},{id:"action__view_details",onPress:function(){return l("detail")},icon:"DocumentTextOutline"},n&&function(){return(0,v.jsx)(fe.default,{my:1})},n&&{id:"action__show_all_used_addresses",onPress:function(){return l("showAllUsedAddress")},icon:"ListBulletMini"},function(){return(0,v.jsx)(fe.default,{my:1})},{id:"action__remove_account",onPress:function(){return l("remove")},icon:"TrashOutline",variant:"desctructive"}]}),[l,n,r]);return(0,v.jsx)(ve.default,Ae(Ae({options:a},o),{},{menuWidth:n?261:void 0}))};function je(e){var t=e.account,n=e.wallet,r=e.network,o=(0,me.default)(),l=Y.default.dispatch,i=(0,Oe.default)(),u=i.goToRemoveAccount,s=i.RemoveAccountDialog,d=(0,ge.useCopyAddress)({wallet:n,account:t,network:r}).copyAddress,f=(0,a.useAppSelector)((function(e){return e.runtime.networks})),p=(0,c.useState)(!1),h=(0,I.default)(p,2),m=h[0],g=h[1],w=(0,c.useState)(!1),y=(0,I.default)(w,2),b=y[0],S=y[1];(0,c.useEffect)((function(){if(null!=r&&r.id){var e,t,n=null==(e=f.find((function(e){return e.id===r.id})))?void 0:e.settings;g(null!=(t=null==n?void 0:n.isBtcForkChain)&&t),S(r.impl!==he.IMPL_LIGHTNING)}}),[r,f]);var O=(0,c.useCallback)((function(){l((0,ye.refreshAccountSelector)())}),[l]),k=(0,c.useCallback)((function(e){var l,a,i,s,c;switch(e){case"copy":setTimeout((function(){d({address:t.address,displayAddress:t.displayAddress})}),150);break;case"rename":(0,be.showDialog)((0,v.jsx)(Se.default,{visible:!0,account:t,onDone:function(){var e,t;O(null!=(e=null==n?void 0:n.id)?e:"",null!=(t=null==r?void 0:r.id)?t:"")}}));break;case"detail":o.navigate(we.RootRoutes.Modal,{screen:we.ModalRoutes.ManagerAccount,params:{screen:we.ManagerAccountModalRoutes.ManagerAccountModal,params:{walletId:null!=(l=null==n?void 0:n.id)?l:"",accountId:t.id,networkId:null!=(a=null==r?void 0:r.id)?a:"",refreshAccounts:function(){var e,t;return O(null!=(e=null==n?void 0:n.id)?e:"",null!=(t=null==r?void 0:r.id)?t:"")}}}});break;case"remove":u({wallet:n,accountId:t.id,networkId:null!=(i=null==r?void 0:r.id)?i:"",callback:function(){var e,t;return O(null!=(e=null==n?void 0:n.id)?e:"",null!=(t=null==r?void 0:r.id)?t:"")}});break;case"showAllUsedAddress":o.navigate(we.RootRoutes.Modal,{screen:we.ModalRoutes.CreateAccount,params:{screen:we.CreateAccountModalRoutes.BitcoinUsedAddress,params:{accountId:t.id,networkId:null!=(s=null==r?void 0:r.id)?s:"",walletId:null!=(c=null==n?void 0:n.id)?c:"",entry:"usedAddress"}}})}}),[t,d,u,o,null==r?void 0:r.id,O,n]);return(0,v.jsxs)(v.Fragment,{children:[s,(0,v.jsx)(xe,{onChange:k,showAllUsedAddressOption:m,showCopyAddressOption:b,children:(0,v.jsx)(de.default,{name:"EllipsisVerticalMini",type:"plain",circle:!0,hitSlop:8})})]})}var Ee=function(e){var t=e.account,n=e.network,r=e.networkSettings,o=e.label,l=e.address,i=e.networkId,s=e.walletId,d=e.wallet,f=e.tokenShowBalance,p=e.singleSelect,h=e.multiSelect,m=e.hideAccountActions,g=e.selectedAccounts,w=e.setSelectedAccounts,y=e.onAccountsSelected,b=e.onLastItemRender,S=(0,a.useAppSelector)((function(e){return e.accountSelector.accountSelectorMode})),O=(0,N.default)(),k=(0,a.useAccountTokensBalance)(null==n?void 0:n.id,null==t?void 0:t.id),_=(0,c.useMemo)((function(){var e,t,n,r;return f&&!f.isNative?null!=(n=null==(r=k[f.tokenIdOnNetwork])?void 0:r.balance)?n:"0":null!=(e=null==k||null==(t=k.main)?void 0:t.balance)?e:"0"}),[k,f]),x=null==g?void 0:g.includes(t.address),j=null==t?void 0:t.$isLastItem;(0,c.useLayoutEffect)((function(){j&&(null==b||b())}),[j,b]);var E=(0,a.useActiveWalletAccount)(),C=E.walletId,I=E.accountId,T=E.networkId,P=(0,a.useAppSelector)((function(e){return e.general.activeExternalWalletName})),R=(0,c.useMemo)((function(){return!h&&C===s&&I===t.id&&T===i}),[h,C,s,I,t.id,T,i]),M=(0,ce.useAccountSelectorChangeAccountOnPress)().onPressChangeAccount;return(0,v.jsx)(A.default,{onPress:function(){h?x?null==w||w((function(e){return e.filter((function(e){return e!==t.address}))})):null==w||w((function(e){return[].concat((0,F.default)(e),[t.address])})):p?(O(),null==y||y([t.address])):M({accountId:null==t?void 0:t.id,networkId:i,walletId:s,accountSelectorMode:S})},children:function(e){var a=e.isHovered,i=e.isPressed;return(0,v.jsxs)(u.default,{flexDirection:"row",alignItems:"center",p:2,pr:1.5,rounded:"xl",bgColor:R?"surface-selected":i?"surface-pressed":a?"surface-hovered":"transparent",children:[(0,v.jsx)(se.default,{mr:3,accountId:null==t?void 0:t.id,walletName:R?P:null}),(0,v.jsxs)(u.default,{flex:1,mr:3,children:[(0,v.jsx)(H.default,{typography:"Body2Strong",isTruncated:!0,numberOfLines:1,children:o}),(0,v.jsxs)(u.default,{flexDirection:"row",children:[null!=r&&r.hiddenAddress?null:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(H.default,{typography:"Body2",color:"text-subdued",children:l}),(0,v.jsx)(u.default,{w:1,h:1,m:2,bgColor:"icon-disabled",rounded:"full"})]}),_?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(H.default,{typography:"Body2",color:"text-subdued",isTruncated:!0,children:(0,ue.formatAmount)(_,6)}),(0,v.jsx)(H.default,{typography:"Body2",color:"text-subdued",ml:"2px",children:f?null==f?void 0:f.symbol.toUpperCase():null==n?void 0:n.symbol.toUpperCase()})]}):(0,v.jsx)(q.default,{shape:"Body2"})]})]}),h?(0,v.jsx)(u.default,{children:(0,v.jsx)(ae.default,{isChecked:x,containerStyle:{mr:0},onChange:function(){0},checkBoxProps:{size:"sm",accessibilityLabel:t.address}})}):null,m?null:(0,v.jsx)(je,{wallet:d,account:t,network:n})]})}})};Ee.defaultProps={};const Ce=Ee;var Ie=n(768496),Te=n(559656),Pe=n(812177),Ne=n(814817),Re=n(620278),Me=n(459632);function Le(e){var t=e.walletId,n=e.networkId,r=e.isLoading,o=(0,le.useCreateAccountInWallet)({networkId:n,walletId:t,isFromAccountSelector:!0}),l=o.createAccount,a=o.isCreateAccountSupported,i=o.showCreateAccountMenu,u=o.isAddressDerivationSupported,s=(0,c.useMemo)((function(){return!!t&&(0,Ne.isExternalWallet)({walletId:t})}),[t]),d=(0,c.useRef)();(0,c.useEffect)((function(){ie.default.isNativeIOS||d.current||s&&(d.current=(0,v.jsx)(Me.InitWalletServicesData,{}))}),[s]);var f=(0,c.useState)(!1),p=(0,I.default)(f,2),h=p[0],m=p[1],g=(0,c.useRef)(),w=r||h,y=(0,c.useCallback)((0,J.default)((function*(){if(t&&!r)try{clearTimeout(g.current),g.current=setTimeout((function(){return m(!1)}),Re.WALLET_CONNECT_NEW_CONNECTION_BUTTON_LOADING),m(!0),yield l()}finally{clearTimeout(g.current),m(!1)}})),[l,r,t]);return(0,v.jsxs)(v.Fragment,{children:[d.current,u&&(i?(0,v.jsx)(Pe.default,{networkId:n,walletId:t,children:(0,v.jsx)(de.default,{testID:"NetworkAccountSelectorModal-CreateAccountButton",isLoading:w,type:"plain",name:a?"PlusCircleOutline":"BanMini",circle:!0,hitSlop:8})}):(0,v.jsx)(de.default,{testID:"NetworkAccountSelectorModal-CreateAccountButton",isLoading:w,onPress:y,type:"plain",name:a?"PlusCircleOutline":"BanMini",circle:!0,hitSlop:8}))]})}var De=function(e){var t=e.wallet,n=e.networkId,r=e.emptySectionData,o=e.isCreateLoading,l=(0,Ie.useWalletName)({wallet:t});return(0,v.jsxs)(u.default,{mt:-2,pt:2,bg:"surface-subdued",children:[(0,v.jsxs)(u.default,{flexDirection:"row",alignItems:"center",mb:2,pr:1.5,pl:2,children:[(0,v.jsxs)(u.default,{flex:1,flexDirection:"row",alignItems:"center",mr:3,children:[(0,v.jsx)(Te.WalletAvatarPro,{size:"xs",wallet:t,devicesStatus:null}),(0,v.jsx)(H.default,{ml:2,typography:"Subheading",color:"text-subdued",isTruncated:!0,children:l})]}),(0,v.jsx)(Le,{networkId:n,walletId:t.id,isLoading:o})]}),r?null:void 0]})};De.defaultProps={};function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ve=function(e){var t=e.walletId,n=e.networkId,r=(0,P.default)(),o=(0,le.useCreateAccountInWallet)({walletId:t,networkId:n}),l=o.createAccount,i=o.isCreateAccountSupported,u=(0,a.useNetwork)({networkId:n}).network;return(0,v.jsx)(z.default,{emoji:"\ud83d\udcb3",title:r.formatMessage({id:"empty__no_account_title"}),subTitle:r.formatMessage({id:"empty__no_account_desc"}),handleAction:function(){i?l():$.default.show({title:r.formatMessage({id:le.NETWORK_NOT_SUPPORT_CREATE_ACCOUNT_I18N_KEY},{0:null==u?void 0:u.shortName})})},actionTitle:r.formatMessage({id:"action__create_account"}),actionProps:{leftIconName:"PlusOutline"},flex:1,mt:8})};function Ue(e){var t,n,r=e.section;return null!=(t=null==(n=e.dataSource.find((function(e){var t,n;return(null==(t=e.derivationInfo)?void 0:t.template)===(null==(n=r.derivationInfo)?void 0:n.template)})))?void 0:n.collapsed)&&t?null:(0,v.jsx)(u.default,{h:2})}function Fe(e){var t=e.section,n=e.setDataSource,r=(0,P.default)(),o=t.derivationInfo,l=(0,c.useMemo)((function(){var e;return o?"object"===typeof o.label&&null!=(e=o.label)&&e.id?r.formatMessage({id:o.label.id}):o.label:null}),[r,o]);return t.data.length?(0,v.jsx)(U.default,{backgroundColor:"background-default",defaultCollapsed:!1,arrowPosition:"right",value:t.collapsed,trigger:(0,v.jsx)(H.default,{typography:{sm:"Subheading",md:"Subheading"},color:"text-subdued",children:l}),triggerWrapperProps:{p:0,px:"7px",borderRadius:"lg",mb:2},onCollapseChange:function(e){n((function(t){var n=(0,F.default)(t),r=n.findIndex((function(e){var t;return(null==(t=e.derivationInfo)?void 0:t.template)===(null==o?void 0:o.template)}));return r>=0&&(n[r]=Be(Be({},n[r]),{},{collapsed:e})),n}))}}):null}const He=function(e){var t=e.accountSelectorInfo,n=e.searchValue,r=e.tokenShowBalance,o=e.multiSelect,l=e.singleSelect,i=e.hideAccountActions,s=e.selectedAccounts,d=e.setSelectedAccounts,f=e.onAccountsSelected,p=(0,a.useDebounce)(n,500),h=(0,P.default)(),m=t.selectedNetworkId,g=t.selectedNetwork,w=t.selectedNetworkSettings,y=t.preloadingCreateAccount,b=t.isOpenDelay,S=function(e){var t=e.accountSelectorInfo,n=t.wallets,r=t.selectedNetworkId,o=t.selectedWallet,l=t.refreshAccountSelectorTs,a=t.activeAccount,i=t.isOpenDelay,u=t.isOpen,s=(0,ne.useIsMounted)(),d=(0,c.useState)(oe),f=(0,I.default)(d,2),p=f[0],v=f[1];return(0,c.useEffect)((function(){return function(){oe=p}}),[p]),(0,c.useEffect)((function(){null==a||a.id,s.current&&i&&u&&r&&o&&re({wallets:n,selectedNetworkId:r,selectedWallet:o,setData:v})}),[null==a?void 0:a.id,s,i,u,l,r,o,n]),p}({accountSelectorInfo:t}),O=(0,c.useState)([]),k=(0,I.default)(O,2),_=k[0],A=k[1];(0,c.useEffect)((function(){p.length&&S.length>0?A(function(e,t){var n=t.toLowerCase();return e.map((function(e){var t=e.data.filter((function(e){var t=e.name,r=e.address;return t.toLowerCase().includes(n)||r.toLowerCase().includes(n)}));return Be(Be({},e),{},{data:t})}))}(S,p)):A(S)}),[S,p]);var x=(0,c.useMemo)((function(){return S.length>1}),[S]);(0,c.useEffect)((function(){S.length>0&&S.forEach((function(e){e.data.length>0&&e.networkId&&Y.default.serviceToken.batchFetchAccountBalances({walletId:e.wallet.id,networkId:e.networkId,accountIds:e.data.map((function(e){return e.id}))})}))}),[S]);var j=(0,c.useRef)(null),E=(0,a.useActiveWalletAccount)(),C=E.walletId,T=E.accountId,N=E.networkId,R=(0,V.useSafeAreaInsets)(),M=(0,c.useRef)(!1),L=(0,c.useCallback)((function(){!M.current&&C&&S&&S.length&&(0,G.scrollToSectionItem)({sectionListRef:j,sectionData:S,isScrollToItem:function(e,t){var n;return(null==(n=t.wallet)?void 0:n.id)===C&&t.networkId===N&&(!e||(null==e?void 0:e.id)===T)},onScrolled:function(){M.current=!0},skipScrollIndex:3,delay:0})}),[T,N,C,S]),W=(0,c.useMemo)((function(){return B()(L,Q.ACCOUNT_SELECTOR_AUTO_SCROLL_DELAY_ACCOUNT,{leading:!1,trailing:!0})}),[L]),U=(0,c.useCallback)((function(e){var t,n,r,o=e.section,l=!(null!=o&&null!=(t=o.data)&&t.length),a=null==(n=o.derivationInfo)?void 0:n.template,i=Boolean((null==y?void 0:y.walletId)&&(null==y?void 0:y.networkId)&&(null==y?void 0:y.walletId)===(null==o||null==(r=o.wallet)?void 0:r.id)&&(null==y?void 0:y.networkId)===(null==o?void 0:o.networkId)&&(null==y||!y.template||!a||(null==y?void 0:y.template)===a)),u=o.collapsed,s=_.findIndex((function(e){var t;return(null==(t=e.derivationInfo)?void 0:t.template)===a}));return{isEmptySectionData:l,isPreloadingCreate:i,template:a,isCollapsed:u,sectionIndex:s}}),[null==y?void 0:y.networkId,null==y?void 0:y.walletId,null==y?void 0:y.template,_]),F=(0,c.useCallback)((function(){return{isEmptyDataSource:_.every((function(e){return!e.data.length}))}}),[_]),H=(0,c.useCallback)((function(){return{isEmptySearchData:F().isEmptyDataSource&&S.every((function(e){return e.data.length}))}}),[S,F]),$=(0,c.useCallback)((function(e){return(0,v.jsx)(Ue,Be(Be({},e),{},{dataSource:_}))}),[_]);return b?(0,v.jsx)(D.SectionList,{initialNumToRender:20,ref:j,stickySectionHeadersEnabled:!0,sections:_,keyExtractor:function(e){return e.id},renderSectionHeader:function(e){var t=e.section;return x?(0,v.jsx)(Fe,{section:t,setDataSource:A}):null},renderItem:function(e){var t,n=e.item,a=e.section,u=U({section:a}),c=u.isPreloadingCreate,p=u.isCollapsed;return c&&y&&(null==y?void 0:y.accountId)===n.id||p?null:(0,v.jsx)(Ce,{onLastItemRender:W,account:n,wallet:null==a?void 0:a.wallet,network:g,networkId:m,networkSettings:w,walletId:null==a||null==(t=a.wallet)?void 0:t.id,label:n.name,address:(0,K.shortenAddress)(n.displayAddress||n.address),balance:void 0,tokenShowBalance:r,singleSelect:l,multiSelect:o,hideAccountActions:i,selectedAccounts:s,onAccountsSelected:f,setSelectedAccounts:d},n.id)},ItemSeparatorComponent:$,renderSectionFooter:function(e){var t=e.section,n=F().isEmptyDataSource,r=H().isEmptySearchData,o=U({section:t}),l=o.isEmptySectionData,a=o.isPreloadingCreate,i=o.sectionIndex;return r&&0===i?(0,v.jsx)(z.default,{flex:1,mt:8,emoji:"\ud83d\udd0d",title:h.formatMessage({id:"content__no_results",defaultMessage:"No Result"})}):(0,v.jsxs)(v.Fragment,{children:[a?(0,v.jsx)(X,{isLoading:!0}):null,n&&l&&!a&&0===i?(0,v.jsx)(Ve,{walletId:t.wallet.id,networkId:t.networkId}):null,!l&&(0,v.jsx)(u.default,{h:8})]})},ListFooterComponent:(0,v.jsx)(u.default,{h:`${R.bottom}px`}),px:{base:2,md:4}}):null};var ze=n(505240),$e=n(534159),Ke=n(612210),Ye=["onChange"];function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var qe=function(e){var t=e.onChange,n=(0,pe.default)(e,Ye),o=(0,c.useCallback)((function(e){null==t||t(e)}),[t]),l=(0,c.useMemo)((function(){return[{id:"action__copy_address",onPress:function(){return o("copy")},icon:"Square2StackOutline"},{id:"action__remove_account",onPress:function(){return o("remove")},icon:"TrashOutline",variant:"desctructive"}]}),[o]);return(0,v.jsx)(ve.default,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({options:l},n))};function Xe(e){var t=e.accountId,n=e.walletId,r=(0,P.default)(),o=(0,c.useState)(!1),l=(0,I.default)(o,2),i=l[0],u=l[1],s=(0,a.useNavigation)(),d=(0,c.useMemo)((function(){return i&&(0,v.jsx)(Ke.default,{visible:i,contentProps:{iconType:"danger",title:r.formatMessage({id:"action__remove_account"}),content:r.formatMessage({id:"modal__delete_account_desc"})},footerButtonProps:{primaryActionProps:{type:"destructive",onPromise:function(){return Y.default.serviceAllNetwork.deleteAllNetworksFakeAccount({accountId:t})}},primaryActionTranslationId:"action__remove",onSecondaryActionPress:function(){return u(!1)}}})}),[r,i,t]),f=(0,c.useCallback)((function(e){switch(e){case"copy":s.navigate(we.RootRoutes.Modal,{screen:we.ModalRoutes.ManageNetwork,params:{screen:we.ManageNetworkModalRoutes.AllNetworksAccountsDetail,params:{walletId:n,accountId:t}}});break;case"remove":u(!0)}}),[t,n,s]);return(0,v.jsxs)(v.Fragment,{children:[d,(0,v.jsx)(qe,{onChange:f,children:(0,v.jsx)(de.default,{name:"EllipsisVerticalMini",type:"plain",circle:!0,hitSlop:8})})]})}var Qe=function(e){var t=e.label,n=e.isActive,r=e.accountId,o=e.walletId,l=e.networkId,i=(0,a.useAppSelector)((function(e){return e.accountSelector.accountSelectorMode})),s=(0,ce.useAccountSelectorChangeAccountOnPress)().onPressChangeAccount,c=(0,a.useAppSelector)((function(e){var t,n,o,a;return null==(t=e.overview.overviewStats)||null==(n=t[l])||null==(o=n[r])||null==(a=o.summary)?void 0:a.totalValue}));return(0,v.jsx)(A.default,{onPress:function(){s({accountId:r,networkId:l,walletId:o,accountSelectorMode:i})},children:function(e){var l=e.isHovered,a=e.isPressed;return(0,v.jsxs)(u.default,{flexDirection:"row",alignItems:"center",p:2,pr:1.5,rounded:"xl",bgColor:n?"surface-selected":a?"surface-pressed":l?"surface-hovered":"transparent",children:[(0,v.jsxs)(u.default,{flex:1,mr:3,children:[(0,v.jsx)(H.default,{typography:"Body2Strong",isTruncated:!0,numberOfLines:1,children:t}),(0,v.jsx)(u.default,{flexDirection:"row",children:(0,v.jsx)(H.default,{typography:"Body2",color:"text-subdued",children:"undefined"===typeof c?"N/A":(0,v.jsx)($e.FormatCurrencyNumber,{value:0,convertValue:c})})})]}),(0,v.jsx)(Xe,{accountId:r,walletId:o})]})}})};Qe.defaultProps={};const Je=Qe;var Ze=function(){return(0,v.jsx)(u.default,{h:2})};const et=function(e){var t=e.accountSelectorInfo,n=e.searchValue,r=(0,a.useDebounce)(n,500),o=(0,P.default)(),l=t.isOpenDelay,i=function(e){var t=e.walletId,n=(0,a.useAppSelector)((function(e){return e.overview.allNetworksAccountsMap}));return{data:(0,c.useMemo)((function(){if(!t)return[];for(var e=[],r=0;r<ee.AllNetworksMaxAccounts;r+=1){var o=`${t}--${r}`;if(Object.hasOwn(null!=n?n:{},o)){var l=(0,Z.generateFakeAllnetworksAccount)({accountId:o});e.push(l)}}return e}),[t,n])}}({walletId:t.selectedWalletId}).data,s=(0,a.useActiveWalletAccount)().accountId,d=(0,c.useMemo)((function(){return i.filter((function(e){return e.name.toLowerCase().includes(r)}))}),[i,r]),f=(0,V.useSafeAreaInsets)();return l?(0,v.jsx)(ze.default,{initialNumToRender:20,m:0,data:d,keyExtractor:function(e){return e.id},renderItem:function(e){var n,r,o=e.item;return(0,v.jsx)(Je,{label:o.name,isActive:o.id===s,accountId:o.id,networkId:null!=(n=t.selectedNetworkId)?n:"",walletId:null!=(r=t.selectedWalletId)?r:""})},ItemSeparatorComponent:Ze,ListEmptyComponent:(0,v.jsx)(z.default,{emoji:"\ud83d\udcb3",title:o.formatMessage({id:"empty__no_account_title"}),subTitle:o.formatMessage({id:"empty__no_account_desc"}),flex:1,mt:8}),ListFooterComponent:(0,v.jsx)(u.default,{h:`${f.bottom}px`}),px:{base:2,md:4}}):null};var tt=n(361301),nt=n(719392),rt=n(425832),ot=n(528755),lt=n(379573),at=n(830631),it=n(776553),ut=n(419479),st=n(854787),ct=n(328012),dt=n(435581),ft=n(480513),pt=n(506885),vt=n(747225),ht=B()((function(e){var t=e.setData,n=e.wallets,r=e.intl,o=e.walletsToHide,l=n.map((function(e){return{label:(0,Ie.getWalletName)({wallet:e,intl:r})||"-",value:e.id,wallet:e}}));o&&o.length>0&&(l=l.filter((function(e){return!o.includes(e.wallet.type)}))),te.default.accountSelector.info("rebuild NetworkAccountSelector walletList data"),t(l)}),150,{leading:!1,trailing:!0});function mt(e){var t=e.accountSelectorInfo,n=e.hideCreateAccount,r=e.multiSelect,o=e.selectedAccounts,a=e.walletsToHide,i=t.selectedNetworkId,s=t.selectedWallet,d=t.selectedWalletId,f=t.isOpenDelay,p=t.isOpen,h=t.preloadingCreateAccount,m=Y.default.serviceAccountSelector,g=(0,P.default)(),w=(0,l.default)(),y=(0,vt.useRuntime)().wallets,b=(0,c.useState)([]),S=(0,I.default)(b,2),O=S[0],k=S[1],_=(0,ne.useIsMounted)(),x=(0,c.useMemo)((function(){return(0,R.isAllNetworks)(i)?y.filter((function(e){return e.type===pt.WALLET_TYPE_HD||e.type===pt.WALLET_TYPE_HW})):y}),[i,y]);(0,c.useEffect)((function(){_.current&&f&&p&&ht({wallets:x,setData:k,intl:g,walletsToHide:a})}),[g,f,p,x,_,a]),(0,c.useEffect)((function(){(0,R.isAllNetworks)(i)&&!(0,ft.isWalletCompatibleAllNetworks)(d)&&Y.default.serviceAllNetwork.switchWalletToCompatibleAllNetworks()}),[d,i]);var j=(0,c.useMemo)((function(){return Boolean((null==h?void 0:h.walletId)&&(null==h?void 0:h.networkId)&&(null==h?void 0:h.walletId)===d&&(null==h?void 0:h.networkId)===i)}),[null==h?void 0:h.networkId,null==h?void 0:h.walletId,i,d]),E=(0,c.useMemo)((function(){return r&&o&&o.length>0}),[r,o]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(ct.default,{title:g.formatMessage({id:"title__wallets"}),footer:null,value:d,activatable:!1,containerProps:{flex:1,alignItems:"flex-start"},options:O,triggerProps:{isDisabled:E},renderTrigger:function(e){var t=e.visible,n=e.onPress;return(0,v.jsx)(A.default,{onPress:n,isDisabled:E,children:function(e){var n=e.isHovered,r=e.isPressed;return(0,v.jsxs)(u.default,{flexDirection:"row",alignItems:"center",maxW:"240px",p:2,rounded:"xl",bgColor:t?"surface-selected":r?"surface-pressed":n?"surface-hovered":void 0,children:[s?(0,v.jsx)(Te.WalletAvatarPro,{wallet:s,size:"xs",devicesStatus:void 0}):null,(0,v.jsx)(H.default,{typography:"Body2Strong",ml:2,mr:1,color:"text-subdued",isTruncated:!0,children:(0,Ie.getWalletName)({wallet:s,intl:g})}),E?null:(0,v.jsx)(u.default,{children:(0,v.jsx)(dt.default,{name:"ChevronUpDownMini",color:"icon-subdued",size:20})})]})}})},renderItem:function(e,t,n){return(0,v.jsx)(A.default,{onPress:(0,J.default)((function*(){null==n||n(e.value,e),yield m.updateSelectedWallet(e.value)})),children:function(n){var r=n.isHovered,o=n.isPressed;return(0,v.jsxs)(u.default,{p:2,pr:{base:3,md:2},flexDirection:"row",alignItems:"center",bgColor:o?"surface-pressed":r?"surface-hovered":void 0,rounded:"xl",children:[e.wallet?(0,v.jsx)(Te.WalletAvatarPro,{wallet:e.wallet,devicesStatus:void 0,size:w?"lg":"xs"}):null,(0,v.jsx)(H.default,{typography:{sm:"Body1Strong",md:"Body2Strong"},flex:1,mx:3,children:e.label}),t?(0,v.jsx)(dt.default,{name:w?"CheckOutline":"CheckMini",size:w?24:20,color:"interactive-default"}):null]})}},e.value)}}),r&&o&&o.length>0?(0,v.jsx)(st.default,{size:"sm",title:g.formatMessage({id:"form_int_accounts_selected"},{0:o.length})}):null,n?null:(0,v.jsx)(Le,{walletId:d||"",networkId:i,isLoading:j})]})}var gt=lt.default.actions.updateIsLoading;const wt=function(e){var t,n=e.accountSelectorInfo,r=e.showCustomLegacyHeader,l=e.hideCreateAccount,i=e.multiSelect,s=e.selectedAccounts,p=e.walletsToHide,h=(0,P.default)(),m=(0,a.useAppSelector)((function(e){return e.status.firstTimeShowCheckRPCNodeTooltip})),g=(0,c.useState)(!1),w=(0,I.default)(g,2),y=w[0],b=w[1],S=n.selectedNetwork,O=n.isLoading,k=(0,d.useRpcMeasureStatus)(null!=(t=r?null==S?void 0:S.id:"")?t:""),_=k.loading,x=k.status,j=Y.default.dispatch,E=(0,a.useNavigation)(),C=(0,N.default)(),R=(0,c.useCallback)((function(){b(!1),E.navigate(ut.ManageNetworkModalRoutes.RPCNode,{networkId:(null==S?void 0:S.id)||""})}),[E,S]);(0,c.useEffect)((function(){}),[E]),(0,T.useFocusEffect)((0,c.useCallback)((function(){var e=!0;if(!m){var t=function(){var t=(0,J.default)((function*(){yield(0,it.wait)(500),e&&(b(!0),yield(0,it.wait)(8e3),b(!1),j((0,at.setFistTimeShowCheckRPCNodeTooltip)(!0)))}));return function(){return t.apply(this,arguments)}}();return t(),function(){b(!1),e=!1}}}),[j,m]));var M=(0,c.useMemo)((function(){return!x||_?(0,v.jsx)(q.default,{shape:"Caption"}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(f.default,{mr:"6px",borderWidth:"0",backgroundColor:x.iconColor}),(0,v.jsx)(rt.Tooltip,{isOpen:y,hasArrow:!0,label:h.formatMessage({id:"content__click_here_to_switch_node"}),bg:"interactive-default",_text:{color:"text-on-primary",fontSize:"14px"},px:"16px",py:"8px",borderRadius:"12px",children:(0,v.jsx)(u.default,{children:(0,v.jsx)(H.default,{typography:"Caption",isTruncated:!0,color:x.textColor,children:h.formatMessage({id:x.text})})})})]})}),[x,h,y,_]);return(0,v.jsxs)(u.default,{pt:{base:2,md:4},pb:2,pl:{base:2,md:4},pr:{base:"14px",md:"22px"},children:[(0,v.jsx)(u.default,{flexDirection:"row",alignItems:"center",children:r?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(tt.default,{flex:1,mr:3,children:(0,v.jsxs)(ot.default,{onPress:R,children:[(0,v.jsxs)(u.default,{flexDirection:"row",alignItems:"center",children:[(0,v.jsx)(H.default,{typography:"Heading",isTruncated:!0,children:(null==S?void 0:S.name)||"-"}),O?(0,v.jsx)(A.default,{ml:2,onPress:function(){j(gt(!1))},children:(0,v.jsx)(nt.default,{size:"sm"})}):null]}),(0,v.jsx)(o.default,{alignItems:"center",position:"relative",pb:"3",children:M})]})}),(0,v.jsx)(de.default,{size:"xl",name:"XMarkOutline",type:"plain",circle:!0,onPress:function(){C()}})]}):null}),(0,v.jsx)(u.default,{flexDirection:"row",alignItems:"center",children:(0,v.jsx)(mt,{accountSelectorInfo:n,hideCreateAccount:l,multiSelect:i,selectedAccounts:s,walletsToHide:p})})]})};var yt=n(942013),bt=n(259924),St=n(627009);function Ot(){var e=(0,P.default)(),t=(0,c.useCallback)((function(e){return(0,v.jsx)(H.default,{color:"text-default",onPress:function(){return(0,St.openUrl)(Q.MONERO_GUI_URL)},typography:"Body2Underline",children:e})}),[]);return(0,v.jsx)(u.default,{paddingX:"15px",children:(0,v.jsx)(bt.default,{dismiss:!1,title:e.formatMessage({id:"msg__creating_more_monero_accounts_is_not_supported_for_the_moment"}),alertType:"info",description:e.formatMessage({id:"msg__creating_more_monero_accounts_is_not_supported_for_the_moment_desc"},{a:t})})})}function kt(e){var t=e.networkId,n=e.accountId;return t===yt.OnekeyNetwork.xmr&&n?(0,v.jsx)(Ot,{}):null}var _t=n(264142);function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jt(e){var t,n=e.accountSelectorInfo,r=e.showCustomLegacyHeader,o=e.showSideChainSelector,l=e.hideAllNetworks,a=e.hideSearchBar,i=e.hideCreateAccount,s=e.hideAccountActions,d=e.multiSelect,f=e.singleSelect,p=e.selectedAccounts,h=e.setSelectedAccounts,m=e.onAccountsSelected,g=e.tokenShowBalance,w=e.walletsToHide,y=(0,c.useState)(""),b=(0,I.default)(y,2),S=b[0],O=b[1];return(0,v.jsxs)(u.default,{flex:1,flexDirection:"row",children:[o?(0,v.jsx)(_t.default,{accountSelectorInfo:n,allowSelectAllNetworks:!0}):null,(0,v.jsxs)(u.default,{alignSelf:"stretch",flex:1,children:[(0,v.jsx)(wt,{accountSelectorInfo:n,showCustomLegacyHeader:r,hideCreateAccount:i,multiSelect:d,selectedAccounts:p,walletsToHide:w}),a?null:(0,v.jsx)(u.default,{px:{base:4,md:6},mb:"16px",children:(0,v.jsx)(C.default,{w:"full",value:S,onChangeText:O,onClear:function(){return O("")}})}),(0,v.jsx)(E.ScrollView,{children:!l&&(0,R.isAllNetworks)(null==n?void 0:n.selectedNetworkId)?(0,v.jsx)(et,{accountSelectorInfo:n,searchValue:S}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(He,{accountSelectorInfo:n,searchValue:S,multiSelect:d,singleSelect:f,tokenShowBalance:g,hideAccountActions:s,selectedAccounts:p,setSelectedAccounts:h,onAccountsSelected:m}),(0,v.jsx)(kt,{accountId:null==(t=n.activeAccount)?void 0:t.id,networkId:n.selectedNetworkId})]})})]})]})}function Et(){var e,t,n,r=(0,c.useState)([]),o=(0,I.default)(r,2),l=o[0],a=o[1],i=(0,P.default)(),s=(0,T.useRoute)(),d=(0,N.default)(),f=null!=(e=s.params)?e:{},p=f.hideSideChain,h=f.multiSelect,m=f.onAccountsSelected,g=(0,c.useState)(!1),w=(0,I.default)(g,2),y=w[0],b=w[1],S=(0,c.useState)(!1),O=(0,I.default)(S,2),E=O[0],C=O[1],D=(0,L.useAccountSelectorModalInfo)(),W=D.accountSelectorInfo,B=D.shouldShowModal,V=(0,c.useMemo)((function(){var e;return(0,R.isAllNetworks)(null==W?void 0:W.selectedNetworkId)?i.formatMessage({id:"form__all_networks"}):(null==W||null==(e=W.selectedNetwork)?void 0:e.name)||"-"}),[W,i]);return B?(0,v.jsx)(k.default,{headerShown:!E,header:i.formatMessage({id:"title__accounts"}),headerDescription:(0,v.jsxs)(A.default,{isDisabled:!p,onLongPress:function(){C(!E)},onPress:function(){b(!y)},flexDirection:"row",alignItems:"center",hitSlop:8,children:[null!=W&&null!=(t=W.selectedNetwork)&&t.logoURI?(0,v.jsx)(j.default,{source:{uri:null==W||null==(n=W.selectedNetwork)?void 0:n.logoURI},size:4,borderRadius:"full",mr:2}):null,(0,v.jsx)(x.default.Caption,{color:"text-subdued",children:V})]}),footer:h?(0,v.jsx)(u.default,{padding:4,children:(0,v.jsx)(_.default,{type:"primary",size:"xl",isDisabled:0===l.length,onPress:function(){d(),null==m||m(l)},children:i.formatMessage({id:"action__add"})})}):null,staticChildrenProps:{flex:1,padding:0},height:"560px",children:(0,v.jsx)(M.LazyDisplayView,{delay:0,children:(0,v.jsx)(jt,xt({accountSelectorInfo:W,showSideChainSelector:y,showCustomLegacyHeader:E,selectedAccounts:l,setSelectedAccounts:a},s.params))})}):null}},486756:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var r=n(259825),o=n(719392),l=n(259924),a=n(785192),i=n(256666),u=n(634795),s=n(196234),c=n(435581),d=n(361301),f=n(470310),p=n(854787),v=n(866904),h=n(18861),m=n(737790),g=n(202784),w=n(783112),y=n(79694),b=n(327377),S=n(613549),O=n(945821),k=n(859071),_=n(793525),A=n(94668),x=n(552322);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(e){var t=e.networkId,n=(0,k.useNetwork)({networkId:t}).network;return(0,x.jsx)(h.default,{children:(0,x.jsx)(m.default,{size:4,showInfo:!0,showName:!0,showTokenVerifiedIcon:!1,token:{name:null==n?void 0:n.name,logoURI:null==n?void 0:n.logoURI},nameProps:{typography:{sm:"Caption",md:"Caption"},color:"text-subdued",ml:"-6px"}})})},I=function(e){var t,n,r,o=e.option,l=e.selectedOption,a=e.onPress,i=e.showSubDesc,u=e.showTemplate,s=e.disabled,h=(0,w.default)(),m=s?"text-disabled":"text-subdued";return(0,x.jsx)(y.default,{pl:2,py:2,pr:"15px",borderRadius:"lg",_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},onPress:function(){return a(o)},isDisabled:s,children:(0,x.jsxs)(f.default,{alignItems:"center",justifyContent:"space-between",children:[(0,x.jsxs)(d.default,{flex:1,children:[(0,x.jsxs)(f.default,{mb:1,children:[o.label&&(0,x.jsx)(v.default,{typography:{sm:"Body1Strong",md:"Body1Strong"},color:s?"text-subdued":"text-default",children:"string"===typeof o.label?o.label:h.formatMessage({id:null==(t=o.label)?void 0:t.id})}),o.recommended&&(0,x.jsx)(p.default,{ml:2,size:"sm",title:h.formatMessage({id:"form__recommended"})}),o.notRecommended&&(0,x.jsx)(p.default,{ml:2,size:"sm",title:h.formatMessage({id:"form__not_recommended"})})]}),o.desc&&(0,x.jsx)(v.default,{typography:{sm:"Body2",md:"Body2"},color:m,children:"string"===typeof o.desc?o.desc:h.formatMessage({id:null==(n=o.desc)?void 0:n.id},null==(r=o.desc)?void 0:r.placeholder)}),(0,x.jsx)(v.default,{typography:{sm:"Body2Mono",md:"Body2Mono"},color:m,children:u&&o.template.replace(S.INDEX_PLACEHOLDER,"*")}),(0,x.jsx)(v.default,{typography:{sm:"Body2",md:"Body2"},color:m,children:i&&o.subDesc})]}),l===o.key&&(0,x.jsx)(c.default,{size:14,name:"CheckMini",color:"icon-success"})]})})},T=function(e){var t,n=e.type,r=e.walletId,i=e.networkId,c=e.onSelect,d=e.derivationOptions,f=e.selectedDerivation,p=(0,w.default)(),m=(0,A.useDerivationPath)(r,i),y=m.derivationOptions,b=m.isUTXOModel,S=m.showTemplate,k=(0,g.useState)(null!=(t=null==f?void 0:f.key)?t:""),_=(0,s.default)(k,2),j=_[0],C=_[1],T=(0,g.useState)(!1),P=(0,s.default)(T,2),N=P[0],R=P[1],M=(0,g.useState)([]),L=(0,s.default)(M,2),D=L[0],W=L[1],B=null!=d?d:y;(0,g.useEffect)((function(){var e=B.map(function(){var e=(0,u.default)((function*(e){var t=!1;if("create"===n)try{yield O.default.validator.validateCanCreateNextAccount(r,null!=i?i:"",e.template),t=!0}catch(o){t=!1}else t=!0;return E(E({},e),{},{canCreateNextAccount:t})}));return function(t){return e.apply(this,arguments)}}());R(!0),Promise.all(e).then((function(e){W(e)})).finally((function(){R(!1)}))}),[d,r,i,n,B]);var V=(0,g.useMemo)((function(){return D.filter((function(e){return e.canCreateNextAccount}))}),[D]),U=(0,g.useMemo)((function(){return V.length>0}),[V]),F=(0,g.useMemo)((function(){return D.filter((function(e){return!e.canCreateNextAccount}))}),[D]),H=(0,g.useMemo)((function(){return F.length>0}),[F]),z=(0,g.useCallback)((function(e){C(e.key),null==c||c(e)}),[c]),$="search"===n;return(0,x.jsxs)(h.default,{mx:"-8px",children:[$&&(0,x.jsx)(v.default,{typography:{sm:"Body2",md:"Body2"},mr:"7px",children:p.formatMessage({id:"content__if_you_dont_see_the_account_you_expect_try_switching_the_deriation_path"})}),U&&(0,x.jsx)(h.default,{mt:$?4:0,children:V.map((function(e){return(0,x.jsx)(I,{option:e,onPress:z,selectedOption:j,showSubDesc:!S,showTemplate:S,disabled:N},e.key)}))}),H&&(0,x.jsxs)(h.default,{children:[U&&(0,x.jsx)(a.default,{mt:6,mb:2}),(0,x.jsx)(h.default,{mb:2,mt:U?6:0,children:(0,x.jsx)(l.default,{title:p.formatMessage({id:"msg__cannot_create_a_new_account_when_last_account_of_that_type_created_has_not_used"}),dismiss:!1,alertType:"info",customIconName:"InformationCircleMini"})}),F.map((function(e){return(0,x.jsx)(I,{option:e,onPress:z,selectedOption:j,showSubDesc:!!b,showTemplate:!b,disabled:!0},e.key)}))]}),N&&(0,x.jsx)(o.default,{my:2,size:"sm"})]})};const P=function(e){var t=e.type,n=e.walletId,o=e.networkId,l=e.selectedDerivation,a=e.derivationOptions,i=e.title,u=e.onSelect;(0,_.showOverlay)((function(e){return(0,x.jsx)(r.default,{title:null!=i?i:(0,b.formatMessage)({id:"create"===t?"action__add_account":"title__derivation_path"}),headerDescription:(0,x.jsx)(C,{networkId:o}),closeOverlay:e,children:(0,x.jsx)(T,{type:t,walletId:n,networkId:o,selectedDerivation:l,derivationOptions:a,onSelect:function(t){null==e||e(),setTimeout((function(){return null==u?void 0:u(t)}))}})})}))}},264142:(e,t,n)=>{n.r(t),n.d(t,{default:()=>G});var r=n(643222),o=n(592923),l=n(18861),a=n(606201),i=n(256666),u=n(333665),s=n(561220),c=n(470310),d=n(435581),f=n(866904),p=n(413888),v=n.n(p),h=n(196234),m=n(311631),g=n(737790),w=n(202784),y=n(783112),b=n(46486),S=n(25655),O=n(849877),k=n(480513),_=n(506885),A=n(213208),x=n(945821),j=n(859071),E=n(389992),C=n(321668),I=n(425832),T=n(529710),P=n(553197),N=n(481047),R=n(381786),M=n(201663),L=n(552322);function D(e){var t=e.networkId,n=(0,R.useRpcMeasureStatus)(t||""),r=n.loading,o=n.status,l=(0,y.default)(),a=(0,j.useNavigation)(),i=(0,w.useCallback)((function(e){null==e||null==e.preventDefault||e.preventDefault(),null==e||null==e.stopPropagation||e.stopPropagation(),a.navigate(N.ManageNetworkModalRoutes.RPCNode,{networkId:t||""})}),[a,t]),u=(0,w.useMemo)((function(){return!o||r?(0,L.jsx)(T.default,{borderRadius:"3px",height:"10px",width:"32px"}):(0,L.jsx)(P.View,{from:{opacity:0},animate:{opacity:1},children:(0,L.jsxs)(c.default,{alignItems:"center",children:[(0,L.jsx)(M.default,{mr:"8px",borderWidth:"0",backgroundColor:o.iconColor}),(0,L.jsx)(I.Tooltip,{isOpen:!1,hasArrow:!0,label:l.formatMessage({id:"content__click_here_to_switch_node"}),bg:"interactive-default",_text:{color:"text-on-primary",fontSize:"14px"},px:"16px",py:"8px",borderRadius:"12px",children:(0,L.jsxs)(c.default,{alignItems:"center",children:[(0,L.jsx)(f.default,{typography:"Body2Strong",isTruncated:!0,color:o.textColor,mr:"4px",children:l.formatMessage({id:o.text})}),(0,L.jsx)(d.default,{name:"ChevronRightMini",color:o.textColor,size:20})]})})]})})}),[o,r,l]);return(0,L.jsx)(C.default,{hitSlop:16,size:"xs",onPress:i,h:8,children:u})}var W=n(942013),B=n(79694),V=n(627009),U=n(381815);function F(){var e=(0,y.default)();return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(f.default,{typography:"Body1",children:e.formatMessage({id:"msg__hardware_wallet_connection_is_only_available_on_the_official_app"})}),(0,L.jsx)(B.default,{onPress:function(){return(0,V.openUrl)(U.MONERO_GUI_URL)},children:(0,L.jsx)(f.default,{typography:"Body1",color:"text-success",children:e.formatMessage({id:"action__download_str"},{0:"Monero GUI"})})})]})}function H(e){var t=e.networkId,n=(0,y.default)(),r=(0,j.useNetwork)({networkId:t}).network;return(0,L.jsx)(f.default,{typography:"Body1",children:n.formatMessage({id:"content__hardware_wallet_does_not_support_str_yet"},{0:null==r?void 0:r.name})})}function z(e){var t=e.networkId;return t===W.OnekeyNetwork.xmr?(0,L.jsx)(F,{}):t&&[W.OnekeyNetwork.lightning,W.OnekeyNetwork.tlightning].includes(t)?(0,L.jsx)(H,{networkId:t}):null}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e){var t=e.onLastItemRender,n=e.item,r=e.isLastItem;return(0,w.useLayoutEffect)((function(){r&&(null==t||t())}),[r,t]),(0,L.jsx)(g.default,{size:8,token:{logoURI:n.logoURI,name:n.shortName}})}const G=function(e){var t=e.accountSelectorInfo,n=e.onPress,i=e.fullWidthMode,p=e.networkImpl,g=e.rpcStatusDisabled,C=e.selectedNetworkId,I=e.selectableNetworks,T=e.allowSelectAllNetworks,P=void 0!==T&&T,N=(0,y.default)(),R=(0,m.useSafeAreaInsets)().bottom,M=(0,w.useState)(""),W=(0,h.default)(M,2),B=W[0],V=W[1],U=x.default.serviceAccountSelector,F=(0,j.useManageNetworks)({allowSelectAllNetworks:!0}).enabledNetworks,H=t.selectedNetworkId,$=t.activeWallet,G=(0,w.useRef)(null),q=null!=I?I:F,X=null!=C?C:H,Q=(0,w.useMemo)((function(){return q.filter((function(e){if(p&&e.impl!==p)return!1;if((0,O.isAllNetworks)(e.id)){if(!P)return!1;if(!(0,k.isWalletCompatibleAllNetworks)(null==t?void 0:t.selectedWalletId))return!1}if(!P&&(0,O.isAllNetworks)(e.id))return!1;if(B){for(var n of Object.values(v()(e,"name","shortName","id","symbol")))if((0,E.strIncludes)(String(n),B))return!0;return!1}return!0}))}),[p,q,B,P,null==t?void 0:t.selectedWalletId]),J=(0,w.useCallback)((function(e){var t=e.item,r=e.isActive,o=e.isDisabled,l=e.isLastItem;return(0,L.jsx)(s.default,{_disabled:{opacity:.5},disabled:o,onPress:function(){var e=t.id||"";U.updateSelectedNetwork(e),null==n||n({networkId:e})},flex:1,children:function(e){var n=e.isHovered,a=e.isPressed;return(0,L.jsxs)(c.default,{alignItems:"center",space:3,p:1.5,m:i?0:1,borderWidth:2,bgColor:a?"surface-pressed":n?"surface-hovered":void 0,borderColor:i?"transparent":r?"interactive-default":"transparent",rounded:i?"12px":"full",children:[(0,L.jsx)(Y,{item:t,isLastItem:l}),i?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(f.default,{flex:1,typography:"Body1Strong",isTruncated:!0,numberOfLines:1,children:(0,O.isAllNetworks)(t.id)?N.formatMessage({id:"form__all_networks"}):t.name}),t.id!==X||o||(0,O.isAllNetworks)(t.id)||g||t.settings.rpcStatusDisabled?null:(0,L.jsx)(D,{networkId:t.id}),t.id!==X||o?null:(0,L.jsx)(d.default,{color:"interactive-default",name:"CheckCircleSolid"})]}):null]})}})}),[i,n,g,X,U,N]),Z=(0,w.useCallback)((function(e){var t=e.item,n=e.index===Q.length-1,r=X===t.id,o=(null==$?void 0:$.type)===_.WALLET_TYPE_HW&&!t.settings.hardwareAccountEnabled;return i&&o?(0,L.jsxs)(c.default,{alignItems:"center",children:[J({item:t,isActive:r,isDisabled:o,isLastItem:n}),(0,L.jsx)(l.default,{pr:2,children:(0,L.jsx)(a.default,{trigger:function(e){var t=Object.assign({},((0,u.default)(e),e));return(0,L.jsx)(s.default,K(K({},t),{},{children:(0,L.jsx)(d.default,{name:"InformationCircleOutline",size:20,color:"icon-subdued"})}))},bodyProps:{children:(0,L.jsx)(z,{networkId:t.id})}})})]}):J({item:t,isActive:r,isDisabled:o,isLastItem:n})}),[Q.length,X,null==$?void 0:$.type,i,J]);return(0,L.jsxs)(l.default,{alignSelf:"stretch",borderRightWidth:i||A.default.isNativeIOS?0:b.default.hairlineWidth,borderColor:i?void 0:"divider",flex:i?1:void 0,children:[i?(0,L.jsx)(l.default,{p:{base:4,md:6},pb:2,children:(0,L.jsx)(o.default,{w:"full",value:B,onChangeText:function(e){return V(e)},placeholder:N.formatMessage({id:"content__search"}),onClear:function(){return V("")}})}):null,(0,L.jsx)(r.default,{flex:1,children:(0,L.jsx)(S.FlatListRef,{ListEmptyComponent:E.NetworkListEmpty,initialNumToRender:20,ref:G,data:Q,contentContainerStyle:{flex:null!=Q&&Q.length?void 0:1,paddingBottom:R},keyExtractor:function(e){return e.id},renderItem:Z,showsVerticalScrollIndicator:!1,p:{base:i?2:1,md:i?4:1},pt:0})})]})}},201663:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var r=n(256666),o=n(18861),l=n(552322);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const i=function(e){return(0,l.jsx)(o.default,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({size:"8px",borderRadius:"full",borderWidth:"2px",borderColor:"background-default"},e))}},600784:(e,t,n)=>{n.r(t),n.d(t,{NetworkSelectorModal:()=>m});var r=n(877531),o=n(18861),l=n(634795),a=n(433996),i=n(472719),u=n(783112),s=n(493877),c=n(481047),d=n(671029),f=n(68132),p=n(659781),v=n(264142),h=n(552322);function m(){var e,t=(0,u.default)(),n=(0,f.useAccountSelectorChangeAccountOnPress)().onPressChangeAccount,m=(0,s.default)(),g=(0,i.useRoute)(),w=null!=(e=null==g?void 0:g.params)?e:{},y=w.networkImpl,b=w.onSelected,S=w.selectedNetworkId,O=w.selectableNetworks,k=w.sortDisabled,_=w.customDisabled,A=w.rpcStatusDisabled,x=w.allowSelectAllNetworks,j=(0,p.useAccountSelectorModalInfo)(),E=j.accountSelectorInfo;return j.shouldShowModal?(0,h.jsx)(r.default,{header:t.formatMessage({id:"network__networks"}),footer:null,staticChildrenProps:{flex:1,padding:0},height:"560px",rightContent:(0,h.jsxs)(h.Fragment,{children:[k?null:(0,h.jsx)(a.default,{type:"plain",size:"lg",circle:!0,name:"BarsArrowUpOutline",onPress:function(){m.navigate(c.RootRoutes.Modal,{screen:c.ModalRoutes.ManageNetwork,params:{screen:c.ManageNetworkModalRoutes.Sort}})}}),_?null:(0,h.jsx)(a.default,{type:"plain",size:"lg",circle:!0,name:"PlusCircleOutline",onPress:function(){m.navigate(c.RootRoutes.Modal,{screen:c.ModalRoutes.ManageNetwork,params:{screen:c.ManageNetworkModalRoutes.Listing}})}})]}),children:(0,h.jsx)(d.LazyDisplayView,{delay:0,children:(0,h.jsx)(o.default,{flex:1,flexDirection:"row",children:(0,h.jsx)(v.default,{networkImpl:y,fullWidthMode:!0,rpcStatusDisabled:A,accountSelectorInfo:E,selectedNetworkId:S,selectableNetworks:O,allowSelectAllNetworks:x,onPress:function(){var e=(0,l.default)((function*(e){var t=e.networkId;b?b(t):yield n({networkId:t,accountSelectorMode:E.accountSelectorMode})}));return function(t){return e.apply(this,arguments)}}()})})})}):null}},707406:(e,t,n)=>{n.r(t),n.d(t,{AccountSelectorTrigger:()=>d});var r=n(539144),o=n(202784),l=n(783112),a=n(849877),i=n(859071),u=n(342954),s=n(314527),c=n(552322),d=function(e){var t=e.showAddress,n=void 0===t||t,d=e.type,f=void 0===d?"plain":d,p=e.bg,v=e.mode,h=(0,i.useActiveWalletAccount)(),m=h.account,g=h.networkId,w=(0,i.useNavigationActions)().openAccountSelector,y=(0,i.useAppSelector)((function(e){return e.general.activeExternalWalletName})),b=(0,l.default)(),S=(0,o.useMemo)((function(){return{label:(null==m?void 0:m.name)||b.formatMessage({id:"empty__no_account_title"}),description:(0,a.isAllNetworks)(g)?"":((null==m?void 0:m.displayAddress)||(null==m?void 0:m.address)||"").slice(-4)||"",value:null==m?void 0:m.id}}),[null==m?void 0:m.displayAddress,null==m?void 0:m.address,null==m?void 0:m.id,null==m?void 0:m.name,b,g]),O=(0,r.default)(),k=(0,o.useMemo)((function(){return O?null:null!=m&&m.id?(0,c.jsx)(u.default,{accountId:null==m?void 0:m.id,walletName:y}):null}),[O,m,y]);return(0,c.jsx)(s.BaseSelectorTrigger,{type:f,bg:p,icon:k,label:S.label,description:n&&S.description,onPress:function(){w({mode:v})}})}},314527:(e,t,n)=>{n.r(t),n.d(t,{BaseSelectorTrigger:()=>g});var r=n(561220),o=n(435581),l=n(361301),a=n(256666),i=n(470310),u=n(10918),s=n(866904),c=n(795116),d=n(459740),f=n(46486),p=n(552322),v=["type","bg","icon","label","labelTypography","description","subDescription","onPress","hasArrow","space"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=e.type,n=void 0===t?"plain":t,a=e.bg,h=e.icon,g=e.label,w=e.labelTypography,y=void 0===w?"Body2Strong":w,b=e.description,S=e.subDescription,O=e.onPress,k=e.hasArrow,_=e.space,A=(0,d.default)(e,v);return(0,p.jsx)(r.default,{onPress:O,children:function(e){var t;return t=(null!=a?a:"basic"===n)?"action-secondary-default":void 0,e.isPressed&&(t="basic"===n?"action-secondary-pressed":"surface-hovered"),e.isHovered&&(t="basic"===n?"action-secondary-hovered":"surface-hovered"),e.isFocused&&(t="surface-selected"),(0,p.jsxs)(i.default,m(m({alignItems:"center",px:1,py:1,bg:t,borderRadius:"full",borderWidth:"basic"===n?f.default.hairlineWidth:0,borderColor:"border-default"},A),{},{children:[(0,p.jsxs)(l.default,{py:.5,px:g||S?1.5:.5,children:[(0,p.jsxs)(i.default,{alignItems:"center",space:null!=_?_:.5,children:[h?(0,p.jsx)(c.default,{minH:5,children:h}):null,g?(0,p.jsxs)(i.default,m(m({space:.5,alignItems:"center"},"plain"===n&&{pr:.5}),{},{children:[(0,p.jsx)(s.default,{typography:y,isTruncated:!0,maxW:"120px",children:g}),b?(0,p.jsx)(u.default.Body2,{color:"text-subdued",ml:"0.5",children:b}):null]})):null]}),S?(0,p.jsx)(u.default.Body2,{color:"text-subdued",children:S}):null]}),"plain"===n||k?(0,p.jsx)(o.default,{size:20,name:"ChevronDownMini",color:"icon-subdued"}):null]}))}})}},472339:(e,t,n)=>{n.r(t),n.d(t,{ImportAccountNetworkSelectorTrigger:()=>p});var r=n(18861),o=n(256666),l=n(737790),a=n(202784),i=n(493877),u=n(481047),s=n(314527),c=n(552322);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){var t=e.showName,n=void 0===t||t,o=e.type,d=void 0===o?"basic":o,p=e.bg,v=e.selectedNetwork,h=e.selectableNetworks,m=e.onSelected,g=(0,i.default)(),w=(0,a.useMemo)((function(){return{label:null==v?void 0:v.name,value:null==v?void 0:v.id,tokenProps:{token:{logoURI:null==v?void 0:v.logoURI,name:null==v?void 0:v.shortName}},badge:"evm"===(null==v?void 0:v.impl)?"EVM":void 0}}),[null==v?void 0:v.id,null==v?void 0:v.impl,null==v?void 0:v.logoURI,null==v?void 0:v.name,null==v?void 0:v.shortName]);return(0,c.jsx)(s.BaseSelectorTrigger,{type:d,bg:p,hasArrow:!0,icon:(0,c.jsx)(r.default,{position:"relative",children:(0,c.jsx)(l.default,f({size:6},w.tokenProps))}),label:n&&v.name,onPress:function(){g.navigate(u.RootRoutes.Modal,{screen:u.ModalRoutes.ManageNetwork,params:{screen:u.ManageNetworkModalRoutes.NetworkSelector,params:{selectedNetworkId:v.id,selectableNetworks:h,onSelected:m,rpcStatusDisabled:!0}}})},borderRadius:12,px:2,py:2.5,space:3,justifyContent:"space-between"})}},153894:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var r=n(612210),o=n(435581),l=(n(161049),n(925877)),a=n.n(l),i=n(785505),u=n.n(i),s=(n(907775),n(85047)),c=n(807688),d=n(783112),f=n(213208),p=n(552322),v=f.default.isNativeIOS,h=f.default.isNativeAndroid,m={camera:"modal__camera_access_not_granted",bluetooth:"modal__bluetooth_access_not_granted",location:"modal__location_access_not_granted",notification:"modal__notification_has_been_disabled",locationService:"modal__location_access_not_granted",localNetwork:"dialog__not_enabled_local_network"},g={camera:"modal__camera_access_not_granted_desc",bluetooth:"modal__bluetooth_access_not_granted_desc",location:"modal__location_access_not_granted_use_bluetooth_desc",notification:"modal__notification_has_been_disabled_desc",locationService:"modal__location_access_not_granted_use_bluetooth_desc",localNetwork:"dialog__not_enabled_local_network_desc"},w={camera:{},bluetooth:{iOS:"App-Prefs:Bluetooth",android:s.ActivityAction.BLUETOOTH_SETTINGS,desktop:null},location:{android:void 0,desktop:null},notification:{iOS:"app-settings:root=NOTIFICATIONS_ID",android:void 0,desktop:null},locationService:{android:s.ActivityAction.LOCATION_SOURCE_SETTINGS},localNetwork:{iOS:"App-Prefs:so.onekey.wallet"}},y=function(e){var t=e.type,l=e.onClose,i=(0,d.default)();!function(e,t){var n,r=e[t];if(v)return u()(r.iOS)?(n=r.iOS,function(){return c.openURL(n)}):a()(r.iOS)?r.iOS:function(){return c.openURL("app-settings:")};if(h)u()(r.android)?function(e){}(r.android):a()(r.android)&&r.android}(w,t);return(0,p.jsx)(r.default,{visible:!0,onClose:function(){var e;if(l)return l();var t=(null==(e=n.g.$navigationRef.current)?void 0:e.getParent())||n.g.$navigationRef.current;null==t||t.goBack()},contentProps:{icon:(0,p.jsx)(o.default,{name:"ExclamationTriangleOutline",size:48}),title:i.formatMessage({id:m[t]}),content:i.formatMessage({id:g[t]})},footerButtonProps:{hidePrimaryAction:!0}})};y.displayName="PermissionDialog";const b=y},268883:(e,t,n)=>{n.r(t),n.d(t,{ValidationFields:()=>O.ValidationFields,default:()=>L});var r=n(10918),o=n(719392),l=n(304335),a=n.n(l),i=n(18861),u=n(634795),s=n(669083),c=n(196234),d=n(202784),f=n(472719),p=n(783112),v=n(506885),h=n(945821),m=n(747225),g=n(432986),w=n(292147),y=n(859071),b=n(795116),S=n(901187),O=(n(213208),n(858663)),k=n(783723),_=n(321668),A=n(566147),x=n(912436),j=n.n(x),E=n(921311),C=n(677442),I=n(854341),T=n(597476),P=n(552322);const N=function(e){var t=e.onOk,n=e.hideTitle,o=e.placeCenter,l=e.title,a=e.subTitle,s=(0,p.default)(),c=(0,d.useRef)(),f=(0,m.useAppSelector)((function(e){return e.settings.enableLocalAuthentication})),v=(0,E.default)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:{password:""}}),g=v.control,w=v.handleSubmit,y=v.setError,O=(0,C.useFormOnChangeDebounced)({useFormReturn:v,revalidate:!1,clearErrorIfEmpty:!0}).formValues,x=w(function(){var e=(0,u.default)((function*(e){var n=yield h.default.servicePassword.getBgSensitiveTextEncodeKey(),r=(0,S.encodeSensitiveText)({text:e.password,key:n});(yield h.default.serviceApp.verifyPassword(r))?null==t||t(r,!1):y("password",{message:s.formatMessage({id:"msg__wrong_password"})})}));return function(t){return e.apply(this,arguments)}}()),N=(0,d.useMemo)((function(){return j()(x,1e3,{trailing:!1})}),[x]),R=(0,d.useCallback)((function(e){null==t||t(e,!0)}),[t]);(0,d.useEffect)((function(){f?(0,I.hasHardwareSupported)().then((function(e){e||setTimeout((function(){var e;return null==(e=c.current)?void 0:e.focus()}),100)})):setTimeout((function(){var e;return null==(e=c.current)?void 0:e.focus()}),100)}),[]);var M=(0,d.useMemo)((function(){return(0,P.jsxs)(P.Fragment,{children:[n?null:(0,P.jsxs)(i.default,{mb:"8",children:[(0,P.jsx)(r.default.DisplayLarge,{textAlign:"center",mb:2,children:l||s.formatMessage({id:"Verify_Password"})}),(0,P.jsx)(r.default.Body1,{textAlign:"center",color:"text-subdued",children:a||s.formatMessage({id:"Verify_password_to_continue"})})]}),(0,P.jsxs)(A.default,{children:[(0,P.jsx)(A.default.Item,{name:"password",defaultValue:"",control:g,rules:{minLength:{value:8,message:s.formatMessage({id:"msg__password_validation"})},maxLength:{value:128,message:s.formatMessage({id:"msg__password_validation"})}},children:(0,P.jsx)(A.default.PasswordInput,{ref:c,onSubmitEditing:x})}),(0,P.jsx)(_.default,{isDisabled:!(null!=O&&O.password),type:"primary",size:"xl",onPress:N,runAfterInteractions:!0,children:s.formatMessage({id:"action__continue",defaultMessage:"Continue"})})]}),(0,P.jsx)(b.default,{mt:"8",children:(0,P.jsx)(T.default,{onOk:R})})]})}),[g,null==O?void 0:O.password,n,s,R,x,N,a,l]);return o?(0,P.jsx)(k.default,{px:{base:n?0:4,md:0},children:(0,P.jsx)(b.default,{testID:"Validation",w:"full",h:"full",bg:"background-default",children:(0,P.jsx)(i.default,{maxW:"96",w:"full",h:"full",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:M})})}):(0,P.jsx)(k.default,{px:{base:n?0:4,md:0},children:M})};const R=function(e){var t=e.field,n=e.onOk,r=e.hideTitle,l=e.placeCenter,a=e.title,i=e.subTitle,s=(0,d.useState)(!1),f=(0,c.default)(s,2),p=f[0],v=f[1],m=(0,d.useState)(!1),g=(0,c.default)(m,2),w=g[0],k=g[1],_=(0,d.useState)(),A=(0,c.default)(_,2),x=A[0],j=A[1],E=(0,y.useAppSelector)((function(e){return e.settings.validationSetting})),C=(0,y.useAppSelector)((function(e){return e.data})).handOperatedLock,I=(0,d.useMemo)((function(){var e=!!t&&!(null==E||!E[t]);return!(!t||t!==O.ValidationFields.Secret)||e}),[E,t]);(0,d.useEffect)((function(){function e(){return(e=(0,u.default)((function*(){var e=yield h.default.servicePassword.getPassword();e&&(k(!0),null==n||n(e,!1)),j(!!e),v(!0)}))).apply(this,arguments)}I||function(){e.apply(this,arguments)}()}),[C]);var T=(0,d.useCallback)(function(){var e=(0,u.default)((function*(e,t){k(!0);var r=yield h.default.servicePassword.getBgSensitiveTextEncodeKey();yield h.default.servicePassword.savePassword((0,S.encodeSensitiveText)({text:e,key:r})),null==n||n(e,t)}));return function(t,n){return e.apply(this,arguments)}}(),[n]);if(!w){if(I)return(0,P.jsx)(N,{onOk:T,hideTitle:r,placeCenter:l,title:a,subTitle:i});if(p&&!x)return(0,P.jsx)(N,{onOk:T,hideTitle:r,placeCenter:l,title:a,subTitle:i})}return(0,P.jsx)(b.default,{w:"full",h:"full",children:(0,P.jsx)(o.default,{size:"lg"})})};const M=function(e){var t=e.onOk,n=e.skipSavePassword,o=e.hideTitle,l=e.isAutoHeight,a=(0,p.default)(),c=(0,y.useLocalAuthentication)().isOk,f=(0,y.useAppSelector)((function(e){return e.status.boardingCompleted})),v=(0,y.useAppSelector)((function(e){return e.status.authenticationType})),m=(0,E.default)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:{password:"",confirmPassword:""}}),g=m.control,w=m.handleSubmit,b=m.getValues,O=(0,C.useFormOnChangeDebounced)({useFormReturn:m,revalidate:!1,clearErrorIfEmpty:!0}).formValues,x=(0,d.useMemo)((function(){return!(null!=O&&O.password)||!(null!=O&&O.confirmPassword)}),[null==O?void 0:O.confirmPassword,null==O?void 0:O.password]),j=(0,d.useCallback)(function(){var e=(0,u.default)((function*(e){if(e.password===e.confirmPassword){var r=yield h.default.servicePassword.getBgSensitiveTextEncodeKey(),o=(0,S.encodeSensitiveText)({text:e.password,key:r});f&&!n&&(yield h.default.serviceApp.updatePassword("",o)),null==t||t(o,e.withEnableAuthentication)}else s.default.show({title:a.formatMessage({id:"msg__password_needs_to_be_the_same"})},{type:"error"})}));return function(t){return e.apply(this,arguments)}}(),[f,n,t,a]),I="FACIAL"===v?a.formatMessage({id:"content__face_id"}):a.formatMessage({id:"content__touch_id"});return(0,P.jsxs)(k.default,{h:l?{base:"full",sm:"auto"}:"full",px:{base:o?0:4,md:0},children:[o?null:(0,P.jsxs)(i.default,{mb:"8",children:[(0,P.jsxs)(r.default.DisplayLarge,{textAlign:"center",mb:2,children:["\ud83d\udd10"," ",a.formatMessage({id:"title__set_password",defaultMessage:"Set Password"})]}),(0,P.jsx)(r.default.Body1,{textAlign:"center",color:"text-subdued",children:a.formatMessage({id:"Only_you_can_unlock_your_wallet",defaultMessage:"Only you can unlock your wallet"})})]}),(0,P.jsxs)(A.default,{children:[(0,P.jsx)(A.default.Item,{name:"password",defaultValue:"",control:g,rules:{minLength:{value:8,message:a.formatMessage({id:"msg__password_validation"})},maxLength:{value:128,message:a.formatMessage({id:"msg__password_validation"})},validate:function(e){var t=b("confirmPassword");if(t&&e)return t!==e?a.formatMessage({id:"msg__password_needs_to_be_the_same"}):void 0}},children:(0,P.jsx)(A.default.PasswordInput,{autoFocus:!0,onSubmitEditing:w(j),placeholder:a.formatMessage({id:"form__rule_at_least_int_digits"},{0:8})})}),(0,P.jsx)(A.default.Item,{name:"confirmPassword",defaultValue:"",control:g,rules:{minLength:{value:8,message:a.formatMessage({id:"msg__password_validation"})},validate:function(e){var t=b("password");if(t&&e)return t!==e?a.formatMessage({id:"msg__password_needs_to_be_the_same"}):void 0}},children:(0,P.jsx)(A.default.PasswordInput,{onSubmitEditing:w(j),placeholder:a.formatMessage({id:"Confirm_password"})})}),c?(0,P.jsx)(A.default.Item,{name:"withEnableAuthentication",defaultValue:c,control:g,children:(0,P.jsx)(A.default.CheckBox,{title:a.formatMessage({id:"content__authentication_with"},{0:I})})}):null,(0,P.jsx)(_.default,{type:"primary",size:"xl",onPress:w(j),isDisabled:x,children:a.formatMessage({id:"action__continue",defaultMessage:"Continue"})})]})]})};const L=(0,d.memo)((function(e){var t=e.children,n=e.skipSavePassword,l=e.field,b=e.walletId,S=e.hideTitle,O=e.isAutoHeight,k=e.placeCenter,_=e.title,A=e.subTitle,x=e.networkId,j=e.checkIsNeedPassword,E=(0,f.useNavigation)(),C=(0,m.useGetWalletDetail)(b),I=(0,p.default)(),T=(0,y.useNetwork)({networkId:x}).network,N=h.default.engine,L=h.default.serviceHardware,D=h.default.serviceApp,W=(0,d.useState)(),B=(0,c.default)(W,2),V=B[0],U=B[1],F=(0,d.useState)(""),H=(0,c.default)(F,2),z=H[0],$=H[1],K=(0,d.useState)(),Y=(0,c.default)(K,2),G=Y[0],q=Y[1],X=(0,d.useState)(),Q=(0,c.default)(X,2),J=Q[0],Z=Q[1],ee=(0,m.useData)().isPasswordSet,te=(0,d.useState)(ee),ne=(0,c.default)(te,1)[0],re=(0,m.useAppSelector)((function(e){return e.data.isPasswordLoadedInVault})),oe=(0,d.useState)(void 0),le=(0,c.default)(oe,2),ae=le[0],ie=le[1],ue=(0,d.useCallback)((function(e,t){Z(t),$(e)}),[]),se=(0,d.useCallback)((function(e,t){q(t),$(e)}),[]),ce=(0,d.useCallback)((function(){null!=E&&null!=E.canGoBack&&E.canGoBack()&&E.goBack()}),[E]),de="hw"===(null==C?void 0:C.type),fe=(null==C?void 0:C.type)===v.WALLET_TYPE_EXTERNAL;return(0,d.useEffect)((function(){var e=setTimeout((function(){D.checkUpdateStatus()}),1e3);return function(){clearTimeout(e)}}),[]),(0,d.useEffect)((function(){function e(){s.default.show({title:I.formatMessage({id:"action__connection_timeout"})}),ce()}function t(){return(t=(0,u.default)((function*(){if(null!=C&&C.id){var t=yield N.getHWDeviceByWalletId(C.id);if(t){var n=null;try{var r=yield L.getFeatursByWalletId(C.id);r?(n=r,w.default.hardwareSDK.debug("use features cache: ",r)):n=yield L.getFeatures(t.mac)}catch(o){return ce(),void g.deviceUtils.showErrorToast(o)}if(!n)return s.default.show({title:I.formatMessage({id:"action__connection_timeout"})}),void ce();U(n)}else e()}else e()}))).apply(this,arguments)}de&&function(){t.apply(this,arguments)}()}),[de,N,null==C?void 0:C.id,I,ce,L]),(0,d.useEffect)((function(){null!=T&&T.settings.validationRequired&&!re&&$("")}),[re,T]),(0,d.useEffect)((function(){j&&j().then((function(e){ie(e)}))}),[j]),fe?(0,P.jsx)(i.default,{flex:1,children:t(z,{withEnableAuthentication:G,isLocalAuthentication:J})}):z||a()(ae)&&!ae?(0,P.jsx)(i.default,{w:"full",h:"full",children:t(z,{withEnableAuthentication:G,isLocalAuthentication:J})}):de?V?(0,P.jsx)(i.default,{w:"full",h:"full",children:t(z,{withEnableAuthentication:G,isLocalAuthentication:J,deviceFeatures:V})}):(0,P.jsxs)(i.default,{h:"100%",justifyContent:"center",alignItems:"center",children:[(0,P.jsx)(o.default,{size:"lg"}),(0,P.jsx)(r.default.DisplayMedium,{mt:6,children:I.formatMessage({id:"modal__device_status_check"})})]}):j&&"undefined"===typeof ae?(0,P.jsx)(i.default,{h:"100%",justifyContent:"center",alignItems:"center",children:(0,P.jsx)(o.default,{size:"lg"})}):ne?(0,P.jsx)(R,{onOk:ue,field:l,hideTitle:S,placeCenter:k,title:_,subTitle:A}):(0,P.jsx)(M,{onOk:se,skipSavePassword:n,hideTitle:S,isAutoHeight:O})}))},858663:(e,t,n)=>{var r;n.r(t),n.d(t,{ValidationFields:()=>r}),function(e){e.Payment="Payment",e.Wallet="Wallet",e.Account="Account",e.Secret="Secret"}(r||(r={}))},15304:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(256666),o=n(297263),l=n(196234),a=n(968594),i=n(552322);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){var t=(0,o.default)(["icon-default"]),n=(0,l.default)(t,1)[0];return(0,i.jsxs)(a.default,s(s({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{},{children:[(0,i.jsx)(a.Circle,{cx:"8",cy:"8",r:"5.5",stroke:n}),(0,i.jsx)(a.Circle,{cx:"8",cy:"8",r:"4",fill:n})]}))}},279513:(e,t,n)=>{n.r(t),n.d(t,{SelectedIndicator:()=>i});var r=n(18861),o=n(435581),l=n(553197),a=n(552322);function i(e){var t=e.multiSelect,n=e.selected,i=e.width;return!1===t&&!1===n?null:(0,a.jsx)(r.default,{borderRadius:"full",justifyContent:"center",alignItems:"center",bgColor:"icon-on-primary",size:`${i}px`,children:n&&(0,a.jsx)(l.View,{from:{scale:0},animate:{scale:1},transition:{type:"timing",duration:150},children:(0,a.jsx)(o.default,{name:"CheckCircleMini",color:"interactive-default",size:i})})})}},767993:(e,t,n)=>{n.r(t),n.d(t,{ProviderApiWalletConnect:()=>V,WalletConnectClientBase:()=>W,WalletConnectContextProvider:()=>B});var r=n(256666),o=n(634795),l=n(887371),a=n(545754),i=n(411987),u=n(695058),s=n(859375),c=(n(854457),n(28524)),d=n(438760),f=n(402814),p=n(292147),v=n(453982),h=n.n(v),m=n(301842),g=n.n(m),w=n(116545),y=n(163473),b=n(996433),S=n(401253),O=n(560084),k=n(817781),_=n(620278);function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,i.default)(this,n)}}var x=function(e){(0,a.default)(n,e);var t=A(n);function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).emitter=new c.CrossEventEmitter,e.subscribedTopics={},e.clearSubscribedTopicsCache=function(){var t;e.subscribedTopics={},null==(t=e.socketClient)||t.removeEventListener("close",e.clearSubscribedTopicsCache)},e}var r=n.prototype;return r.subscribe=function(e){this.subscribedTopics[e]||((0,y.default)((0,u.default)(n.prototype),"subscribe",this).call(this,e),this.subscribedTopics[e]=!0)},r._socketCreate=function(){var e,t=this;((0,y.default)((0,u.default)(n.prototype),"_socketCreate",this).call(this),this.clearCacheOnCloseEvent(this._nextSocket),this._nextSocket)&&(null==(e=this._nextSocket)||null==e.addEventListener||e.addEventListener("open",(function(){t.emitter.emit("transport_open")})))},r.clearCacheOnCloseEvent=function(e){e&&(null==e||e.removeEventListener("close",this.clearSubscribedTopicsCache),null==e||e.addEventListener("close",this.clearSubscribedTopicsCache))},(0,l.default)(n,[{key:"socketClient",get:function(){return this._socket}}]),n}(k.default),j={};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,i.default)(this,n)}}var T="";var P,N,R=function(e){(0,a.default)(n,e);var t=I(n);function n(e,n,r){var o,l,a,i;n.uri||(l=function(e){var t=e.bridge,n=`${t}@${e.isWalletSide?"wallet":"dapp"}`,r=j[n];return r&&t!==r._url&&(r.close(),r=void 0),r&&r.closed&&(r=void 0),r||(r=new x({protocol:_.WALLET_CONNECT_PROTOCOL,version:_.WALLET_CONNECT_VERSION,url:t})).emitter.once("transport_open",(function(){})),j[n]=r,r}({bridge:(null==(a=n.session)?void 0:a.bridge)||function(e){var t=e.bridge;return(0,S.shouldSelectRandomly)(t)?(T||(T=(0,S.getBridgeUrl)(t)),T):t}({bridge:n.bridge||_.WALLET_CONNECT_BRIDGE}),isWalletSide:n.isWalletSide}),l.emitter.once("transport_open",(function(){!function(){var e;o.clientId&&o.socketTransport&&(null==(e=o.socketTransport)||null==e.subscribe||e.subscribe(`${o.clientId}`))}()})));(o=t.call(this,{transport:l,cryptoLib:O,connectorOpts:n,sessionStorage:e,pushServerOpts:r}),l)&&(o.bridge=(null==(i=l)?void 0:i._url)||o.bridge);return g()(n.isDeepLink)||(o.isDeepLink=n.isDeepLink),o}var r=n.prototype;return r.once=function(e,t){var n=!1;this.on(e,(function(){n||(n=!0,t.apply(void 0,arguments))}))},r.getAccountAddress=function(){var e;return h()((null==(e=this.accounts)?void 0:e[0])||"")},(0,l.default)(n,[{key:"session",get:function(){return C(C({},(0,y.default)((0,u.default)(n.prototype),"session",this)),{},{isDeepLink:this.isDeepLink})},set:function(e){(0,w.default)((0,u.default)(n.prototype),"session",e,this,!0),g()(e.isDeepLink)||(this.isDeepLink=e.isDeepLink)}},{key:"socketTransport",get:function(){return this._transport}},{key:"isTransportOpen",get:function(){var e;return!(null!=(e=this.socketTransport)&&e.closed)}}]),n}(b.default);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,i.default)(this,n)}}var W=(P=(0,d.backgroundMethod)(),N=function(e){(0,a.default)(n,e);var t=D(n);function n(e){var n;(n=t.call(this)).isWalletSide=!0,n.EVENT_NAMES={destroy:"destroy",call_request:"call_request",call_request_sent:"call_request_sent",session_update:"session_update",session_request:"session_request",connect:"connect",disconnect:"disconnect",error:"error",transport_error:"transport_error",transport_open:"transport_open",modal_closed:"modal_closed"},n.connector=null;var r=e.sessionStorage,o=e.clientMeta;return n.sessionStorage=r,n.clientMeta=o,n}var r=n.prototype;return r.waitConnectorPeerReady=function(){var e=(0,o.default)((function*(e){var t=e.connector,n=e.logName,r=e.timeout;this.isWalletSide&&(yield(0,f.waitForDataLoaded)({data:function(){return Boolean(null==t?void 0:t.peerId)},logName:n,timeout:r}))}));return function(t){return e.apply(this,arguments)}}(),r._destroyConnector=function(){var e=(0,o.default)((function*(e){if(e){p.default.walletConnect.info("try to disconnect prev connection...",e.peerMeta),this.unregisterEvents(e),e.connected&&(yield this.waitConnectorPeerReady({connector:e,logName:"waitConnectorPeerReady -> disconnect()",timeout:3e3}),yield e.killSession()),e._handleSessionDisconnect();var t={connector:e};this.emit(this.EVENT_NAMES.destroy,t)}}));return function(t){return e.apply(this,arguments)}}(),r.createConnector=function(){var e=(0,o.default)((function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.shouldDisconnectStorageSession,r=t.isDeepLink;n&&(yield this.disconnect()),this.unregisterEvents(this.connector),e.bridge=e.bridge||_.WALLET_CONNECT_BRIDGE;var o=new R(this.sessionStorage,L(L({clientMeta:this.clientMeta,isWalletSide:this.isWalletSide},e),{},{isDeepLink:r}));return this.connector=o,yield this.setupConnector(o),o}));return function(t){return e.apply(this,arguments)}}(),r.autoConnectLastSession=function(){var e=(0,o.default)((function*(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).session;e||(e=yield this.sessionStorage.getSession()),e&&(yield this.createConnector({session:e},{shouldDisconnectStorageSession:!1}))}));return function(){return e.apply(this,arguments)}}(),r.setupConnector=function(){var e=(0,o.default)((function*(e){e&&(this.registerEvents(e),e.on(this.EVENT_NAMES.transport_open,(function(){var t;null==(t=e.socketTransport)||t.subscribe(`${e.clientId}`)})),setTimeout((function(){var t;null==(t=e.socketTransport)||t.subscribe(`${e.clientId}`)}),600),setTimeout((function(){var t;null==(t=e.socketTransport)||t.subscribe(`${e.clientId}`)}),1500),yield this.waitConnectorPeerReady({connector:e,logName:"waitConnectorPeerReady -> connect()",timeout:_.WALLET_CONNECT_CONNECTION_TIMEOUT}),e.connected||(yield e.createSession()))}));return function(t){return e.apply(this,arguments)}}(),r.isRequestOptionsV2=function(e){return Boolean(e.proposal||e.sessionRequest||e.sessionV2)},r.getConnectorOrigin=function(e){var t,n;return this.isRequestOptionsV2(e)?this.getConnectorOriginV2(e):(null==e||null==(t=e.connector)||null==(n=t.peerMeta)?void 0:n.url)||""},r.getConnectorOriginV2=function(e){var t,n,r,o,l,a,i,u,s,c;return(null==e||null==(t=e.sessionV2)||null==(n=t.peer)||null==(r=n.metadata)?void 0:r.url)||(null==e||null==(o=e.proposal)||null==(l=o.params)||null==(a=l.proposer)||null==(i=a.metadata)?void 0:i.url)||(null==e||null==(u=e.sessionRequest)||null==(s=u.context)||null==(c=s.verified)?void 0:c.origin)||""},r.disconnect=function(){var e=(0,o.default)((function*(){yield this._destroyConnector(this.connector),this.connector=void 0,this.walletService=void 0;var e=yield this.sessionStorage.getSession();if(e){var t=new R(this.sessionStorage,{session:e,isWalletSide:this.isWalletSide});yield this._destroyConnector(t)}}));return function(){return e.apply(this,arguments)}}(),r.addEventListener=function(e,t,n){var r=this,o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).throwError,l=void 0===o||o;e.on(t,(function(o,a){p.default.walletConnect.info("EVENT",t,a,o);var i={connector:e,error:o,payload:a};if(r.emit(t,i),o&&l)throw o;null==n||n(o,a)}))},r.unregisterEvents=function(e){e&&(p.default.walletConnect.info("unregisterEvents >>>>>> "),Object.values(this.EVENT_NAMES).forEach((function(t){return e.off(t)})))},r.registerEvents=function(e){var t=this;e&&(this.addEventListener(e,this.EVENT_NAMES.session_request,(function(e,t){var n,r=((null==(n=t.params)?void 0:n[0])||{}).peerMeta;p.default.walletConnect.info("session_request >>> peerMeta",r)})),this.addEventListener(e,this.EVENT_NAMES.session_update),this.addEventListener(e,this.EVENT_NAMES.call_request,(function(e,t){})),this.addEventListener(e,this.EVENT_NAMES.call_request_sent,(function(){})),this.addEventListener(e,this.EVENT_NAMES.connect),this.addEventListener(e,this.EVENT_NAMES.disconnect,(function(e,n){t.disconnect()})),this.addEventListener(e,this.EVENT_NAMES.modal_closed,(function(){var e;null!=(e=t.connector)&&e.connected||t.disconnect()})),this.addEventListener(e,this.EVENT_NAMES.error),this.addEventListener(e,this.EVENT_NAMES.transport_error),this.addEventListener(e,this.EVENT_NAMES.transport_open))},(0,l.default)(n)}(c.CrossEventEmitter),(0,s.default)(N.prototype,"disconnect",[P],Object.getOwnPropertyDescriptor(N.prototype,"disconnect"),N.prototype),N),B=(0,l.default)((function(){})),V=(0,l.default)((function(){}))},908137:(e,t,n)=>{n.r(t),n.d(t,{WalletConnectClientForWallet:()=>T});var r=n(634795),o=n(298537),l=n.n(o),a=n(887371),i=n(545754),u=n(411987),s=n(695058),c=n(859375),d=(n(854457),n(626996)),f=n(702139),p=n(578887),v=(n(735260),n(438760)),h=n(613549),m=n(292147),g=n(213208),w=(n(465146),n(776553)),y=n(341290).default.Minimizer;var b,S,O,k=n(953150),_=n(767993),A=n(620278),x=n(961759),j=n(402814);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var o=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var C=new x.WalletConnectSessionStorage({storageId:x.WalletConnectSessionStorage.STORAGE_IDS.WALLET_SIDE}),I=A.WALLET_CONNECT_CLIENT_META,T=(b=(0,v.backgroundMethod)(),S=(0,v.backgroundMethod)(),O=function(e){(0,i.default)(n,e);var t=E(n);function n(e){var n;return(n=t.call(this,l()({sessionStorage:C,clientMeta:I},e))).isWalletSide=!0,n.prevActiveSessionsCache=[],(0,r.default)((function*(){yield n.autoConnectLastSession()}))(),n}var o=n.prototype;return o.initWeb3WalletV2=function(){var e=(0,r.default)((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{if(yield(0,w.wait)(e),this.web3walletV2)return;yield this.createWeb3WalletV2()}catch(t){console.error("createWeb3WalletV2 ERROR:",t)}}));return function(){return e.apply(this,arguments)}}(),o.recreateWeb3WalletV2=function(){var e=(0,r.default)((function*(){if(!this.web3walletV2&&!this.web3walletV2Core)return yield(0,w.wait)(5e3),this.createWeb3WalletV2()}));return function(){return e.apply(this,arguments)}}(),o.createWeb3WalletV2=function(){var e=(0,r.default)((function*(){var e,t=this;g.default.isManifestV3;var n=new d.Core({projectId:A.WALLET_CONNECT_V2_PROJECT_ID,storage:undefined,storageOptions:{database:":memory:",table:"walletconnect.db"}});n.isWalletSide=!0,this.web3walletV2Core=n,null==n||null==(e=n.relayer)||e.once(d.RELAYER_EVENTS.transport_closed,(function(e){var o,l,a,i,u,s,c,d,f;console.error("WalletConnect V2 Core ERROR: relayer_transport_closed >>>>>> ",e);var p=function(){var e=(0,r.default)((function*(){t.web3walletV2&&t.unregisterEventsV2(t.web3walletV2);try{var e,r,o;yield null==n||null==(e=n.relayer)||null==(r=e.provider)||null==(o=r.connection)?void 0:o.close()}catch(l){console.error("WalletConnect V2 doReconnect close connection ERROR: ",l)}t.web3walletV2Core=void 0,t.web3walletV2=void 0,t.recreateWeb3WalletV2()}));return function(){return e.apply(this,arguments)}}();null==n||null==(o=n.relayer)||null==(l=o.provider)||null==(a=l.connection)||a.once("open",(function(){console.error("WalletConnect V2 Core ERROR: relayer_transport_closed but WebSocket still open ")})),null==n||null==(i=n.relayer)||null==(u=i.provider)||null==(s=u.connection)||s.once("close",(function(){console.error("WalletConnect V2 Core ERROR: relayer_transport_closed and WebSocket closed ")})),null==n||null==(c=n.relayer)||null==(d=c.provider)||null==(f=d.connection)||f.once("register_error",(function(e){var t=((null==e?void 0:e.message)||"").slice(0,100);console.error("WalletConnect V2 Core ERROR: WebSocket ERROR > register_error  >>>>>> ",t),p()}))}));var o=yield p.Web3Wallet.init({core:n,metadata:A.WALLET_CONNECT_CLIENT_META});this.web3walletV2=o,yield this.clearHistoryCacheV2((function(){return!0})),this.registerEventsV2(this.web3walletV2),yield this.getActiveSessionsV2()}));return function(){return e.apply(this,arguments)}}(),o.pair=function(){var e=(0,r.default)((function*(e){var t=this;if(yield(0,j.waitForDataLoaded)({data:function(){return t.web3walletV2},logName:"WalletConnectV2 pair(uri) wait web3walletV2 ready.",timeout:(0,w.getTimeDurationMs)({seconds:30})}),!this.web3walletV2)throw new Error("web3walletV2 not ready yet");return this.web3walletV2.pair({uri:e.uri})}));return function(t){return e.apply(this,arguments)}}(),o.disconnectPairingV2=function(){var e=(0,r.default)((function*(e){var t,n=e.topic;return null==(t=this.web3walletV2)?void 0:t.core.pairing.disconnect({topic:n})}));return function(t){return e.apply(this,arguments)}}(),o.getActivePairingsV2=function(){var e=(0,r.default)((function*(){var e,t;return Promise.resolve(null!=(e=null==(t=this.web3walletV2)?void 0:t.core.pairing.getPairings())?e:[])}));return function(){return e.apply(this,arguments)}}(),o.getSessionV2ByTopic=function(){var e=(0,r.default)((function*(e){var t=e.topic;if(t){var n=(yield this.getActiveSessionsV2({saveCache:!1})).sessions.find((function(e){return e.topic===t}));return n||(n=this.prevActiveSessionsCache.find((function(e){return e.topic===t}))),n}}));return function(t){return e.apply(this,arguments)}}(),o.getActiveSessionsV2=function(){var e=(0,r.default)((function*(){var e,t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).saveCache,r=void 0===n||n,o=Object.values(null!=(e=null==(t=this.web3walletV2)?void 0:t.getActiveSessions())?e:{});return r&&(this.prevActiveSessionsCache=o),Promise.resolve({sessions:o})}));return function(){return e.apply(this,arguments)}}(),o.redirectToDapp=function(){var e=(0,r.default)((function*(e){var t,n=e.connector;if(n){var r=(null==(t=n.session)?void 0:t.isDeepLink)||n.isDeepLink;if(m.default.walletConnect.info("redirectToDapp",{isDeepLink:r}),r);}}));return function(t){return e.apply(this,arguments)}}(),o.connectV2=function(){var e=(0,r.default)((function*(e){var t=e.uri;e.isDeepLink;return this.pair({uri:t})}));return function(t){return e.apply(this,arguments)}}(),o.connect=function(){var e=(0,r.default)((function*(e){var t,n=e.uri,r=e.isDeepLink;n=(null==(t=n)?void 0:t.trim())||n;var o=k.default.getWalletConnectUriInfo({uri:n});if(null!=o&&o.v2)return this.connectV2({uri:n,isDeepLink:r});var l=new URL(n).searchParams,a=h.IMPL_EVM;if((l.get("network")===h.IMPL_ALGO||l.get("algorand"))&&(a=h.IMPL_ALGO),l.get("network")===h.IMPL_APTOS&&(a=h.IMPL_APTOS),this.previousUri&&this.previousUri===n)throw yield(0,w.wait)(1500),new Error("WalletConnect ERROR: uri is expired");this.previousUri=n;var i=yield this.createConnector({uri:n,networkImpl:a},{shouldDisconnectStorageSession:!0,isDeepLink:r}),u=this.getConnectorOrigin({connector:i});m.default.walletConnect.info("new WalletConnect() by uri",{origin:u,network:a,uri:n});try{var s=yield this.getSessionStatusToApprove({connector:i});if(i.connected)m.default.walletConnect.info("walletConnect.connect -> updateSession",s),i.updateSession(s);else{m.default.walletConnect.info("walletConnect.connect -> approveSession",s),i.approveSession(s)}this.redirectToDapp({connector:i})}catch(c){m.default.walletConnect.info("walletConnect.connect -> rejectSession",c),i.rejectSession(c)}finally{yield(0,w.wait)(600)}}));return function(t){return e.apply(this,arguments)}}(),o.clearExpirationsCacheV2=function(){var e=(0,r.default)((function*(){var e=this;try{var t,n,r=Array.from(null!=(t=null==(n=this.web3walletV2)?void 0:n.core.expirer.keys)?t:[]);null!=r&&r.length&&(yield Promise.all(r.map((function(t){var n;return null==(n=e.web3walletV2)?void 0:n.core.expirer.del(t)}))))}catch(o){console.error(o)}}));return function(){return e.apply(this,arguments)}}(),o.clearRequestsCacheV2=function(){var e=(0,r.default)((function*(e){var t=this;try{var n,r=null==(n=this.web3walletV2)?void 0:n.getPendingSessionRequests();null!=r&&r.length&&(yield Promise.all(null==r?void 0:r.filter(e).map((function(e){return t.rejectSessionRequestV2({request:e,error:new Error("Wallet destroy")})}))))}catch(o){console.error(o)}}));return function(t){return e.apply(this,arguments)}}(),o.clearSessionsCacheV2=function(){var e=(0,r.default)((function*(){var e=this;try{var t=(yield this.getActiveSessionsV2({saveCache:!1})).sessions;yield Promise.all(t.map((function(t){return e.disconnectV2({sessionV2:t,clearWalletIfEmptySessions:!1})})))}catch(n){console.error(n)}}));return function(){return e.apply(this,arguments)}}(),o.clearProposalsCacheV2=function(){var e=(0,r.default)((function*(){var e=this;try{var t,n,o=Object.values(null!=(t=null==(n=this.web3walletV2)?void 0:n.getPendingSessionProposals())?t:{});null!=o&&o.length&&(yield Promise.all(null==o?void 0:o.map(function(){var t=(0,r.default)((function*(t){var n;return yield null==(n=e.web3walletV2)?void 0:n.rejectSession({id:t.id,reason:(0,f.getSdkError)("USER_REJECTED_METHODS","Wallet destroy")})}));return function(e){return t.apply(this,arguments)}}())))}catch(l){console.error(l)}}));return function(){return e.apply(this,arguments)}}(),o.clearPairingsCacheV2=function(){var e=(0,r.default)((function*(){var e=this;try{var t=yield this.getActivePairingsV2();yield Promise.all(t.map((function(t){return e.disconnectPairingV2({topic:t.topic})})))}catch(n){console.error(n)}}));return function(){return e.apply(this,arguments)}}(),o.clearHistoryCacheV2=function(){var e=(0,r.default)((function*(e){var t=this;try{var n,r,o=Array.from(null!=(n=null==(r=this.web3walletV2)?void 0:r.core.history.records.values())?n:[]);null!=o&&o.length&&(yield Promise.all(o.filter(e).map((function(e){var n;return null==(n=t.web3walletV2)?void 0:n.core.history.delete(e.topic)}))))}catch(l){console.error(l)}}));return function(t){return e.apply(this,arguments)}}(),o.clearMessagesCacheV2=function(){var e=(0,r.default)((function*(){var e=this;try{var t,n,r=Array.from(null!=(t=null==(n=this.web3walletV2)?void 0:n.core.relayer.messages.messages.keys())?t:[]);null!=r&&r.length&&(yield Promise.all(r.map((function(t){var n;return null==(n=e.web3walletV2)?void 0:n.core.relayer.messages.del(t)}))))}catch(o){console.error(o)}}));return function(){return e.apply(this,arguments)}}(),o.clearKeychainsCacheV2=function(){var e=(0,r.default)((function*(){var e=this;try{var t,n,r=Array.from(null!=(t=null==(n=this.web3walletV2)?void 0:n.core.crypto.keychain.keychain.keys())?t:[]);null!=r&&r.length&&(yield Promise.all(r.map((function(t){var n;return null==(n=e.web3walletV2)?void 0:n.core.crypto.keychain.del(t)}))))}catch(o){console.error(o)}}));return function(){return e.apply(this,arguments)}}(),o.clearAllWalletCacheV2=function(){var e=(0,r.default)((function*(){var e,t,n,r,o,l,a,i,u,s,c,d,f,p,v,h,m,g,y,b,S,O,k,_,A,x,j,E,C,I,T,P,N,R=this;yield this.clearRequestsCacheV2((function(){return!0})),yield this.clearSessionsCacheV2(),yield this.clearProposalsCacheV2(),yield this.clearPairingsCacheV2(),yield this.clearHistoryCacheV2((function(){return!0})),yield this.clearMessagesCacheV2(),yield this.clearKeychainsCacheV2(),this.prevActiveSessionsCache=[];var M=null==(e=this.web3walletV2)||null==(t=e.core)||null==(n=t.history)?void 0:n.storageKey,L=null==(r=this.web3walletV2)||null==(o=r.core)||null==(l=o.pairing)?void 0:l.storageKey;null==(a=this.web3walletV2)||null==(i=a.core)||null==(u=i.expirer)||u.storageKey;[M,L,null==(s=this.web3walletV2)||null==(c=s.core)||null==(d=c.crypto)||null==(f=d.keychain)?void 0:f.storageKey,null==(p=this.web3walletV2)||null==(v=p.core)||null==(h=v.relayer)||null==(m=h.subscriber)?void 0:m.storageKey,null==(g=this.web3walletV2)||null==(y=g.core)||null==(b=y.relayer)||null==(S=b.messages)?void 0:S.storageKey,null==(O=this.web3walletV2)||null==(k=O.engine)||null==(_=k.signClient)||null==(A=_.proposal)?void 0:A.storageKey,null==(x=this.web3walletV2)||null==(j=x.engine)||null==(E=j.signClient)||null==(C=E.session)?void 0:C.storageKey,null==(I=this.web3walletV2)||null==(T=I.engine)||null==(P=T.signClient)||null==(N=P.pendingRequest)?void 0:N.storageKey].filter(Boolean).forEach((function(e){var t,n,r;null==(t=R.web3walletV2)||null==(n=t.core)||null==(r=n.storage)||r.removeItem(e)})),yield(0,w.wait)(300)}));return function(){return e.apply(this,arguments)}}(),(0,a.default)(n)}(_.WalletConnectClientBase),(0,c.default)(O.prototype,"connect",[b],Object.getOwnPropertyDescriptor(O.prototype,"connect"),O.prototype),(0,c.default)(O.prototype,"clearAllWalletCacheV2",[S],Object.getOwnPropertyDescriptor(O.prototype,"clearAllWalletCacheV2"),O.prototype),O)},459632:(e,t,n)=>{n.r(t),n.d(t,{ConnectWalletListItem:()=>D,ConnectWalletListView:()=>B,InitWalletServicesData:()=>W,WalletConnectQrcodeModal:()=>V});var r=n(877531),o=n(634795),l=n(196234),a=n(18861),i=n(561220),u=n(866904),s=n(225447),c=n(759900),d=n(202784),f=n(472719),p=n(783112),v=n(735260),h=n(46486),m=n(749888),g=n(773371),w=n(513249),y=n(292147),b=n(213208),S=n(450688),O=n(776553),k=n(627009),_=n(454655),A=n(539144),x=n(256666),j=n(968079),E=n(945821),C=n(759275),I=n(620278);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,x.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=Object.freeze({data:[],error:void 0,loading:!0});function R(){var e=E.default.serviceWalletConnect,t=function(){var e=(0,d.useState)(N),t=(0,l.default)(e,2),n=t[0],r=t[1];return(0,d.useEffect)((function(){(0,o.default)((function*(){try{var e=yield fetch("https://registry.walletconnect.org/data/wallets.json"),t=yield e.json();r({data:Object.values(t),error:void 0,loading:!1})}catch(o){var n=o;y.default.common.error(n),r(P(P({},N),{},{error:n,loading:!1}))}}))()}),[r]),n}(),n=t.error,r=t.data,a=(0,C.usePromiseResult)((function(){return e.getWalletServicesList()}),[e]).result,i=(0,A.default)();(0,d.useEffect)((function(){r&&r.length&&e.saveWalletServicesList(r)}),[e,r]);var u=(0,d.useMemo)((function(){return(a&&a.length?a:r).concat(I.WalletServiceWithoutVerify)}),[a,r]),s=(0,d.useMemo)((function(){return function(e){var t=e.isVerticalLayout,n=[I.WALLET_CONNECT_WALLET_NAMES.MetaMask,I.WALLET_CONNECT_WALLET_NAMES["OKX Wallet"],I.WALLET_CONNECT_WALLET_NAMES["Trust Wallet"],I.WALLET_CONNECT_WALLET_NAMES.Rainbow,I.WALLET_CONNECT_WALLET_NAMES.imToken,I.WALLET_CONNECT_WALLET_NAMES.TokenPocket,I.WALLET_CONNECT_WALLET_NAMES.BitKeep,I.WALLET_CONNECT_WALLET_NAMES.Zerion],r=[].concat((0,j.default)(Object.values(I.WALLET_CONNECT_INSTITUTION_WALLET_NAMES)),[I.WALLET_CONNECT_WALLET_NAMES["1inch"]]);return t&&(n=n.concat(r)),n}({isVerticalLayout:i})}),[i]),c=(0,d.useMemo)((function(){return s.map((function(e){return u.find((function(t){return t.name===e}))})).filter(Boolean)}),[s,u]),f=(0,d.useMemo)((function(){return Object.keys(I.WALLET_CONNECT_INSTITUTION_WALLET_NAMES)}),[]);return{data:c,institutionData:(0,d.useMemo)((function(){return f.map((function(e){return u.find((function(t){return t.name===e}))})).filter(Boolean)}),[f,u]),allData:u,error:n}}var M=n(552322),L={Amber:g,CoboWallet:w};function D(e){var t=e.label,n=e.available,r=e.logo,o=e.logoSource,l=e.onPress,d=e.isLoading,f=null!=o?o:{uri:r};return(0,M.jsx)(a.default,{w:{base:"1/2",sm:"1/5"},p:"4px",children:(0,M.jsxs)(i.default,{bg:"action-secondary-default",flex:1,alignItems:"center",py:"16px",borderWidth:h.default.hairlineWidth,borderColor:"border-default",_hover:{bgColor:"action-secondary-hovered"},_pressed:{bgColor:"action-secondary-pressed"},rounded:"xl",disabled:!n||d,onPress:l,children:[d?(0,M.jsx)(c.default,{shape:"Avatar",size:32}):(0,M.jsx)(s.default,{source:f,size:8,borderWidth:h.default.hairlineWidth,borderColor:"border-subdued",rounded:"xl"}),(0,M.jsx)(u.default,{mt:"12px",typography:{sm:"Body1Strong",md:"Body2Strong"},isTruncated:!0,children:t})]},t)},t)}function W(){R().data;return null}function B(e){var t=e.connectToWalletService,n=e.uri,r=e.onConnectResult,a=e.isInstitutionWallet,i=e.walletListsCallback,u=R(),s=u.data,c=u.institutionData,f=(0,d.useState)(""),p=(0,l.default)(f,2),h=p[0],m=p[1],g=(0,d.useRef)(),w=(0,_.useConnectExternalWallet)({connectToWalletService:t,uri:n,onConnectResult:r,isInstitutionWallet:a}).connectExternalWallet,A=(0,d.useCallback)((0,o.default)((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{itemLoadingId:""},t=e.walletService,n=e.itemLoadingId;m(n||""),clearTimeout(g.current),g.current=setTimeout((function(){m("")}),I.WALLET_CONNECT_NEW_CONNECTION_BUTTON_LOADING);try{yield w({walletService:t})}catch(r){y.default.common.error(r)}finally{yield(0,O.wait)(600),m("")}})),[w]),x=(0,d.useState)([]),j=(0,l.default)(x,2),E=j[0],C=j[1];(0,d.useEffect)((function(){(0,o.default)((function*(){var e=a?c:s;if(!b.default.isNativeIOS)return C(e),void(null==i||i(e));var t=[];for(var n of e)try{var r=n.mobile,o=(void 0===r?{native:""}:r).native;if(o)n.name===I.WALLET_CONNECT_WALLET_NAMES["1inch"]&&(o=o.replace("1inch","oneinch")),(yield v.default.canOpenURL(o))&&t.push(n)}catch(l){}C(t),null==i||i(t)}))()}),[a,c,s,i]);var T=(0,d.useMemo)((function(){return b.default.isNativeAndroid?null:E.map((function(e){var t,n,r,o=(null==e||null==(t=e.image_url)?void 0:t.sm)||(null==e||null==(n=e.image_url)?void 0:n.md)||(null==e||null==(r=e.image_url)?void 0:r.lg)||"",l=L[e.id]||void 0;return(0,M.jsx)(D,{label:e.name,available:!0,logo:o,logoSource:l,isLoading:h===e.id,onPress:function(){"OKX Wallet"===e.name?(0,k.openUrlExternal)("https://www.okx.com/web3"):A({walletService:e,itemLoadingId:e.id})}},e.id)}))}),[A,h,E]);return(0,M.jsxs)(M.Fragment,{children:[T,a?null:(0,M.jsx)(D,{available:!0,label:"WalletConnect",logoSource:S,isLoading:"WalletConnectDirectly"===h,onPress:function(){return A({itemLoadingId:"WalletConnectDirectly"})}})]})}function V(){var e=(0,p.default)(),t=(0,f.useRoute)().params,n=t.onDismiss,o=t.connectToWalletService,l=t.uri,i=(0,m.default)({fallbackToHome:!1});return(0,d.useEffect)((function(){return function(){n()}}),[n]),(0,M.jsx)(r.default,{header:e.formatMessage({id:"title__connect_with"}),hidePrimaryAction:!0,hideSecondaryAction:!0,closeAction:i,footer:null,scrollViewProps:{children:(0,M.jsx)(a.default,{flexDir:"row",flexWrap:"wrap",m:"-4px",children:(0,M.jsx)(B,{connectToWalletService:o,uri:l})})}})}},961759:(e,t,n)=>{n.r(t),n.d(t,{WalletConnectSessionStorage:()=>s});var r=n(634795),o=n(887371),l=n(901985),a=n(292147),i=n(465146),u=n(620278),s=function(){function e(e){var t=e.storageId;if(this.storageId="",this.storageId=t,!this.storageId)throw new Error("WalletConnectSessionStorage ERROR: storageId required")}var t=e.prototype;return t.getSession=function(){var e=(0,r.default)((function*(){var e=null,t=yield i.default.getItem(this.storageId);if(t)try{var n=JSON.parse(t);n&&(0,l.isWalletConnectSession)(n)&&(e=n)}catch(r){a.default.common.error("WalletConnectSessionStorage.getSession ERROR:",r)}return e}));return function(){return e.apply(this,arguments)}}(),t.setSession=function(e){if(!e.peerId)throw new Error("WalletConnectSessionStorage ERROR: peerId is required, please make sure this method is called after websocket connection ready.");return i.default.setItem(this.storageId,JSON.stringify(e)),e},t.removeSession=function(){i.default.removeItem(this.storageId)},(0,o.default)(e)}();s.STORAGE_IDS={DAPP_SIDE:u.WALLET_CONNECT_STORAGE_KEY_DAPP_SIDE,WALLET_SIDE:u.WALLET_CONNECT_STORAGE_KEY_WALLET_SIDE}},232082:(e,t,n)=>{n.r(t),n.d(t,{useWalletConnectPrepareConnection:()=>u});var r=n(634795),o=n(202784),l=n(814817),a=n(945821),i=n(107575);function u(e){var t=e.accountId,n=(e.networkId,a.default.serviceWalletConnect),u=(0,i.useWalletConnectQrcodeModal)().connectToWallet;(0,o.useEffect)((function(){(0,r.default)((function*(){if((0,l.isExternalAccount)({accountId:t})){var e=yield n.getWalletConnectSessionOfAccount({accountId:t}),r=e.session,o=e.walletService;null!=r&&r.connected&&(yield u({isNewSession:!1,session:r,walletService:o,accountId:t}))}}))()}),[t,u,n])}},107575:(e,t,n)=>{n.r(t),n.d(t,{useWalletConnectQrcodeModal:()=>W});var r=n(669083),o=n(256666),l=n(634795),a=n(196234),i=n(202784),u=n(598980),s=n.n(u),c=n(735260),d=n(749888),f=(n(119804),n(292147)),p=n(213208),v=n(945821),h=n(493877),m=n(481047),g=n(776553),w=n(953150),y=n(298537),b=n.n(y),S=n(887371),O=n(545754),k=n(411987),_=n(695058),A=(n(854457),n(631374)),x=n(940915),j=n(767993),E=n(620278),C=n(961759);function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,_.default)(e);if(t){var o=(0,_.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,k.default)(this,n)}}var T=new C.WalletConnectSessionStorage({storageId:C.WalletConnectSessionStorage.STORAGE_IDS.DAPP_SIDE}),P=E.WALLET_CONNECT_CLIENT_META,N=function(e){(0,O.default)(n,e);var t=I(n);function n(e){var n;return(n=t.call(this,b()({sessionStorage:T,clientMeta:P},e))).isWalletSide=!1,n.accountId="",n._autoOpenWalletAppListener=function(){var e=(0,l.default)((function*(e){var t;e.payload&&null!=(t=n.connector)&&t.peerMeta&&n.walletService&&(yield(0,g.wait)(E.WALLET_CONNECT_OPEN_WALLET_APP_DELAY),yield w.default.dappOpenWalletApp({walletService:n.walletService}))}));return function(t){return e.apply(this,arguments)}}(),n.saveAccountSession=function(){var e=(0,l.default)((function*(e){var t,r=e.accountId,o=e.session,l=v.default.serviceWalletConnect;n.walletService||(n.walletService=yield l.findWalletServiceBySession({session:o})),f.default.walletConnect.info("saveExternalAccountSession",r,o.peerMeta,null==(t=n.walletService)?void 0:t.homepage),yield l.saveWalletConnectSessionOfAccount({accountId:r,session:o,walletService:n.walletService})}));return function(t){return e.apply(this,arguments)}}(),n.handleAccountSessionUpdate=function(){var e=(0,l.default)((function*(e){var t=e.connector;n.accountId&&null!=t&&t.session&&(yield n.saveAccountSession({accountId:n.accountId,session:null==t?void 0:t.session}))}));return function(t){return e.apply(this,arguments)}}(),n}var r=n.prototype;return r.sendTestingRequest=function(){var e=(0,l.default)((function*(){if(yield(0,g.wait)(3500),this.connector){var e=this.connector._formatRequest({method:"wc_sessionRequest",params:[{peerId:this.connector.clientId,peerMeta:this.connector.clientMeta,chainId:null}]});this.connector.handshakeId=e.id,yield this.connector._sendSessionRequest(e,"Session update rejected",{topic:this.connector.handshakeTopic}),yield this.connector.updateChain({chainId:56,networkId:137,rpcUrl:"",nativeCurrency:{name:"",symbol:""}})}}));return function(){return e.apply(this,arguments)}}(),r.cleanPrevConnection=function(){this.offAllEvents(),this.connector&&(this.unregisterEvents(this.connector),this.connector.transportClose(),this.connector._connected=!1,this.connector=void 0),this.walletService=void 0,this.accountId=""},r.connect=function(){var e=(0,l.default)((function*(e){return this.cleanPrevConnection(),yield this.autoConnectLastSession(e),this.addAutoOpenWalletListener(),this.connector&&this.connector.connected?{peerId:this.connector.peerId,peerMeta:this.connector.peerMeta,chainId:this.connector.chainId,accounts:this.connector.accounts}:this.connectNewSession(e)}));return function(t){return e.apply(this,arguments)}}(),r.connectNewSession=function(){var e=(0,l.default)((function*(e){var t=this;if(!e.qrcodeModal)throw new Error(A.ERROR_QRCODE_MODAL_NOT_PROVIDED);this.cleanPrevConnection();yield this.createConnector(e,{shouldDisconnectStorageSession:!1});return this.addAutoOpenWalletListener(),new Promise((function(e,n){if(!t.connector)return n(new Error("WalletConnect Error: connector not ready yet."));t.connector.on(t.EVENT_NAMES.modal_closed,(function(){return n(new x.OneKeyWalletConnectModalCloseError(A.ERROR_QRCODE_MODAL_USER_CLOSED))})),t.connector.on(t.EVENT_NAMES.connect,(function(t,r){var o;if(t)return n(t);e(null==r||null==(o=r.params)?void 0:o[0])})),t.connector.on(t.EVENT_NAMES.disconnect,(function(e,t){var r,o,l=(null==e?void 0:e.message)||(null==t||null==(r=t.params)||null==(o=r[0])?void 0:o.message)||"Session Disconnected";n(new Error(l))}))}))}));return function(t){return e.apply(this,arguments)}}(),r.offAllEvents=function(){this._offAccountSessionChanged(),this._offAutoOpenWalletApp()},r._offAccountSessionChanged=function(){this.off(this.EVENT_NAMES.connect,this.handleAccountSessionUpdate),this.off(this.EVENT_NAMES.session_update,this.handleAccountSessionUpdate),this.off(this.EVENT_NAMES.disconnect,this.handleAccountSessionUpdate)},r._offAutoOpenWalletApp=function(){this.off(this.EVENT_NAMES.call_request_sent,this._autoOpenWalletAppListener)},r.addAutoOpenWalletListener=function(){this.connector&&(this._offAutoOpenWalletApp(),this.on(this.EVENT_NAMES.call_request_sent,this._autoOpenWalletAppListener))},r.watchAccountSessionChanged=function(e){var t=e.accountId;f.default.walletConnect.info("watchAccountSessionChanged",t),this.accountId=t,this._offAccountSessionChanged(),this.on(this.EVENT_NAMES.connect,this.handleAccountSessionUpdate),this.on(this.EVENT_NAMES.session_update,this.handleAccountSessionUpdate),this.on(this.EVENT_NAMES.disconnect,this.handleAccountSessionUpdate)},(0,S.default)(n)}(j.WalletConnectClientBase);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L,D=Object.freeze({visible:!1,uri:void 0,cb:void 0});function W(){var e=v.default.serviceWalletConnect,t=(0,i.useState)(D),n=(0,a.default)(t,2),o=(n[0],n[1]),u=(0,i.useRef)(),y=(0,h.default)(),b=(0,d.default)({fallbackToHome:!1}),S=(0,i.useRef)(),O=(0,i.useCallback)(function(){var e=(0,l.default)((function*(e,t){if("string"!==typeof t||!t.length)return Promise.reject(new Error("Invalid uri."));var n=w.default.buildConnectWalletAppUrl({uri:t,walletService:e});f.default.walletConnect.info("connectToWalletService",{uri:t,connectionUrl:n,walletServiceUrl:null==e?void 0:e.homepage});try{0;var r=!1,o=n;if(p.default.isNativeAndroid)try{o=t,r=yield c.default.canOpenURL(o)}catch(l){f.default.common.error(l)}if(!r)try{o=n,r=yield c.default.canOpenURL(o)}catch(l){f.default.common.error(l)}if(f.default.walletConnect.info("Linking.openURL(connectionUrl)",{openConnectionUrl:o,canOpenURL:r}),S.current=e,!r){if(p.default.isNativeAndroid)throw c.default.openURL("https://walletconnect.org/wallets"),new Error("No wallets found.");throw new Error(`Unable to open deeplink url, make sure you have added scheme to LSApplicationQueriesSchemes in your iOS Info.plist and the target Apps is installed. >>>> ${o}`)}return p.default.isNativeAndroid,(yield Promise.all([c.default.openURL(o)]))&&void 0}catch(l){return f.default.common.error(l),Promise.reject(l)}}));return function(t,n){return e.apply(this,arguments)}}(),[]),k=(0,i.useRef)(!1),_=(0,i.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.walletServiceForConnectDirectly,e.shouldCloseCurrentModal);k.current||(f.default.walletConnect.info("useWalletConnectQrcodeModal onDismiss closed"),k.current=!0,t&&b(),o((function(e){var t=e.cb;return setTimeout((function(){"function"===typeof t&&t&&t()}),0),{visible:!1,uri:void 0,cb:void 0}})))}),[b]),A=(0,i.useCallback)((function(){_({shouldCloseCurrentModal:!1}),(0,l.default)((function*(){}))()}),[_]),x=(0,i.useCallback)((0,l.default)((function*(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).walletServiceForConnectDirectly;return yield(0,g.wait)(0),E.WALLET_CONNECT_IS_NATIVE_QRCODE_MODAL?{open:function(){var t=(0,l.default)((function*(t,n,l){if(f.default.walletConnect.info("qrcodeModalNative Open >>>>>>>>>>>>>> ",{uri:t,opt:l}),k.current=!1,p.default.isNativeAndroid){if(yield(0,g.wait)(E.WALLET_CONNECT_OPEN_WALLET_APP_DELAY),!(yield c.default.canOpenURL(t)))throw r.default.show({title:"WalletConnect compatible wallets App not found in your device."},{type:"error"}),yield c.default.openURL(E.WALLET_CONNECT_WALLETS_LIST),new Error("No wallets found.");yield c.default.openURL(t)}else e?yield O(e,t):y.navigate(m.RootRoutes.Modal,{screen:m.ModalRoutes.CreateWallet,params:{screen:m.CreateWalletModalRoutes.WalletConnectQrcodeModal,params:{connectToWalletService:O,uri:t,onDismiss:A,shouldRenderQrcode:!1}}}),o({visible:!1,uri:t,cb:n})}));return function(e,n,r){return t.apply(this,arguments)}}(),close:function(){_({walletServiceForConnectDirectly:e,shouldCloseCurrentModal:!e})}}:M(M({},s()),{},{close:function(){s().close.apply(s(),arguments)}})})),[_,O,y,A]),j=(0,i.useCallback)((0,l.default)((function*(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.isNewSession,o=void 0!==r&&r,l=n.session,a=n.walletService,i=n.accountId,s=(L||(L=new N),L);u.current=s,S.current=void 0;var c,d=yield x({walletServiceForConnectDirectly:a});o?(f.default.walletConnect.info("connect NEW session: ",{walletServiceUrl:null==a?void 0:a.homepage}),c=yield s.connectNewSession({qrcodeModal:d})):(f.default.walletConnect.info("connect EXISTS session: ",{sessionPeerMeta:null==l?void 0:l.peerMeta,walletServiceUrl:null==a?void 0:a.homepage}),c=yield s.connect({session:l,qrcodeModal:d,walletService:a}));var v,h=null==(t=s.connector)?void 0:t.session;p.default.isNativeAndroid?s.walletService=a:s.walletService=null!=(v=S.current)?v:a;!s.walletService&&h&&(s.walletService=yield e.findWalletServiceBySession({session:h}));var m=s.walletService;return i&&(s.watchAccountSessionChanged({accountId:i}),h&&(yield s.saveAccountSession({accountId:i,session:h}))),f.default.walletConnect.info("connectToWallet result >>>>> ",{status:c,walletServiceUrl:null==m?void 0:m.homepage}),{status:c,session:h,client:s,walletService:m}})),[x,e]);return{connectToWallet:j,clientRef:u}}},27094:(e,t,n)=>{n.r(t),n.d(t,{terminateWcConnection:()=>a});var r=n(634795),o=n(292147),l=n(945821);function a(e){return i.apply(this,arguments)}function i(){return(i=(0,r.default)((function*(e){var t=e.client,n=e.walletUrl,r=l.default.serviceWalletConnect;try{var a,i;if(null==t||t.offAllEvents(),yield r.removeWalletSession(n),null!=t&&null!=(a=t.connector)&&a.peerId)null==t||null==(i=t.connector)||i.killSession();null==t||t.disconnect()}catch(u){o.default.common.error("terminateWcConnection ERROR: ",u)}}))).apply(this,arguments)}},953150:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var r=n(968079),o=n(475652),l=n.n(o),a=n(634795),i=n(702139),u=n(735260),s=n(190769),c=n(402814),d=n(292147),f=n(213208),p=n(493877),v=n(481047),h=(n(686632),n(776553)),m=n(270225),g=n(620278),w="";function y(e){var t=e.prefix,n=e.url;return t.endsWith("://")?`${t}${n}`:`${t.replace(/:$/,"")}://${n.replace(/^\/+/,"")}`}function b(e){var t=e.walletService,n=e.url,r=t.mobile,o=r.universal,l=r.native;return f.default.isNativeAndroid?y({prefix:l,url:n}):o?`${o}${n}`:y({prefix:l,url:n})}function S(){return w?`redirectUrl=${encodeURIComponent(w)}`:""}function O(e){return b({walletService:e.walletService,url:`/wc?${S()}`})}function k(){return(k=(0,a.default)((function*(e){var t=e.walletService;if("web"!==s.default.OS){if(f.default.isNativeAndroid,!t)throw new Error("Cached WalletService not found.");var n=O({walletService:t});return(yield u.default.canOpenURL(n))?u.default.openURL(n):f.default.isNativeAndroid&&(d.default.walletConnect.info("android open url failed, fallback to wc: >>>>> ",{url:n}),yield u.default.canOpenURL("wc:"))?u.default.openURL("wc:"):void 0}}))).apply(this,arguments)}function _(){return(_=(0,a.default)((function*(e){var t=e.uri,n=e.isDeepLink;yield(0,c.waitForDataLoaded)({data:function(){return(0,p.getAppNavigation)()},logName:"openConnectToDappModal wait navigation ready",timeout:(0,h.getTimeDurationMs)({minute:1})});var r=(0,p.getAppNavigation)();if(r){m.default.runAfterUnlock((function(){r.navigate(v.RootRoutes.Modal,{screen:v.ModalRoutes.DappConnectionModal,params:{screen:v.DappConnectionModalRoutes.ConnectionModal,params:{walletConnectUri:t,isDeepLink:n,refreshKey:Date.now()}}})}))}}))).apply(this,arguments)}function A(e){var t,n=e.uri;try{t=new URL(n)}catch(u){return null}var r,o,l=(0,i.parseUri)(n),a=t.searchParams;(n.includes("@1")||1===l.version)&&(r={bridge:a.get("bridge")||"",key:a.get("key")||"",parsed:l});(n.includes("@2")||2===l.version)&&(o={relayProtocol:a.get("relay-protocol")||"",symKey:a.get("symKey")||"",parsed:l});return{v1:r,v2:o,uriInfo:t}}w="undefined"===typeof window?"":window.location.origin;const x={getWalletConnectUriInfo:A,buildConnectWalletAppUrl:function(e){var t=e.uri,n=e.walletService,r=S();return b({walletService:n,url:`/wc?uri=${encodeURIComponent(t)}&${r}`})},buildOpenWalletAppUrl:O,dappOpenWalletApp:function(e){return k.apply(this,arguments)},openConnectToDappModal:function(e){return _.apply(this,arguments)},buildOneKeyWalletConnectDeepLinkUrl:function(e){var t=e.uri;return`${g.ONEKEY_APP_DEEP_LINK}/wc?uri=${encodeURIComponent(t||"")}`},isWalletConnectV2:function(e){var t,n,r=A({uri:e.uri});return Boolean(r&&r.v2&&2===(null==(t=r.v2)||null==(n=t.parsed)?void 0:n.version))},convertToSessionNamespacesV2:function(e){var t=e.sessionStatus,n=e.requiredNamespaces,o=e.optionalNamespaces,a=e.onError,i=(t.chainId,t.accounts);if(!t.networkImpl)throw new Error("convertToSessionNamespacesV2 ERROR: networkImpl is empty");var u={},s=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object.keys(e).forEach((function(n){if("eip155"===n||n.startsWith("eip155:")){var o,s=[];null==(o=e[n].chains)||o.forEach((function(e){i.forEach((function(t){return s.push(`${e}:${t}`)}))}));var c={accounts:s,chains:n.includes(":")?[n]:e[n].chains,methods:e[n].methods,events:e[n].events};u[n]=function(e){var t=e.ns1,n=e.ns2;if(!n)return t;if(!t)return n;var o=function(e,t){return l()([].concat((0,r.default)(e||[]),(0,r.default)(t||[]))).filter(Boolean)};return{chains:o(t.chains,n.chains),accounts:o(t.accounts,n.accounts),methods:o(t.methods,n.methods),events:o(t.events,n.events)}}({ns1:u[n],ns2:c}),!0}else if(!0,t){u[n]={accounts:[],chains:n.includes(":")?[n]:e[n].chains,methods:e[n].methods,events:e[n].events};var d=new Error("OneKey WalletConnect ERROR: EVM chain supported only");throw null==a||a(d),d}}))};return n&&s(n,!0),o&&s(o,!1),{namespaces:u}},getChainIdFromNamespaceChainV2:function(e){var t=e.chain;if((0,i.isValidChainId)(t)){var n=(0,i.parseChainId)(t);return{namespace:n.namespace,chainId:n.reference}}return{namespace:void 0,chainId:void 0}},isEvmNamespaceV2:function(e){return"eip155"===e}}},854457:(e,t,n)=>{n.r(t);var r=n(301842),o=n.n(r),l=n(626996),a=n(417406);function i(e){var t=e.core,n=e.self;if(!t)throw new Error("walletConnectV2SdkShims getStorageKey ERROR: core is undefined");var r=null==t?void 0:t.isWalletSide;if(o()(r))throw new Error("walletConnectV2SdkShims getStorageKey ERROR: core.isWalletSide is undefined");var l=r?"wallet":"dapp",a=n.storagePrefix,i=void 0===a?"":a,u=n.version,s=void 0===u?"":u,c=n.name,d=void 0===c?"":c;if(!i||!s||!d)throw new Error("walletConnectV2SdkShims getStorageKey ERROR: storagePrefix,version,name is undefined");return`${l}--${i}${s}//${d}`}Object.defineProperty(l.Expirer.prototype,"storageKey",{get:function(){return i({core:this.core,self:this})}}),Object.defineProperty(l.JsonRpcHistory.prototype,"storageKey",{get:function(){return i({core:this.core,self:this})}}),Object.defineProperty(l.KeyChain.prototype,"storageKey",{get:function(){return i({core:this.core,self:this})}}),Object.defineProperty(l.MessageTracker.prototype,"storageKey",{get:function(){return i({core:this.core,self:this})}}),Object.defineProperty(l.Pairing.prototype,"storageKey",{get:function(){return i({core:this.core,self:this})}}),Object.defineProperty(l.Store.prototype,"storageKey",{get:function(){return i({core:this.core,self:this})}}),Object.defineProperty(a.Store.prototype,"storageKey",{get:function(){return i({core:this.core,self:this})}}),Object.defineProperty(l.Subscriber.prototype,"storageKey",{get:function(){return i({core:this.relayer.core,self:this})}})},620278:(e,t,n)=>{n.r(t),n.d(t,{ONEKEY_APP_DEEP_LINK:()=>O,ONEKEY_APP_DEEP_LINK_NAME:()=>S,WALLET_CONNECT_BRIDGE:()=>c,WALLET_CONNECT_CLIENT_META:()=>E,WALLET_CONNECT_CONNECTION_TIMEOUT:()=>v,WALLET_CONNECT_DEEP_LINK:()=>_,WALLET_CONNECT_DEEP_LINK_NAME:()=>k,WALLET_CONNECT_INSTITUTION_WALLET_NAMES:()=>I,WALLET_CONNECT_IS_NATIVE_QRCODE_MODAL:()=>b,WALLET_CONNECT_NEW_CONNECTION_BUTTON_LOADING:()=>m,WALLET_CONNECT_OPEN_WALLET_APP_DELAY:()=>h,WALLET_CONNECT_PROTOCOL:()=>d,WALLET_CONNECT_PROTOCOL_PREFIXES:()=>A,WALLET_CONNECT_SEND_SHOW_DISCONNECT_BUTTON_DELAY:()=>y,WALLET_CONNECT_SEND_SHOW_MISMATCH_CONFIRM_DELAY:()=>g,WALLET_CONNECT_SEND_SHOW_RECONNECT_QRCODE_MODAL_DELAY:()=>w,WALLET_CONNECT_STORAGE_KEY_DAPP_SIDE:()=>u,WALLET_CONNECT_STORAGE_KEY_WALLET_SIDE:()=>i,WALLET_CONNECT_V2_PROJECT_ID:()=>p,WALLET_CONNECT_VERSION:()=>f,WALLET_CONNECT_WALLETS_LIST:()=>s,WALLET_CONNECT_WALLET_NAMES:()=>C,WalletServiceWithoutVerify:()=>T});var r,o=n(190769),l=n(213208),a=n(776553),i="onekey@walletconnect-wallet-side",u="onekey@walletconnect-dapp-side",s="https://explorer.walletconnect.com/registry?type=wallet",c="https://walletconnectbridge.onekey.so",d="wc",f=1,p="5e21f5018bfdeb78af03187a432a301d",v=(0,a.getTimeDurationMs)({seconds:20}),h=3e3,m=6e3,g=3e3,w=2e3,y=(0,a.getTimeDurationMs)({seconds:10}),b=!1,S="onekey-wallet",O=`${S}://`,k="wc",_=`${k}://`,A=[S,k,"ethereum"],x=[null!="web"?"web":"",null!=void 0?undefined:"",null!=(r=o.default.OS)?r:""].filter(Boolean).join("-"),j="Wallet";l.default.isNativeAndroid&&(j="Android"),l.default.isNativeIOS&&(j="iOS");var E={name:`OneKey ${j}`,description:"Connect with OneKey",url:`https://${x}.onekey.so`,icons:["https://web.onekey-asset.com/portal/b688e1435d0d1e2e92581eb8dd7442c88da36049/icons/icon-256x256.png","https://www.onekey.so/favicon.ico"]},C={MetaMask:"MetaMask","OKX Wallet":"OKX Wallet","Trust Wallet":"Trust Wallet",Rainbow:"Rainbow",imToken:"imToken",TokenPocket:"TokenPocket",BitKeep:"BitKeep",Zerion:"Zerion","1inch":"1inch Wallet"},I={Fireblocks:"Fireblocks",Amber:"Amber","Cobo Wallet":"Cobo Wallet","Jade Wallet":"Jade Wallet"},T=[{id:"Amber",name:"Amber"},{id:"CoboWallet",name:"Cobo Wallet"}]},559656:(e,t,n)=>{n.r(t),n.d(t,{WalletAvatarPro:()=>E,WalletStatus:()=>_,convertDeviceStatus:()=>x,default:()=>C,useHardwareWalletInfo:()=>j});var r=n(256666),o=n(795116),l=n(459740),a=n(18861),i=n(866904),u=n(225447),s=n(435581),c=n(202784),d=n(319712),f=n(600892),p=n(504949),v=n(506885),h=n(432986),m=n(814817),g=n(624491),w=n(552322),y=["size","avatarBgColor","walletImage","circular","hwWalletType","avatar","status","isPassphrase"],b=["wallet","devicesStatus"];function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){var t,n,r,o,l=e.size,a=e.walletImage,c=e.hwWalletType,v=e.avatar,h=e.isPassphrase,m={xs:16,sm:20,xl:24,lg:24};if("hw"===a){var g,y,b,S,O={xl:{width:"20px",height:"30px"},lg:{width:"20px",height:"30px"},sm:{width:"14px",height:"21px"},xs:{width:"12px",height:"18px"}};if(h)return(0,w.jsx)(s.default,{name:"LockClosedSolid",size:null!=(b=m[null!=(S=l)?S:"lg"])?b:24,color:"icon-subdued"});var k=d;return"classic"!==c&&"classic1s"!==c||(k=d),"mini"===c&&(k=f),"touch"===c&&(k=p),(0,w.jsx)(u.default,{width:null==(g=O[l])?void 0:g.width,height:null==(y=O[l])?void 0:y.height,source:k},c)}if("imported"===a||"watching"===a)return(0,w.jsx)(s.default,{name:"imported"===a?"InboxArrowDownOutline":"EyeOutline",size:null!=(t=m[null!=(n=l)?n:"lg"])?t:24,color:"icon-default"});if("external"===a)return(0,w.jsx)(s.default,{name:"LinkOutline",size:null!=(r=m[null!=(o=l)?o:"lg"])?r:24,color:"icon-default"});var _={xl:"DisplayXLarge",lg:"DisplayLarge",sm:"DisplayMedium",xs:"Body1"};return"hd"===a?(0,w.jsx)(i.default,{typography:_[l],children:null==v?void 0:v.emoji}):(0,w.jsx)(i.default,{typography:_[l],children:a})},_=function(e){var t=e.size,n=e.status;return(0,w.jsx)(a.default,{position:"absolute",right:-2,top:-3,rounded:"full",p:"2px",bgColor:"background-default",children:(0,w.jsx)(a.default,{rounded:"full",bgColor:"upgrade"===n?"icon-highlight":"interactive-default",size:"xl"===t||"lg"===t?"10px":"8px"})})},A=function(e){var t=e.size,n=e.avatarBgColor,r=e.walletImage,a=e.circular,i=e.hwWalletType,u=e.avatar,s=e.status,c=e.isPassphrase,d=(0,l.default)(e,y),f=null!=u?u:g.defaultAvatar,p=c?"surface-neutral-default":n||("hd"===r?f.bgColor:"surface-neutral-default");return(0,w.jsxs)(o.default,O(O({rounded:a?"full":"xs"===t?"6px":"12px",size:"xl"===t?"56px":"lg"===t?12:"sm"===t?8:"xs"===t?6:void 0,bgColor:p},d),{},{pointerEvents:"none",children:[(0,w.jsx)(k,{size:t,walletImage:r,hwWalletType:i,avatar:f,isPassphrase:c}),s?(0,w.jsx)(_,{size:t,status:s}):void 0]}))};A.defaultProps={size:"lg",circular:!1};var x=function(e){if(e)return null!=e&&e.isConnected&&null!=e&&e.hasUpgrade?"upgrade":null!=e&&e.isConnected?"connected":void 0};function j(e){var t=e.devicesStatus,n=e.wallet;return(0,c.useMemo)((function(){var e,r,o,l,a=n.type,i=n.deviceType,u=n.associatedDevice||"",s=!1;a===v.WALLET_TYPE_HW&&(l=null==t?void 0:t[u],o=x(l),s=(0,m.isPassphraseWallet)(n));var c=i;return c||(c=(0,h.getDeviceTypeByDeviceId)(u)),{isPassphrase:s,deviceStatus:o,hwWalletType:c,statusType:l,hasUpgrade:Boolean(null==(e=l)?void 0:e.hasUpgrade),isConnected:Boolean(null==(r=l)?void 0:r.isConnected)}}),[t,n])}function E(e){var t=e.wallet,n=e.devicesStatus,r=(0,l.default)(e,b),o=t.avatar,a=t.type,i=null==o?void 0:o.bgColor,u=j({devicesStatus:n,wallet:t});return(0,w.jsx)(A,O({walletImage:a,avatarBgColor:i,avatar:o,hwWalletType:u.hwWalletType,status:u.deviceStatus,isPassphrase:u.isPassphrase},r))}const C=(0,c.memo)(A)},664226:(e,t,n)=>{n.r(t),n.d(t,{ListItemBase:()=>ee,default:()=>ne});var r=n(634795),o=n(539144),l=n(561220),a=n(866904),i=n(196234),u=n(18861),s=n(202784),c=n(783112),d=n(945821),f=n(559656),p=n(859071),v=n(768496),h=n(379573),m=n(776553),g=(n(213208),n(381815)),w=n(612210),y=n(435581),b=n(433996),S=n(669083),O=n(785192),k=n(896953),_=n(256666),A=n(284405),x=n(459740),j=n(506885),E=n(268883),C=n(493877),I=n(327226),T=n(481047),P=n(821919),N=n(432986),R=n(798820),M=n(793525),L=n(314250),D=n(827109),W=n(931659),B=n(331639),V=n(731923),U=n(552322),F=["onPress"];function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,_.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $=function(e){var t=e.onPress,n=(0,x.default)(e,F);return(0,U.jsx)(A.default.CustomItem,z({onPress:function(e){(0,d.default.dispatch)(h.default.actions.updateDesktopWalletSelectorVisible(!1)),null==t||t(e)}},n))};function K(e){var t=e.navigation,n=e.wallet,r=e.hwInfo,o=e.onDeleteWallet,l=(0,c.default)(),a=d.default.dispatch,i=(0,p.useAppSelector)((function(e){var t,n;return null==(t=e.settings)||null==(n=t.hardware)?void 0:n.rememberPassphraseWallets})),f=(0,s.useMemo)((function(){return null==i?void 0:i.includes(n.id)}),[i,n.id]),v=(0,s.useCallback)((function(e){a(f?(0,P.forgetPassphraseWallet)(null==n?void 0:n.id):(0,P.rememberPassphraseWallet)(null==n?void 0:n.id)),null==e||null==e.preventDefault||e.preventDefault(),null==e||null==e.stopPropagation||e.stopPropagation()}),[a,f,null==n?void 0:n.id]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)($,{onPress:function(){var e;t.navigate(T.RootRoutes.Modal,{screen:T.ModalRoutes.OnekeyHardware,params:{screen:T.OnekeyHardwareModalRoutes.OnekeyDeviceWalletNameModal,params:{walletId:null!=(e=null==n?void 0:n.id)?e:""}}})},icon:"PencilMini",children:l.formatMessage({id:"action__edit"})}),(0,U.jsx)($,{onPress:v,extraChildren:(0,U.jsx)(u.default,{children:(0,U.jsx)(k.default,{containerStyle:{mr:"0"},isChecked:!f,onChange:v})}),children:l.formatMessage({id:"action__remove_when_exit"})}),(0,U.jsx)(O.default,{my:"4px"}),(0,U.jsx)($,{onPress:function(){var e;o({isPassphrase:null!=(e=null==r?void 0:r.isPassphrase)&&e})},variant:"desctructive",icon:"TrashMini",children:l.formatMessage({id:"action__delete_wallet"})})]})}function Y(e){var t=e.navigation,n=e.wallet,o=e.devicesStatus,l=e.onDeleteWallet,a=(0,c.default)(),u=(0,f.useHardwareWalletInfo)({devicesStatus:o,wallet:n}),p=d.default.engine,v=d.default.serviceHardware,h=(0,s.useState)(!1),m=(0,i.default)(h,2),g=m[0],w=m[1],y=(0,s.useState)(),b=(0,i.default)(y,2),k=b[0],_=b[1],A=(0,s.useCallback)(function(){var e=(0,r.default)((function*(e){if(e&&u.hwWalletType){var t=(0,R.getHomescreenKeys)(u.hwWalletType).length>0;if("mini"!==u.hwWalletType&&"classic"!==u.hwWalletType&&"classic1s"!==u.hwWalletType){var n=yield v.getDeviceSupportFeatures(e);w(!!n.modifyHomescreen.support&&t)}else w(t)}}));return function(t){return e.apply(this,arguments)}}(),[v,u.hwWalletType]),x=(0,s.useCallback)((function(){k&&(0,M.showDialog)((0,U.jsx)(D.default,{onHandler:function(){return v.checkFirmwareUpdate(k).then((function(e){var r;e?t.navigate(T.RootRoutes.Modal,{screen:T.ModalRoutes.HardwareUpdate,params:{screen:T.HardwareUpdateModalRoutes.HardwareUpdateInfoModel,params:{walletId:null!=(r=null==n?void 0:n.id)?r:""}}}):S.default.show({title:a.formatMessage({id:"msg__the_current_version_is_the_latest"})},{type:"success"})})).catch((function(e){setTimeout((function(){N.deviceUtils.showErrorToast(e)}),500)}))}}))}),[k,a,t,v,null==n?void 0:n.id]);return(0,s.useEffect)((function(){(0,r.default)((function*(){try{var e=yield p.getHWDeviceByWalletId(n.id);_(null==e?void 0:e.mac),yield A(null==e?void 0:e.mac)}catch(r){null!=t&&null!=t.canGoBack&&t.canGoBack()&&t.goBack()}}))()}),[p,a,t,v,A,n.id]),null!=u&&u.isPassphrase?(0,U.jsx)(K,{navigation:t,wallet:n,hwInfo:u,onDeleteWallet:l}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)($,{onPress:function(){var e;t.navigate(T.RootRoutes.Modal,{screen:T.ModalRoutes.OnekeyHardware,params:{screen:T.OnekeyHardwareModalRoutes.OnekeyHardwareDeviceNameModal,params:{walletId:null!=(e=null==n?void 0:n.id)?e:"",deviceName:""}}})},icon:"PencilMini",children:a.formatMessage({id:"action__edit"})}),!!g&&(0,U.jsx)($,{onPress:function(){var e,r;t.navigate(T.RootRoutes.Modal,{screen:T.ModalRoutes.OnekeyHardware,params:{screen:T.OnekeyHardwareModalRoutes.OnekeyHardwareHomeScreenModal,params:{walletId:null!=(e=null==n?void 0:n.id)?e:"",deviceType:null!=(r=null==u?void 0:u.hwWalletType)?r:"classic"}}})},icon:"PhotoMini",children:a.formatMessage({id:"modal__homescreen"})}),(0,U.jsx)($,{onPress:function(){var e;t.navigate(T.RootRoutes.Modal,{screen:T.ModalRoutes.OnekeyHardware,params:{screen:T.OnekeyHardwareModalRoutes.OnekeyHardwareDetailsModal,params:{walletId:null!=(e=null==n?void 0:n.id)?e:""}}})},icon:"InformationCircleMini",children:a.formatMessage({id:"action__about_device"})}),(0,U.jsx)($,{onPress:function(){var e;(0,L.default)({walletId:null!=(e=null==n?void 0:n.id)?e:"",deviceType:null==u?void 0:u.hwWalletType})},icon:"AdjustmentsHorizontalMini",children:a.formatMessage({id:"content__advanced"})}),(0,U.jsx)(O.default,{my:"4px"}),null!=u&&u.hasUpgrade?(0,U.jsx)($,{onPress:function(){var e;t.navigate(T.RootRoutes.Modal,{screen:T.ModalRoutes.HardwareUpdate,params:{screen:T.HardwareUpdateModalRoutes.HardwareUpdateInfoModel,params:{walletId:null!=(e=null==n?void 0:n.id)?e:""}}})},variant:"highlight",icon:"ArrowUpTrayMini",children:a.formatMessage({id:"action__update_available"})}):(0,U.jsx)($,{icon:"MagnifyingGlassMini",onPress:x,children:a.formatMessage({id:"form__check_for_updates"})}),(0,U.jsx)(O.default,{my:"4px"}),(0,U.jsx)($,{onPress:function(){var e;l({isPassphrase:null!=(e=null==u?void 0:u.isPassphrase)&&e})},variant:"desctructive",icon:"TrashMini",children:a.formatMessage({id:"action__delete_device"})})]})}function G(e){var t=e.wallet,n=e.devicesStatus,r=(0,c.default)(),o=(0,C.default)(),l=(0,I.default)().showVerify,a=(0,s.useState)(!1),d=(0,i.default)(a,2),f=d[0],p=d[1],v=(0,s.useCallback)((function(e){(0,M.showDialog)((0,U.jsx)(W.default,{deleteWallet:e}))}),[]),h=(0,s.useCallback)((function(e){"hw"!==(null==t?void 0:t.type)?!0===(null==t?void 0:t.backuped)?l((function(e){setTimeout((function(){var n;return v({walletId:null!=(n=null==t?void 0:t.id)?n:"",password:e})}),500)}),(function(){}),null,E.ValidationFields.Wallet):p(!0):setTimeout((function(){var n;return v({walletId:null!=(n=null==t?void 0:t.id)?n:"",password:void 0,hardware:e})}),500)}),[null==t?void 0:t.type,null==t?void 0:t.backuped,null==t?void 0:t.id,v,l]),m=(null==t?void 0:t.type)===j.WALLET_TYPE_HW,g=(null==t?void 0:t.type)!==j.WALLET_TYPE_HW,S=(0,s.useCallback)((function(){var e;o.navigate(T.RootRoutes.Modal,{screen:T.ModalRoutes.BackupWallet,params:{screen:T.BackupWalletModalRoutes.BackupWalletOptionsModal,params:{walletId:null!=(e=null==t?void 0:t.id)?e:""}}})}),[o,null==t?void 0:t.id]),k=(0,s.useMemo)((function(){return g?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)($,{onPress:function(){var e;o.navigate(T.RootRoutes.Modal,{screen:T.ModalRoutes.ManagerWallet,params:{screen:T.ManagerWalletModalRoutes.ManagerWalletModifyNameModal,params:{walletId:null!=(e=null==t?void 0:t.id)?e:""}}})},icon:"PencilMini",children:r.formatMessage({id:"action__edit"})}),(0,U.jsx)($,{onPress:S,icon:"ShieldCheckMini",children:r.formatMessage({id:"action__backup"})}),(0,U.jsx)(O.default,{my:"4px"}),(0,U.jsx)($,{onPress:function(){h()},variant:"desctructive",icon:"TrashMini",children:r.formatMessage({id:"action__delete_wallet"})})]}):null}),[r,g,S,o,h,null==t?void 0:t.id]),_=(0,s.useMemo)((function(){return m?(0,U.jsx)(Y,{navigation:o,wallet:t,devicesStatus:n,onDeleteWallet:h}):null}),[n,m,o,h,t]),x=(0,s.useMemo)((function(){return(0,U.jsxs)(A.default,{placement:"bottom right",width:224,offset:B.defaultMenuOffset,trigger:function(e){var t=e.onPress;return(0,U.jsx)(u.default,z(z({},e),{},{children:(0,U.jsx)(b.default,{name:"EllipsisVerticalMini",circle:!0,type:"plain",onPress:t,hitSlop:16})}))},children:[k,_]})}),[k,_]),P=(0,s.useMemo)((function(){return(0,U.jsx)(w.default,{visible:f,canceledOnTouchOutside:!1,onClose:function(){return p(!1)},contentProps:{icon:(0,U.jsx)(y.default,{name:"ShieldExclamationOutline",size:48}),title:r.formatMessage({id:"dialog__backup_wallet_title"}),content:r.formatMessage({id:"dialog__backup_wallet_desc"})},footerButtonProps:{primaryActionProps:{children:r.formatMessage({id:"action__backup"})},onPrimaryActionPress:function(e){var t=e.onClose;null==t||t(),setTimeout((function(){S()}),500)}}})}),[r,S,f]);return(0,V.useWalletSelectorStatus)().visible?(0,U.jsxs)(U.Fragment,{children:[x,P]}):null}var q=function(){return(0,U.jsx)(u.default,{position:"absolute",left:"0",top:"8px",bottom:"8px",w:"3px",bgColor:"interactive-default",roundedRight:"full",zIndex:9999})};function X(e){var t=e.wallet,n=e.isSingleton,r=e.devicesStatus;return(0,U.jsx)(U.Fragment,{children:n?null:(0,U.jsx)(U.Fragment,{children:t?(0,U.jsx)(G,{wallet:t,devicesStatus:r}):null})})}var Q=h.default.actions,J=Q.updateIsRefreshDisabled,Z=Q.updateIsLoading;function ee(e){var t=e.leftView,n=e.rightView,r=e.text,o=e.deviceState,d=e.onPress,f=e.isSelected,p=(0,c.default)(),v=(0,s.useState)(""),h=(0,i.default)(v,2),m=h[0],g=h[1],w=(0,s.useState)(),y=(0,i.default)(w,2),b=y[0],S=y[1];return(0,s.useEffect)((function(){"connected"===o?(g("interactive-default"),S(p.formatMessage({id:"msg__hardware_status_connected"}))):"upgrade"===o?(g("icon-highlight"),S(p.formatMessage({id:"msg__hardware_status_update_available"}))):S(void 0)}),[o,p]),(0,U.jsxs)(u.default,{px:2,children:[(0,U.jsxs)(l.default,{p:2,flexDirection:"row",alignItems:"center",rounded:"2xl",_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},onPress:d,children:[t,(0,U.jsxs)(u.default,{flex:1,mx:3,children:[(0,U.jsx)(a.default,{typography:"Body2Strong",isTruncated:!0,children:r}),b&&(0,U.jsx)(a.default,{typography:"Body2",mt:"4px",isTruncated:!0,color:m,children:b})]}),n]}),f?(0,U.jsx)(q,{}):void 0]})}function te(e){var t=e.wallet,n=e.isSingleton,l=e.isLastItem,a=e.devicesStatus,i=e.onLastItemRender,u=(0,p.useActiveWalletAccount)().walletId,c=d.default.dispatch,h=d.default.serviceAccount,w=(0,o.default)(),y=(0,p.useNavigationActions)().closeWalletSelector,b=(0,v.useWalletName)({wallet:t}),S=(0,f.useHardwareWalletInfo)({devicesStatus:a,wallet:t}),O=u===t.id,k=!O;(0,s.useLayoutEffect)((function(){l&&(null==i||i())}),[l,i]);var _=(0,s.useCallback)((function(){y(),setTimeout((0,r.default)((function*(){try{var e;c(J(!0),Z(!0)),w?yield(0,m.wait)(g.ACCOUNT_SELECTOR_CHANGE_ACCOUNT_CLOSE_DRAWER_DELAY):yield(0,m.wait)(g.WALLET_SELECTOR_DESKTOP_ACTION_DELAY_AFTER_CLOSE),yield h.autoChangeAccount({walletId:null!=(e=null==t?void 0:t.id)?e:"",skipIfSameWallet:!0})}finally{yield(0,m.wait)(100),c(J(!1),Z(!1))}})))}),[y,c,w,h,null==t?void 0:t.id]);return(0,U.jsx)(ee,{deviceState:S.deviceStatus,onPress:_,leftView:(0,U.jsx)(f.WalletAvatarPro,{size:"sm",circular:k,wallet:t,devicesStatus:void 0}),rightView:(0,U.jsx)(X,{wallet:t,isSingleton:n,devicesStatus:a}),text:b,isSelected:O})}const ne=function(e){var t=e.wallet,n=e.isSingleton,r=e.isLastItem,o=e.devicesStatus,l=e.onLastItemRender;return t?(0,U.jsx)(te,{onLastItemRender:l,devicesStatus:o,wallet:t,isSingleton:n,isLastItem:r}):null}},164212:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Y});var r=n(18861),o=n(202784),l=n(783112),a=n(433996),i=n(866904),u=(n(213208),n(859071)),s=n(493877),c=n(481047),d=n(526002),f=n(552322);const p=function(e){var t=e.title,n=(0,s.default)(),o=(0,u.useNavigationActions)().closeWalletSelector;return(0,f.jsxs)(r.default,{flexDirection:"row",alignItems:"center",py:3,pr:"15px",pl:4,children:[(0,f.jsx)(i.default,{flex:1,typography:"Heading",mr:3,isTruncated:!0,children:t}),(0,f.jsx)(a.default,{circle:!0,name:"PlusMini",onPress:function(){n.navigate(c.RootRoutes.Onboarding,{screen:d.EOnboardingRoutes.Welcome}),setTimeout((function(){o()}),300)}})]})};var v=n(465022),h=n(435581),m=n(254073),g=n.n(m),w=n(311631),y=n(795116),b=n(10918),S=n(381815),O=n(240061),k=n(72492),_=n(731923),A=n(387809),x=n(328012),j=n(256666),E=n(459740),C=n(539144),I=n(46486),T=n(506885),P=n(722363),N=["onPress"];function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var M=function(e){var t=e.iconName,n=(0,C.default)();return(0,f.jsx)(r.default,{alignSelf:"flex-start",children:n?(0,f.jsx)(y.default,{size:"48px",rounded:"full",bgColor:"surface-default",borderWidth:I.default.hairlineWidth,borderColor:"divider",children:(0,f.jsx)(h.default,{color:"interactive-default",name:t,size:24})}):(0,f.jsx)(h.default,{name:t,size:20})})};function L(e){var t=e.renderTrigger,n=e.walletType,r=e.dropdownProps,a=(0,l.default)(),i=(0,s.default)(),p=((0,C.default)(),(0,u.useNavigationActions)().closeWalletSelector),v=(0,P.useCreateAccountInWallet)({networkId:"",walletId:T.WALLET_TYPE_EXTERNAL}),h=(0,o.useMemo)((function(){return"hd"===n?[{leading:(0,f.jsx)(M,{iconName:"PlusCircleOutline"}),label:a.formatMessage({id:"action__create_wallet"}),description:a.formatMessage({id:"content__generate_new_recovery_phrase"}),value:"create"},{leading:(0,f.jsx)(M,{iconName:"InboxArrowDownOutline"}),label:a.formatMessage({id:"action__import_wallet"}),description:a.formatMessage({id:"content__import_wallet_desc"}),value:"import"},{leading:(0,f.jsx)(M,{iconName:"LinkOutline"}),label:a.formatMessage({id:"action__connect_3rd_party_wallet"}),description:a.formatMessage({id:"content__connect_3rd_party_wallet_desc"}),value:"connect"}]:[]}),[n,a]);return(0,f.jsx)(x.default,{onChange:function(e){setTimeout((function(){p()}),300),"create"===e&&i.navigate(c.RootRoutes.Onboarding,{screen:d.EOnboardingRoutes.SetPassword,params:{disableAnimation:!0}}),"import"===e&&i.navigate(c.RootRoutes.Onboarding,{screen:d.EOnboardingRoutes.ImportWallet,params:{disableAnimation:!0}}),"connect"===e&&v.isCreateAccountSupported&&v.createAccount()},dropdownPosition:"right",footer:null,headerShown:!1,title:a.formatMessage({id:"action__add_app_wallet"}),activatable:!1,containerProps:{width:"auto",zIndex:5},dropdownProps:r,options:h,renderTrigger:function(e){var r=e.onPress,o=(0,E.default)(e,N);return null==t?void 0:t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,j.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({onPress:function(){"hw"===n?i.navigate(c.RootRoutes.Modal,{screen:c.ModalRoutes.CreateWallet,params:{screen:c.CreateWalletModalRoutes.ConnectHardwareModal,params:{entry:"walletSelector"}}}):null==r||r()}},o))}})}var D=n(664226),W=n(321668),B=n(793525),V=n(974717),U=n(814817);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,j.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e){var t,n,a,i=e.devicesStatus,s=e.item,c=(e.section,e.onLastItemRender),d=(0,l.default)(),p=function(e){var t,n=(0,u.useAppSelector)((function(e){return e.hardware.passphraseOpened}));return(0,o.useMemo)((function(){var t,r,o=(null==e||null==(t=e.wallet)?void 0:t.associatedDevice)||"";return!!n.find((function(e){return e&&e===o}))||!(null==e||null==(r=e.hiddenWallets)||!r.find((function(e){return(0,U.isPassphraseWallet)(e)})))}),[n,null==e?void 0:e.hiddenWallets,null==e||null==(t=e.wallet)?void 0:t.associatedDevice])}(s),v=(0,o.useCallback)((function(e){(0,B.showDialog)((0,f.jsx)(V.default,{deviceId:e,onlyPassphrase:!0}))}),[]);return!s.isSingleton||null!=(t=s.wallet)&&null!=(n=t.accounts)&&n.length?(0,f.jsx)(f.Fragment,{children:p?(0,f.jsxs)(r.default,{my:"4px",children:[(0,f.jsx)(r.default,{position:"absolute",left:"8px",top:"0px",right:"8px",bottom:"0px",rounded:"16px",borderWidth:1,borderColor:"divider"}),(0,f.jsx)(D.default,H({onLastItemRender:c,devicesStatus:i},s)),null==(a=s.hiddenWallets)?void 0:a.map((function(e,t){return(0,f.jsxs)(f.Fragment,{children:[0!==t?(0,f.jsx)(r.default,{h:1}):null,(0,o.createElement)(D.default,H(H({},s),{},{key:t,devicesStatus:void 0,wallet:e,onLastItemRender:c}))]})})),(0,f.jsx)(r.default,{px:4,py:2,children:(0,f.jsx)(W.default,{onPress:function(){var e,t,n,r,o=null!=(e=null==s||null==(t=s.wallet)?void 0:t.associatedDevice)?e:null==s||null==(n=s.hiddenWallets)||null==(r=n[0])?void 0:r.associatedDevice;o&&v(o)},leftIconName:"PlusSmMini",children:d.formatMessage({id:"action__add_hidden_wallet"})})})]}):(0,f.jsx)(D.default,H({onLastItemRender:c,devicesStatus:i},s))}):null}function $(e){var t=e.type,n=(e.isEmptyData,e.section),i=(0,l.default)(),u=(0,o.useMemo)((function(){return"hd"===t?i.formatMessage({id:"wallet__app_wallet"}):"hw"===t?i.formatMessage({id:"wallet__hardware_wallet"}):i.formatMessage({id:"content__other"})}),[i,t]),s=function(e){var t,n=e.section,r=!(null!=n&&null!=(t=n.data)&&t.length);return(n.type===k.EWalletDataSectionType.hd||n.type===k.EWalletDataSectionType.hw)&&!r}({section:n});if(t===k.EWalletDataSectionType.other){var c=0;if(n.data.forEach((function(e){var t;c+=(null==(t=e.wallet)?void 0:t.accounts.length)||0})),c<=0)return null}return(0,f.jsxs)(r.default,{bgColor:"background-default",pt:2,mt:-2,display:"flex",alignItems:"center",flexDirection:"row",px:4,mb:2,children:[(0,f.jsx)(b.default.Subheading,{flex:1,color:"text-subdued",children:u}),(0,f.jsx)(y.default,{my:"-8px",children:s?(0,f.jsx)(L,{dropdownProps:{width:"288px"},walletType:t,renderTrigger:function(e){var t=e.onPress;return(0,f.jsx)(a.default,{onPress:t,type:"plain",name:"PlusMini",circle:!0,hitSlop:8})}}):null})]})}const K=function(){var e=(0,k.useWalletSelectorSectionData)(),t=(0,O.useDeviceStatusOfHardwareWallet)().devicesStatus,n=(0,o.useRef)(null),a=(0,u.useActiveWalletAccount)().walletId,i=(0,_.useWalletSelectorStatus)().visible,s=(0,w.useSafeAreaInsets)(),c=(0,l.default)(),d=(0,o.useRef)(!1),p=(0,o.useCallback)((function(){!d.current&&i&&a&&e&&e.length&&(0,A.scrollToSectionItem)({delay:0,sectionListRef:n,sectionData:e,skipScrollIndex:7,isScrollToItem:function(e){var t,n;return(null==e||null==(t=e.wallet)?void 0:t.id)===a||Boolean(null==e||null==(n=e.hiddenWallets)?void 0:n.find((function(e){return e.id===a})))},onScrolled:function(){d.current=!0}})}),[e,i,a]),m=(0,o.useMemo)((function(){return g()(p,S.ACCOUNT_SELECTOR_AUTO_SCROLL_DELAY_WALLET,{leading:!1,trailing:!0})}),[p]);return(0,f.jsx)(v.SectionList,{ref:n,sections:e,keyExtractor:function(e,t){var n;return`${(null==e||null==(n=e.wallet)?void 0:n.id)||""}${t}`},renderSectionHeader:function(e){var t,n=e.section,r=!(null!=n&&null!=(t=n.data)&&t.length);return(0,f.jsx)($,{section:n,type:n.type,isEmptyData:r})},renderItem:function(e){var n=e.item,r=e.section;return(0,f.jsx)(z,{item:n,section:r,devicesStatus:t,onLastItemRender:m})},renderSectionFooter:function(e){var t,n,o=e.section,l=(null!=o&&null!=(t=o.data)&&t.length,function(e){var t,n=e.section,r=!(null!=n&&null!=(t=n.data)&&t.length);return(n.type===k.EWalletDataSectionType.hd||n.type===k.EWalletDataSectionType.hw)&&r}({section:o}));if(l){var a=(0,f.jsx)(r.default,{h:6});o.type,k.EWalletDataSectionType.hd;var i=null,u="";return o.type===k.EWalletDataSectionType.hd&&(u=c.formatMessage({id:"action__add_app_wallet"}),i=(0,f.jsx)(y.default,{size:"32px",borderWidth:2,borderColor:"border-default",borderStyle:"dashed",borderRadius:"full",children:(0,f.jsx)(h.default,{size:20,name:"PlusMini"})})),o.type===k.EWalletDataSectionType.hw&&(u=c.formatMessage({id:"action__connect_hardware_wallet"}),i=(0,f.jsx)(y.default,{size:"32px",borderWidth:2,borderColor:"border-default",borderStyle:"dashed",borderRadius:"full",children:(0,f.jsx)(h.default,{size:20,name:"LinkMini"})})),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(r.default,{px:"8px",children:(0,f.jsx)(L,{dropdownProps:{width:"302px"},walletType:o.type,renderTrigger:function(e){var t=e.onPress;return(0,f.jsx)(r.default,{mx:"-8px",children:(0,f.jsx)(D.ListItemBase,{onPress:t,leftView:i,text:u})})}})}),a]})}return null!=(n=o.data)&&n.length?(0,f.jsx)(r.default,{h:6}):null},py:2,style:{},ListFooterComponent:(0,f.jsx)(r.default,{h:s.bottom})})};const Y=(0,o.memo)((function(){var e=(0,l.default)();return(0,f.jsxs)(r.default,{bgColor:"background-default",alignSelf:"stretch",borderRadius:"xl",flex:1,children:[(0,f.jsx)(p,{title:e.formatMessage({id:"title__wallets"})}),(0,f.jsx)(K,{})]})}))},72492:(e,t,n)=>{n.r(t),n.d(t,{EWalletDataSectionType:()=>r,useWalletSelectorSectionData:()=>g});var r,o=n(968079),l=n(634498),a=n.n(l),i=n(196234),u=n(254073),s=n.n(u),c=n(202784),d=n(720587),f=n(506885),p=n(292147),v=n(747225),h=n(731923);!function(e){e.hd="hd",e.hw="hw",e.other="other"}(r||(r={}));var m=s()((function(e){var t=e.wallets,n=e.setData,l=[],u=[],s=[],c={};t.forEach((function(e,n){if(e.type===f.WALLET_TYPE_HD&&l.push({wallet:e}),[f.WALLET_TYPE_IMPORTED,f.WALLET_TYPE_WATCHING,f.WALLET_TYPE_EXTERNAL].includes(e.type)&&s.push({wallet:e,isSingleton:!0,isLastItem:n===t.length-1}),e.type===f.WALLET_TYPE_HW&&e.associatedDevice){var r,o=e.associatedDevice||"";c[o]||(c[o]=[]),null==(r=c[o])||r.push(e)}})),Object.entries(c).forEach((function(e){var t=(0,i.default)(e,2),n=(t[0],t[1]),r=(n=n||[]).find((function(e){return!e.passphraseState})),o=a()(n.filter((function(e){return e.passphraseState})),["name"],["asc"]);(r||o.length)&&u.push({wallet:r,hiddenWallets:o})})),p.default.accountSelector.info("rebuild WalletSelector walletList data"),n([{type:r.hd,data:[].concat(l,(0,o.default)(s.filter((function(e){var t,n;return null==(t=e.wallet)||null==(n=t.accounts)?void 0:n.length}))))},{type:r.hw,data:u}])}),150,{leading:!1,trailing:!0});function g(){var e=(0,v.useRuntime)().wallets,t=(0,c.useState)([]),n=(0,i.default)(t,2),r=n[0],o=n[1],l=(0,h.useWalletSelectorStatus)().visible,a=(0,c.useRef)(l);return a.current=l,(0,c.useEffect)((function(){a.current?m({wallets:e,setData:o}):d.default.runAfterInteractions((function(){m({wallets:e,setData:o})}))}),[e]),r}},731923:(e,t,n)=>{n.r(t),n.d(t,{useWalletSelectorStatus:()=>u});var r=n(539144),o=n(202784),l=n(506885),a=n(859071),i=n(747225);function u(){var e=(0,r.default)(),t=(0,a.useAppSelector)((function(e){return e.accountSelector.isDesktopWalletSelectorVisible})),n=(0,a.useAppSelector)((function(e){return e.accountSelector.isMobileWalletSelectorDrawerOpen})),u=(0,i.useRuntimeWallets)().wallets,s=(0,o.useMemo)((function(){return u.some((function(e){return e.type===l.WALLET_TYPE_HW}))}),[u]),c=e?n:t;return{visible:c,isOpenFromClose:!(0,a.usePrevious)(c)&&c,existsHardwareWallet:s}}},632861:(e,t,n)=>{n.r(t),n.d(t,{WalletSelectorMobile:()=>w,scrollToSectionItem:()=>y.scrollToSectionItem});var r=n(256666),o=n(539144),l=n(202784),a=n(135809),i=n(574696),u=n(46486),s=n(945821),c=n(859071),d=n(379573),f=n(164212),p=n(552322);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=d.default.actions.updateMobileWalletSelectorDrawerOpen,g=u.default.create({contentContainerStyle:{flexDirection:"row",flex:1}});function w(e){var t=(0,o.default)(),n=s.default.dispatch,r=(0,a.default)(),u=(0,c.useNavigationActions)().closeDrawer,d="open"===r;return(0,l.useEffect)((function(){n(m(d))}),[n,d]),(0,l.useEffect)((function(){!t&&d&&u()}),[u,d,t]),t?(0,p.jsx)(i.default,h(h({},e),{},{scrollEnabled:!1,contentContainerStyle:g.contentContainerStyle,children:(0,p.jsx)(f.default,{})})):null}var y=n(387809)},387809:(e,t,n)=>{n.r(t),n.d(t,{scrollToSectionItem:()=>o});var r=n(292147);function o(e){var t=e.sectionListRef,n=e.sectionData,o=e.isScrollToItem,l=e.onScrolled,a=e.skipScrollIndex,i=e.delay;setTimeout((function(){try{var e,i=function(){for(var e=0,t=0,r=1,l=0;l<n.length;l+=1){var a=n[l];if(!a.data.length&&o(void 0,a))return{itemIndex:1,sectionIndex:t=l,itemCounts:e};for(var i=0;i<a.data.length;i+=1){var u=a.data[i];if(e+=1,o(u,a))return{itemIndex:r=i+1,sectionIndex:t=l,itemCounts:e}}}return{itemIndex:r,sectionIndex:t,itemCounts:e}}(),u=i.sectionIndex,s=i.itemIndex;if(i.itemCounts<=a)return;null==t||null==(e=t.current)||null==e.scrollToLocation||e.scrollToLocation({animated:!0,sectionIndex:u,itemIndex:s}),l()}catch(c){r.default.common.error(c)}}),i)}},592323:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var r=n(18861),o=n(256666),l=(n(321668),n(634795)),a=n(459740),i=n(202784),u=(n(213208),n(945821)),s=(n(834298),n(552322)),c=(0,i.forwardRef)((function(e,t){var n=e.src,r=void 0===n?"":n,o=e.scrolling,l=(0,i.useRef)(null),a=(0,i.useRef)({reload:function(){l.current&&(l.current.src="about:blank",setTimeout((function(){l.current&&(l.current.src=r)}),150))},loadURL:function(){}});return(0,i.useImperativeHandle)(t,(function(){return a.current})),(0,s.jsx)("iframe",{ref:l,title:"iframe-web",src:r,frameBorder:"0",scrolling:o,style:{height:"100%",width:"100%"}})}));c.displayName="InpageProviderWebView";const d=c;var f=["src","openUrlInExt","allowpopups","onWebViewRef","customReceiveHandler","containerProps"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const h=function(e){var t=e.src,n=void 0===t?"":t,o=(e.openUrlInExt,e.allowpopups),c=void 0!==o&&o,p=e.onWebViewRef,h=void 0===p?function(){}:p,m=e.customReceiveHandler,g=e.containerProps,w=(0,a.default)(e,f),y=(0,i.useCallback)(function(){var e=(0,l.default)((function*(e,t){var n=yield u.default.bridgeReceiveHandler(e);return yield null==m?void 0:m(e,t),n}));return function(t,n){return e.apply(this,arguments)}}(),[m]);return(0,s.jsx)(r.default,v(v({flex:1,bg:"background-default"},g),{},{children:(0,s.jsx)(d,v({ref:h,src:n,allowpopups:c,receiveHandler:y},w))}))}},332641:(e,t,n)=>{n.r(t),n.d(t,{buildCrossHooks:()=>s,buildCrossHooksWithOptions:()=>c});var r=n(202784),o=n(380845),l=n(420454);function a(e,t){return e()}function i(e){return function(t){return e(l.useAppSelector,{useMemo:r.useMemo,options:t})}}function u(e){return function(t){return e(o.appSelector,{useMemo:a,options:t})}}function s(e){return{use:i(e),get:u(e)}}function c(e){return{use:i(e),get:u(e)}}},97856:(e,t,n)=>{n.r(t),n.d(t,{getActiveWalletAccount:()=>f,getManageNetworks:()=>v.getManageNetworks,getReduxAccountTokenBalancesMap:()=>j,getReduxAccountTokensList:()=>_,getReduxSingleTokenBalance:()=>D,getReduxSingleTokenFiatValues:()=>U,getReduxSingleTokenPrice:()=>N,getReduxTokenPricesMap:()=>I,useActiveWalletAccount:()=>p,useManageNetworks:()=>v.useManageNetworks,useReduxAccountTokenBalancesMap:()=>x,useReduxAccountTokensList:()=>k,useReduxSingleTokenBalance:()=>L,useReduxSingleTokenBalanceSimple:()=>W,useReduxSingleTokenFiatValues:()=>V,useReduxSingleTokenFiatValuesSimple:()=>F,useReduxSingleTokenPrice:()=>P,useReduxSingleTokenPriceSimple:()=>R,useReduxTokenPricesMap:()=>C});var r=n(669083),o=n(534756),l=n(849877),a=n(506885),i=n(292147),u=n(446334),s=n(332641),c=(0,s.buildCrossHooks)((function(e,t){var n=t.useMemo,r=e((function(e){return e.general.activeAccountId})),u=e((function(e){return e.general.activeWalletId})),s=e((function(e){return e.general.activeNetworkId})),c=n((function(){if((0,l.isAllNetworks)(s)&&o.allNetworksAccountRegex.test(null!=r?r:""))return(0,o.generateFakeAllnetworksAccount)({accountId:r})}),[r,s]),d=e((function(e){return e.runtime.wallets})),f=e((function(e){return e.runtime.networks})),p=e((function(e){return e.runtime.accounts})),v=n((function(){var e;return null!=(e=d.find((function(e){return e.id===a.WALLET_TYPE_EXTERNAL})))?e:null}),[d]),h=n((function(){var e;return null!=(e=d.find((function(e){return e.id===a.WALLET_TYPE_WATCHING})))?e:null}),[d]),m=n((function(){var e;return null!=(e=d.find((function(e){return e.id===u})))?e:null}),[u,d]),g=n((function(){var e;return(0,l.isAllNetworks)(s)?c:m&&null!=(e=p.find((function(e){return e.id===r})))?e:null}),[r,s,c,p,m]),w=n((function(){var e;return null!=(e=f.find((function(e){return e.id===s})))?e:null}),[s,f]),y=(null==w?void 0:w.impl)||"",b=s||"",S=(null==g?void 0:g.address)||"",O=(null==g?void 0:g.pubKey)||"",k=r||"",_=u||"",A=n((function(){var e=!0;if(k&&b)try{e=(0,o.isAccountCompatibleWithNetwork)(k,b)}catch(t){i.default.common.error(t)}return e}),[k,b]);return{wallet:m,account:g,network:w,externalWallet:v,watchingWallet:h,accountId:k,networkId:b,networkImpl:y,accountAddress:S,accountPubKey:O,walletId:_,isCompatibleNetwork:A}})),d=c.use,f=c.get;function p(){var e=d(),t=(0,u.useTransactionSendContext)();if(t&&t.isTransactionSendFlow){r.default.show({title:"useActiveWalletAccount() is NOT allowed in Send flow. please replace to useActiveSideAccount()"},{type:"error"})}return e}var v=n(53568),h=n(301842),m=n.n(h),g=n(206391),w=n.n(g),y=n(134662),b=n(340576),S=n(840248),O=(0,s.buildCrossHooksWithOptions)((function(e,t){var n,r=t.options,o=(null==r?void 0:r.accountId)||"",l=(null==r?void 0:r.networkId)||"";return null!=(n=e((function(e){var t,n;return null==(t=e.tokens.accountTokens)||null==(n=t[l])?void 0:n[o]})))?n:b.freezedEmptyArray})),k=O.use,_=O.get,A=(0,s.buildCrossHooksWithOptions)((function(e,t){var n,r=t.options,o=r.accountId||"",l=r.networkId||"";return null!=(n=e((function(e){var t,n;return null==(t=e.tokens.accountTokensBalance)||null==(n=t[l])?void 0:n[o]})))?n:b.freezedEmptyObject})),x=A.use,j=A.get,E=(0,s.buildCrossHooks)((function(e){var t;return null!=(t=e((function(e){return e.tokens.tokenPriceMap})))?t:b.freezedEmptyObject})),C=E.use,I=E.get,T=(0,s.buildCrossHooksWithOptions)((function(e,t){var n,r,o=t.options,l=[null==o||null==(n=o.token)?void 0:n.networkId,null==o||null==(r=o.token)?void 0:r.address].filter(Boolean).join("-"),a=null==o?void 0:o.prices[l];return{priceKey:l,priceRawInfo:a,price:null==a?void 0:a.usd,price24h:null==a?void 0:a.usd_24h_change}})),P=T.use,N=T.get;function R(e){var t=e.token,n=C();return P({prices:n,token:t})}var M=(0,s.buildCrossHooksWithOptions)((function(e,t){var n=t.options,r=(0,y.getBalanceKey)(null==n?void 0:n.token),o=null==n?void 0:n.balances[r];return m()(o)?{balance:o,blockHeight:void 0}:o})),L=M.use,D=M.get;function W(e){var t=e.token,n=x({accountId:t.accountId,networkId:t.networkId});return L({balances:n,token:t})}var B=(0,s.buildCrossHooksWithOptions)((function(e,t){var n,r,o,l=t.options,a=l.priceInfo,i=l.balanceInfo,u=a.price,s=a.price24h,c=a.priceRawInfo,d=i.balance,f=i.transferBalance,p=i.availableBalance;"undefined"===typeof u||m()(d)||(r=n=new(w())(u||0).multipliedBy(d).toFixed());var v=(0,S.getPreBaseValue)({priceInfo:c,vsCurrency:"usd"}).usd;return m()(d)||m()(v)||(o=new(w())(d).multipliedBy(v).toFixed()),{price:u,price24h:s,balance:d,transferBalance:f,availableBalance:p,value:n,usdValue:r,value24h:o}})),V=B.use,U=B.get;function F(e){var t=e.token,n=R({token:t}),r=W({token:t});return V({priceInfo:n,balanceInfo:r,token:t})}},53568:(e,t,n)=>{n.r(t),n.d(t,{getManageNetworks:()=>s,useManageNetworks:()=>u});var r=n(196234),o=n(849877),l=n(340576),a=n(613549),i=(n(213208),(0,n(332641).buildCrossHooksWithOptions)((function(e,t){var n,i,u=t.useMemo,s=t.options,c=null==(n=e((function(e){return e.settings.devMode})))?void 0:n.enable,d=null!=(i=e((function(e){return e.runtime.networks})))?i:l.freezedEmptyArray,f=u((function(){var e=c?[]:a.CHAINS_DISPLAYED_IN_DEV,t=d.filter((function(t){return!((null==s||!s.allowSelectAllNetworks)&&(0,o.isAllNetworks)(t.id))&&(!e.includes(t.impl)&&!0)}));null!=s&&s.allowSelectAllNetworks&&t.sort((function(e){return(0,o.isAllNetworks)(e.id)?-1:1}));var n=t.filter((function(e){return e.enabled}));return[t,n]}),[c,d,null==s?void 0:s.allowSelectAllNetworks]),p=(0,r.default)(f,2);return{allNetworks:p[0],enabledNetworks:p[1]}}))),u=i.use,s=i.get},135463:(e,t,n)=>{n.r(t),n.d(t,{getShouldHideInscriptions:()=>s,useShouldHideInscriptions:()=>u});var r=n(301842),o=n.n(r),l=n(942013),a=n(613549),i=(0,n(332641).buildCrossHooksWithOptions)((function(e,t){var n=t.options,r=e((function(e){return e.settings})).hideInscriptions,i=n.accountId,u=n.networkId,s=!1;if(u===l.OnekeyNetwork.btc||u===l.OnekeyNetwork.tbtc){var c,d,f=null==r?void 0:r[i];if(o()(f))s=!(null!=i&&i.includes("86'/")||null!=i&&null!=(c=i.split(a.SEPERATOR)[2])&&c.startsWith("bc1p")||null!=i&&null!=(d=i.split(a.SEPERATOR)[2])&&d.startsWith("tb1p"));else s=f}return s})),u=i.use,s=i.get},859071:(e,t,n)=>{n.r(t),n.d(t,{getActiveWalletAccount:()=>r.getActiveWalletAccount,getManageNetworks:()=>r.getManageNetworks,getReduxAccountTokenBalancesMap:()=>r.getReduxAccountTokenBalancesMap,getReduxAccountTokensList:()=>r.getReduxAccountTokensList,getReduxSingleTokenBalance:()=>r.getReduxSingleTokenBalance,getReduxSingleTokenFiatValues:()=>r.getReduxSingleTokenFiatValues,getReduxSingleTokenPrice:()=>r.getReduxSingleTokenPrice,getReduxTokenPricesMap:()=>r.getReduxTokenPricesMap,useAccount:()=>l.useAccount,useAccountIsUpdating:()=>b.useAccountIsUpdating,useAccountSimple:()=>l.useAccountSimple,useAccountTokenLoading:()=>b.useAccountTokenLoading,useAccountTokensBalance:()=>A.useAccountTokensBalance,useAccountTokensOnChain:()=>b.useAccountTokensOnChain,useActiveSideAccount:()=>d,useActiveWalletAccount:()=>r.useActiveWalletAccount,useAddressName:()=>f,useAppSelector:()=>p.useAppSelector,useBRC20TokenBalance:()=>b.useBRC20TokenBalance,useDebounce:()=>v.useDebounce,useHelpLink:()=>h.useHelpLink,useInterval:()=>m,useLocalAuthentication:()=>g.useLocalAuthentication,useManageNetworks:()=>r.useManageNetworks,useNFTIsLoading:()=>b.useNFTIsLoading,useNativeToken:()=>A.useNativeToken,useNativeTokenBalance:()=>A.useNativeTokenBalance,useNavigation:()=>w.useNavigation,useNavigationActions:()=>y.useNavigationActions,useNetwork:()=>s.useNetwork,useNetworkSimple:()=>s.useNetworkSimple,useOverviewLoading:()=>b.useOverviewLoading,useOverviewPendingTasks:()=>b.useOverviewPendingTasks,usePrevious:()=>S,useReduxAccountTokenBalancesMap:()=>r.useReduxAccountTokenBalancesMap,useReduxAccountTokensList:()=>r.useReduxAccountTokensList,useReduxSingleTokenBalance:()=>r.useReduxSingleTokenBalance,useReduxSingleTokenBalanceSimple:()=>r.useReduxSingleTokenBalanceSimple,useReduxSingleTokenFiatValues:()=>r.useReduxSingleTokenFiatValues,useReduxSingleTokenFiatValuesSimple:()=>r.useReduxSingleTokenFiatValuesSimple,useReduxSingleTokenPrice:()=>r.useReduxSingleTokenPrice,useReduxSingleTokenPriceSimple:()=>r.useReduxSingleTokenPriceSimple,useReduxTokenPricesMap:()=>r.useReduxTokenPricesMap,useSettings:()=>o.useSettings,useThrottle:()=>_,useTokenBalance:()=>b.useTokenBalance,useTokenBalanceWithoutFrozen:()=>b.useTokenBalanceWithoutFrozen,useTokenPositionInfo:()=>b.useTokenPositionInfo,useWallet:()=>c.useWallet,useWalletIdFromAccountIdWithFallback:()=>l.useWalletIdFromAccountIdWithFallback,useWalletSimple:()=>c.useWalletSimple});var r=n(97856),o=n(747225),l=n(306672),a=n(202784),i=n(534756),u=n(849877),s=n(49198),c=n(152725);function d(e){var t=e.accountId,n=e.networkId;if(!t)throw new Error("useActiveSideAccount ERROR: `accountId` is empty");if(!n)throw new Error("useActiveSideAccount ERROR: `networkId` is empty");var r=(0,a.useMemo)((function(){return(0,i.getWalletIdFromAccountId)(t)||""}),[t]),o=(0,a.useMemo)((function(){return(0,u.getNetworkImpl)(n)||""}),[n]),d=(0,s.useNetwork)({networkId:n}).network,f=(0,l.useAccount)({accountId:t,networkId:n}).account,p=(0,c.useWallet)({walletId:r}).wallet,v=(0,a.useMemo)((function(){return(null==f?void 0:f.address)||""}),[null==f?void 0:f.address]);return(0,a.useMemo)((function(){return{accountId:t,networkId:n,walletId:r,network:d,account:f,wallet:p,networkImpl:o,accountAddress:v}}),[f,v,t,d,n,o,p,r])}function f(e){var t=e.address,n=(0,o.useAppSelector)((function(e){return e.contacts.contacts})),r=(0,o.useRuntime)().accounts;return(0,a.useMemo)((function(){if(t){for(var e=0;e<r.length;e+=1){var o=r[e];if(o.address===t)return o.name}for(var l=Object.values(n),a=0;a<l.length;a+=1){var i=l[a];if(i.address===t)return i.name}}}),[t,n,r])}var p=n(420454),v=n(806984),h=n(398753);function m(e,t){var n=(0,a.useRef)(e);(0,a.useEffect)((function(){n.current=e}),[e]),(0,a.useEffect)((function(){if(t||0===t){var e=setInterval((function(){return n.current()}),t);return function(){return clearInterval(e)}}}),[t])}var g=n(771442),w=n(472719),y=n(928144),b=n(358799);function S(e){var t=(0,a.useRef)();return(0,a.useEffect)((function(){t.current=e}),[e]),t.current}var O=n(196234),k=function(e){var t,n=(0,a.useRef)(e);n.current=e,t=function(){return function(){return n.current()}},(0,a.useEffect)(t,[])},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=(0,a.useState)(e),r=(0,O.default)(n,2),o=r[0],l=r[1],i=(0,a.useRef)(),u=(0,a.useRef)(null),s=(0,a.useRef)(0);return(0,a.useEffect)((function(){if(i.current)u.current=e,s.current=!0;else{l(e);i.current=setTimeout((function e(){s.current?(s.current=!1,l(u.current),i.current=setTimeout(e,t)):i.current=void 0}),t)}}),[e]),k((function(){i.current&&clearTimeout(i.current)})),o},A=n(920453)},747225:(e,t,n)=>{n.r(t),n.d(t,{useAppSelector:()=>a.useAppSelector,useAutoUpdate:()=>v,useData:()=>s,useDiscover:()=>u,useGeneral:()=>c,useGetWalletDetail:()=>h,useNetworks:()=>f,useRuntime:()=>d,useRuntimeWallets:()=>p,useSettings:()=>i,useTools:()=>m});var r=n(202784),o=n(849877),l=n(506885),a=n(420454),i=function(){return(0,a.useAppSelector)((function(e){return e.settings}))},u=function(){return(0,a.useAppSelector)((function(e){return e.discover}))},s=function(){return(0,a.useAppSelector)((function(e){return e.data}))},c=function(){return(0,a.useAppSelector)((function(e){return e.general}))},d=function(){return(0,a.useAppSelector)((function(e){return e.runtime}))},f=function(){return(0,a.useAppSelector)((function(e){return e.runtime.networks}))},p=function(){var e=(0,a.useAppSelector)((function(e){return e.runtime.wallets})),t=(0,r.useMemo)((function(){return e.filter((function(e){return e.type===l.WALLET_TYPE_HW}))}),[e]);return{wallets:e,hardwareWallets:t}},v=function(){return(0,a.useAppSelector)((function(e){return e.autoUpdate}))},h=function(e){var t;return null!=(t=(0,a.useAppSelector)((function(t){var n;return null==(n=t.runtime.wallets)||null==n.find?void 0:n.find((function(t){return t.id===e}))})))?t:null},m=function(e){var t=(0,a.useAppSelector)((function(e){var t;return null!=(t=e.data.tools)?t:[]}));return(0,r.useMemo)((function(){return(0,o.isAllNetworks)(e)?t:t.filter((function(t){return t.networkId===e}))}),[t,e])}},306672:(e,t,n)=>{n.r(t),n.d(t,{useAccount:()=>d,useAccountSimple:()=>c,useWalletIdFromAccountIdWithFallback:()=>f});var r=n(634795),o=n(196234),l=n(202784),a=n(534756),i=n(292147),u=n(945821),s=n(420454),c=function(e){var t=(0,s.useAppSelector)((function(t){var n;return null==(n=t.runtime.accounts)?void 0:n.find((function(t){return t.id===e}))}));return null!=t?t:null};function d(e){var t,n=e.accountId,a=e.networkId,i=e.accountFallback,s=c(n),d=(0,l.useState)(null!=s?s:null),f=(0,o.default)(d,2),p=f[0],v=f[1];(0,l.useEffect)((function(){(0,r.default)((function*(){if(n&&a&&!s){var e=yield u.default.engine.getAccount(n,a);v(e)}}))()}),[n,s,a]);var h=null!=(t=null!=s?s:p)?t:i;return(0,l.useMemo)((function(){return{account:h}}),[h])}var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,l.useMemo)((function(){if(!e)return t;try{return(0,a.getWalletIdFromAccountId)(e)}catch(n){return i.default.common.error("useWalletIdFromAccountId",n),t}}),[e,t])}},744128:(e,t,n)=>{n.r(t),n.d(t,{makeGetAllNetworksAccountsSelector:()=>k,useActionForAllNetworks:()=>x,useAllNetworkAccountInfo:()=>S,useAllNetworksIncludedNetworks:()=>b,useAllNetworksSelectNetworkAccount:()=>A,useAllNetworksWalletAccounts:()=>_});var r=n(256666),o=n(196234),l=n(202784),a=n(560985),i=n(534756),u=n(849877),s=n(942013),c=n(613549),d=n(945821),f=n(481047),p=n(97856),v=n(306672),h=n(420454),m=n(472719),g=n(49198);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(0,l.useState)({}),n=(0,o.default)(t,2),r=n[0],a=n[1],i=(0,p.useManageNetworks)(void 0).allNetworks;return(0,l.useEffect)((function(){d.default.serviceNetwork.getPresetNetworks().then(a)}),[]),(0,l.useMemo)((function(){return i.filter((function(t){var n,o=!t.isTestnet&&!(null!=(n=t.settings)&&n.validationRequired)&&!t.settings.hideInAllNetworksMode&&!(null==r||!r[t.id])&&![s.OnekeyNetwork.fevm,s.OnekeyNetwork.cfxespace].includes(t.id);return e?o&&t.enabled:o}))}),[i,e,r])},S=function(e){var t=e.accountId;return(0,l.useMemo)((function(){if(i.allNetworksAccountRegex.test(t))return(0,i.generateFakeAllnetworksAccount)({accountId:t})}),[t])},O=function(e){return e.overview.allNetworksAccountsMap},k=function(e){return(0,a.createSelector)([O],(function(t){return null==t?void 0:t[e||""]}))},_=function(e){var t=e.accountId,n=(0,l.useMemo)((function(){return k(t)}),[t]);return(0,h.useAppSelector)(n)},A=function(e){var t=e.accountId,n=e.networkId,r=e.filter,o=void 0===r?function(){return!0}:r,a=(0,v.useWalletIdFromAccountIdWithFallback)(t,""),i=b(),s=(0,g.useNetwork)({networkId:n}).network,c=(0,v.useAccount)({networkId:n,accountId:t}).account,d=_({accountId:t}),p=(0,m.useNavigation)();return(0,l.useCallback)((function(e){return new Promise((function(r){var l,v;if((0,u.isAllNetworks)(n)){var h=null!=e?e:o,m=i.filter((function(e){return!(null==d||!d[e.id])})).map((function(e){var t,n=(null!=(t=null==d?void 0:d[e.id])?t:[]).filter((function(t){return!h||h({network:e,account:t})}));return y(y({},e),{},{accounts:n})})).filter((function(e){var t=e.accounts;return!!t.length&&!(h&&!h({network:e,account:t[0]}))}));1===m.length&&1===(null==m||null==(l=m[0])||null==(v=l.accounts)?void 0:v.length)?r({network:m[0],account:m[0].accounts[0]}):p.navigate(f.RootRoutes.Modal,{screen:f.ModalRoutes.ManageNetwork,params:{screen:f.ManageNetworkModalRoutes.AllNetworksNetworkSelector,params:{filter:h,walletId:a,accountId:t,onConfirm:function(e){e&&r(e)}}}})}else s&&c&&r({network:s,account:c})}))}),[d,i,p,t,a,o,s,c,n])},x=function(e){var t=e.networkId,n=e.accountId,r=e.filter,a=e.action,i=(0,g.useNetwork)({networkId:t}).network,s=(0,v.useAccount)({networkId:t,accountId:n}).account,d=(0,p.useManageNetworks)(void 0).enabledNetworks,f=_({accountId:n}),h=(0,l.useMemo)((function(){var e;return(0,u.isAllNetworks)(t)?f:((e={})[t]=[s],e)}),[f,t,s]),m=A({networkId:t,accountId:n,filter:r}),w=(0,l.useCallback)((function(){(0,u.isAllNetworks)(t)?m(r).then((function(e){var t=e.network,n=e.account;t&&n&&a({network:t,account:n})})):i&&s&&a({network:i,account:s})}),[a,r,m,i,s,t]);return{visible:(0,l.useMemo)((function(){var e=function(e){var t=d.find((function(t){return t.id===e}));if(t){if((0,c.isLightningNetworkByNetworkId)(e))return{v:!1};for(var n of a)if(!r||r({network:t,account:n}))return{v:!0}}};for(var t of Object.entries(null!=h?h:{})){var n=(0,o.default)(t,2),l=n[0],a=n[1],i=e(l);if("object"===typeof i)return i.v}return!1}),[d,r,h]),process:w}}},884747:(e,t,n)=>{n.r(t),n.d(t,{useAppLock:()=>l});n(213208);var r=n(671626),o=n(420454);var l=function(){var e=(0,o.useAppSelector)((function(e){return e.data.isPasswordSet})),t=(0,o.useAppSelector)((function(e){return e.status.isUnlock})),n=(0,o.useAppSelector)((function(e){return e.data.isUnlock}));return{isPasswordSet:e,isUnlock:n&&t,showUnlockView:e&&!(n&&t)&&!Boolean(r.unlockWhiteListUrls.find((function(e){var t,n;return null==(t=window.location)||null==(n=t.pathname)?void 0:n.startsWith(e)})))}}},493877:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u,getAppNavigation:()=>i,useNavigationBack:()=>c,useNavigationGoHomeForceReload:()=>s});var r=n(202784),o=n(472719),l=n(213208),a=n(481047);function i(){var e;return null==(e=n.g.$navigationRef)?void 0:e.current}function u(){var e,t=(0,o.useNavigation)();return null!=(e=i())?e:t}function s(){var e=u();return(0,r.useCallback)((function(){if(l.default.isRuntimeBrowser&&!l.default.isExtensionBackground)return e.navigate(a.RootRoutes.Main),void(window.location.href="/");e.navigate(a.RootRoutes.Main)}),[e])}function c(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).fallback,t=u(),n=s();return(0,r.useCallback)((function(){null!=t&&null!=t.canGoBack&&t.canGoBack()?null==t||t.goBack():e?e():n()}),[t,e,n])}},420454:(e,t,n)=>{n.r(t),n.d(t,{useAppSelector:()=>r});var r=n(344714).useSelector},550441:(e,t,n)=>{n.r(t),n.d(t,{isFromBackgroundToForeground:()=>u,useAppStateChange:()=>s});var r=n(202784),o=n(964295),l=n(396915),a=n(292147),i=n(213208),u=function(e,t){return i.default.isNativeAndroid?!(!/inactive|background/.exec(e)||"active"!==t):"background"===e&&"active"===t},s=function(e,t){var n=(0,r.useRef)(o.default.currentState);(0,r.useEffect)((function(){var r,s=function(r){a.default.common.debug(`AppState changed callback trigger from: ${n.current} , to: ${r}`),(null!=t&&t.unFilter||u(n.current,r))&&(null==e||e(r)),n.current=r};return r=i.default.isNativeAndroid?l.default.addListener("android_lifecycle",s):o.default.addEventListener("change",s),function(){var e;null==(e=r)||null==e.remove||e.remove()}}),[null==t?void 0:t.unFilter,e])}},318207:(e,t,n)=>{function r(e){var t=e.screens,n=void 0===t?[]:t,r=e.routeParams,o={screen:null,params:{}},l=o,a=o;return n.forEach((function(e){l.screen=e,l.params={},a=l,l=l.params})),a.params=r,o}n.r(t),n.d(t,{buildModalRouteParams:()=>r})},484476:(e,t,n)=>{n.r(t),n.d(t,{useBRC20Content:()=>i});var r=n(634795),o=n(196234),l=n(202784),a=n(313503);function i(e){var t=e.content,n=e.contentType,i=e.contentUrl,u=(0,l.useState)(!1),s=(0,o.default)(u,2),c=s[0],d=s[1],f=(0,l.useState)(null),p=(0,o.default)(f,2),v=p[0],h=p[1];return(0,l.useEffect)((function(){var e=function(){var e=(0,r.default)((function*(){var e=yield(0,a.parseBRC20Content)({content:t,contentType:n,contentUrl:i}),r=e.isBRC20Content,o=e.brc20Content;d(r),h(o)}));return function(){return e.apply(this,arguments)}}();e()}),[t,n,i]),{isBRC20Content:c,brc20Content:v}}},284315:(e,t,n)=>{n.r(t),n.d(t,{useClipboard:()=>u});var r=n(669083),o=n(202784),l=n(783112),a=n(119804),i=n(213208);function u(){var e=(0,l.default)(),t=i.default.canGetClipboard;return{copyText:(0,o.useCallback)((function(t,n){t&&(setTimeout((function(){return(0,a.copyToClipboard)(t)}),200),r.default.show({title:e.formatMessage({id:n||"msg__copied"})}))}),[e]),getClipboard:a.getClipboard,canGetClipboard:t}}},450334:(e,t,n)=>{n.r(t),n.d(t,{useColorScheme:()=>a});var r=n(196234),o=n(202784),l=n(754935);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=(0,o.useState)(l.default.getColorScheme()),n=(0,r.default)(t,2),a=n[0],i=n[1],u=(0,o.useRef)(null),s=(0,o.useCallback)((function(){u.current&&clearTimeout(u.current)}),[u]),c=(0,o.useCallback)((function(t){s(),u.current=setTimeout((function(){i(t.colorScheme)}),e)}),[u,s,e]);return(0,o.useEffect)((function(){var e=l.default.addChangeListener(c);return function(){s(),e.remove()}}),[c,s]),a}},850167:(e,t,n)=>{n.r(t),n.d(t,{useCopyAddress:()=>s});var r=n(669083),o=n(202784),l=n(783112),a=n(119804),i=n(481047),u=n(472719);function s(e){var t=e.wallet,n=e.network,s=e.account,c="hw"===(null==t?void 0:t.type),d=(0,l.default)(),f=(0,u.useNavigation)(),p=(0,o.useCallback)((function(e){var o=e.address,l=e.displayAddress,u=e.template,p=e.customPath;if(c)f.navigate(i.RootRoutes.Modal,{screen:i.ModalRoutes.Receive,params:{screen:i.ReceiveTokenModalRoutes.ReceiveToken,params:{address:o,displayAddress:l,wallet:t,network:n,account:s,template:u,customPath:p}}});else{var v;if(!l&&!o)return;(0,a.copyToClipboard)(null!=(v=null!=l?l:o)?v:""),r.default.show({title:d.formatMessage({id:"msg__address_copied"})})}}),[s,d,c,f,n,t]);return{isHwWallet:c,copyAddress:p}}},826771:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(634795),o=n(196234),l=n(202784),a=n(291026),i=n(213208),u=n(36085),s=n(945821);const c=function(e){var t=e.id,n=e.getResolveData,c=e.closeOnError,d=e.closeWindowAfterResolved,f=i.default.isExtensionUiStandaloneWindow,p=(0,l.useState)(null),v=(0,o.default)(p,2),h=v[0],m=v[1],g=(0,l.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.close,r=e.error;r=r||h||a.web3Errors.provider.userRejectedRequest(),s.default.servicePromise.rejectCallback({id:t,error:(0,u.toPlainErrorObject)(r)}),f?setTimeout((function(){null==n||n(),window.close()}),0):null==n||n()}),[t,f,h]),w=(0,l.useCallback)((0,r.default)((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.close,o=e.result;try{m(null);var l=null!=o?o:yield null==n?void 0:n();s.default.servicePromise.resolveCallback({id:t,data:l}),null==r||r(),f&&d&&setTimeout((function(){window.close()}),0)}catch(a){throw console.error("getResolveData ERROR:",a),m(a),a}})),[n,t,f,d]);return(0,l.useEffect)((function(){h&&c&&g()}),[c,g,h]),(0,l.useEffect)((function(){var e=f;return e&&window.addEventListener("beforeunload",(function(){return g()})),function(){e&&window.removeEventListener("beforeunload",(function(){return g()}))}}),[f,g]),{reject:g,resolve:w}}},958698:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var r=n(472719),o=n(292147);const l=function(){var e,t,n=null!=(e=null==(t=(0,r.useRoute)().params)?void 0:t.query)?e:"",l={};try{n&&(l=JSON.parse(n)),o.default.sendTx.info("useDappParams:",l)}catch(a){o.default.sendTx.info("useDappParams:",n),console.error(`parse dapp query error: ${n}`)}return l}},806984:(e,t,n)=>{n.r(t),n.d(t,{useDebounce:()=>l});var r=n(196234),o=n(594225);function l(e,t,n){var l=(0,o.useDebounce)(e,t,n);return(0,r.default)(l,1)[0]}},517972:(e,t,n)=>{n.r(t),n.d(t,{useDecodedTx:()=>u,useInteractWithInfo:()=>i});var r=n(634795),o=n(196234),l=n(202784),a=n(945821);function i(e){var t=e.sourceInfo;return(0,l.useMemo)((function(){if(null!=t&&t.origin)return{url:null==t?void 0:t.origin,name:"",description:"",icons:[],provider:null==t?void 0:t.scope}}),[null==t?void 0:t.origin,null==t?void 0:t.scope])}function u(e){var t=e.networkId,n=e.accountId,u=e.encodedTx,s=e.payload,c=e.sourceInfo,d=(0,l.useState)(null),f=(0,o.default)(d,2),p=f[0],v=f[1],h=(0,l.useState)(null),m=(0,o.default)(h,2),g=m[0],w=m[1],y=a.default.engine,b=i({sourceInfo:c});return(0,l.useEffect)((function(){u&&(0,r.default)((function*(){var e=yield y.decodeTx({networkId:t,accountId:n,encodedTx:u,payload:s,interactInfo:b});w(e.decodedTx),v(e.decodedTxLegacy)}))()}),[n,u,y,b,t,s]),{decodedTx:g,decodedTxLegacy:p}}},66751:(e,t,n)=>{n.r(t),n.d(t,{useDisableNavigationAnimation:()=>l});var r=n(202784),o=n(472719);function l(e){var t=e.condition,n=(0,o.useNavigation)();(0,r.useLayoutEffect)((function(){t&&n.setOptions({animation:"none",animationEnabled:!1})}),[n,t])}},950585:(e,t,n)=>{n.r(t),n.d(t,{useEffectOnUpdate:()=>o});var r=n(202784);function o(e,t){var n=(0,r.useRef)(!0);return(0,r.useEffect)((function(){n.current?n.current=!1:e()}),t)}},677442:(e,t,n)=>{n.r(t),n.d(t,{useFormOnChangeDebounced:()=>u});var r=n(254073),o=n.n(r),l=n(196234),a=n(202784),i=n(806984);function u(e){var t=e.useFormReturn,n=e.wait,r=void 0===n?500:n,u=e.revalidate,s=void 0===u||u,c=e.clearErrorIfEmpty,d=void 0!==c&&c,f=e.clearErrorWhenTextChange,p=void 0!==f&&f,v=e.onChange,h=t.watch,m=t.trigger,g=t.formState,w=t.clearErrors,y=t.getValues,b=(0,a.useRef)(!1),S=(0,a.useState)(),O=(0,l.default)(S,2),k=O[0],_=O[1];(0,a.useEffect)((function(){var e=y();_(e),setTimeout((function(){return m()}),0)}),[y,m]),(0,a.useEffect)((function(){var e=o()((function(e,t){var n=t.name,r=t.type;b.current=!1,"change"!==r&&void 0!==r||(_(e),v&&v(e,{name:n,type:r}),d&&""===(null==e?void 0:e[n])&&w(n),s&&m(n))}),r,{leading:!1,trailing:!0}),t=h((function(t,n){var r=n.name,o=n.type;b.current=!0,p&&w(r),e(t,{name:r,type:o})}));return function(){return t.unsubscribe()}}),[d,p,w,v,s,m,r,h]);var A=(0,i.useDebounce)(g.isValid&&!Object.keys(g.errors).length&&!g.isValidating,100);return{loadingRef:b,isLoading:b.current,formValues:k,isValid:A}}},74008:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var r=n(342620),o=n(202784),l=n(731807),a=n(438341),i=n(273871),u=n(893898),s=n(559813),c=n(491492),d=n(926842),f=n(674762),p=n(64963),v=n(154409),h=function(e){switch(e){case"zh-CN":return c.default;case"en-US":default:return d.default;case"zh-HK":return f.default;case"ja-JP":return p.default;case"ko-KR":return v.default}};function m(){var e=(0,r.default)().locale,t=(0,o.useCallback)((function(t,n){var r;r="string"===typeof t?(0,l.default)(t):t;try{return(0,a.default)(r,null!=n?n:"PPp",{locale:h(e)})}catch(o){return"-"}}),[e]),n=(0,o.useCallback)((function(e,n){var r,o;o="string"===typeof e?(0,l.default)(e):e;var a=(new Date).getFullYear(),i=(new Date).getMonth(),u="LLL dd yyyy, HH:mm";return(a===o.getFullYear()&&null!=n&&n.hideTheYear||null!=n&&n.hideYear)&&(u=u.replace(" yyyy","")),(i===o.getMonth()&&null!=n&&n.hideTheMonth||null!=n&&n.hideMonth)&&(u=u.replace("LLL ","")),null!=n&&n.hideTimeForever&&(u=u.replace(", HH:mm","")),null!=(r=t(o,u))?r:""}),[t]),c=(0,o.useCallback)((function(e,n){var r,o,a;return o="string"===typeof e?(0,l.default)(e):e,(new Date).getFullYear()===o.getFullYear()&&null!=n&&n.hideTheYear||null!=n&&n.hideYear?null!=(a=t(o,"MMMM"))?a:"":null!=(r=t(o,"MMMM, yyyy"))?r:""}),[t]),d=(0,o.useCallback)((function(t,n){var r;return null!=(r=(0,i.default)(t,n,{locale:h(e)}))?r:""}),[e]),f=(0,o.useCallback)((function(t){var n;return null!=(n=(0,u.default)(t,{addSuffix:!0,locale:h(e)}))?n:""}),[e]),p=(0,o.useCallback)((function(t){var n;return null!=(n=(0,s.default)(t,{locale:h(e)}))?n:""}),[e]);return(0,o.useMemo)((function(){return{format:t,formatDate:n,formatMonth:c,formatDistanceToNow:f,formatDuration:p,formatDistanceStrict:d}}),[t,n,c,f,p,d])}},972584:(e,t,n)=>{n.r(t),n.d(t,{useGridListLayout:()=>l});var r=n(539144),o=n(202784);function l(e){var t=e.maxCardWidth,n=e.pageWidth,l=e.numColumns,a=e.margin,i=(0,r.default)();return(0,o.useMemo)((function(){var e,r;return 0===n?{cardWidth:t,numColumns:l}:(i?(r=l,e=Math.floor((n-a*(l-1))/l)):(r=Math.floor((n+a)/(t+a)),e=Math.floor((n-a*(r-1))/r)),{cardWidth:e,numColumns:r})}),[i,a,t,l,n])}},398753:(e,t,n)=>{n.r(t),n.d(t,{HELP_LINK:()=>a,useHelpLink:()=>i});var r=n(747225),o=n(589193);function l(e){return e?e.replace(/^\/|\/$/g,""):""}var a="https://help.onekey.so/hc";function i(e){var t=e.path,n=void 0===t?"":t,i=(0,o.useSystemLocale)(),u=(0,r.useSettings)().locale,s=("system"===u?i:u).replace(/_/g,"-").toLowerCase(),c=l(n);return l(`${a}/${s}/${c}`)}},733950:(e,t,n)=>{n.r(t),n.d(t,{useHomeTabName:()=>l});var r=n(336782),o=n(420454);function l(){return(0,o.useAppSelector)((function(e){return e.status.homeTabName}))||r.WalletHomeTabEnum.Tokens}},239014:(e,t,n)=>{n.r(t),n.d(t,{useHtmlPreloadSplashLogoRemove:()=>l});var r=n(202784),o=n(213208);function l(e){(0,r.useEffect)((function(){if(o.default.isRuntimeBrowser){var t=document.querySelector(".onekey-index-html-preload-image");if(null!=e&&e.isDelay){setTimeout((function(){return null==t?void 0:t.remove()}),50)}else null==t||t.remove()}}),[null==e?void 0:e.isDelay])}},929483:(e,t,n)=>{n.r(t),n.d(t,{useIsFocusedAllInOne:()=>f});var r=n(301842),o=n.n(r),l=n(196234),a=n(202784),i=n(472719),u=n(213208),s=n(481047),c=n(593104),d=n(733950);function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.focusDelay,n=e.blurDelay,r=e.checkVisibility,f=void 0===r||r,p=e.homeTabName,v=e.rootTabName,h=(0,a.useState)(!1),m=(0,l.default)(h,2),g=m[0],w=m[1],y=(0,a.useRef)(null),b=(0,a.useRef)(null),S=(0,a.useCallback)((function(){clearTimeout(y.current),clearTimeout(b.current)}),[]),O=(0,d.useHomeTabName)(),k=(0,a.useMemo)((function(){if(!o()(p))return p&&O===p&&(0,c.isAtAppRootTab)(s.TabRoutes.Home)}),[O,p,g]),_=(0,a.useMemo)((function(){if(!o()(v))return(0,c.isAtAppRootTab)(v)}),[g,v]),A=(0,a.useCallback)((function(){S(),n?y.current=setTimeout((function(){w(!1)}),n):w(!1)}),[n,S]),x=(0,a.useCallback)((function(){S(),t?b.current=setTimeout((function(){w(!0)}),t):w(!0)}),[S,t]),j=(0,a.useCallback)((function(e){}),[f,A,x]),E=(0,a.useCallback)((function(){f&&u.default.isRuntimeBrowser&&("hidden"===document.visibilityState&&A(),"visible"===document.visibilityState&&x())}),[f,A,x]);return(0,a.useEffect)((function(){return function(){}}),[j]),(0,i.useFocusEffect)((0,a.useCallback)((function(){x();var e=u.default.isRuntimeBrowser&&f;return e&&(document.addEventListener("visibilitychange",E),window.addEventListener("blur",A),window.addEventListener("focus",x)),function(){A(),e&&(document.removeEventListener("visibilitychange",E),window.removeEventListener("blur",A),window.removeEventListener("focus",x))}}),[f,A,x,E])),(0,a.useMemo)((function(){return{isFocused:g,homeTabFocused:k,rootTabFocused:_}}),[k,g,_])}},461576:(e,t,n)=>{n.r(t),n.d(t,{useIsMounted:()=>o});var r=n(202784);function o(){var e=(0,r.useRef)(!0);return(0,r.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e}},771442:(e,t,n)=>{n.r(t),n.d(t,{useLocalAuthentication:()=>a});var r=n(196234),o=n(202784),l=n(854341);function a(){var e=(0,o.useState)(!1),t=(0,r.default)(e,2),n=t[0],a=t[1];return(0,o.useEffect)((function(){(0,l.hasHardwareSupported)().then(a)}),[]),{isOk:n,localAuthenticate:l.localAuthenticate,hasHardwareSupported:l.hasHardwareSupported,savePassword:l.savePassword,getPassword:l.getPassword}}},327226:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var r=n(481047),o=n(493877);function l(){var e=(0,o.default)();return{showVerify:function(t,n,o,l,a){e.navigate(r.RootRoutes.Modal,{screen:r.ModalRoutes.ManagerWallet,params:{screen:r.ManagerWalletModalRoutes.ManagerWalletAuthorityVerifyModal,params:{field:l,requestId:null!=o?o:"",onSuccess:t,onCancel:n,walletId:a}}})}}}},928144:(e,t,n)=>{n.r(t),n.d(t,{useNavigationActions:()=>r.useNavigationActions});var r=n(322987)},49198:(e,t,n)=>{n.r(t),n.d(t,{useNetwork:()=>u,useNetworkSimple:()=>s});var r=n(634795),o=n(196234),l=n(202784),a=n(945821),i=n(420454);function u(e){var t,n,u=e.networkId,s=e.networkFallback,c=(0,i.useAppSelector)((function(e){var t;return null==(t=e.runtime.networks)?void 0:t.find((function(e){return e.id===u}))})),d=(0,l.useState)(c),f=(0,o.default)(d,2),p=f[0],v=f[1];(0,l.useEffect)((function(){(0,r.default)((function*(){if(u&&!c){var e=yield a.default.engine.getNetwork(u);v(e)}}))()}),[u,c]);var h=null!=(t=null!=(n=null!=c?c:p)?n:s)?t:null;return(0,l.useMemo)((function(){return{network:h}}),[h])}var s=function(e,t){return u({networkId:e,networkFallback:t}).network}},275268:(e,t,n)=>{n.r(t),n.d(t,{useCloseOnEsc:()=>i,useOnKeyDown:()=>a});var r=n(202784),o=n(472719),l=n(213208),a=l.default.isRuntimeBrowser?function(e,t){return(0,o.useFocusEffect)((0,r.useCallback)((function(){if(l.default.isRuntimeBrowser){var n=function(n){n.code===e&&t()};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}}}),[t,e]))}:function(){},i=function(e){return a("Escape",e)}},439174:(e,t,n)=>{n.r(t),n.d(t,{useOnUIEventBus:()=>l});var r=n(202784),o=n(447325);function l(e,t){(0,r.useEffect)((function(){return o.appUIEventBus.on(e,t),function(){o.appUIEventBus.off(e,t)}}),[e,t])}},33809:(e,t,n)=>{n.r(t),n.d(t,{closeExtensionWindowIfOnboardingFinished:()=>m,useOnboardingDone:()=>w,useOnboardingRequired:()=>g});var r=n(634795),o=n(202784),l=n(213208),a=n(945821),i=n(481047),u=n(195212),s=n(932330),c=n(776553),d=n(526002),f=n(747225),p=n(472719),v=n(928144),h=n(790311);function m(){var e;l.default.isExtensionUiStandaloneWindow&&(null==(e=window)||null==e.close||e.close())}var g=function(e){var t=(0,p.useNavigation)(),n=(0,f.useAppSelector)((function(e){return e.status.boardingCompleted})),r=(0,f.useAppSelector)((function(e){return e.data.homePageCheckBoarding})),l=(0,h.useReduxReady)().isReady;(0,o.useEffect)((function(){!n&&l&&(!e||e&&!r)&&(e&&a.default.dispatch((0,u.setHomePageCheckBoarding)()),t.replace(i.RootRoutes.Onboarding,{screen:d.EOnboardingRoutes.Welcome,params:{disableAnimation:!!e}}))}),[l])};function w(){var e=(0,p.useNavigation)(),t=(0,v.useNavigationActions)(),n=t.closeWalletSelector,l=t.openRootHome,u=(0,o.useCallback)((0,r.default)((function*(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.delay,o=void 0===r?150:r,l=t.showOnBoardingLoading;l&&(a.default.dispatch((0,s.setOnBoardingLoadingBehindModal)(!0)),yield(0,c.wait)(100)),n(),yield(0,c.wait)(o),e.goBack(),null==e||e.navigate(i.RootRoutes.Main,{screen:i.MainRoutes.Tab,params:{screen:i.TabRoutes.Home}}),yield(0,c.wait)(o),m(),l&&(yield(0,c.wait)(600),a.default.dispatch((0,s.setOnBoardingLoadingBehindModal)(!1)))})),[n,e,l]);return u}},395795:(e,t,n)=>{n.r(t),n.d(t,{buildAddressDetailsUrl:()=>c,buildTransactionDetailsUrl:()=>s,default:()=>d});var r=n(202784),o=n(783112),l=n(613549),a=(n(213208),n(627009)),i=n(747225);function u(e,t){return null==e||e.impl,l.IMPL_FIL,t}function s(e,t){return e&&t?u(e,e.blockExplorerURL.transaction).replace("{transaction}",t):""}function c(e,t){return e&&t?u(e,e.blockExplorerURL.address).replace("{address}",t):""}function d(e){var t=(0,o.default)(),n=(0,i.useNetworks)();return{hasAvailable:(0,r.useMemo)((function(){var t;if(!e)return!1;var r=n.find((function(t){return t.id===e.id}));return!(null==r||null==(t=r.blockExplorerURL)||!t.address)}),[e,n]),openTransactionDetails:(0,r.useCallback)((function(n,r){var o=s(e,n);(0,a.openUrl)(o,null!=r?r:t.formatMessage({id:"transaction__transaction_details"}),{modalMode:!0})}),[t,e]),openAddressDetails:(0,r.useCallback)((function(n,r){var o=c(e,n);(0,a.openUrl)(o,null!=r?r:t.formatMessage({id:"transaction__transaction_details"}),{modalMode:!0})}),[t,e]),openBlockDetails:(0,r.useCallback)((function(n,r){var o=function(e,t){return e&&t?u(e,e.blockExplorerURL.block).replace("{block}",t):""}(e,n);(0,a.openUrl)(o,null!=r?r:t.formatMessage({id:"transaction__transaction_details"}),{modalMode:!0})}),[t,e])}}},358799:(e,t,n)=>{n.r(t),n.d(t,{useAccountIsUpdating:()=>x,useAccountTokenLoading:()=>j,useAccountTokensOnChain:()=>_,useBRC20TokenBalance:()=>I,useNFTIsLoading:()=>E,useOverviewLoading:()=>C,useOverviewPendingTasks:()=>A,useTokenBalance:()=>T,useTokenBalanceWithoutFrozen:()=>P,useTokenPositionInfo:()=>N});var r=n(256666),o=n(196234),l=n(202784),a=n(560985),i=n(206391),u=n.n(i),s=n(783112),c=n(849877),d=n(134662),f=n(746760),p=n(340576),v=n(945821),h=n(481047),m=n(490415),g=n(288471),w=n(420454),y=n(472719),b=n(759275),S=n(920453);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(0,w.useAppSelector)((function(e){return e.settings.hideRiskTokens})),l=(0,w.useAppSelector)((function(e){return e.settings.hideSmallBalance})),a=(0,w.useAppSelector)((function(e){return e.settings.putMainTokenOnTop})),i=(0,b.usePromiseResult)((function(){return v.default.serviceOverview.buildSingleChainAccountTokens({networkId:t,accountId:n,tokensSort:{native:a,name:"asc",value:"desc",price:"desc"},tokensFilter:{hideRiskTokens:r&&o,hideSmallBalance:r&&l},calculateTokensTotalValue:!0,buildTokensMapKey:!0},"raw")}),[t,n,r,l,o,a]).result;return null!=(e=null==i?void 0:i.tokens)?e:p.freezedEmptyArray}var A=function(e){var t=e.networkId,n=e.accountId,r=(0,w.useAppSelector)((function(e){return e.refresher.refreshAccountNFTTs})),o=(0,w.useAppSelector)((function(e){return e.refresher.refreshAccountDefiTs})),i=(0,w.useAppSelector)((function(e){return e.refresher.refreshAccountTokenTs})),u=(0,l.useMemo)((function(){var e=[r,i,o],t=!0,n=0;for(var l of e)"undefined"!==typeof l&&(t=!1,n=Math.max(n,l));if(!t)return n}),[r,i,o]),s=(0,w.useAppSelector)((0,l.useMemo)((function(){return function(e){var t=e.networkId,n=e.accountId;return(0,a.createSelector)([function(e){return e.overview.tasks}],(function(e){return Object.values(e||{}).filter((function(e){return e.key===`${t}___${n}`}))}))}({networkId:t,accountId:n})}),[t,n]));return(0,l.useMemo)((function(){return{tasks:s,updatedAt:u}}),[s,u])},x=function(e){var t=e.networkId,n=e.accountId,r=(0,w.useAppSelector)((0,l.useMemo)((function(){return(0,a.createSelector)((function(e){return e.refresher.overviewAccountIsUpdating}),(function(e){var t;return null!=(t=null==e?void 0:e[n])&&t}))}),[n])),o=A({networkId:t,accountId:n}).tasks;return(0,l.useMemo)((function(){return r||(null==o?void 0:o.length)>0}),[r,null==o?void 0:o.length])};function j(e,t){var n=(0,w.useAppSelector)((function(e){return e.tokens.accountTokens})),r=x({networkId:e,accountId:t});return(0,l.useMemo)((function(){var o;return(0,c.isAllNetworks)(e)?!!r:"undefined"===typeof(null==(o=n[e])?void 0:o[t])}),[e,t,n,r])}function E(e){var t=e.networkId,n=e.accountId,r=A({networkId:t,accountId:n}),o=r.tasks,a=r.updatedAt;return(0,l.useMemo)((function(){return(null==o?void 0:o.filter((function(e){return e.scanType===m.EOverviewScanTaskType.nfts})).length)>0||"undefined"===typeof a}),[o,a])}function C(e){var t,n=e.networkId,r=void 0===n?"":n,o=e.accountId,a=void 0===o?"":o,i=null!=(t=(0,w.useAppSelector)((function(e){return e.refresher.overviewHomeTokensLoading})))&&t,u=j(r,a);return(0,l.useMemo)((function(){return u||i}),[u,i])}var I=function(e){var t=e.networkId,n=e.accountId,r=e.token,o=e.fallback,a=void 0===o?{balance:"0",availableBalance:"0",transferBalance:"0"}:o,i=(0,w.useAppSelector)((function(e){return e.tokens.accountTokensBalance}));return(0,l.useMemo)((function(){var e,o,l;return null!=(e=null==i||null==(o=i[t])||null==(l=o[n])?void 0:l[(0,d.getBalanceKey)(r)])?e:a}),[t,r,n,i,a])},T=function(e){var t=e.networkId,n=e.accountId,r=e.token,a=e.fallback,i=void 0===a?"0":a,u=e.useRecycleBalance,s=e.useCustomAddressesBalance,f=(0,w.useAppSelector)((function(e){return e.tokens.accountTokensBalance})),p=(0,l.useState)(i),h=(0,o.default)(p,2),m=h[0],g=h[1];if((0,l.useEffect)((function(){s&&v.default.serviceToken.fetchBalanceDetails({networkId:t,accountId:n,useCustomAddressesBalance:s,useRecycleBalance:u}).then((function(e){var t;g(null!=(t=null==e?void 0:e.available)?t:i)}))}),[t,n,s,i,u]),(0,c.isAllNetworks)(t))throw new Error(`useTokenBalance: networkId is not valid: ${t}`);return(0,l.useMemo)((function(){var e,o,l,a;return s?null!=m?m:i:null!=(e=null==f||null==(o=f[t])||null==(l=o[n])||null==(a=l[(0,d.getBalanceKey)(r)])?void 0:a.balance)?e:i}),[t,r,n,f,i,m,s])},P=function(e){var t=e.networkId,n=e.accountId,r=e.token,o=e.fallback,a=void 0===o?"0":o,i=e.useRecycleBalance,s=e.useCustomAddressesBalance,c=T({networkId:t,accountId:n,token:r,fallback:a,useRecycleBalance:i,useCustomAddressesBalance:s}),d=(0,S.useFrozenBalance)({networkId:t,accountId:n,tokenId:(null==r?void 0:r.tokenIdOnNetwork)||"main",useRecycleBalance:i,useCustomAddressesBalance:s});return(0,l.useMemo)((function(){if(d<0)return"0";var e=new(u())(c).minus(d);return e.isGreaterThan(0)?e.toFixed():"0"}),[c,d])},N=function(e){var t=e.networkId,n=e.accountId,r=e.tokenAddress,o=e.sendAddress,a=e.coingeckoId,i=e.defaultInfo,c=(0,s.default)(),d=(0,y.useNavigation)(),p=(0,l.useCallback)((function(e){var r=e.protocol,o=e.poolCode;t&&n&&r&&o&&d.navigate(h.RootRoutes.Modal,{screen:h.ModalRoutes.Overview,params:{screen:m.OverviewModalRoutes.OverviewProtocolDetail,params:{protocol:r,networkId:t,accountId:n,poolCode:o}}})}),[d,n,t]),w=(0,l.useCallback)((function(){d.navigate(h.RootRoutes.Modal,{screen:h.ModalRoutes.Staking,params:{screen:g.StakingRoutes.StakedETHOnKele,params:{networkId:t,accountId:n}}})}),[d,t,n]),S=(0,b.usePromiseResult)((function(){return v.default.serviceOverview.buildTokenDetailPositionInfo({networkId:t,accountId:n,tokenAddress:r,sendAddress:o,coingeckoId:a})}),[t,n,r,o,a],{debounced:0,watchLoading:!0}),O=S.result,_=S.isLoading;return(0,l.useMemo)((function(){var e;if(!O)return{isLoading:_,balance:new(u())(0),detailInfo:k(k({},i),{},{tokens:[],defaultToken:void 0,ethereumNativeToken:void 0}),items:[]};var n=O.totalBalance,r=O.keleStakingBalance,o=O.items;return null!=(e=new(u())(r))&&e.gt(0)&&o.push({name:"Kelepool",symbol:"ETH",address:"",logoURI:f,type:c.formatMessage({id:"form__staking"}),balance:r,networkId:t,onPress:w}),{isLoading:_,balance:new(u())(n),detailInfo:O.detailInfo,items:o.map((function(e){return e.poolCode&&e.protocol?k(k({},e),{},{onPress:function(){return p({protocol:e.protocol,poolCode:e.poolCode})}}):e}))}}),[O,t,_,i,c,w,p])}},759275:(e,t,n)=>{n.r(t),n.d(t,{useAsyncCall:()=>v,useAsyncData:()=>m,useAsyncResult:()=>h,usePromiseResult:()=>p});var r=n(254073),o=n.n(r),l=n(634795),a=n(256666),i=n(196234),u=n(202784),s=n(472719),c=n(776553),d=n(461576);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,u.useState)(n.initResult),p=(0,i.default)(r,2),v=p[0],h=p[1],m=(0,u.useState)(),g=(0,i.default)(m,2),w=g[0],y=g[1],b=(0,d.useIsMounted)(),S=(0,s.useIsFocused)(),O=(0,u.useRef)(S);O.current=S;var k=(0,u.useRef)(e);k.current=e;var _=(0,u.useRef)(n);_.current=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({watchLoading:!1,loadingDelay:0,checkIsMounted:!0,checkIsFocused:!0},n);var A=(0,u.useRef)(!1),x=(0,u.useMemo)((function(){var e=_.current,t=e.watchLoading,n=e.loadingDelay,r=e.checkIsMounted,a=e.checkIsFocused,i=function(){t&&y(!0)},u=function(){var e=!0;return r&&!b.current&&(e=!1),a&&!O.current&&(e=!1),e},s=function(){var e=(0,l.default)((function*(e){null!=e&&e.triggerByDeps&&!O.current&&(A.current=!0);try{if(u()){i();var r=yield null==k||null==k.current?void 0:k.current();u()&&h(r)}}finally{n&&t&&(yield(0,c.wait)(n)),u()&&t&&y(!1)}}));return function(t){return e.apply(this,arguments)}}();if(_.current.debounced){var d=o()(s,_.current.debounced,{leading:!1,trailing:!0});return function(){var e=(0,l.default)((function*(e){u()&&i(),yield d(e)}));return function(t){return e.apply(this,arguments)}}()}return s}),[]);return(0,u.useEffect)((function(){x({triggerByDeps:!0})}),t),(0,u.useEffect)((function(){S&&_.current.checkIsFocused&&A.current&&(A.current=!1,x())}),[S,x]),{result:v,isLoading:w,run:x}}var v=p,h=p,m=p},790311:(e,t,n)=>{n.r(t),n.d(t,{isReduxReady:()=>c,useReduxReady:()=>d});var r=n(634795),o=n(196234),l=n(202784),a=n(402814),i=n(35116),u=n(213208),s=n(945821);function c(){return n.g.$appIsReduxReady}function d(){var e=(0,l.useState)(n.g.$appIsReduxReady),t=(0,o.default)(e,2),c=t[0],d=t[1],f=(0,l.useCallback)((function(){n.g.$appIsReduxReady&&c||(n.g.$appIsReduxReady=!0,d(!0))}),[c]);return(0,l.useEffect)((function(){c||(i.appEventBus.once(i.AppEventBusNames.StoreInitedFromPersistor,f),(0,a.waitForDataLoaded)({logName:"WaitBackgroundReady @ ThemeApp",wait:300,data:function(){var e=(0,r.default)((function*(){var e=yield s.default.getState();if(e&&e.bootstrapped){if(u.default.isExtensionUi)(yield Promise.resolve().then(n.bind(n,380845))).default.dispatch({type:a.REPLACE_WHOLE_STATE,payload:e.state,$isDispatchFromBackground:!0});return setTimeout(f,0),!0}return!1}));return function(){return e.apply(this,arguments)}}()}))}),[c,f]),{isReady:c}}},492461:(e,t,n)=>{n.r(t),n.d(t,{useShortcuts:()=>r});n(202784),n(213208),n(900527),n(481047),n(633416),n(593104),n(59984),n(933790);var r=function(){}},589193:(e,t,n)=>{n.r(t),n.d(t,{useSystemLocale:()=>i});var r=n(196234),o=n(202784),l=n(550441),a=n(929377);function i(){var e=(0,o.useState)((0,a.getDefaultLocale)()),t=(0,r.default)(e,2),n=t[0],i=t[1],u=(0,o.useCallback)((function(){i((0,a.getDefaultLocale)())}),[]);return(0,l.useAppStateChange)(u),n}},920453:(e,t,n)=>{n.r(t),n.d(t,{useAccountTokensBalance:()=>_,useCurrentFiatValue:()=>E,useCurrentNetworkTokenInfoByCoingeckoId:()=>O,useFrozenBalance:()=>x,useNativeToken:()=>S,useNativeTokenBalance:()=>A,useSimpleTokenPriceValue:()=>C,useSingleToken:()=>b,useTokenPrice:()=>j});var r=n(634795),o=n(413888),l=n.n(o),a=n(256666),i=n(196234),u=n(202784),s=n(206391),c=n(859071),d=n(447325),f=n(292147),p=n(945821),v=n(380845),h=n(674519),m=n(135463),g=n(420454),w=n(439174);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var b=function(e,t){var n=(0,u.useState)({loading:!0}),r=(0,i.default)(n,2),o=r[0],l=r[1];return(0,u.useEffect)((function(){p.default.engine.findToken({networkId:e,tokenIdOnNetwork:t}).then((function(e){l({loading:!1,token:e})})).catch((function(){l({loading:!1,token:void 0})}))}),[t,e]),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o)};function S(e){return b(null!=e?e:"","").token}function O(e){var t=(0,c.useActiveWalletAccount)(),n=t.networkId,r=t.accountId,o=(0,v.appSelector)((function(e){var t,o;return(null==(t=e.tokens.accountTokens)||null==(o=t[n])?void 0:o[r])||[]}));return(0,u.useMemo)((function(){var t=o.find((function(t){return t.coingeckoId===e}));return t?l()(t,"coingeckoId","name","symbol","logoURI"):null}),[e,o])}var k=function(e,t){return(0,h.createDeepEqualSelector)((function(n){var r;if(!e||!t)return{};var o=n.tokens.accountTokensBalance||{},l=null==o||null==(r=o[e])?void 0:r[t];return l?Object.fromEntries(Object.entries(l).map((function(e){var t,n=(0,i.default)(e,2),r=n[0],o=n[1];return[r,{balance:null!=(t=null==o?void 0:o.balance)?t:"0"}]}))):{}}),(function(e){return e}))};function _(e,t){return(0,g.useAppSelector)((0,u.useMemo)((function(){return k(e,t)}),[t,e]))}var A=function(e,t){var n=_(e,t);return(0,u.useMemo)((function(){var e;return(null==n||null==(e=n.main)?void 0:e.balance)||"0"}),[n])},x=function(e){var t=e.networkId,n=e.accountId,o=e.tokenId,l=e.useRecycleBalance,a=e.useCustomAddressesBalance,s=(0,u.useState)(0),c=(0,i.default)(s,2),v=c[0],h=c[1],g=(0,m.useShouldHideInscriptions)({accountId:n,networkId:t}),y=(0,u.useCallback)((0,r.default)((function*(){var e;(yield p.default.engine.getVaultSettings(t)).validationRequired&&(e=yield p.default.servicePassword.getPassword()),p.default.engine.getFrozenBalance({accountId:n,networkId:t,password:e,useRecycleBalance:l,useCustomAddressesBalance:a}).then(h).catch((function(e){f.default.common.error("getFrozenBalance error",e)}))})),[n,t,a,l]);return(0,w.useOnUIEventBus)(d.AppUIEventBusNames.InscriptionRecycleChanged,y),(0,u.useEffect)((function(){y()}),[y,g]),(0,u.useMemo)((function(){var e;return"number"===typeof v?v:null!=(e=null==v?void 0:v[o])?e:0}),[o,v])},j=function(e){var t,n,r=e.networkId,o=e.tokenIdOnNetwork,l=e.fallback,a=void 0===l?0:l,i=e.vsCurrency,u=o?`${r}-${null!=o?o:""}`:r,c=(0,g.useAppSelector)((function(e){return e.tokens.tokenPriceMap})),d=(0,g.useAppSelector)((function(e){return e.fiatMoney.map})),f=null==c||null==(t=c[u])?void 0:t[i],p=null==c||null==(n=c[u])?void 0:n.usd;if("undefined"===typeof f&&p){var v,h,m=new s.BigNumber(p).multipliedBy(null!=(v=null==d||null==(h=d[i])?void 0:h.value)?v:0);if(!m.isNaN())return m.toNumber()}return null!=f?f:a},E=function(){var e,t=(0,g.useAppSelector)((function(e){return e.settings.selectedFiatMoneySymbol})),n=(0,g.useAppSelector)((function(e){return e.fiatMoney.map}));return(null==n||null==(e=n[t])?void 0:e.value)||0},C=function(e){var t=e.networkId,n=e.contractAdress,r=(0,g.useAppSelector)((function(e){return e.settings.selectedFiatMoneySymbol}));return j({networkId:null!=t?t:"",tokenIdOnNetwork:null!=n?n:"",vsCurrency:r})}},152725:(e,t,n)=>{n.r(t),n.d(t,{useWallet:()=>s,useWalletSimple:()=>u});var r=n(634795),o=n(196234),l=n(202784),a=n(945821),i=n(420454),u=function(e){var t=(0,i.useAppSelector)((function(t){var n;return null==(n=t.runtime.wallets)?void 0:n.find((function(t){return t.id===e}))}));return null!=t?t:null};function s(e){var t,n=e.walletId,i=e.walletFallback,s=u(n),c=(0,l.useState)(null!=s?s:null),d=(0,o.default)(c,2),f=d[0],p=d[1];(0,l.useEffect)((function(){(0,r.default)((function*(){if(n&&!s){var e=yield a.default.engine.getWallet(n);p(e)}}))()}),[n,s]);var v=null!=(t=null!=s?s:f)?t:i;return(0,l.useMemo)((function(){return{wallet:v}}),[v])}},768496:(e,t,n)=>{n.r(t),n.d(t,{getWalletName:()=>a,useWalletName:()=>i});var r=n(202784),o=n(783112),l=n(506885);function a(e){var t=e.wallet,n=e.intl,r=null==t?void 0:t.type;return r===l.WALLET_TYPE_IMPORTED?n.formatMessage({id:"wallet__imported_accounts"}):r===l.WALLET_TYPE_WATCHING?n.formatMessage({id:"wallet__watched_accounts"}):r===l.WALLET_TYPE_EXTERNAL?n.formatMessage({id:"content__external_account"}):null==t?void 0:t.name}function i(e){var t=e.wallet,n=(0,o.default)();return(0,r.useMemo)((function(){return a({intl:n,wallet:t})}),[n,t])}},803068:(e,t,n)=>{n.r(t),n.d(t,{KitProvider:()=>r.default});n(945821);var r=n(31721)}}]);