"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[92821],{492821:(e,r,o)=>{o.r(r),o.d(r,{default:()=>I});var n=o(539144),t=o(877531),l=o(256666),u=o(470310),a=o(18861),d=o(737790),i=o(10918),s=o(202784),c=o(769707),f=o(472719),p=o(206391),m=o.n(p),x=o(783112),v=o(534159),h=o(671029),b=o(859071),j=o(92168),y=o(552322);function g(e,r){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),o.push.apply(o,n)}return o}function w(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?g(Object(o),!0).forEach((function(r){(0,l.default)(e,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):g(Object(o)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(o,r))}))}return e}const A=function(){var e,r,o=(0,x.default)(),l=(0,n.default)(),p=(0,f.useRoute)().params,g=p.networkId,A=p.accountId,O=p.protocol,k=p.poolCode,C=(0,b.useAppSelector)((function(e){var r,o;return null==(r=e.overview.overviewStats)||null==(o=r[g])?void 0:o[A]})),I=(0,s.useMemo)((function(){var e,r;return new(m())(O.protocolValue).div(null!=(e=null==C||null==(r=C.summary)?void 0:r.totalValue)?e:0).multipliedBy(100)}),[O,null==C||null==(e=C.summary)?void 0:e.totalValue]),_=(0,s.useMemo)((function(){var e;return l?(0,y.jsx)(i.default.Caption,{children:(0,y.jsx)(v.FormatCurrencyNumber,{value:0,convertValue:new(m())(null!=(e=null==O?void 0:O.protocolValue)?e:0)})}):null}),[l,O]),P=(0,s.useMemo)((function(){var e;return l||k?(0,y.jsx)(i.default.Heading,{ml:"3",children:null==O?void 0:O.protocolName}):(0,y.jsxs)(u.default,{alignItems:"center",children:[(0,y.jsx)(d.default,{token:{logoURI:null==O?void 0:O.protocolIcon},size:8}),(0,y.jsx)(i.default.Heading,{ml:"3",children:null==O?void 0:O.protocolName}),(0,y.jsx)(a.default,{mx:"2",my:"auto",w:"1",h:"1",borderRadius:"2px",bg:"text-default"}),(0,y.jsx)(i.default.Heading,{children:(0,y.jsx)(v.FormatCurrencyNumber,{value:0,convertValue:new(m())(null!=(e=null==O?void 0:O.protocolValue)?e:0)})}),I.isGreaterThan(0)?(0,y.jsx)(j.OverviewBadge,{rate:I}):null]})}),[l,O,I,k]),T=(0,c.useOpenProtocolUrl)(O);return(0,y.jsx)(t.default,{size:"2xl",height:"560px",hidePrimaryAction:!0,hideSecondaryAction:!(null!=O&&O.protocolUrl),header:P,footer:null!=O&&O.protocolUrl?void 0:null,headerDescription:_,onSecondaryActionPress:T,secondaryActionProps:{children:o.formatMessage({id:"form__visit_str"},{0:null!=(r=null==O?void 0:O.protocolName)?r:""})},scrollViewProps:{children:(0,y.jsx)(h.LazyDisplayView,{delay:0,children:(0,y.jsx)(c.OverviewDefiProtocol,w(w({},O),{},{showHeader:!1,bgColor:"surface-default",poolCode:k}))})}})};var O=o(490415),k=(0,o(324665).default)(),C=[{name:O.OverviewModalRoutes.OverviewProtocolDetail,component:A}];const I=function(){var e=(0,n.default)();return(0,y.jsx)(k.Navigator,{screenOptions:{headerShown:!1,animationEnabled:!!e},children:C.map((function(e){return(0,y.jsx)(k.Screen,{name:e.name,component:e.component},e.name)}))})}},769707:(e,r,o)=>{o.r(r),o.d(r,{OverviewDefiProtocol:()=>U,OverviewDefiProtocolWithoutMemo:()=>R,useOpenProtocolUrl:()=>D});var n=o(196234),t=o(866904),l=o(539144),u=o(612210),a=o(361301),d=o(10918),i=o(18861),s=o(225447),c=o(202784),f=o(206391),p=o.n(f),m=o(783112);var x=o(174276),v=o(534159),h=o(859071),b=o(627009),j=o(793525),y=o(470310),g=o(737790),w=o(92168),A=o(552322),O=function(e){var r=e.icon,o=e.name,n=e.rate,u=e.desc,d=e.extra,i=e.onOpenDapp,s=(0,l.default)(),f=(0,c.useMemo)((function(){return(0,A.jsx)(w.OverviewBadge,{rate:n})}),[n]);return s?(0,A.jsxs)(a.default,{px:4,py:4,alignItems:"center",bg:"surface-subdued",borderTopRadius:"12px",children:[(0,A.jsx)(y.default,{w:"full",mb:"2",children:(0,A.jsx)(y.default,{alignItems:"center",flex:"1",justifyContent:"space-around",children:(0,A.jsxs)(y.default,{flex:"1",children:[(0,A.jsx)(g.TokenIcon,{size:6,token:{logoURI:r,name:o}}),(0,A.jsx)(t.default,{onPress:i,typography:"Body1Strong",ml:"2",children:o}),n.isNaN()?null:f]})})}),(0,A.jsxs)(a.default,{w:"full",children:[u,d]})]}):(0,A.jsxs)(y.default,{px:6,py:3,alignItems:"center",bg:"surface-subdued",borderTopRadius:"12px",children:[(0,A.jsx)(y.default,{alignItems:"center",flex:"1",justifyContent:"space-around",children:(0,A.jsxs)(y.default,{flex:"1",children:[(0,A.jsx)(g.TokenIcon,{size:8,token:{logoURI:r,name:o}}),(0,A.jsx)(t.default,{typography:"Heading",ml:"2",onPress:i,children:o}),n.isNaN()?null:f]})}),(0,A.jsx)(y.default,{alignItems:"center",children:(0,A.jsxs)(a.default,{children:[u,d]})})]})},k=o(545455),C=o.n(k),I=o(256666),_=o(645130),P=o.n(_);function T(e,r){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),o.push.apply(o,n)}return o}function B(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?T(Object(o),!0).forEach((function(r){(0,I.default)(e,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):T(Object(o)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(o,r))}))}return e}var N=function(e){var r,o=e.pool,n=e.tokenKey,u=(0,l.default)();return(0,A.jsx)(a.default,{children:null==o||null==(r=o[n])?void 0:r.map((function(e,r){var o,n;return(0,A.jsxs)(y.default,{alignItems:"center",mt:r>0?"4px":0,flexWrap:"wrap",children:[(0,A.jsx)(g.TokenIcon,{token:e,size:u?5:4,mr:"1"}),(0,A.jsx)(t.default,{typography:{sm:"Body1Strong",md:"Body2Strong"},mr:"1",children:(0,A.jsx)(v.FormatCurrencyNumber,{onlyNumber:!0,value:new(p())(null!=(o=e.balanceParsed)?o:0)})}),(0,A.jsx)(t.default,{typography:{sm:"Body1Strong",md:"Body2Strong"},mx:"1",children:e.symbol}),(0,A.jsx)(d.default.Body2,{color:"text-subdued",children:(0,A.jsx)(v.FormatCurrencyNumber,{value:0,convertValue:new(p())(null!=(n=e.value)?n:0)})})]},e.tokenAddress)}))})},S=function(e){var r=e.pools,o=(0,m.default)(),n=(0,l.default)(),t=(0,c.useCallback)((function(e){return!e.visibleOn||(null==e.visibleOn?void 0:e.visibleOn({pools:r,isVertical:n}))}),[n,r]),u=(0,c.useMemo)((function(){var e,r,o=[{dataIndex:"supplyTokens",header:"form__pool_uppercase",render:function(e){return(0,A.jsx)(N,B(B({},e),{},{tokenKey:"supplyTokens"}))},visibleOn:function(e){return e.pools.some((function(e){var r;return(null==(r=e.supplyTokens)?void 0:r.length)>0}))}},{dataIndex:"borrowTokens",header:"form__borrowed_uppercase",visibleOn:function(e){return e.pools.some((function(e){var r;return(null==(r=e.borrowTokens)?void 0:r.length)>0}))},render:function(e){return(0,A.jsx)(N,B(B({},e),{},{tokenKey:"borrowTokens"}))}},{dataIndex:"rewardTokens",header:"form__rewards_uppercase",visibleOn:function(e){return e.pools.some((function(e){var r;return(null==(r=e.rewardTokens)?void 0:r.length)>0}))},render:function(e){return(0,A.jsx)(N,B(B({},e),{},{tokenKey:"rewardTokens"}))}}].filter(t),n=[{dataIndex:"lockedInfo",header:"form__unlock_time_uppercase",visibleOn:function(e){return e.pools.some((function(e){var r;return!(null==e||null==(r=e.lockedInfo)||!r.unlockTime)}))},render:function(e){var r,o=e.pool,n=null==o||null==(r=o.lockedInfo)?void 0:r.unlockTime;return"number"!==typeof n?n:(0,A.jsx)(d.default.Body2Strong,{children:P()(1e3*n).format("YYYY/MM/DD HH:mm")})}},{dataIndex:"apr",header:"form__apr_uppercase",visibleOn:function(e){return e.pools.some((function(e){return!!e.apr}))},render:function(e){var r,o=e.pool;return(0,A.jsxs)(d.default.Body2Strong,{children:[(0,A.jsx)(v.FormatCurrencyNumber,{onlyNumber:!0,value:new(p())(null!=(r=o.apr)?r:0)}),"%"]})}},{dataIndex:"poolValue",header:"form__value_uppercase",render:function(e){var r,o=e.pool;return(0,A.jsx)(d.default.Body2Strong,{children:(0,A.jsx)(v.FormatCurrencyNumber,{value:0,convertValue:new(p())(null!=(r=o.poolValue)?r:0)})})},boxProps:{textAlign:"right",justifyContent:"flex-end"}}].filter(t);return 1===(null==o?void 0:o.length)&&null!=o&&null!=(e=o[0])&&e.dataIndex&&o.push({header:"content__price",render:function(e){var o=e.pool;return(0,A.jsx)(a.default,{children:null==o?void 0:o[r].map((function(e){var r;return(0,A.jsx)(d.default.Body2Strong,{children:(0,A.jsx)(v.FormatCurrencyNumber,{value:0,convertValue:new(p())(null!=(r=e.price)?r:0)})},e.tokenAddress)}))})},dataIndex:r=o[0].dataIndex}),o.concat(n)}),[t]),s=(0,c.useMemo)((function(){return r.length}),[r]),f=(0,c.useCallback)((function(e,r){var n=r===s-1;return(0,A.jsx)(a.default,{mb:"4",pb:n?0:4,borderBottomWidth:n?0:"1px",borderBottomColor:"border-subdued",mx:"4",children:u.map((function(r,n){return r.dataIndex&&C()(e[r.dataIndex])?null:(0,A.jsxs)(a.default,{mt:0===n?0:"4",children:[(0,A.jsx)(d.default.Subheading,{mb:"4",color:"text-subdued",children:o.formatMessage({id:r.header})}),r.dataIndex&&!C()(e[r.dataIndex])?r.render({pool:e}):null]},r.header)}))},e.poolCode)}),[u,o,s]),x=(0,c.useCallback)((function(e,o){var n=o===r.length-1;return(0,A.jsx)(y.default,{alignItems:"flex-start",borderBottomColor:"border-subdued",borderBottomWidth:n?0:"1px",mx:"6",py:"4",children:u.map((function(r){var o;return(0,c.createElement)(i.default,B(B({flex:"1"},null!=(o=r.boxProps)?o:{}),{},{key:r.header}),r.render({pool:e}))}))},e.poolCode)}),[r,u]),h=(0,c.useMemo)((function(){return n?null:(0,A.jsx)(y.default,{mx:"6",py:"0",flex:"1",children:u.map((function(e){var r;return(0,A.jsx)(i.default,B(B({flex:"1"},null!=(r=e.boxProps)?r:{}),{},{children:(0,A.jsx)(d.default.Subheading,{color:"text-subdued",children:o.formatMessage({id:e.header})})}),e.header)}))})}),[u,o,n]);return u.length?(0,A.jsxs)(i.default,{children:[h,r.map((function(e,r){return(n?f:x)(e,r)}))]}):null},V=function(e){var r,o,n=e.onConfirm,t=e.protocol,l=e.onClose,c=(0,m.default)(),f=(0,h.useActiveWalletAccount)().network;return(0,A.jsx)(u.default,{visible:!0,onClose:l,contentProps:{icon:(0,A.jsxs)(i.default,{size:"52px",borderRadius:"12px",borderWidth:"1px",borderColor:"border-subdued",overflow:"hidden",position:"relative",children:[(0,A.jsx)(s.default,{size:"full",src:t.protocolIcon,alt:t.protocolName}),(0,A.jsx)(s.default,{source:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAfCAMAAACmqq93AAAAUVBMVEUAAAAMDAwLCwv6+vr+/v79/f339/f6+vr7+/vu7u7Hx8f////v7+/6+vrh4eH////7+/v8/Pze3t7+/v78/Pz5+fnf39/////39/empqb///+KJeaPAAAAGnRSTlMABgqj4KGkk4JFKfBmYiTfwXET0MKyNzAiGkjwtncAAACUSURBVDjL5dFLDsIwDEXRxPknDaXl7/0vlCAxaC2ZvjnX0yNZls1/t+K0w/IZYDqjdA2MUVs8H9Gy5JyTazxy9hec+dsRzcwgXRilJw/Tzii1V5xeJE0q9ZJOOK0GpWfSKDV0v7kLGUmjNuylr/qvpCTwq7eXur633e2FNPlIwTkXx7gY01QHHFLL0jYBpR2R/bR1b4y2G5MTsa3dAAAAAElFTkSuQmCC",w:"35px",h:"25px",position:"absolute",bottom:"0",right:"0",zIndex:"1"}),(0,A.jsx)(s.default,{src:null!=(r=null==f?void 0:f.logoURI)?r:"",w:"12px",h:"12px",position:"absolute",bottom:"2px",right:"2px",zIndex:"2"})]}),title:t.protocolName,contentElement:(0,A.jsxs)(a.default,{children:[(0,A.jsx)(d.default.Body2,{textAlign:"center",children:null!=(o=t.protocolUrl)?o:""}),(0,A.jsx)(d.default.Body2,{mt:"6",textAlign:"center",children:c.formatMessage({id:"content__you_are_about_to_visit_this_site_in_a_dapp_browser_do_you_want_to_continue"})})]})},footerButtonProps:{primaryActionTranslationId:"action__visit",onPrimaryActionPress:function(e){var r=e.onClose;null==r||r(),null==n||n()}}})},D=function(e){var r=(0,h.useNavigation)(),o=(0,l.default)(),n=(0,c.useCallback)((function(){var o;(0,b.openDapp)(null!=(o=null==e?void 0:e.protocolUrl)?o:""),r.canGoBack()&&r.goBack()}),[null==e?void 0:e.protocolUrl,r]);return(0,c.useCallback)((function(){if(null!=e&&e.protocolUrl)return o?void(0,j.showDialog)((0,A.jsx)(V,{protocol:e,onConfirm:n})):n()}),[e,o,n])},M=function(e){var r=e.poolType,o=(0,l.default)();return(0,A.jsx)(t.default,{ml:o?4:6,my:"4",children:(0,A.jsx)(i.default,{px:"6px",bg:"surface-highlight-default",borderRadius:"6px",children:(0,A.jsx)(d.default.Body2Strong,{color:"text-default",numberOfLines:1,children:r})})})},R=function(e){var r,o=e._id,u=e.pools,d=e.protocolValue,s=e.protocolName,f=e.protocolIcon,b=e.claimableValue,j=e.showHeader,y=void 0===j||j,g=e.bgColor,w=e.poolCode,k=(0,m.default)(),C=(0,l.default)(),I=(0,h.useActiveWalletAccount)(),_=I.networkId,P=I.accountId,T=(0,h.useAppSelector)((function(e){var r,o;return null==(r=e.overview.overviewStats)||null==(o=r[_])?void 0:o[P]})),B=D(e),N=(0,c.useMemo)((function(){var e,r;return new(p())(d).div(null!=(e=null==T||null==(r=T.summary)?void 0:r.totalValue)?e:0).multipliedBy(100)}),[d,null==T||null==(r=T.summary)?void 0:r.totalValue]),V=(0,c.useMemo)((function(){return w?u.filter((function(e){return(0,n.default)(e,2)[1].filter((function(e){return e.poolCode===w})).length>0})).map((function(e){var r=(0,n.default)(e,2);return[r[0],r[1].filter((function(e){return e.poolCode===w}))]})).map((function(e,r){var t,l=(0,n.default)(e,2),u=l[0],d=l[1];return(0,A.jsxs)(a.default,{borderTopWidth:0===r?0:"1px",borderTopColor:"divider",children:[(0,A.jsx)(M,{poolType:u,poolName:null==d||null==(t=d[0])?void 0:t.poolName}),(0,A.jsx)(S,{networkId:o.networkId,poolType:u,pools:d})]},u)})):(0,A.jsx)(i.default,{bg:g,children:u.map((function(e,r){var t,l=(0,n.default)(e,2),u=l[0],d=l[1];return(0,A.jsxs)(a.default,{borderTopWidth:0===r?0:"1px",borderTopColor:"divider",children:[(0,A.jsx)(M,{poolType:u,poolName:null==d||null==(t=d[0])?void 0:t.poolName}),(0,A.jsx)(S,{networkId:o.networkId,poolType:u,pools:d})]},u)}))})}),[g,u,o,w]);return(0,A.jsx)(x.ErrorBoundary,{children:(0,A.jsxs)(i.default,{borderRadius:"12px",bg:"surface-default",borderWidth:"1px",borderColor:"border-subdued",overflow:"hidden",mb:"6",children:[y?(0,A.jsx)(O,{name:s,onOpenDapp:B,rate:N,desc:(0,A.jsx)(t.default,{typography:{md:"Heading",sm:"Body1Strong"},textAlign:C?"left":"right",children:(0,A.jsx)(v.FormatCurrencyNumber,{value:0,convertValue:new(p())(d)})}),extra:+b>0?(0,A.jsx)(t.default,{color:"text-subdued",typography:{md:"Body2Strong",sm:"CaptionStrong"},textAlign:C?"left":"right",children:k.formatMessage({id:"form__claimable_str"},{0:(0,A.jsx)(v.FormatCurrencyNumber,{value:0,convertValue:new(p())(b)})})}):void 0,icon:f}):null,V]})})},U=(0,c.memo)(R)}}]);