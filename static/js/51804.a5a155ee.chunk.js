"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[51804],{785434:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var a=n(196234),r=n(472719),o=n(202784),i=n(46486),s=n(824931),l=n(311631),u=n(979836),d=n(951535),c=n(566363),f=n(150359);function p(e){var t=(0,l.useSafeAreaFrame)(),n=(0,l.useSafeAreaInsets)(),i=o.useContext(f.default),p=o.useContext(c.default),g=e.focused,h=e.modal,x=void 0!==h&&h,b=e.header,y=e.headerShown,v=void 0===y||y,_=e.headerTransparent,j=e.headerStatusBarHeight,w=void 0===j?i?0:n.top:j,O=e.navigation,C=e.route,M=e.children,D=e.style,P=o.useState((function(){return(0,d.default)(t,x,w)})),k=(0,a.default)(P,2),A=k[0],S=k[1];return o.createElement(u.default,{accessibilityElementsHidden:!g,importantForAccessibility:g?"auto":"no-hide-descendants",style:[m.container,D]},o.createElement(s.default,{style:m.content},o.createElement(f.default.Provider,{value:i||!1!==v},o.createElement(c.default.Provider,{value:v?A:null!=p?p:0},M))),v?o.createElement(r.NavigationContext.Provider,{value:O},o.createElement(r.NavigationRouteContext.Provider,{value:C},o.createElement(s.default,{onLayout:function(e){var t=e.nativeEvent.layout.height;S(t)},style:_?m.absolute:null},b))):null)}var m=i.default.create({container:{flex:1,flexDirection:"column-reverse"},content:{flex:1},absolute:{position:"absolute",top:0,left:0,right:0}})},671672:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var a=n(256666),r=n(459740),o=n(472719),i=n(202784),s=n(815146),l=n(785434),u=n(758880),d=n(236004),c=n(422744),f=n(941749),p=n(46486),m=n(824931);function g(e){var t=e.state,n=e.descriptors;return i.createElement(s.default,null,i.createElement(m.default,{style:h.container},t.routes.map((function(e,a){var r,o=t.index===a,s=0!==a,g=null===(r=t.routes[a-1])||void 0===r?void 0:r.key,x=g?n[g]:void 0,b=n[e.key],y=b.options,v=b.navigation,_=b.render,j=y.header,w=y.headerShown,O=y.headerTintColor,C=y.headerBackImageSource,M=y.headerLeft,D=y.headerRight,P=y.headerTitle,k=y.headerTitleAlign,A=y.headerTitleStyle,S=y.headerStyle,E=y.headerShadowVisible,R=y.headerTransparent,T=y.contentStyle,B=y.headerBackTitle;return i.createElement(l.default,{key:e.key,focused:o,route:e,navigation:v,headerShown:w,headerTransparent:R,header:void 0!==j?j({back:x?{title:(0,u.default)(x.options,x.route.name)}:void 0,options:y,route:e,navigation:v}):i.createElement(d.default,{title:(0,u.default)(y,e.name),headerTintColor:O,headerLeft:"function"===typeof M?function(e){var t=e.tintColor;return M({tintColor:t,canGoBack:s,label:B})}:void 0===M&&s?function(e){var t=e.tintColor;return i.createElement(c.default,{tintColor:t,backImage:void 0!==C?function(){return i.createElement(f.default,{source:C,style:[h.backImage,{tintColor:t}]})}:void 0,onPress:v.goBack,canGoBack:s})}:M,headerRight:"function"===typeof D?function(e){var t=e.tintColor;return D({tintColor:t})}:D,headerTitle:"function"===typeof P?function(e){var t=e.children,n=e.tintColor;return P({children:t,tintColor:n})}:P,headerTitleAlign:k,headerTitleStyle:A,headerStyle:[R?{position:"absolute",backgroundColor:"transparent"}:null,S,!1===E?{shadowOpacity:0,borderBottomWidth:0}:null]}),style:[p.default.absoluteFill,{display:o?"flex":"none"}]},i.createElement(m.default,{style:[h.contentContainer,T]},_()))}))))}var h=p.default.create({container:{flex:1},contentContainer:{flex:1},backImage:{height:24,width:24,margin:3,resizeMode:"contain"}}),x=["initialRouteName","children","screenListeners","screenOptions"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},v.apply(this,arguments)}const _=(0,o.createNavigatorFactory)((function(e){var t=e.initialRouteName,n=e.children,a=e.screenListeners,s=e.screenOptions,l=(0,r.default)(e,x),u=(0,o.useNavigationBuilder)(o.StackRouter,{initialRouteName:t,children:n,screenListeners:a,screenOptions:s}),d=u.state,c=u.descriptors,f=u.navigation;return i.useEffect((function(){var e;return null===f||void 0===f||null===(e=f.addListener)||void 0===e?void 0:e.call(f,"tabPress",(function(e){var t=f.isFocused();requestAnimationFrame((function(){d.index>0&&t&&!e.defaultPrevented&&f.dispatch(y(y({},o.StackActions.popToTop()),{},{target:d.key}))}))}))}),[f,d.index,d.key]),i.createElement(g,v({},l,{state:d,navigation:f,descriptors:c}))}))},232215:(e,t,n)=>{n.r(t),n.d(t,{Hidden:()=>m,default:()=>g});var a=n(196234),r=n(459740),o=n(202784),i=n(788692),s=n(153288),l=n(13334),u=n(360446);var d=n(175151),c=n(769668),f=n(190769),p=["children"];function m(e){var t=e.children,n=(0,r.default)(e,p),o=(0,i.usePropsResolution)("Hidden",n,{},{ignoreProps:["only","platform"]}),m=o.from,g=o.till,h=o.only,x=o.platform,b=o.colorMode,y=(0,s.useTheme)().breakpoints,v=(0,c.useColorMode)(),_=function(e){var t,n=null===(t=(0,l.default)())||void 0===t?void 0:t.width,a=(0,s.useTheme)();if((0,u.hasValidBreakpointFormat)(e,a.breakpoints)){var r=(0,u.getClosestBreakpoint)(a.breakpoints,n);return(0,u.findLastValidBreakpoint)(e,a.breakpoints,r)}return e}(Object.keys(y).reduce((function(e,t){return e[t]=t,e}),{})),j=(0,d.useToken)("breakpoints",[_]),w=(0,a.default)(j,1)[0],O=(0,d.useToken)("breakpoints",[m]),C=(0,a.default)(O,1)[0],M=(0,d.useToken)("breakpoints",[g]),D=(0,a.default)(M,1)[0];return m||g||h||b||x?m&&g&&w>=C&&w<D||m&&!g&&w>=C||g&&!m&&w<D||Array.isArray(h)&&h.includes(_)||h===_||Array.isArray(x)&&x.includes(f.default.OS)||x===f.default.OS||b===v.colorMode?null:t:null}const g=(0,o.memo)(m)},474607:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});var a=n(256666),r=n(459740),o=n(887371),i=n(580753),s=n(545754),l=n(411987),u=n(695058),d=n(202784),c=n(213980),f=n.n(c),p=n(489094);function m(e,t){if(!(t<0)){var n=t;return function e(t){for(var a,r,o=d.Children.toArray(t.props.children),i=o.length,s=0;!r&&s<i;)"string"!==typeof(a=o[s])?r=e(a):n-a.length<0?r=a.charAt(n):n-=a.length,s+=1;return r}(e)}}var g=n(46486),h=n(552322),x=g.default.create({hidden:{color:"transparent"}});var b=["children","delayMap","fixed","initialDelay","maxDelay","minDelay","onTyped","onTypingEnd","typing"];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var j=function(e){(0,s.default)(n,e);var t=_(n);function n(e){var n;return(n=t.call(this,e)).state={direction:e.typing,visibleChars:0},n.typeNextChar=n.typeNextChar.bind((0,i.default)(n)),n}n.getDerivedStateFromProps=function(e,t){var n=e.typing,a=t.direction,r=t.visibleChars;return n!==a?{direction:n,visibleChars:r+n}:null};var a=n.prototype;return a.componentDidMount=function(){var e=this.props.initialDelay;this.startTyping(e)},a.componentDidUpdate=function(e,t){var n=this.props,a=n.children,r=n.typing;if(this.clearTimeout(),0!==r)if(a===e.children){var o=this.props,i=o.delayMap,s=o.onTyped,l=o.onTypingEnd,u=this.state.visibleChars,d=m(this,t.visibleChars),c=m(this,u);if(d&&s(d,u),c){var f=this.getRandomTimeout();i&&i.forEach((function(e){var t=e.at,n=e.delay;(t===u||d.match(t))&&(f+=n)})),this.startTyping(f)}c||l()}else this.reset()},a.componentWillUnmount=function(){this.clearTimeout()},a.getRandomTimeout=function(){var e=this.props,t=e.maxDelay,n=e.minDelay;return Math.round(Math.random()*(t-n)+n)},a.clearTimeout=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)})),a.reset=function(){var e=this,t=this.props.initialDelay;this.setState({visibleChars:0},(function(){return e.startTyping(t)}))},a.startTyping=function(e){this.timeoutId=setTimeout(this.typeNextChar,e)},a.typeNextChar=function(){this.setState((function(e){var t=e.direction;return{visibleChars:e.visibleChars+t}}))},a.render=function(){var e=this.props,t=e.children,n=(e.delayMap,e.fixed),a=(e.initialDelay,e.maxDelay,e.minDelay,e.onTyped,e.onTypingEnd,e.typing,(0,r.default)(e,b)),o=this.state.visibleChars;return function(e,t,n,a){var r,o,i=0;function s(e){var t=e.props.children;return d.cloneElement(e,{},d.Children.map(t,l))}function l(e){if("string"!==typeof e)return s(e);var n=e.length+i,a=null;if(n>o&&(!r||i<r)){var l=o-i,u=r?r-i:n,d=e.substring(0,l),c=e.substring(u,n);a=t?[d,(0,h.jsx)(p.default,{style:x.hidden,children:e.substring(l,u)}),c]:[d,c]}return i=n,a||e}return n>a?(r=n,o=a):(r=a,o=n||0),s(e)}((0,h.jsx)(p.default,v(v({},a),{},{children:t})),n,o)},(0,o.default)(n)}(d.Component);j.propTypes={children:f().node.isRequired,delayMap:f().arrayOf(f().shape({at:f().oneOfType([f().string,f().number,f().instanceOf(RegExp)]),delay:f().number})),fixed:f().bool,initialDelay:f().number,maxDelay:f().number,minDelay:f().number,onTyped:f().func,onTypingEnd:f().func,style:f().oneOfType([f().object,f().array]),typing:f().oneOf([-1,0,1])},j.defaultProps={fixed:!1,initialDelay:200,maxDelay:100,minDelay:20,onTyped:function(){},onTypingEnd:function(){},style:{},typing:0}},823621:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var a=n(256666),r=n(297263),o=n(539144),i=n(459740),s=n(202784),l=n(46486),u=n(824931),d=n(311631),c=n(18861),f=n(433996),p=n(493877),m=n(322987),g=n(552322);const h=function(e){var t=e.navigation,n=void 0===t?(0,p.getAppNavigation)():t,a=(0,o.default)();return(0,g.jsx)(f.default,{type:"plain",size:"lg",name:a?"ArrowLeftOutline":"ArrowSmallLeftOutline",onPress:function(){null!=n&&n.canGoBack()?null==n||n.goBack():m.navigationShortcuts.navigateToHome()},circle:!0})};var x=n(196234),b=n(783112),y=n(866904);const v=function(e){var t=e.title,n=e.subtitle,a=e.i18nTitle,r=e.i18nSubtitle,i=e.inCenter,u=void 0===i||i,d=e.children,f=(0,o.default)(),p=(0,b.default)(),m=(0,s.useMemo)((function(){return[a?p.formatMessage({id:a}):t,r?p.formatMessage({id:r}):n]}),[a,p,t,r,n]),h=(0,x.default)(m,2),v=h[0],_=h[1],j=(0,s.useMemo)((function(){return(0,g.jsxs)(c.default,{flex:1,justifyContent:"center",alignItems:u?"center":"flex-start",style:l.default.absoluteFill,zIndex:-1,children:[d,!!v&&(0,g.jsx)(y.default,{typography:u?"Heading":"PageHeading",children:v}),!!_&&(0,g.jsx)(y.default,{typography:"Caption",color:"text-subdued",children:_})]})}),[d,u,_,v]),w=(0,s.useMemo)((function(){return(0,g.jsxs)(c.default,{flex:1,flexDirection:"row",alignItems:"baseline",children:[d,!!v&&(0,g.jsx)(y.default,{typography:"Heading",children:v}),!!_&&(0,g.jsx)(y.default,{typography:"Body2",ml:"12px",color:"text-subdued",children:_})]})}),[d,_,v]);return f?j:w};var _=["headerLeft","headerRight","headerTitle","safeTop","alwaysShowBackButton","style","navigation","options","route","back"];function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=l.default.create({content:{flex:1,flexDirection:"row",alignItems:"center"},left:{justifyContent:"center",alignItems:"flex-start"},right:{justifyContent:"center",alignItems:"flex-end"},expand:{flexGrow:1,flexBasis:0}});const C=function(e){var t=e.headerLeft,n=e.headerRight,a=e.headerTitle,f=e.safeTop,p=e.alwaysShowBackButton,m=e.style,x=e.navigation,b=e.options,y=void 0===b?{}:b,j=e.route,C=e.back,M=(0,i.default)(e,_),D=(0,d.useSafeAreaInsets)(),P=(0,o.default)(),k=(0,r.default)("background-default"),A=P?56:64,S=Boolean(C||p||t),E=(0,s.useMemo)((function(){if(a)return(0,g.jsx)(v,{inCenter:S,children:a()});if("function"===typeof y.headerTitle)return(0,g.jsx)(v,{inCenter:S,children:y.headerTitle()});var e=y,t=w({title:e.title,i18nTitle:e.i18nTitle,subtitle:e.subtitle,i18nSubtitle:e.i18nSubtitle},M);return(0,g.jsx)(v,w({inCenter:S},t))}),[S,a,M,y]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u.default,{pointerEvents:"box-none",style:[l.default.absoluteFill,{zIndex:0,backgroundColor:k}]}),(0,g.jsx)(u.default,{testID:`App-General-Nav-Header--${(null==j?void 0:j.name)||""}`,pointerEvents:"box-none",style:[{height:A,marginTop:null!=f?f:D.top,backgroundColor:k},m],children:(0,g.jsxs)(u.default,{pointerEvents:"box-none",style:[O.content,{marginHorizontal:P?16:32}],children:[(0,g.jsxs)(u.default,{pointerEvents:"box-none",style:[O.left,{marginStart:D.left}],children:[(!!C||p)&&(0,g.jsx)(c.default,{ml:"-6px",mr:"8px",children:(0,g.jsx)(h,{navigation:x})}),t?t():null==y.headerLeft?void 0:y.headerLeft()]}),E,(0,g.jsx)(u.default,{pointerEvents:"box-none",style:[O.right,O.expand,{marginEnd:D.right}],children:n?n():null==y.headerRight?void 0:y.headerRight()})]})})]})}},766788:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var a=n(196234),r=n(539144),o=n(297263),i=n(202784),s=n(785358),l=n(489094),u=n(474607),d=n(552322),c=function(){var e=(0,i.useRef)(new s.default.Value(0)).current,t=(0,o.default)("interactive-default"),n=(0,r.default)();return(0,i.useEffect)((function(){s.default.loop(s.default.sequence([s.default.timing(e,{toValue:1,duration:300,useNativeDriver:!0}),s.default.timing(e,{toValue:0,duration:300,useNativeDriver:!0})])).start()}),[e]),(0,d.jsx)(s.default.View,{style:{width:32,height:n?48:56,borderBottomWidth:4,borderBottomColor:t,opacity:e}})},f=function(e){var t=e.children,n=e.onTypingEnd,l=e.isPending,f=void 0===l||l,p=e.isFadeOut,m=(0,i.useRef)(new s.default.Value(1)).current,g=(0,r.default)();(0,i.useEffect)((function(){if(p){var e=s.default.timing(m,{toValue:.3,duration:300,useNativeDriver:!1});setTimeout((function(){e.start()}),150)}}),[p,m]);var h=(0,i.useState)(!1),x=(0,a.default)(h,2),b=x[0],y=x[1];(0,i.useEffect)((function(){f||setTimeout((function(){y(!0)}),650)}),[f]);var v=(0,o.default)("text-default"),_=(0,i.useMemo)((function(){return t}),[]);return(0,d.jsx)(s.default.View,{style:{minHeight:g?48:56,opacity:m},children:b?(0,d.jsx)(u.default,{typing:1,style:{color:v,fontSize:g?42:48,lineHeight:g?48:56,fontWeight:"bold"},initialDelay:0,minDelay:12,maxDelay:12,onTypingEnd:n,children:_}):(0,d.jsx)(c,{})})};f.Highlight=function(e){var t=e.children,n=(0,o.default)("interactive-default");return(0,d.jsx)(l.default,{style:{color:n},children:t})},f.NormalText=function(e){var t=e.children,n=(0,o.default)("text-default");return(0,d.jsx)(l.default,{style:{color:n},children:t})};const p=f},364519:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(481047),r=n(493877);function o(){var e=(0,r.default)();return{requestBackupPassword:function(t,n,r,o){e.navigate(a.RootRoutes.Modal,{screen:a.ModalRoutes.ImportBackupPassword,params:{screen:a.ImportBackupPasswordModalRoutes.ImportBackupPassword,params:{withPassword:t,onSuccess:n,onError:r,onCancel:o}}})}}}},510233:(e,t,n)=>{n.r(t),n.d(t,{DotGroup:()=>g,MnemonicStatus:()=>h,default:()=>x});var a=n(470310),r=n(435581),o=n(18861),i=n(10918),s=n(202784),l=n(783112),u=n(434340),d=n(561220),c=n(795116),f=n(196234),p=n(552322);const m=(0,s.memo)((function(e){var t=e.defaultLight,n=e.disabled,a=e.defaultBgColor,r=e.onClickSpace,i=e.size,l=void 0===i?5:i,u=e.lightColor,m=void 0===u?"text-success":u,g=(0,s.useState)((function(){return!!t})),h=(0,f.default)(g,2),x=h[0],b=h[1];return(0,s.useEffect)((function(){b(!!t)}),[t]),(0,p.jsx)(d.default,{size:4*l+"px",borderWidth:"1px",borderColor:"border-default",disabled:n,onPress:function(){b((function(e){return!e})),r&&setTimeout((function(){r(!x)}),0)},children:function(e){var t=e.isHovered,n=e.isPressed;return(0,p.jsx)(c.default,{flex:1,bgColor:n?"surface-pressed":t?"surface-hovered":null!=a?a:"background-default",children:x?(0,p.jsx)(o.default,{size:Math.floor(l/2)>10?4*Math.floor(l/2)+"px":Math.floor(l/2),bgColor:m,borderRadius:"9999px"}):null})}})}));var g=function(e){var t=e.showDigitCode,n=e.size,a=void 0===n?5:n,r=e.groupIndex,s=void 0===r?0:r,l=e.groupDotCount,u=void 0===l?4:l,d=e.lightsData,c=void 0===d?[]:d,f=e.digitCodeLimit,g=void 0===f?11:f,h=e.disabled,x=void 0!==h&&h,b=e.defaultBgColor,y=e.onChange;return(0,p.jsx)(p.Fragment,{children:c.map((function(e,n){var r=n+s*u;return(0,p.jsxs)(o.default,{flexDirection:"column",children:[t?(0,p.jsx)(o.default,{style:{width:4*a,height:40},flexDirection:"column",justifyContent:"center",alignItems:"center",mb:3,children:(0,p.jsx)(o.default,{flexDirection:"row",justifyContent:"flex-start",alignItems:"center",style:{width:40,height:4*a,transform:[{rotate:"-90deg"}]},children:(0,p.jsx)(i.default.Body2Mono,{lineHeight:"18px",textAlign:"center",color:"text-subdued",children:2**(g-r)})})}):null,(0,p.jsx)(m,{defaultBgColor:b,disabled:x,size:a,defaultLight:e,onClickSpace:function(e){y&&y(r,e)}})]})}))})},h=function(e){var t=e.showResult,n=e.status,a=e.word,d=(0,l.default)(),c=(0,s.useMemo)((function(){var e={titleColor:"text-default"};switch(n){case u.KeyTagMnemonicStatus.VERIF:e.statusTitle=t?null==a?void 0:a.toUpperCase():"";break;case u.KeyTagMnemonicStatus.INCORRECT:e.statusTitle=d.formatMessage({id:"form__incorrect_dotmap"}).toUpperCase(),e.titleColor="text-critical";break;case u.KeyTagMnemonicStatus.EMPTY:e.statusTitle=d.formatMessage({id:"form__empty"}).toUpperCase(),e.titleColor="text-warning";break;case u.KeyTagMnemonicStatus.UNVERIF:e.statusTitle=t?"-":""}return e}),[d,t,n,a]),f=c.statusTitle,m=c.titleColor;return(0,p.jsxs)(o.default,{flexDirection:"row",children:[n===u.KeyTagMnemonicStatus.INCORRECT?(0,p.jsx)(r.default,{color:m,name:"ExclamationCircleSolid"}):null,(0,p.jsx)(i.default.Body1Mono,{color:m,children:f})]})};const x=(0,s.memo)((function(e){var t=e.space,n=void 0===t?2:t,l=e.size,d=void 0===l?5:l,c=e.groupDotCount,f=void 0===c?4:c,m=e.groupCount,x=void 0===m?3:m,b=e.mnemonicWordData,y=e.showWordStatus,v=void 0!==y&&y,_=e.showDigitCode,j=void 0!==_&&_,w=e.showIcon,O=void 0!==w&&w,C=e.disabled,M=void 0!==C&&C,D=e.showResult,P=void 0===D||D,k=e.onChange,A=(0,s.useMemo)((function(){for(var e=[],t=0;t<x;){var n;e.push(null==b||null==(n=b.dotMapData)?void 0:n.slice(t*f,f*(t+1))),t+=1}return e}),[x,f,b]);return(0,p.jsxs)(o.default,{flexDirection:"column",children:[v?(0,p.jsxs)(o.default,{flexDirection:"row",justifyContent:"space-between",my:1,children:[(0,p.jsx)(i.default.Body1Mono,{color:"text-subdued",children:null==b?void 0:b.index}),(0,p.jsx)(h,{showResult:P,status:null==b?void 0:b.status,word:null==b?void 0:b.mnemonicWord})]}):null,(0,p.jsxs)(o.default,{flexDirection:"row",children:[v?null:(0,p.jsxs)(o.default,{flexDirection:"column",justifyContent:"flex-end",children:[O?(0,p.jsx)(o.default,{mb:3,children:(0,p.jsx)(r.default,{size:32,name:"LogoCircularIllus",color:"icon-disabled"})}):null,(0,p.jsx)(o.default,{w:"32px",h:d,flexDirection:"row",justifyContent:"flex-end",alignItems:"flex-start",children:(0,p.jsx)(i.default.Body1Mono,{lineHeight:"18px",color:"text-subdued",marginRight:"8px",children:null==b?void 0:b.index})})]}),(0,p.jsx)(a.default,{space:n,children:A.map((function(e,t){return(0,p.jsx)(g,{defaultBgColor:(null==b?void 0:b.status)===u.KeyTagMnemonicStatus.FILL?"background-hovered":"background-default",disabled:M,size:d,groupIndex:t,groupDotCount:f,showDigitCode:j,lightsData:e,onChange:k})}))})]})]})}))},303471:(e,t,n)=>{n.r(t),n.d(t,{KeyTagMatrix:()=>f,KeyTagMatrixTopTitle:()=>c});var a=n(968079),r=n(18861),o=n(10918),i=n(202784),s=n(783112),l=n(434340),u=n(510233),d=n(552322),c=function(e){var t=e.keyTagData,n=e.startIndex,a=(0,s.default)(),l=(0,i.useMemo)((function(){return n&&n>1?a.formatMessage({id:"form__back"}):a.formatMessage({id:"form__front"})}),[a,n]),u=(0,i.useMemo)((function(){var e;return`#${null!=n?n:1}-#${(null!=(e=null==t?void 0:t.length)?e:0)+(null!=n?n:1)-1}`}),[n,t]);return(0,d.jsxs)(r.default,{mt:4,mb:4,w:"full",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[(0,d.jsx)(o.default.Heading,{children:l}),(0,d.jsx)(o.default.Body2,{children:u})]})},f=function(e){var t=e.startIndex,n=e.keyTagData,o=(0,i.useMemo)((function(){if(null!=n&&n.length){var e=(0,a.default)(n);if(e.length<12)for(var r=0;r<12-n.length;r+=1)e.push({index:(null!=t?t:0)+n.length+r,status:l.KeyTagMnemonicStatus.FILL,dotMapData:new Array(16).fill(!1)});return e}return[]}),[n,t]);return(0,d.jsxs)(r.default,{flex:"1",justifyContent:"center",alignItems:"center",children:[(0,d.jsx)(c,{startIndex:t,keyTagData:n}),(0,d.jsx)(r.default,{borderColor:"surface-default",borderWidth:"8px",borderRadius:"16px",bgColor:"surface-subdued",alignItems:"center",pt:4,w:"332px",h:"343px",children:(0,d.jsx)(r.default,{children:o?o.map((function(e,t){return(0,d.jsx)(u.default,{showDigitCode:0===t,showIcon:0===t,mnemonicWordData:e,disabled:!0})})):null})})]})}},827570:(e,t,n)=>{var a;n.r(t),n.d(t,{KeyTagRoutes:()=>a}),function(e){e.StartedKeytag="StartedKeytag",e.ImportKeytag="ImportKeytag",e.ShowDotMap="ShowDotMap",e.IntroduceKeyTag="IntroduceKeyTag",e.KeyTagBackUpWallet="KeyTagBackUpWallet",e.KeyTagVerifyPassword="KeyTagVerifyPassword",e.KeyTagAttention="KeyTagAttention",e.EnterPhrase="EnterPhrase"}(a||(a={}))},419016:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var a=n(669083),r=n(634795),o=n(202784),i=n(472719),s=n(783112),l=n(945821),u=n(911968),d=n(749216),c=n(827570),f=n(552322);const p=function(){var e=(0,i.useRoute)(),t=(0,i.useNavigation)(),n=e.params,p=n.walletId,m=n.password,g=n.wallet,h=n.navigateMode,x=(0,s.default)(),b=(0,o.useCallback)((0,r.default)((function*(){var e=yield l.default.engine.revealHDWalletMnemonic(p,m);null!=e&&e.length?t.navigate(c.KeyTagRoutes.ShowDotMap,{mnemonic:e,wallet:g}):a.default.show({title:"mnemonic parse error"})})),[p,m,t,g]),y=(0,o.useMemo)((function(){return(0,f.jsx)(u.Attentions,{pressTitle:x.formatMessage({id:"action__show_dotmap_for_keytag"}),onPress:b,navigateMode:h})}),[x,h,b]);return h?(0,f.jsx)(d.default,{children:y}):y}},272556:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var a=n(877531),r=n(795116),o=n(18861),i=n(10918),s=n(321668),l=n(539144),u=n(202784),d=n(472719),c=n(783112),f=n(749888),p=n(213208),m=n(559656),g=n(749216),h=n(303471),x=n(740962),b=n(552322),y=function(e){var t=e.onDone,n=e.message,a=(0,l.default)();return(0,b.jsx)(s.default,{mt:a?2:6,mr:6,type:"primary",size:"sm",onPress:t,children:null!=n?n:"Done"})},v=function(e){var t=e.mnemonic,n=e.wallet,a=(0,c.default)(),s=(0,l.default)(),d=(0,u.useMemo)((function(){return t.split(" ").length}),[t]);return(0,b.jsxs)(r.default,{mt:s?2:6,flexDirection:"row",alignItems:"center",children:[n?(0,b.jsx)(m.WalletAvatarPro,{size:"sm",wallet:n,devicesStatus:void 0}):null,(0,b.jsxs)(o.default,{ml:n?3:0,flexDirection:"column",children:[n?(0,b.jsx)(i.default.Body1Strong,{children:n.name}):null,(0,b.jsx)(i.default.Caption,{children:`${a.formatMessage({id:"form__str_words"},{0:d})}`})]})]})};const _=function(){var e=(0,d.useRoute)().params,t=e.mnemonic,n=e.wallet,r=(0,c.default)(),i=(0,x.mnemonicWordsToKeyTagMnemonic)(t),m=(0,d.useNavigation)(),_=(0,l.default)(),j=(0,f.default)(),w=(0,u.useMemo)((function(){return(0,b.jsx)(y,{message:r.formatMessage({id:"action__done"}),onDone:function(){j()}})}),[j,r]),O=(0,u.useMemo)((function(){return(0,b.jsx)(v,{mnemonic:t,wallet:n})}),[t,n]),C=(0,u.useMemo)((function(){return p.default.isNativeAndroid?null:(0,b.jsx)(s.default,{ml:_?0:2,mt:_?2:6,type:"plain",leftIconName:"ChevronLeftOutline",onPress:function(){null!=m&&null!=m.canGoBack&&m.canGoBack()&&m.goBack()}})}),[_,m]);return m.setOptions({headerShown:!0,headerTitleAlign:"center",headerLeft:function(){return C},headerRight:function(){return w},headerTitle:function(){return O},headerShadowVisible:!1}),(0,b.jsx)(a.default,{hidePrimaryAction:!0,hideSecondaryAction:!0,fullMobile:!0,headerShown:!1,disableTopRadius:!0,scrollViewProps:{children:(0,b.jsx)(g.default,{backButton:!1,children:(0,b.jsx)(o.default,{flex:"1",children:(0,b.jsx)(o.default,{mt:p.default.isNativeIOS?-12:0,flexDirection:_?"column":"row",children:null!=i&&i.length&&i.length>12?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.KeyTagMatrix,{keyTagData:i.slice(0,12)}),(0,b.jsx)(h.KeyTagMatrix,{keyTagData:i.slice(12),startIndex:13})]}):(0,b.jsx)(h.KeyTagMatrix,{keyTagData:i})})})})}})}},855949:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var a=n(877531),r=n(202784),o=n(472719),i=n(268883),s=n(749216),l=n(827570),u=n(552322);const d=function(){var e=(0,o.useRoute)(),t=(0,o.useNavigation)(),n=e.params,d=n.walletId,c=n.wallet,f=n.navigateMode,p=(0,r.useMemo)((function(){return(0,u.jsx)(a.default,{footer:null,hideBackButton:!!f,headerShown:!f,children:(0,u.jsx)(i.default,{walletId:d,field:i.ValidationFields.Secret,children:function(e){t.replace(l.KeyTagRoutes.KeyTagAttention,{walletId:d,password:e,wallet:c,navigateMode:f})}})})}),[f,t,c,d]);return f?(0,u.jsx)(s.default,{children:p}):p}},434340:(e,t,n)=>{var a;n.r(t),n.d(t,{KeyTagMnemonicStatus:()=>a}),function(e){e.UNVERIF="unverif",e.VERIF="verif",e.EMPTY="empty",e.INCORRECT="incorrect",e.FILL="FILLED"}(a||(a={}))},740962:(e,t,n)=>{n.r(t),n.d(t,{Bip39DotmapUrl:()=>i,generalKeyTagMnemonic:()=>c,keyTagShoppingUrl:()=>s,keyTagWordDataToMnemonic:()=>d,mnemonicWordToKeyTagMnemonic:()=>l,mnemonicWordsToKeyTagMnemonic:()=>u});var a=n(968079),r=n(36832),o=n(434340),i="https://onekey.so/bip39-dotmap",s="https://onekey.so/products/onekey-keytag",l=function(e){var t=function(e){var t=r.wordlists.english.indexOf(e);return-1===t?-1:t+1}(e),n=-1===t?o.KeyTagMnemonicStatus.INCORRECT:o.KeyTagMnemonicStatus.VERIF,a=function(e){if(e<0)return[];for(var t=parseInt(`${e}`).toString(2),n=12-t.length,a="";n>0;)a+="0",n-=1;var r=(a+t).split(""),o=[];return r.forEach((function(e){o.push("1"===e)})),o}(t);return{mnemonicIndexNumber:t,status:n,dotMapData:a}},u=function(e){var t=e.trim().replace(/\s+/g," ");if(r.validateMnemonic(t)){var n=t.split(" "),a=[];return n.forEach((function(e,t){var n={index:t+1,mnemonicWord:e};n=Object.assign(n,l(e)),a.push(n)})),a}},d=function(e){var t,n="";e.forEach((function(e){n+=e?"1":"0"}));var a=o.KeyTagMnemonicStatus.UNVERIF,i=parseInt(n,2),s=r.wordlists.english;return 0===i||Number.isNaN(i)?a=o.KeyTagMnemonicStatus.EMPTY:i-1<s.length?(t=s[i-1],a=o.KeyTagMnemonicStatus.VERIF):a=o.KeyTagMnemonicStatus.INCORRECT,{mnemonicWord:t,mnemonicIndexNumber:i,status:a}},c=function(e,t){var n=[];if(t&&t.length>=e)n=(0,a.default)(t.slice(0,e));else{n=t?(0,a.default)(t):[];for(var r=e-(t?e-t.length:e);r<e;r+=1){var i={index:r+1,dotMapData:new Array(12).fill(!1),status:o.KeyTagMnemonicStatus.UNVERIF};n.push(i)}}return n}},555596:(e,t,n)=>{n.r(t),n.d(t,{GroupedBackupDetails:()=>L,checkHasData:()=>V,default:()=>U});var a=n(719392),r=n(612210),o=n(669083),i=n(634795),s=n(539144),l=n(321668),u=n(459740),d=n(256666),c=n(196234),f=n(361301),p=n(18861),m=n(795116),g=n(435581),h=n(866904),x=n(202784),b=n(472719),y=n(571747),v=n(783112),_=n(46486),j=n(220033),w=n(677346),O=n(140368),C=n(945821),M=n(859071),D=n(747225),P=n(74008),k=n(364519),A=n(327226),S=n(33809),E=n(481047),R=n(793525),T=n(235014),B=n(973274),I=n(47675),W=n(552322),N=["size","ready","onImport","onDelete"];function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,d.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e){var t=e.section,n=t.title,a=t.items;return(0,W.jsxs)(p.default,{children:[(0,W.jsx)(h.default,{typography:"Body2",color:"text-subdued",mb:"12px",children:n}),(0,W.jsx)(f.default,{space:"16px",children:a.map((function(e){var t=e.icon,n=e.iconType,a=e.name,r=e.desc,o=e.uuid;return(0,W.jsxs)(p.default,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[(0,W.jsx)(m.default,{rounded:"full",size:"8",bgColor:"surface-neutral-default",children:"Avatar"===n?(0,W.jsx)(h.default,{typography:"DisplayMedium",children:t.emoji}):(0,W.jsx)(g.default,{name:t,size:20,color:"icon-default"})}),(0,W.jsx)(h.default,{px:"12px",typography:"Body2Strong",flex:"1",isTruncated:!0,children:a}),(0,W.jsx)(h.default,{typography:"Body2Strong",color:"text-subdued",children:r})]},o)}))})]})}var L=function(e){var t=e.title,n=e.publicBackupData,a=(0,v.default)(),r=(0,x.useState)([]),o=(0,c.default)(r,2),i=o[0],s=o[1];return(0,x.useEffect)((function(){var e,t,r,o,i,l,u=[],d=Object.entries(n.HDWallets).map((function(e){var t=(0,c.default)(e,2),n=t[0],r=t[1];return{uuid:n,iconType:"Avatar",name:r.name,icon:r.avatar,desc:a.formatMessage({id:"form__str_accounts"},{count:r.accountUUIDs.length})}})).sort((function(e,t){return(0,y.default)({insensitive:!0})(e.name,t.name)})),f=Object.entries(n.importedAccounts).map((function(e){var t=(0,c.default)(e,2);return z({uuid:t[0]},t[1])}));f.length>0&&d.push({uuid:f[0].uuid,name:a.formatMessage({id:"wallet__imported_accounts"}),iconType:"Icon",icon:"InboxArrowDownOutline",desc:a.formatMessage({id:"form__str_accounts"},{count:f.length})});var p=Object.entries(n.watchingAccounts).map((function(e){var t=(0,c.default)(e,2);return z({uuid:t[0]},t[1])}));p.length>0&&d.push({uuid:p[0].uuid,name:a.formatMessage({id:"wallet__watched_accounts"}),iconType:"Icon",icon:"EyeOutline",desc:a.formatMessage({id:"form__str_accounts"},{count:p.length})}),d.length>0&&u.push({title:a.formatMessage({id:"wallet__app_wallet"}),items:d});var m=[],g=null!=(e=null==n||null==(t=n.simpleDb)||null==(r=t.market)?void 0:r.favorites)?e:[];g.length>0&&m.push({uuid:g[0],name:a.formatMessage({id:"form__Watchlist"}),iconType:"Icon",icon:"HeartOutline",desc:a.formatMessage({id:"content__int_items"},{0:g.length})}),m.length>0&&u.push({title:a.formatMessage({id:"form__token"}),items:m});var h=[],x=Object.entries(n.contacts).map((function(e){var t=(0,c.default)(e,2);return z({uuid:t[0]},t[1])}));x.length>0&&h.push({uuid:x[0].name,name:a.formatMessage({id:"title__address_book"}),iconType:"Icon",icon:"BookOpenOutline",desc:a.formatMessage({id:"content__int_items"},{0:x.length})});var b=null==n||null==(o=n.simpleDb)||null==(i=o.utxoAccounts)?void 0:i.utxos;b&&b.length>0&&h.push({uuid:b[0].key,name:a.formatMessage({id:"form__utxo_label"}),iconType:"Icon",icon:"TagOutline",desc:a.formatMessage({id:"content__int_items"},{0:b.length})}),h.length>0&&u.push({title:a.formatMessage({id:"form__address_book_labels_uppercase"}),items:h});var v=null!=(l=n.discoverBookmarks)?l:[],_=[];v.length>0&&_.push({uuid:v[0].id,name:a.formatMessage({id:"form__favorite_dapps"}),iconType:"Icon",icon:"StarOutline",desc:a.formatMessage({id:"content__int_items"},{0:v.length})}),_.length>0&&u.push({title:a.formatMessage({id:"title__explore"}),items:_}),s(u)}),[a,n]),(0,W.jsxs)(p.default,{mx:12,mb:4,children:[t&&(0,W.jsx)(h.default,{typography:"Heading",pb:"4",children:t}),(0,W.jsx)(f.default,{space:"32px",children:i.map((function(e){return(0,W.jsx)(F,{section:e},e.title)}))})]})},K=function(e){var t=e.size,n=e.ready,a=e.onImport,r=e.onDelete,o=(0,u.default)(e,N),i=(0,v.default)();return(0,W.jsxs)(p.default,z(z({flexDirection:"row"},o),{},{children:["undefined"===typeof a||n?void 0:(0,W.jsx)(l.default,{onPress:a,type:"primary",size:t,flexGrow:{base:1,sm:0},children:i.formatMessage({id:"action__import"})}),"undefined"===typeof r||n?void 0:(0,W.jsx)(l.default,{onPress:r,type:"destructive",size:t,ml:4,flexGrow:{base:1,sm:0},children:i.formatMessage({id:"action__delete"})})]}))};function V(e){var t,n,a,r;return!(null==e||null==(t=e.simpleDb)||null==(n=t.utxoAccounts)||!n.utxos.length)||(!(null==e||null==(a=e.simpleDb)||null==(r=a.market)||!r.favorites.length)||Object.entries(e).filter((function(e){var t=(0,c.default)(e,2),n=t[0],a=t[1];return"simpleDb"!==n&&Object.keys(a).length>0})).length>0)}const U=function(e){var t=e.onboarding,n=void 0!==t&&t,l=(0,v.default)(),u=(0,s.default)(),d=(0,M.useNavigation)(),f=(0,b.useRoute)(),m=(0,D.useAppSelector)((function(e){return e.settings.version})),g=(0,D.useData)().isPasswordSet,y=C.default.serviceCloudBackup,N=(0,A.default)().showVerify,H=(0,k.default)().requestBackupPassword,z=(0,S.useOnboardingDone)();(0,x.useLayoutEffect)((function(){var e=l.formatMessage({id:"title__backup_details"});d.setOptions({title:e})}),[d,l]);var F=(0,P.default)(),U=f.params,G=U.backupUUID,Q=U.backupTime,q=U.numOfHDWallets,J=U.numOfAccounts,X=(0,x.useState)(!0),Y=(0,c.default)(X,2),Z=Y[0],$=Y[1],ee=(0,x.useState)({alreadyOnDevice:{contacts:{},importedAccounts:{},watchingAccounts:{},HDWallets:{},simpleDb:{},discoverBookmarks:[]},notOnDevice:{contacts:{},importedAccounts:{},watchingAccounts:{},HDWallets:{},simpleDb:{},discoverBookmarks:[]}}),te=(0,c.default)(ee,2),ne=te[0],ae=te[1],re=(0,x.useState)(!1),oe=(0,c.default)(re,2),ie=oe[0],se=oe[1],le=(0,x.useState)(),ue=(0,c.default)(le,2),de=ue[0],ce=ue[1],fe=(0,x.useState)(!1),pe=(0,c.default)(fe,2),me=pe[0],ge=pe[1],he=(0,x.useCallback)((function(){return void 0===de||(!de||!(0,O.gtIgnore)(de,m,"patch"))}),[m,de]);(0,x.useEffect)((function(){y.getBackupDetails(G).then((function(e){var t=e.backupDetails,n=e.appVersion;ce(n),ae(t),se(V(t.alreadyOnDevice)),ge(V(t.notOnDevice)),$(!1)}))}),[$,y,G]);var xe=(0,x.useCallback)((0,i.default)((function*(){o.default.show({title:l.formatMessage({id:"msg__backup_imported"})}),n?yield z({delay:200}):(null==d||d.popToTop(),null==d||d.navigate(E.RootRoutes.Main,{screen:E.MainRoutes.Tab,params:{screen:E.TabRoutes.Home}}))})),[l,n,z,d]),be=(0,x.useCallback)((function(){o.default.show({title:l.formatMessage({id:"msg__import_icloud_backup_failed_version"})},{type:"error"}),d.goBack()}),[l,d]),ye=(0,x.useCallback)((function(){!1!==he()?g?N((function(e){y.restoreFromBackup({backupUUID:G,notOnDevice:ne.notOnDevice,localPassword:e}).then((function(t){t===w.RestoreResult.SUCCESS?xe():t===w.RestoreResult.WRONG_PASSWORD?H((function(t){return y.restoreFromBackup({backupUUID:G,notOnDevice:ne.notOnDevice,localPassword:e,remotePassword:t})}),xe,be):be()}))}),(function(){})):H((function(e){return y.restoreFromBackup({backupUUID:G,notOnDevice:ne.notOnDevice,localPassword:e,remotePassword:e})}),xe,be):(0,B.showUpgrateDialog)()}),[g,he,N,y,G,ne.notOnDevice,xe,H,be]),ve=(0,x.useCallback)((function(){(0,R.showOverlay)((function(e){return(0,W.jsx)(r.default,{visible:!0,onClose:e,footerButtonProps:{primaryActionTranslationId:"action__delete",secondaryActionTranslationId:"action__cancel",primaryActionProps:{type:"destructive",onPromise:function(){var t=(0,i.default)((function*(){yield y.removeBackup(G),e(),d.pop(2)}));return function(){return t.apply(this,arguments)}}()}},contentProps:{iconType:"danger",title:l.formatMessage({id:"dialog__delete_backup"}),content:l.formatMessage({id:"dialog__delete_backup_desc"},{cloudName:(0,j.backupPlatform)().cloudName})}})}))}),[G,l,d,y]);return(0,W.jsxs)(I.default,{footer:u?(0,W.jsx)(K,{ready:Z,onImport:me?ye:void 0,onDelete:n?void 0:ve,size:"xl",position:"absolute",bottom:0}):void 0,children:[(0,W.jsxs)(p.default,{flexDirection:u?"column":"row",alignItems:"center",children:[(0,W.jsx)(p.default,{mb:{base:6,sm:0},mr:{sm:6},children:(0,W.jsx)(T.default,{size:"lg",enabled:!0})}),(0,W.jsx)(h.default,{typography:"PageHeading",children:F.format(new Date(Q),"MMM d, yyyy, HH:mm")}),(0,W.jsx)(h.default,{typography:"Body2",mt:"12px",color:"text-subdued",children:`${l.formatMessage({id:"form__str_wallets"},{0:q})} \xb7 ${l.formatMessage({id:"form__str_accounts"},{count:J})}`}),u?void 0:(0,W.jsx)(K,{ready:Z,onImport:me?ye:void 0,onDelete:n?void 0:ve,size:"base",ml:"auto"})]}),(0,W.jsx)(p.default,{borderBottomWidth:_.default.hairlineWidth,borderBottomColor:"divider",my:{base:8,sm:6}}),Z?(0,W.jsx)(a.default,{size:"lg"}):(0,W.jsxs)(p.default,{flexDirection:u?"column":"row",mx:-12,children:[ie?(0,W.jsx)(L,{title:l.formatMessage({id:"content__active_on_this_device"}),publicBackupData:ne.alreadyOnDevice}):void 0,me?(0,W.jsx)(L,{title:l.formatMessage({id:"content__not_on_this_device"}),publicBackupData:ne.notOnDevice}):void 0]})]})}},235014:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var a=n(795116),r=n(435581),o=n(552322);const i=function(e){var t=e.enabled,n=e.size;return(0,o.jsx)(a.default,{rounded:"full",size:"lg"===n?"56px":"48px",bgColor:`surface-${t?"success":"warning"}-subdued`,children:(0,o.jsx)(r.default,{name:"CloudOutline",size:24,color:"icon-"+(t?"success":"warning")})})}},224255:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var a=n(256666),r=n(866904),o=n(18861),i=n(795116),s=n(719392),l=n(634795),u=n(196234),d=n(202784),c=n(783112),f=n(46486),p=n(945821),m=n(859071),g=n(481047),h=n(107867),x=n(435581),b=n(539144),y=n(459740),v=n(74008),_=n(552322),j=["backupTime","numOfHDWallets","numOfAccounts","size"];function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const C=function(e){var t=e.backupTime,n=e.numOfHDWallets,a=e.numOfAccounts,r=(e.size,(0,y.default)(e,j)),i=(0,b.default)(),s=(0,v.default)(),l=(0,c.default)();return(0,_.jsxs)(h.default,O(O({mx:-4},r),{},{children:[(0,_.jsx)(o.default,{bgColor:"surface-neutral-subdued",padding:"6px",borderRadius:"full",children:(0,_.jsx)(x.default,{size:20,name:"DeviceMobileOutline"})}),(0,_.jsx)(h.default.Column,{flex:1,flexDirection:i?"column":"row",text:{label:s.format(new Date(t),"MMM d, yyyy, HH:mm"),labelProps:{flex:1,typography:"Body1Strong"},description:`${l.formatMessage({id:"form__str_wallets"},{0:n})} \xb7 ${l.formatMessage({id:"form__str_accounts"},{count:a})}`}}),(0,_.jsx)(h.default.Column,{icon:{size:20,name:"ChevronRightMini",color:"icon-subdued"}})]}))};var M=n(47675);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var P=function(e){var t=e.backupUUID,n=e.backupTime,a=e.numOfHDWallets,r=e.numOfAccounts,o=(0,m.useNavigation)();return(0,_.jsx)(C,{onPress:function(){o.navigate(g.HomeRoutes.CloudBackupDetails,{backupUUID:t,backupTime:n,numOfHDWallets:a,numOfAccounts:r})},backupTime:n,numOfHDWallets:a,numOfAccounts:r,size:"normal"})};const k=function(){var e=(0,c.default)(),t=(0,m.useNavigation)(),n=p.default.serviceCloudBackup;(0,d.useLayoutEffect)((function(){var n=e.formatMessage({id:"content__previous_backups"});t.setOptions({title:n})}),[t,e]);var g=(0,d.useState)(!0),h=(0,u.default)(g,2),x=h[0],b=h[1],y=(0,d.useState)([]),v=(0,u.default)(y,2),j=v[0],w=v[1];return(0,d.useEffect)((function(){var e=function(){var e=(0,l.default)((function*(){w(yield n.getPreviousBackups()),b(!1)}));return function(){return e.apply(this,arguments)}}();e()}),[n]),(0,_.jsx)(M.default,{children:x?(0,_.jsx)(i.default,{py:16,children:(0,_.jsx)(s.default,{size:"lg"})}):(0,_.jsx)(_.Fragment,{children:j.map((function(e,t){return(0,_.jsxs)(o.default,{children:[0!==t?(0,_.jsx)(o.default,{borderBottomWidth:f.default.hairlineWidth,borderBottomColor:"divider",my:6,bgColor:"divider"}):null,(0,_.jsx)(r.default,{typography:"Body2Strong",color:"text-subdued",children:e[0].deviceInfo.deviceName}),(0,_.jsx)(o.default,{children:e.map((function(e){return(0,_.jsx)(P,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),e.backupUUID)}))})]},t)}))})})}},973274:(e,t,n)=>{n.r(t),n.d(t,{showUpgrateDialog:()=>c});var a=n(612210),r=n(669083),o=n(634795),i=n(783112),s=n(358499),l=n(793525),u=n(552322);function d(e){var t=e.onClose,n=(0,i.default)();return(0,u.jsx)(a.default,{visible:!0,onClose:t,footerButtonProps:{primaryActionTranslationId:"action__upgrade",secondaryActionTranslationId:"action__cancel",primaryActionProps:{type:"primary",onPromise:function(){var e=(0,o.default)((function*(){try{var e=yield s.default.getPackageInfo();e&&(s.default.openAppUpdate({package:e}),null==t||t())}catch(a){r.default.show({title:n.formatMessage({id:"msg__network_request_failed"})})}}));return function(){return e.apply(this,arguments)}}()}},contentProps:{iconType:"info",title:n.formatMessage({id:"dialog__import_data_upgrade_required"}),content:n.formatMessage({id:"dialog__import_data_upgrade_required_desc"})}})}var c=function(){(0,l.showDialog)((0,u.jsx)(d,{}))}},47675:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var a=n(18861),r=n(468702),o=n(311631),i=n(552322),s=function(e){var t=e.children,n=e.footer,s=(0,o.useSafeAreaInsets)().bottom;return s=0===s?20:s,(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.ScrollView,{alignSelf:"stretch",flex:1,px:4,py:{base:4,sm:8},_contentContainerStyle:{w:"full",maxW:800,mx:"auto"},children:t}),n?(0,i.jsx)(a.default,{mx:4,py:4,my:`${s}px`,children:n}):null]})};s.defaultProps={};const l=s},749216:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var a=n(256666),r=n(121815),o=n(18861),i=n(10918),s=n(866904),l=n(433996),u=n(384247),d=n(196234),c=n(459740),f=n(468702),p=n(311631),m=n(202784),g=n(472719),h=(n(213208),n(702012)),x=n(24809),b=n(552322),y=["backButton","showCloseButton","secondaryContent","title","subTitle","description","fullHeight","onPressBackButton","scaleFade","visible","children","disableAnimation"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e){var t=e.children,n=(0,p.useSafeAreaInsets)();return(0,b.jsx)(f.ScrollView,{flex:1,bounces:!1,_contentContainerStyle:{minHeight:"100%",justifyContent:"center",alignItems:"center",px:6,pt:`${16+n.top}px`,pb:`${16+n.bottom}px`,bgColor:"background-default"},children:t})}var w=function(e){var t=e.backButton,n=e.showCloseButton,a=e.secondaryContent,f=e.title,v=e.subTitle,w=e.description,O=e.fullHeight,C=e.onPressBackButton,M=e.scaleFade,D=e.visible,P=e.children,k=e.disableAnimation,A=(0,c.default)(e,y),S=(0,m.useState)(!1),E=(0,d.default)(S,2),R=E[0],T=E[1],B=(0,g.useIsFocused)(),I=(0,p.useSafeAreaInsets)(),W=(0,h.useOnboardingClose)().onboardingGoBack,N=(0,x.useOnboardingContext)(),H=(0,u.default)().screenHeight<=667,z=(0,m.useCallback)((function(){T(!0),setTimeout(W,200)}),[W]),F=(0,m.useMemo)((function(){var e;return!R&&(null!=(e=null!=D?D:null==N?void 0:N.visible)?e:B)}),[null==N?void 0:N.visible,R,B,D]);return(0,b.jsxs)(j,{children:[n?(0,b.jsx)(l.default,{position:"absolute",onPress:z,top:{base:`${I.top+16}px`,sm:8},right:{base:4,sm:8},type:"plain",size:"lg",name:"XMarkOutline",circle:!0,zIndex:9999}):null,(0,b.jsx)(r.default,_(_({as:o.default,visible:F,initial:k?void 0:{opacity:0,translateX:M?0:24,scale:M?.95:1},animate:k?void 0:{opacity:1,translateX:0,scale:1,transition:{duration:150}},flexGrow:{base:O?1:void 0,sm:0},w:"full",maxW:800,mb:{base:"auto",sm:0}},A),{},{children:(0,b.jsxs)(o.default,{minH:H?"560px":"640px",flexGrow:{base:O?1:void 0,sm:0},children:[t?(0,b.jsx)(l.default,{alignSelf:"flex-start",ml:-2,name:"ArrowLeftOutline",size:"lg",type:"plain",zIndex:9999,circle:!0,onPress:function(){return C?C():W()}}):void 0,(0,b.jsxs)(o.default,{flexGrow:{base:O?1:void 0,sm:0},mt:{base:6,sm:12},flexDirection:{sm:"row"},justifyContent:O?"space-between":void 0,children:[(0,b.jsxs)(o.default,{flex:O&&!a?1:void 0,flexShrink:O?0:void 0,w:{sm:a?400:"full"},children:[f?(0,b.jsxs)(o.default,{mb:{base:6,sm:12},children:[(0,b.jsx)(s.default,{typography:{sm:"DisplayLarge",md:"DisplayXLarge"},children:f}),v?(0,b.jsx)(i.default.Body1,{textAlign:"left",color:"text-subdued",children:v}):void 0,w?(0,b.jsx)(s.default,{typography:{sm:"DisplayLarge",md:"DisplayXLarge"},color:"text-subdued",children:w}):void 0]}):void 0,P]}),a?(0,b.jsx)(o.default,{flex:{base:O?1:void 0,sm:1},mt:{base:6,sm:0},ml:{sm:20},pl:{sm:8},borderLeftWidth:{sm:3},borderLeftColor:"divider",testID:"ConnectWallet-SecondaryContent-Container",children:a}):void 0]})]})}))]})};w.defaultProps={backButton:!0,showCloseButton:!1,fullHeight:!1,scaleFade:!1};const O=function(e){return(0,b.jsx)(x.OnboardingContextProvider,{children:(0,b.jsx)(w,_({},e))})}},964780:(e,t,n)=>{n.r(t),n.d(t,{StackNavigator:()=>ha,default:()=>xa,stackScreenList:()=>ga});var a=n(202784),r=n(671672),o=n(321668),i=n(566147),s=n(634795),l=n(18861),u=n(10918),d=n(795116),c=n(435581),f=n(921311),p=n(539144),m=n(472719),g=n(783112),h=n(945821),x=n(677442),b=n(749216),y=n(827570),v=n(552322);const _=function(){var e=(0,p.default)(),t=(0,f.default)(),n=(0,m.useNavigation)(),a=(0,x.useFormOnChangeDebounced)({useFormReturn:t,revalidate:!1,clearErrorIfEmpty:!0}).formValues,r=!(null!=a&&a.text),_=(0,g.default)(),j=t.control,w=t.handleSubmit;return(0,v.jsx)(b.default,{title:_.formatMessage({id:"title__convert_recovery_phrase_to_dotmap_for_keytag"}),secondaryContent:e?void 0:(0,v.jsxs)(l.default,{children:[(0,v.jsx)(d.default,{mb:6,size:12,bgColor:"decorative-surface-one",borderRadius:"9999px",children:(0,v.jsx)(c.default,{size:24,color:"decorative-icon-one",name:"DotsCircleHorizontalOutline"})}),(0,v.jsx)(u.default.Body2Strong,{children:_.formatMessage({id:"content__what_is_recovery_phrase"})}),(0,v.jsx)(u.default.Body2,{mt:2,color:"text-subdued",children:_.formatMessage({id:"content__what_is_recovery_phrase_desc"})})]}),children:(0,v.jsx)(l.default,{flex:"1",children:(0,v.jsxs)(i.default,{children:[(0,v.jsx)(i.default.Item,{control:j,name:"text",rules:{validate:function(){var e=(0,s.default)((function*(e){if(!e)return!0;try{return yield h.default.validator.validateMnemonic(e),!0}catch(t){console.error("validate mnemonic",t)}return _.formatMessage({id:"form__add_exsting_wallet_invalid"})}));return function(t){return e.apply(this,arguments)}}()},children:(0,v.jsx)(i.default.Textarea,{placeholder:_.formatMessage({id:"form__enter_recovery_phrase"}),h:"48",trimValue:!1})}),(0,v.jsx)(o.default,{isDisabled:r,size:e?"xl":"lg",onPromise:w((function(e){n.navigate(y.KeyTagRoutes.ShowDotMap,{mnemonic:e.text})})),type:"primary",children:_.formatMessage({id:"action__next"})})]})})})};var j=n(328012),w=n(307061),O=n(669083),C=n(256666),M=n(968079),D=n(196234),P=n(823621),k=n(213208),A=n(526002),S=n(384247),E=n(510233),R=n(303471),T=function(e){var t=e.keyTagData,n=e.onChange,r=e.startIndex,o=e.showResult,i=void 0===o||o,s=function(){var e=(0,S.default)().screenWidth,t=(0,p.default)();return{size:(0,a.useMemo)((function(){var n=5,a=t?e-256-36:e-512-48-164,r=t?48:96;return a>r&&(n=5+Math.floor(a/r)),n>7&&!t?7:n}),[e,t])}}().size;return(0,v.jsxs)(l.default,{justifyContent:"center",alignItems:"center",children:[(0,v.jsx)(R.KeyTagMatrixTopTitle,{keyTagData:t,startIndex:r}),(0,v.jsx)(l.default,{justifyContent:"center",alignItems:"center",children:null==t?void 0:t.map((function(e,t){return(0,v.jsx)(E.default,{size:s,showResult:i,showWordStatus:!0,mnemonicWordData:e,onChange:function(t,a){n&&n(e.index,t,a)}},`${t}`)}))})]})},B=n(434340),I=n(740962);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,C.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const H=function(){var e=(0,m.useNavigation)(),t=(0,g.default)(),n=(0,p.default)(),r=(0,a.useState)(!1),i=(0,D.default)(r,2),d=i[0],c=i[1],f=(0,a.useState)((function(){return(0,I.generalKeyTagMnemonic)(12)})),x=(0,D.default)(f,2),y=x[0],_=x[1],C=(0,a.useCallback)((function(e,t,n){var a=(0,M.default)(y),r=a.find((function(t){return t.index===e}));if(r&&r.dotMapData){r.dotMapData[t]=n;var o=(0,I.keyTagWordDataToMnemonic)(r.dotMapData),i=o.mnemonicWord,s=o.mnemonicIndexNumber,l=o.status;r.mnemonicWord=i,r.mnemonicIndexNumber=s,r.status=l,_(a)}}),[y]),S=(0,a.useCallback)((0,s.default)((function*(){c(!0);var n=(0,M.default)(y);if(n=n.map((function(e){var t,n=(0,I.keyTagWordDataToMnemonic)(null!=(t=e.dotMapData)?t:[]),a=n.mnemonicWord,r=n.mnemonicIndexNumber,o=n.status;return N(N({},e),{},{mnemonicWord:a,mnemonicIndexNumber:r,status:o})})),_(n),n.every((function(e){return e.status===B.KeyTagMnemonicStatus.VERIF}))){var a=n.map((function(e){return e.mnemonicWord})).join(" ");try{yield h.default.validator.validateMnemonic(a),e.navigate(A.EOnboardingRoutes.SetPassword,{mnemonic:a})}catch(r){O.default.show({title:t.formatMessage({id:"msg__engine__invalid_mnemonic"})},{type:"error"}),console.error("validate mnemonic",r)}}else O.default.show({title:t.formatMessage({id:"msg__engine__invalid_mnemonic"})},{type:"error"});c(!1)})),[e,y,t]),E=(0,a.useState)(!0),R=(0,D.default)(E,2),W=R[0],H=R[1];return(0,a.useEffect)((function(){e.setOptions({headerShown:!0,header:function(){return(0,v.jsx)(P.default,{alwaysShowBackButton:!0,headerRight:function(){return(0,v.jsx)(o.default,{mt:n?2:6,mr:6,type:"primary",size:"base",isLoading:d,onPress:S,children:t.formatMessage({id:"action__import"})})}})}})}),[d,S,t,n,e]),(0,v.jsxs)(b.default,{backButton:!1,children:[(0,v.jsxs)(l.default,{flexDirection:n?"column":"row",justifyContent:n?"center":"space-between",children:[(0,v.jsxs)(l.default,{mt:k.default.isNativeIOS?-12:0,children:[(0,v.jsx)(u.default.DisplayLarge,{children:t.formatMessage({id:"title__import_wallet_with_keytag"})}),(0,v.jsx)(u.default.Body1,{children:t.formatMessage({id:"title__import_wallet_with_keytag_desc"})})]}),(0,v.jsxs)(l.default,{mt:4,flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[(0,v.jsxs)(l.default,{flexDirection:"row",alignItems:"center",mr:4,children:[(0,v.jsx)(w.default,{labelType:"false",isChecked:W,mr:2,onToggle:function(){return H(!W)}}),(0,v.jsx)(u.default.Body2Strong,{children:t.formatMessage({id:"action__show_result"})})]}),(0,v.jsx)(l.default,{children:(0,v.jsx)(j.default,{activatable:!!n,defaultValue:12,containerProps:{width:"130px",zIndex:5},footer:null,headerShown:!1,onChange:function(e,t){setTimeout((function(){_((0,I.generalKeyTagMnemonic)(t.value,y))}),200)},options:[{label:t.formatMessage({id:"form__str_words"},{0:12}),value:12},{label:t.formatMessage({id:"form__str_words"},{0:18}),value:18},{label:t.formatMessage({id:"form__str_words"},{0:24}),value:24}]})})]})]}),(0,v.jsx)(l.default,{flex:"1",children:(0,v.jsx)(l.default,{mt:6,justifyContent:"space-around",alignItems:n?"center":"flex-start",flexDirection:n?"column":"row",children:y.length>12?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(T,{showResult:W,onChange:C,keyTagData:y.slice(0,12)}),(0,v.jsx)(T,{showResult:W,startIndex:13,keyTagData:y.slice(12),onChange:C})]}):(0,v.jsx)(T,{showResult:W,keyTagData:y,onChange:C})})})]})};var z=n(225447);const F=n.p+"static/media/introduction.b65a7a2e8f40c40952f0.png";var L=n(859071);const K=function(){var e=(0,p.default)(),t=function(){var e=(0,S.default)(),t=e.screenHeight,n=e.screenWidth,r=(0,p.default)(),o=(0,a.useMemo)((function(){return r?n-48>352?352:n-48:352}),[r,n]),i=(0,a.useMemo)((function(){return 3.125*o}),[o,3.125]),s=(0,a.useMemo)((function(){return r?t-64-109-220-i:t-64-112-80-i>0?0:t-64-112-80-i}),[r,t,i]);return{imageHeight:i,imageWidth:o,marginT:s}}(),n=t.imageHeight,r=t.imageWidth,i=t.marginT,s=(0,g.default)(),d=(0,L.useNavigation)(),c=(0,a.useMemo)((function(){var e={};return e.image=(0,v.jsx)(l.default,{flexDirection:"column",alignItems:"center",children:(0,v.jsx)(z.default,{w:r,h:n,marginTop:i,resizeMode:"contain",source:F})}),e.detail=(0,v.jsxs)(l.default,{children:[(0,v.jsx)(u.default.DisplayLarge,{fontSize:"24px",fontWeight:700,numberOfLines:2,children:s.formatMessage({id:"title__lets_play_the_dot_punching_game"})}),(0,v.jsx)(u.default.Body1,{mt:2,children:s.formatMessage({id:"title__lets_play_the_dot_punching_game_desc"})}),(0,v.jsx)(o.default,{type:"primary",size:"xl",onPress:function(){d.navigate(y.KeyTagRoutes.KeyTagBackUpWallet)},mt:6,children:s.formatMessage({id:"action__get_started"})})]}),e}),[n,r,s,i,d]);return(0,v.jsx)(b.default,{backButton:!0,children:(0,v.jsx)(l.default,{flexDirection:e?"column-reverse":"row",children:e?(0,v.jsxs)(v.Fragment,{children:[c.detail,c.image]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.default,{flex:1,children:c.detail}),(0,v.jsx)(l.default,{flex:1,px:15,children:c.image})]})})})};var V=n(419016),U=n(785192),G=n(25655),Q=n(627009),q=n(72492),J=n(559656),X=n(664226);const Y=function(){var e=(0,p.default)(),t=(0,g.default)(),n=(0,L.useNavigation)(),r=(0,q.useWalletSelectorSectionData)(),i=(0,a.useMemo)((function(){var e=[];if(r.length){var t=r.find((function(e){return"hd"===e.type}));if(t)e=t.data.filter((function(e){return!e.isSingleton})).map((function(e){return e.wallet})).filter((function(e){return e})).map((function(e){return e}))}return e}),[r]),s=(0,a.useCallback)((function(t){n.navigate(y.KeyTagRoutes.KeyTagVerifyPassword,{wallet:t,walletId:t.id,navigateMode:e&&!1})}),[e,n]),f=(0,a.useMemo)((function(){return(0,v.jsx)(u.default.Body1Strong,{ml:4,color:"text-subdued",children:t.formatMessage({id:"form__you_have_no_wallet_yet"})})}),[t]),m=(0,a.useCallback)((function(e){var t=e.item,n=t.name||"unknown";return(0,v.jsx)(l.default,{py:2,children:(0,v.jsx)(X.ListItemBase,{onPress:function(){s(t)},leftView:(0,v.jsx)(J.WalletAvatarPro,{circular:!0,size:"lg",wallet:t,devicesStatus:void 0}),rightView:(0,v.jsx)(c.default,{name:"ChevronRightMini"}),text:n})})}),[s]);return(0,v.jsxs)(b.default,{title:t.formatMessage({id:"title__choose_a_wallet_to_back_up"}),subTitle:t.formatMessage({id:"title__choose_a_wallet_to_back_up_desc"}),fullHeight:!0,secondaryContent:(0,v.jsxs)(l.default,{children:[e?null:(0,v.jsx)(d.default,{mb:6,size:12,bgColor:"decorative-surface-one",borderRadius:"9999px",children:(0,v.jsx)(c.default,{size:24,color:"decorative-icon-one",name:"TableCellsOutline"})}),(0,v.jsx)(u.default.Body2,{children:t.formatMessage({id:"content__you_can_also_find_the_bip39_dotmap_in_the_following_site"})}),(0,v.jsx)(o.default,{mt:3,type:"plain",ml:"-16px",justifyContent:"flex-start",textProps:{textDecorationLine:"underline"},onPress:function(){(0,Q.openUrlExternal)(I.Bip39DotmapUrl)},children:I.Bip39DotmapUrl})]}),children:[(0,v.jsx)(G.default,{ml:-4,data:i,renderItem:m,ListEmptyComponent:f}),(0,v.jsxs)(l.default,{mt:4,children:[(0,v.jsx)(U.default,{}),(0,v.jsx)(l.default,{ml:-4,mt:4,children:(0,v.jsx)(X.ListItemBase,{onPress:function(){n.navigate(y.KeyTagRoutes.EnterPhrase)},text:t.formatMessage({id:"form__enter_recovery_phrase"}),leftView:(0,v.jsx)(d.default,{size:12,bgColor:"surface-default",borderRadius:"9999px",children:(0,v.jsx)(c.default,{size:24,color:"decorative-icon-one",name:"PencilOutline"})}),rightView:(0,v.jsx)(c.default,{name:"ChevronRightMini"})})})]})]})};var Z=n(272556),$=n(561220),ee=n(586874),te=n(46486);const ne=n.p+"static/media/keytag_1_dark.41f0f534c40ad0865f76.png",ae=n.p+"static/media/keytag_1_light.13be06e6bbd56da1c245.png",re=n.p+"static/media/keytag_2_dark.3c66a18264e5a4c5a332.png",oe=n.p+"static/media/keytag_2_light.67ec0c79a680fe08588b.png";const ie=function(){var e=(0,L.useNavigation)(),t=(0,ee.default)().isDark,n=(0,g.default)(),r=(0,p.default)(),o=function(){var e=(0,S.default)().screenWidth,t=(0,p.default)(),n=(0,a.useMemo)((function(){return t?e-48:((e>800?800:e)-(e>800?24:72))/2}),[t,e]),r=241/342,o=n>342?342:n;return{imageHeight:o*(240/342),imageBoxWidth:n,imageWidth:o,imageBoxHeight:n*r>241?242:n*r}}(),i=o.imageWidth,s=o.imageHeight,d=o.imageBoxWidth,f=o.imageBoxHeight;return(0,v.jsxs)(b.default,{backButton:!0,title:n.formatMessage({id:"title__get_started_with_keytag"}),children:[(0,v.jsxs)(l.default,{flex:"1",flexDirection:r?"column":"row",children:[(0,v.jsxs)($.default,{w:d,h:f,bgColor:t?"#040407":"#ECEDEE",borderColor:"border-subdued",borderWidth:te.default.hairlineWidth,borderRadius:"12px",onPress:function(){e.navigate(y.KeyTagRoutes.IntroduceKeyTag)},children:[(0,v.jsx)(l.default,{position:"absolute",top:"0",right:"0",bottom:"1",children:(0,v.jsx)(z.default,{source:t?ne:ae,borderRadius:"12px",w:i,h:s})}),(0,v.jsx)(l.default,{m:7,children:(0,v.jsx)(u.default.DisplayXLarge,{children:n.formatMessage({id:"action__back_up_wallet"})})})]}),(0,v.jsxs)($.default,{mt:r?6:0,ml:r?0:6,bgColor:t?"#040407":"#ECEDEE",w:d,h:f,borderColor:"border-subdued",borderWidth:te.default.hairlineWidth,borderRadius:"12px",onPress:function(){e.navigate(y.KeyTagRoutes.ImportKeytag)},children:[(0,v.jsx)(l.default,{position:"absolute",top:"0",right:"0",bottom:"1",children:(0,v.jsx)(z.default,{source:t?re:oe,borderRadius:"12px",w:i,h:s})}),(0,v.jsx)(l.default,{m:7,children:(0,v.jsx)(u.default.DisplayXLarge,{children:n.formatMessage({id:"action__import_wallet"})})})]})]}),(0,v.jsx)(l.default,{mt:8,flexDirection:"row",justifyContent:"center",children:(0,v.jsxs)($.default,{flexDirection:"row",justifyContent:"center",alignItems:"center",onPress:function(){(0,Q.openUrlExternal)(I.keyTagShoppingUrl)},children:[(0,v.jsx)(c.default,{name:"ShoppingBagOutline"}),(0,v.jsx)(u.default.Body1Strong,{mx:2,children:n.formatMessage({id:"action__learn_more_n_purchase"})}),(0,v.jsx)(c.default,{name:"ChevronRightMini"})]})})]})};var se=n(855949),le=[{name:y.KeyTagRoutes.StartedKeytag,component:ie},{name:y.KeyTagRoutes.ImportKeytag,component:H},{name:y.KeyTagRoutes.ShowDotMap,component:Z.default},{name:y.KeyTagRoutes.IntroduceKeyTag,component:K},{name:y.KeyTagRoutes.KeyTagBackUpWallet,component:Y},{name:y.KeyTagRoutes.EnterPhrase,component:_},{name:y.KeyTagRoutes.KeyTagVerifyPassword,component:se.default},{name:y.KeyTagRoutes.KeyTagAttention,component:V.default}],ue=(0,r.default)();var de=n(713144),ce=n(719392),fe=n(297263),pe=n(854787),me=n(866904);n.p;const ge=n.p+"static/media/device_mini_classic_touch.792e867c360ee5adff40.png",he=n.p+"static/media/onekey-lite.583b6533dff078c00241.png";var xe=n(380164),be=n(493877),ye=n(481047),ve=n(24809),_e=n(232215);var je=n(459632),we=n(33809),Oe=n(776553),Ce=n(433617);const Me=(0,a.memo)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableOnboardingDone,n=e.onSuccess,r=(0,Ce.useAddExternalAccount)().addExternalAccount,o=(0,we.useOnboardingDone)(),i=(0,g.default)(),u=(0,be.default)(),c=(0,a.useMemo)((function(){return[{logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAAulBMVEUAAAD///8AAAAHBwdnZ2dra2vn5+ff39+EhIR+fn4RERH9/f339/fNzc37+/vx8fG3t7fR0dFwcHAuLi4VFRUJCQnt7e3AwMBAQEA7OzsqKir09PTZ2dmpqamUlJR3d3caGhrj4+Pi4uLV1dXKysrCwsKlpaWdnZ2ZmZlbW1tTU1M2Njby8vLU1NTFxcW9vb2urq6goKCMjIx7e3tsbGxPT09HR0czMzMkJCQgICDGxsZpaWljY2MmJibYQD7aAAAAAXRSTlMAQObYZgAAAcxJREFUaN7t2WlPwkAQBmB2V8ux21p62HIjICKo3OL5//+WSBhLYWuEDhiSeT+102SepN0m22kmk2FHDQEEEEDAGQKW0TbNR0PCOS4gbcf1+TJ+2QkUOlC5e+Eb+exZuEAw4Ftxi5hA3ec78Sd4QINrM8UCcjwhdRzAFEmAf4sBWGWemEEFAahH/cJaSymjVooqd+kB9bP+Cza8ct0m1MoyNRBAr9ds1KxagGqQGshDq9Fm1YZqLjUQrjuV4mV4Ds8yJaCa+sdZhxtnpQSu4W534vWnddm7wgKK8boJS4uAIwJXxnceARgasdgAtFenDwcA72IVvo6IoqnPDgAu+B65JICA/wUa2cQ4KECOJSZPAAEEEEAAAQScDmg2ErboN3kvJQDxLm407Wce4r5I3FdZLNV7gb3x6r8xiPU0P8rOrjSSbBlZCwVHABy+m8VYqbGrueAcAFRquk7lpqbo2movACKDBf9DSkPr4M9Y2YHFkhTRN1NOW4ofhV/aO22EoWB26nNtvEYLaW7amhQ07XMG4mj5oeduraZeBXn6bnUHUfuwe4z/B9IO12M0WzFkAHI7F6IP415cANKpwtFZ/sMhgDECCCCAMQJOD3wB8z5BO/qdMIsAAAAASUVORK5CYII=",label:"Trezor",available:!1},{logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgBAMAAAAQtmoLAAAAMFBMVEUAAAAAAAD///8QEBDv7+/7+/sEBAQcHBxwcHCXl5d+fn4gICBubm7r6+ufn5+VlZXXjP+NAAAAAXRSTlMAQObYZgAAAJlJREFUWMNjYBQkDYxqGNUwBDUoIQE1qFgSsuBAaHCBAzeoWApCCIsGlc3GMGAIFROGi1hj02CIJ2yERzUMGw2hsXg1hIaiaygvx64ULj0E8jQykFq1jDQNokrOoxpGNYxqGFYa4maCwEfiNUBA4ODRINMBAQcHT9mKFZBcoQyBWnRUw2DRQKChOyRa9wQ0DIE8PaphVAOFGgCtomPGGGK2iwAAAABJRU5ErkJggg==",label:"Ledger",available:!1}]}),[]);return(0,v.jsxs)(d.default,{flex:1,children:[(0,v.jsx)(_e.Hidden,{from:"sm",children:(0,v.jsx)(l.default,{testID:"ConnectWallet-SecondaryContent-Divider",w:"full",h:"1px",bgColor:"divider",mt:-4,mb:1})}),(0,v.jsxs)(l.default,{flexDir:{sm:"row"},flexWrap:{sm:"wrap"},alignSelf:"stretch",mx:-2,children:[(0,v.jsx)(je.ConnectWalletListView,{onConnectResult:function(){var e=(0,s.default)((function*(e){yield r(e),t?null==u||null==u.goBack||u.goBack():(yield o(),yield(0,Oe.wait)(600),O.default.show({title:i.formatMessage({id:"msg__account_imported"})})),n&&n()}));return function(t){return e.apply(this,arguments)}}()}),c.map((function(e){return(0,v.jsx)(je.ConnectWalletListItem,{label:e.label,available:e.available,logoSource:e.logo,onPress:function(){}},e.label)}))]})]})}));function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){(0,C.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(){var e,t=(0,g.default)(),n=(0,be.default)(),r=(0,ve.useOnboardingContext)(),o=null==r?void 0:r.forceVisibleUnfocused,i=(0,a.useCallback)((function(){null==o||o(),n.navigate(ye.RootRoutes.Modal,{screen:ye.ModalRoutes.CreateWallet,params:{screen:ye.CreateWalletModalRoutes.ConnectHardwareModal,params:{}}})}),[o,n]),s=(0,L.useActiveWalletAccount)().network,u=!(null!=s&&null!=(e=s.settings)&&e.hardwareAccountEnabled);return(0,v.jsxs)($.default,{h:{base:200,sm:240},pt:4,pb:5,px:5,rounded:"xl",bgColor:"surface-default",_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},borderWidth:1,borderColor:"border-subdued",onPress:function(){u||i()},children:[(0,v.jsxs)(me.default,{typography:"Heading",maxW:{base:160,sm:"auto"},children:[t.formatMessage({id:"action__connect"})," OneKey","\n",t.formatMessage({id:"wallet__hardware_wallet"})]}),(0,v.jsx)(l.default,{flex:1}),(0,v.jsx)(l.default,{alignSelf:"flex-start",children:u?(0,v.jsx)(pe.default,{title:t.formatMessage({id:"badge__coming_soon"}),size:"sm",type:"default"}):(0,v.jsx)(c.default,{name:"ArrowRightOutline"})}),(0,v.jsx)(z.default,{position:"absolute",bottom:0,right:{base:-16,sm:-24},source:ge,height:{base:200,sm:235},width:{base:243,sm:285}})]})}function Ae(){var e=(0,be.default)(),t=(0,ve.useOnboardingContext)(),n=null==t?void 0:t.forceVisibleUnfocused,r=(0,a.useCallback)((function(){null==n||n(),e.navigate(ye.RootRoutes.Modal,{screen:ye.ModalRoutes.CreateWallet,params:{screen:ye.CreateWalletModalRoutes.OnekeyLiteRestorePinCodeVerifyModal}})}),[e,n]);return(0,v.jsx)(l.default,{mt:{base:6,sm:4},mx:{base:-2,sm:0},children:(0,v.jsxs)($.default,{flexDir:"row",alignItems:"center",px:{base:2,sm:4},py:3,rounded:"xl",borderWidth:{sm:1},borderColor:"border-subdued",bgColor:{sm:"surface-default"},_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},onPress:function(){return r()},children:[(0,v.jsx)(z.default,{source:he,size:8}),(0,v.jsx)(me.default,{flex:1,mx:3,typography:{sm:"Body1Strong",md:"Body2Strong"},children:"OneKey Lite"}),(0,v.jsx)(c.default,{name:"ChevronRightMini",color:"icon-subdued",size:20})]})})}const Se=(0,a.memo)((function(){var e,t=(0,g.default)(),n=(0,fe.default)("background-default"),a=(0,L.useAppSelector)((function(e){return e.runtime.onBoardingLoadingBehindModal})),r=(0,m.useRoute)(),o=null==r||null==(e=r.params)?void 0:e.disableAnimation;return(0,v.jsx)(v.Fragment,{children:a?(0,v.jsx)(d.default,{bgColor:n,flex:1,height:"full",children:(0,v.jsx)(ce.default,{size:"lg"})}):(0,v.jsxs)(b.default,{disableAnimation:o,title:t.formatMessage({id:"title__connect_with"}),secondaryContent:(0,v.jsx)(Me,Pe({},null==r?void 0:r.params)),children:[(0,v.jsx)(ke,{}),xe.default?(0,v.jsx)(Ae,{}):null]})})}));var Ee=n(940915),Re=n(432986),Te=n(292147),Be=n(345584);var Ie=n(821919),We=n(854341),Ne=n(702012),He=[{text:"content__creating_your_wallet"},{text:"content__generating_your_accounts"},{text:"content__encrypting_your_data"}],ze="event-wallet-created",Fe="onboardingWalletCreated",Le="onboardingPressFinishButton",Ke=n(333665),Ve=n(208593),Ue=n(766788),Ge=n(121815),Qe=n(28524),qe=n(163142),Je=function(e){var t=e.visible,n=(0,g.default)();return(0,v.jsxs)(Ge.default,{as:l.default,position:"absolute",top:4,right:4,w:280,initial:{opacity:0,translateY:-16,scale:.95},animate:{translateY:0,opacity:1,scale:1,transition:{duration:300,delay:150}},visible:t,children:[(0,v.jsxs)(l.default,{p:4,bgColor:"surface-default",rounded:"xl",borderWidth:1,borderColor:"divider",children:[(0,v.jsx)(me.default,{typography:"Body2Strong",children:n.formatMessage({id:"content__pin_onekey_ext"})}),(0,v.jsxs)(l.default,{flexDir:"row",my:2,children:[(0,v.jsx)(qe.LinearGradient,{colors:["transparent",(0,fe.default)("surface-neutral-subdued")],style:{height:32,flex:1,borderRadius:16},start:{x:0,y:0},end:{x:1,y:0}}),(0,v.jsx)(l.default,{ml:4,mr:1,p:2,rounded:"full",bgColor:"surface-neutral-subdued",children:(0,v.jsx)(c.default,{name:"ExtensionsMini",color:"icon-default",size:16})}),(0,v.jsx)(l.default,{p:2,rounded:"full",children:(0,v.jsx)(c.default,{name:"EllipsisVerticalMini",size:16})})]}),(0,v.jsxs)(l.default,{flexDir:"row",alignItems:"center",py:3,px:4,borderWidth:1,borderColor:"border-subdued",rounded:"xl",shadow:"depth.4",children:[(0,v.jsx)(c.default,{name:"BrandLogoIllus",size:16}),(0,v.jsx)(me.default,{flex:1,mx:3,typography:"Body2",children:"OneKey"}),(0,v.jsx)(c.default,{name:"PinMini",size:16})]}),(0,v.jsx)(l.default,{position:"absolute",left:"-112px",bottom:"-69px",children:(0,v.jsx)(c.default,{name:"ArrowTopRightIllus",size:69,color:"interactive-default"})})]}),void 0]})};Je.defaultProps={};function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){(0,C.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ze(e){var t=e.onPressFinished,n=e.pausedProcessIndex,r=e.forwardedRef,i=e.minHeight,s=(0,g.default)(),u=(0,a.useRef)(new Qe.CrossEventEmitter),d=(0,a.useRef)(!1),c=(0,a.useState)(!1),f=(0,D.default)(c,2),m=f[0],h=f[1],x=((0,p.default)(),(0,a.useMemo)((function(){var e=He,t=e.reduce((function(e,t,n){return e[n]={typingEnd:!1,done:!1},e}),{});return{processInfoList:e,processDefaultStates:t}}),[])),b=x.processInfoList,y=x.processDefaultStates,_=(0,a.useMemo)((function(){return n<=0?0:n>=b.length-1?b.length-1:n}),[n,b.length]),j=(0,a.useState)(y),w=(0,D.default)(j,2),O=w[0],C=w[1],M=b.length-1,P=(0,a.useState)(!1),A=(0,D.default)(P,2),S=A[0],E=A[1],R=(0,a.useMemo)((function(){return O[M]}),[M,O]),T=(0,a.useCallback)((function(){k.default.isRuntimeBrowser&&setTimeout((function(){var e;window.scrollTo(0,999999),null==(e=document.querySelector("#WebOnboardingAutoTypingContainer"))||e.scrollTo(0,999999)}),0)}),[]),B=(0,a.useCallback)((function(){E(!0),T()}),[T]),I=(0,a.useMemo)((function(){var e=!0;return Object.values(O).forEach((function(t){e=e&&t.done})),e}),[O]),W=(0,a.useCallback)((function(e,t){C((function(n){var a;return Ye(Ye({},n),{},((a={})[e]=Ye(Ye({},n[e]),t),a))}))}),[]),N=(0,a.useMemo)((function(){return m&&I&&S}),[I,S,m]);(0,a.useEffect)((function(){N&&T()}),[N,T]);var H=(0,a.useRef)({}),z=(0,a.useCallback)((function(e){H.current[e]||(H.current[e]=!0,W(e,{typingEnd:!0}),T(),setTimeout((function(){e!==_||d.current?W(e,{done:!0}):u.current.once(ze,(function(){W(e,{done:!0})})),T()}),1e3))}),[_,W,T]),F=(0,a.useMemo)((function(){return b.map((function(e,t){return function(){return z(t)}}))}),[z,b]),L=(0,a.useMemo)((function(){return(0,v.jsx)(Ge.default,{as:l.default,mt:"auto",alignSelf:{base:"stretch",sm:"flex-start"},visible:N,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:300,delay:150}},children:(0,v.jsx)(o.default,{onPromise:t,type:"primary",size:"xl",minW:160,children:s.formatMessage({id:"action__lets_go"})})})}),[N,t,s]),K=(0,a.useCallback)((function(){d.current||(d.current=!0,u.current.emit(ze),setTimeout((function(){h(!0),T()}),300))}),[T]);(0,a.useImperativeHandle)(r,(function(){return{handleWalletCreated:K}}));var V=(0,a.useCallback)((function(e){return(0,v.jsx)(Ue.default.NormalText,{children:e})}),[]),U=(0,a.useCallback)((function(e){return(0,v.jsx)(Ue.default.Highlight,{children:e})}),[]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(l.default,{minH:null!=i?i:{base:480,sm:320},maxH:"full",flexGrow:{base:1,sm:0},children:[(0,v.jsxs)(l.default,{flex:1,justifyContent:"flex-end",mb:{base:12,sm:0},children:[b.map((function(e,t){var n=O[t-1],a=O[t],r=!1,o=!1;if(n&&(r=!n.done),a&&(o=a.done&&a.typingEnd),!n||n.typingEnd)return(0,v.jsx)(Ue.default,{onTypingEnd:F[t],isPending:r,isFadeOut:o,children:s.formatMessage({id:e.text},{a:V,b:U})},t)})),R.typingEnd&&!I?(0,v.jsx)(Ue.default,{}):void 0,R.typingEnd&&I?(0,v.jsx)($.default,{onPress:t,children:(0,v.jsx)(Ue.default,{isPending:!R.done,onTypingEnd:B,children:(0,v.jsxs)(Ue.default.NormalText,{children:[s.formatMessage({id:"content__your_wallet_is_now_ready"},{b:U})," ","\ud83d\ude80"]})})}):void 0,S?(0,v.jsx)(Ue.default,{}):void 0]}),(0,v.jsx)(l.default,{mt:16,minH:"50px",children:N?L:void 0})]}),(0,v.jsx)(Ve.default,{children:void 0})]})}var $e=(0,a.forwardRef)((function(e,t){var n=Object.assign({},((0,Ke.default)(e),e));return(0,v.jsx)(Ze,Ye(Ye({},n),{},{forwardedRef:t}))}));$e.displayName="ProcessAutoTypingRef";const et=$e;var tt=n(592323),nt=n(943910);function at(e){var t=e.src,n=e.routePath,r=e.customReceiveHandler,o=e.onWebViewRef,i=e.isSpinnerLoading,s=e.onContentLoaded,l=(0,nt.useThemeProviderVariant)(),u=l.themeVariant,d=l.localeVariant,c=(0,a.useMemo)((function(){if(!t)return k.default.isNativeAndroid?{uri:"file:///android_asset/web-embed/index.html"}:k.default.isNativeIOS?{uri:"web-embed/index.html"}:void 0}),[t]);return(0,v.jsx)(tt.default,{src:t||"",onContentLoaded:s,isSpinnerLoading:i,onWebViewRef:o,customReceiveHandler:r,nativeWebviewSource:c,nativeInjectedJavaScriptBeforeContentLoaded:`\n        window.location.hash = "${n||""}";\n        window.WEB_EMBED_ONEKEY_APP_SETTINGS = {\n          themeVariant: "${u}",\n          localeVariant: "${d}",\n        };\n      `})}function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){(0,C.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function it(e){var t=e.onPressFinished,n=e.forwardedRef,r=e.pausedProcessIndex,o=e.onContentLoaded,i=(0,a.useRef)(null),s=(0,a.useCallback)((function(e,n){var a=e.data;"$private"===e.scope&&(null==a?void 0:a.method)===Le&&t()}),[t]),l=(0,a.useCallback)((function(e){i.current=e}),[]),u=(0,a.useCallback)((function(){var e,t;null==(e=i.current)||null==(t=e.jsBridge)||t.request({data:{method:Fe},scope:"$private"})}),[]);(0,a.useImperativeHandle)(n,(function(){return{handleWalletCreated:u}}));var d=`/onboarding/auto_typing?pausedProcessIndex=${null!=r?r:1}`;return(0,v.jsx)(at,{isSpinnerLoading:!0,onContentLoaded:o,onWebViewRef:l,customReceiveHandler:s,routePath:d,src:void 0})}var st=(0,a.forwardRef)((function(e,t){var n=Object.assign({},((0,Ke.default)(e),e));return(0,v.jsx)(it,ot(ot({},n),{},{forwardedRef:t}))}));st.displayName="ProcessAutoTypingWebViewRef";var lt=(0,a.memo)((function(e){var t=e.routeParams,n=e.handleWalletCreated,r=e.shouldStartCreating,o=e.onPressOnboardingFinished,i=e.setIsNavBackDisabled,l=(0,g.default)(),u=(0,be.default)(),d=(0,Ne.useOnboardingClose)().onboardingGoBack,c=t.password,f=t.mnemonic,p=t.withEnableAuthentication,m=t.isHardwareCreating,x=t.entry,b=(0,ve.useOnboardingContext)(),y=null==b?void 0:b.forceVisibleUnfocused,v=(0,a.useCallback)((0,s.default)((function*(){try{var e,t=null==m?void 0:m.device,n=null==m?void 0:m.features;return!(!t||!n)&&(yield h.default.serviceAccount.createHWWallet({features:n,connectId:null!=(e=t.connectId)?e:""}),null==y||y(),!0)}catch(d){Te.default.common.error(d),null!=u.canGoBack&&u.canGoBack()&&"walletSelector"===x&&(Te.default.common.info("go back when entry is wallet selector"),setTimeout((function(){return u.goBack()}),300));var a=d||{},r=a.className,i=a.message,s=a.data;r===Ee.OneKeyErrorClassNames.OneKeyAlreadyExistWalletError?(setTimeout((function(){var e=(s||{}).walletName;e&&O.default.show({title:l.formatMessage({id:"msg__wallet_already_exist_activated_automatically"},{0:e})},{type:"default"})}),1100),null==o||o()):r===Ee.OneKeyErrorClassNames.OneKeyHardwareError?Re.deviceUtils.showErrorToast(d):O.default.show({title:i},{type:"default"})}return!1})),[null==m?void 0:m.device,null==m?void 0:m.features,y,o,l,u,x]),_=(0,a.useCallback)((0,s.default)((function*(){if(!c||!f)return!1;try{yield(0,Oe.wait)(300);var e=performance.now();Te.default.onBoarding.info("startCreatingHDWallet"),Be.default.clear(Be.ETimelinePerfNames.createHDWallet),Be.default.mark({name:Be.ETimelinePerfNames.createHDWallet,title:"onboarding.createHDWallet >> start ==========================="}),yield h.default.serviceAccount.createHDWallet({password:c,mnemonic:f,dispatchActionDelay:300,postCreatedDelay:600}),Be.default.mark({name:Be.ETimelinePerfNames.createHDWallet,title:"onboarding.createHDWallet >> createHDWallet DONE"}),p&&(h.default.dispatch((0,Ie.setEnableLocalAuthentication)(!0)),(0,We.savePassword)(c));var t=performance.now();return Be.default.mark({name:Be.ETimelinePerfNames.createHDWallet,title:"onboarding.createHDWallet >> end"}),Te.default.onBoarding.info("startCreatingHDWallet done!",Math.round(t-e)),!0}catch(a){Te.default.common.error(a);var n=a.key;O.default.show({title:l.formatMessage({id:n})},{type:"error"})}return!1})),[l,f,c,p]);return(0,a.useEffect)((function(){(0,s.default)((function*(){if(r&&y){(m?yield v():yield _())?n():(null==i||i(!1),setTimeout((function(){return d()}),600))}}))()}),[i,y,d,n,_,m,v,r]),null}));const ut=(0,a.memo)((function(){var e=(0,we.useOnboardingDone)(),t=(0,m.useRoute)().params||{},n=(0,a.useState)(!0),r=(0,D.default)(n,2),o=r[0],i=r[1];!function(e){var t=e.condition,n=(0,m.useNavigation)(),r=(0,a.useCallback)((function(e,t,a){for(var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).applyToAllParent,o=void 0!==r&&r,i=n;i&&i[e];){var s;i[e](t,a),i=o?null==(s=i)||null==s.getParent?void 0:s.getParent():void 0}}),[n]);(0,a.useEffect)((function(){if(k.default.isNativeAndroid){var e=function(e){t&&(null==e||null==e.preventDefault||e.preventDefault())};return r("addListener","beforeRemove",e),function(){r("removeListener","beforeRemove",e)}}}),[t,n,r]),(0,a.useLayoutEffect)((function(){t&&n.setOptions({gestureEnabled:!1,headerLeft:null})}),[n,t])}({condition:o});var u=(0,a.useRef)(null),d=!1,c=(0,a.useState)(!1),f=(0,D.default)(c,2),p=f[0],g=f[1];(0,a.useEffect)((function(){var e=setTimeout((function(){return g(!0)}),(0,Oe.getTimeDurationMs)({minute:1}));return function(){clearTimeout(e)}}),[]);var h=(0,a.useState)(!0),x=(0,D.default)(h,2),y=x[0],_=(x[1],null!=t&&t.isHardwareCreating,1),j=(0,a.useRef)(),w=(0,a.useCallback)((function(){Te.default.onBoarding.info("Wallet Created Success !!!!"),u.current&&u.current.handleWalletCreated(),clearInterval(j.current),j.current=setInterval((function(){Te.default.onBoarding.info("handleWalletCreated interval recheck"),u&&u.current&&u.current.handleWalletCreated&&u.current.handleWalletCreated()}),3e3)}),[]);(0,a.useEffect)((function(){var e=setTimeout((function(){clearInterval(j.current)}),18e4);return function(){clearInterval(j.current),clearTimeout(e)}}),[]);var O=(0,a.useCallback)((0,s.default)((function*(){i(!1),yield e({delay:600})})),[e]),C=((0,a.useMemo)((function(){return null}),[d,O,_]),(0,a.useMemo)((function(){return(0,v.jsx)(et,{ref:u,onPressFinished:O,pausedProcessIndex:_})}),[d,O,_]));return(0,v.jsxs)(b.default,{backButton:!1,showCloseButton:p,fullHeight:!0,children:[(0,v.jsx)(lt,{routeParams:t,handleWalletCreated:w,shouldStartCreating:y,onPressOnboardingFinished:O,setIsNavBackDisabled:i}),(0,v.jsx)(l.default,{flex:1,h:"full",w:"full",minH:{base:480,sm:320},justifyContent:"flex-end",children:C})]})}));var dt=n(483144),ct=n(459740),ft=["onPressSavedPhrase","mnemonic"];function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){(0,C.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const gt=function(e){var t=e.onPressSavedPhrase,n=e.mnemonic,r=(0,ct.default)(e,ft),i=(0,g.default)(),u=(0,p.default)(),d=(0,a.useCallback)((0,s.default)((function*(){null==t||t(),yield(0,Oe.wait)(3e3)})),[t]);return(0,v.jsxs)(l.default,mt(mt({alignSelf:"stretch",flex:1},r),{},{children:[(0,v.jsxs)(me.default,{typography:"Body2",color:"text-subdued",textAlign:"center",mb:4,children:["\u2193 ",i.formatMessage({id:"content__click_below_to_copy"})," \u2193"]}),(0,v.jsx)(l.default,{flex:1,mb:8,children:(0,v.jsx)(dt.default,{mnemonic:n})}),(0,v.jsx)(me.default,{typography:"Body2",color:"text-subdued",textAlign:"center",mb:4,children:i.formatMessage({id:"content__save_phrase_securely"})}),(0,v.jsx)(o.default,{type:"primary",size:u?"xl":"base",onPromise:d,children:i.formatMessage({id:"action__i_have_saved_the_phrase"})})]}))};var ht=function(e){var t=e.onPressShowPhraseButton,n=e.onPressSavedPhrase,r=e.mnemonic,i=(0,g.default)(),s=(0,p.default)(),l=(0,a.useState)(!1),u=(0,D.default)(l,2),c=u[0],f=u[1];return(0,v.jsx)(d.default,{flex:{sm:1},mt:"auto",children:c?(0,v.jsx)(_e.Hidden,{from:"base",till:"sm",children:(0,v.jsx)(Ge.default,{visible:c,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:150}},style:{flex:1,alignSelf:"stretch"},children:(0,v.jsx)(gt,{mnemonic:r,onPressSavedPhrase:n})})}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(_e.Hidden,{from:"base",till:"sm",children:(0,v.jsx)(me.default,{typography:"Body2",mb:4,textAlign:"center",children:i.formatMessage({id:"content__read_information_on_the_left"})})}),(0,v.jsx)(o.default,{type:"primary",size:s?"xl":"base",alignSelf:s?"stretch":"auto",onPress:s?t:function(){f(!0)},children:i.formatMessage({id:"action__show_recovery_phrase"})})]})})};ht.defaultProps={};const xt=ht;var bt=function(e){return"critical"===e?{bgColor:"surface-critical-default",iconColor:"icon-critical"}:"warning"===e?{bgColor:"surface-warning-default",iconColor:"icon-warning"}:{bgColor:"decorative-surface-one",iconColor:"decorative-icon-one"}};const yt=function(){var e=(0,g.default)(),t=(0,m.useNavigation)(),n=(0,m.useRoute)(),r=n.params.mnemonic,o=(0,a.useCallback)((function(){t.replace(A.EOnboardingRoutes.ShowRecoveryPhrase,n.params)}),[t,n.params]),i=(0,a.useCallback)((function(){t.replace(A.EOnboardingRoutes.BehindTheScene,n.params)}),[t,n.params]),s=(0,a.useMemo)((function(){return[{type:"decorative",icon:"LockClosedOutline",para:e.formatMessage({id:"modal__attention_unlock"})},{type:"decorative",icon:"DotsCircleHorizontalOutline",para:e.formatMessage({id:"content__recovery_phrase_restore"})},{type:"warning",icon:"ShieldCheckOutline",para:e.formatMessage({id:"backup__manual_backup_warning_never_ask"})},{type:"critical",icon:"EyeSlashOutline",para:e.formatMessage({id:"modal__attention_shh"})}]}),[e]);return(0,v.jsx)(b.default,{title:e.formatMessage({id:"title__recovery_phrase"}),description:e.formatMessage({id:"title__recovery_phrase_desc"}),secondaryContent:(0,v.jsx)(xt,{mnemonic:r,onPressShowPhraseButton:o,onPressSavedPhrase:i}),fullHeight:!0,children:(0,v.jsx)(l.default,{my:-3,mt:{base:4,sm:0},children:s.map((function(e,t){var n,a;return(0,v.jsxs)(l.default,{flexDir:"row",alignItems:"center",py:3,children:[(0,v.jsx)(l.default,{p:2.5,mr:4,rounded:"full",bgColor:null==(n=bt(e.type))?void 0:n.bgColor,alignSelf:"flex-start",children:(0,v.jsx)(c.default,{name:e.icon,color:null==(a=bt(e.type))?void 0:a.iconColor,size:20})}),(0,v.jsx)(me.default,{flex:1,typography:"Body2",children:e.para})]},t)}))})})};var vt=n(612210),_t=n(268883),jt=n(747225),wt=n(793525),Ot=function(){var e=(0,g.default)();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(_e.Hidden,{from:"base",till:"sm",children:(0,v.jsx)(l.default,{p:3,rounded:"full",bgColor:"decorative-surface-one",alignSelf:"flex-start",children:(0,v.jsx)(c.default,{name:"LockClosedOutline",color:"decorative-icon-one"})})}),(0,v.jsx)(me.default,{typography:"Body2",mt:{base:16,sm:8},children:e.formatMessage({id:"content__password_usage"})}),(0,v.jsx)(me.default,{typography:"Body2",mt:4,children:e.formatMessage({id:"content__password_security"})})]})};Ot.defaultProps={};const Ct=Ot;function Mt(e){var t=e.onNext,n=e.onClose,a=(0,g.default)(),r=(0,be.default)();return(0,v.jsx)(vt.default,{visible:!0,contentProps:{iconType:"info",title:a.formatMessage({id:"modal__youre_importing_a_hot_wallet"}),content:a.formatMessage({id:"modal__youre_importing_a_hot_wallet_desc"})},footerButtonProps:{secondaryActionProps:{size:"xl"},primaryActionProps:{size:"xl",type:"primary",children:a.formatMessage({id:"action__confirm"})},onPrimaryActionPress:function(){null==n||n(),null==t||t()},onSecondaryActionPress:function(){null==n||n(),r.goBack()}}})}var Dt=(0,a.memo)((function(e){var t=e.password,n=e.withEnableAuthentication,r=e.importedMnemonic,o=(0,m.useNavigation)();return(0,a.useEffect)((function(){function e(){return(e=(0,s.default)((function*(){var e=yield h.default.engine.generateMnemonic();yield(0,Oe.wait)(600),o.replace(A.EOnboardingRoutes.RecoveryPhrase,{password:t,mnemonic:e,withEnableAuthentication:n})}))).apply(this,arguments)}return function(){if(r)return function(e){var a=setTimeout((function(){(0,wt.showDialog)((0,v.jsx)(Mt,{onNext:function(){o.replace(A.EOnboardingRoutes.BehindTheScene,{password:t,mnemonic:e,withEnableAuthentication:n})}}))}),600);return function(){return clearTimeout(a)}}(r);!function(){e.apply(this,arguments)}()}()}),[]),(0,v.jsx)(d.default,{h:"full",w:"full",children:(0,v.jsx)(ce.default,{size:"lg"})})}));const Pt=function(){var e,t,n=(0,g.default)(),r=(0,jt.useData)().isPasswordSet,o=(0,m.useRoute)(),i=null==(e=o.params)?void 0:e.mnemonic,s=null==o||null==(t=o.params)?void 0:t.disableAnimation,l=(0,a.useMemo)((function(){return r?n.formatMessage({id:"Verify_Password"}):n.formatMessage({id:"title__set_password"})}),[n,r]),u=(0,a.useMemo)((function(){return r?n.formatMessage({id:"Verify_password_to_continue"}):void 0}),[n,r]);return(0,v.jsx)(b.default,{fullHeight:!0,disableAnimation:s,title:l,subTitle:u,secondaryContent:(0,v.jsx)(Ct,{}),children:(0,v.jsx)(_t.default,{isAutoHeight:!0,hideTitle:!0,walletId:null,skipSavePassword:!0,field:_t.ValidationFields.Wallet,children:function(e,t){var n=t.withEnableAuthentication;return(0,v.jsx)(Dt,{password:e,withEnableAuthentication:n,importedMnemonic:i})}})})};const kt=function(){var e=(0,g.default)(),t=(0,m.useNavigation)(),n=(0,m.useRoute)(),r=n.params.mnemonic,o=(0,a.useCallback)((function(){t.replace(A.EOnboardingRoutes.BehindTheScene,n.params)}),[t,n.params]);return(0,v.jsx)(b.default,{title:e.formatMessage({id:"content__click_below_to_copy"}),description:e.formatMessage({id:"modal__for_your_eyes_only_desc"}),fullHeight:!0,secondaryContent:(0,v.jsx)(gt,{mnemonic:r,onPressSavedPhrase:o})})};var At=n(805679),St=n(220033),Et=n(574393),Rt=n(535307),Tt=function(e){var t=e.children;return(0,v.jsx)(l.default,{p:"8px",w:{base:"100%",sm:"1/3"},children:t})},Bt=function(){var e,t=(0,g.default)(),n=(0,m.useNavigation)(),r=(0,be.default)(),o=(0,m.useRoute)(),i=(0,ve.useOnboardingContext)(),u=null==i?void 0:i.forceVisibleUnfocused,d=(0,a.useState)(!1),c=(0,D.default)(d,2),f=c[0],p=c[1],x=h.default.serviceCloudBackup,_=null==o||null==(e=o.params)?void 0:e.disableAnimation,j=(0,a.useState)(!1),w=(0,D.default)(j,2),C=w[0],M=w[1],P=function(){var e=(0,s.default)((function*(){return(yield x.getBackupStatus()).hasPreviousBackups}));return function(){return e.apply(this,arguments)}}(),S=(0,At.default)("getBackupStatus",P,{refreshInterval:3e4,revalidateOnMount:!1,revalidateOnFocus:!1,shouldRetryOnError:!1,isPaused:function(){return!f},onSuccess:function(e){M(e)}}),E=S.mutate,R=S.isValidating;(0,a.useEffect)((function(){f||x.loginIfNeeded(!1).then((function(e){p(e),e&&E()}))}),[f,E,x]);var T=(0,a.useCallback)((function(e){n.navigate(A.EOnboardingRoutes.RecoveryWallet,{mode:e,disableAnimation:_})}),[_,n]),B=(0,a.useCallback)((function(){n.navigate(A.EOnboardingRoutes.Migration,{disableAnimation:!1})}),[n]),I=(0,a.useCallback)((function(){null==u||u(),r.navigate(ye.RootRoutes.Modal,{screen:ye.ModalRoutes.CreateWallet,params:{screen:ye.CreateWalletModalRoutes.OnekeyLiteRestorePinCodeVerifyModal}})}),[r,u]),W=(0,a.useCallback)((function(){n.navigate(A.EOnboardingRoutes.KeyTag,{screen:y.KeyTagRoutes.ImportKeytag})}),[n]),N=(0,a.useCallback)((function(){f?C&&n.navigate(A.EOnboardingRoutes.RestoreFromCloud):x.loginIfNeeded(!0).then((function(e){p(e),e&&(E(),C&&n.navigate(A.EOnboardingRoutes.RestoreFromCloud))})).catch((function(e){"NETWORK"===e.message&&O.default.show({title:t.formatMessage({id:"title__no_connection_desc"})},{type:"error"})}))}),[C,t,f,E,n,x]);return(0,v.jsx)(b.default,{disableAnimation:_,title:t.formatMessage({id:"action__import_wallet"}),description:t.formatMessage({id:"onboarding__import_wallet_desc"}),children:(0,v.jsxs)(l.default,{m:-2,flexDirection:{base:"column",sm:"row"},flexWrap:"wrap",children:[(0,v.jsx)(Tt,{children:(0,v.jsx)(Rt.OptionRecoveryPhrase,{title:t.formatMessage({id:"title__recovery_phrase"}),onPress:function(){T("mnemonic")}})}),(0,v.jsx)(Tt,{children:(0,v.jsx)(Rt.OptionPrivateKey,{icon:"KeyOutline",title:t.formatMessage({id:"form__private_key"}),onPress:function(){T("imported")}})}),(k.default.isNativeIOS||k.default.isNativeAndroidGooglePlay)&&(0,v.jsx)(Tt,{children:(0,v.jsx)(Rt.OptioniCloud,{title:t.formatMessage({id:"action__restore_from_icloud"},{cloudName:(0,St.backupPlatform)().cloudName}),onPress:N,isDisabled:!C,isLoading:R})}),Et.MigrationEnable&&(0,v.jsx)(Tt,{children:(0,v.jsx)(Rt.OptionMigration,{title:t.formatMessage({id:"title__migration"}),onPress:B})}),xe.default&&(0,v.jsx)(Tt,{children:(0,v.jsx)(Rt.OptionOneKeyLite,{title:t.formatMessage({id:"onboarding__import_wallet_with_lite"}),onPress:I})}),(0,v.jsx)(Tt,{children:(0,v.jsx)(Rt.OptionKeyTag,{title:"KeyTag",onPress:W})}),(0,v.jsx)(Tt,{children:(0,v.jsx)(Rt.OptionAdress,{icon:"EyeOutline",title:t.formatMessage({id:"wallet__watched_accounts"}),onPress:function(){T("watching")}})})]})})};Bt.defaultProps={};const It=Bt;n(643222);var Wt=n(742903),Nt=(n(108952),n(159105)),Ht=n(480058),zt=n(468702),Ft=n(433996),Lt=n(311631);const Kt=n.p+"static/media/account_details_on_metamask.eee42d5b7d55e0563e4d.png",Vt=n.p+"static/media/desk_reveal.20570ffcba61137a930c.png",Ut=n.p+"static/media/desk_security.6671c2f45536e2a25646.png",Gt=n.p+"static/media/desk_settings.19ce0c7905fc190cb953.png",Qt=n.p+"static/media/desk_topbar.141ef7ad1793c7834358.png",qt=n.p+"static/media/logo_metamask.dd1c33eb406547593441.png",Jt=n.p+"static/media/mobile_reveal.f0a02ba0fef55ea123b0.png",Xt=n.p+"static/media/mobile_security.f850c96eb29c9a7f7117.png",Yt=n.p+"static/media/mobile_settings.45b9346358771aec3d6e.png",Zt=n.p+"static/media/mobile_show_private_key.64d703380fecee429013.png",$t=n.p+"static/media/mobile_topbar.2ea77d7b96a66848f0ec.png";const en=function(e){var t=e.visible,n=e.onClose,r=e.mode,o=(0,Lt.useSafeAreaInsets)(),i=(0,p.default)(),s=(0,g.default)(),u=(0,a.useMemo)((function(){return"mnemonic"===r?[{desc:i?s.formatMessage({id:"content__native_metamask_tutorials_1"}):s.formatMessage({id:"content__ext_metamask_tutorials_1"}),image:i?$t:Qt,imageHeight:i?"51px":"56px"},{desc:s.formatMessage({id:"content__native_metamask_tutorials_2"}),image:i?Yt:Gt,imageHeight:i?"107px":"103px"},{desc:s.formatMessage({id:"content__native_metamask_tutorials_3"}),image:i?Xt:Ut,imageHeight:i?"99px":"110px"},{desc:s.formatMessage({id:"content__native_metamask_tutorials_4"}),image:i?Jt:Vt,imageHeight:i?"59px":"66px"},{desc:s.formatMessage({id:"content__native_metamask_tutorials_5"})}]:[{desc:i?s.formatMessage({id:"content__native_metamask_tutorials_1"}):s.formatMessage({id:"content_click_account_details"}),image:i?$t:Kt,imageHeight:i?"51px":"233px"},{desc:i?s.formatMessage({id:"content__native_metamask_tutorials_2"}):s.formatMessage({id:"content__click_on_show_private_key"}),image:i?Yt:Zt,imageHeight:i?"107px":"66px"},{desc:i?s.formatMessage({id:"content__native_metamask_tutorials_3"}):s.formatMessage({id:"content__copy_and_private_key"}),image:i?Xt:"",imageHeight:i?"99px":"110px"},{desc:i?s.formatMessage({id:"content__click_on_show_private_key"}):"",image:i?Zt:"",imageHeight:"59px"},{desc:i?s.formatMessage({id:"content__copy_and_private_key"}):""}]}),[s,i,r]);return(0,v.jsxs)(Ge.default,{as:Ht.default,position:"absolute",top:0,right:0,bottom:0,left:0,visible:t,initial:{opacity:0},animate:{opacity:1,transition:{duration:150}},children:[i?null:(0,v.jsx)($.default,{top:0,right:0,bottom:0,left:0,bgColor:"backdrop",opacity:.75,onPress:n}),(0,v.jsxs)(Ge.default,{visible:t,as:l.default,top:0,right:0,bottom:0,w:"full",maxW:"400px",pt:`${16+o.top}px`,bgColor:"background-default",pointerEvents:"auto",initial:{opacity:0,translateX:400},animate:{opacity:1,translateX:0,transition:{duration:150}},children:[(0,v.jsx)(Ft.default,{type:"plain",circle:!0,size:"lg",name:"XMarkOutline",alignSelf:"flex-end",onPress:n,mr:4}),(0,v.jsxs)(zt.ScrollView,{flex:1,px:{base:6,sm:12},children:[(0,v.jsx)(z.default,{source:qt,size:8,rounded:"xl",borderWidth:te.default.hairlineWidth,borderColor:"border-subdued"}),(0,v.jsx)(me.default,{mt:4,mb:8,typography:"DisplayLarge",children:s.formatMessage({id:"content__import_wallet_from_str"},{0:"MetaMask"})}),u.map((function(e,t){return(0,v.jsxs)(l.default,{mb:8,children:[e.desc&&(0,v.jsxs)(me.default,{typography:"Body2",mb:4,children:[t+1,". ",e.desc]}),e.image&&(0,v.jsx)(z.default,{w:"full",h:e.imageHeight,source:e.image,resizeMode:"cover"})]},t)}))]})]})]})};var tn=function(e){var t=e.onPressDrawerTrigger,n=e.mode,r=(0,g.default)(),o=(0,L.useNavigation)(),i=(0,a.useMemo)((function(){return"mnemonic"===n?[{title:"content__never_import_your_hadware_wallets_recovery_phrase",description:"content__never_import_your_hadware_wallets_recovery_phrase_desc",element:(0,v.jsx)($.default,{mx:-2,mt:"8px",onPress:function(){o.navigate(A.EOnboardingRoutes.ConnectHardwareModal)},children:function(e){var t=e.isHovered,n=e.isPressed;return(0,v.jsxs)(l.default,{flexDir:"row",py:{base:"12px",sm:"8px"},px:"8px",bgColor:n?"surface-pressed":t?"surface-hovered":void 0,rounded:"xl",children:[(0,v.jsx)(J.default,{size:"xs",walletImage:"hw"}),(0,v.jsx)(me.default,{flex:1,typography:"Body2Strong",ml:"12px",children:r.formatMessage({id:"action__connect_hardware_wallet"})}),(0,v.jsx)(c.default,{name:"ChevronRightMini",color:"icon-subdued",size:20})]})}})},{title:"content__where_find_phrase"}]:"imported"===n?[{title:"content__what_is_private_key",description:"content__what_is_private_key_desc"},{title:"content__safe_to_enter_into_onekey",description:"content__safe_to_enter_into_onekey_desc"},{title:"content__where_find_private_key"}]:[{title:"content__what_is_watch_only_account",description:"content__what_is_watch_only_account_desc"}]}),[n,r,o]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(_e.Hidden,{from:"base",till:"sm",children:(0,v.jsx)(l.default,{p:3,rounded:"full",bgColor:"decorative-surface-one",alignSelf:"flex-start",children:(0,v.jsx)(c.default,{name:"DotsCircleHorizontalOutline",color:"decorative-icon-one"})})}),(0,v.jsx)(l.default,{mt:{base:16,sm:8},children:i.map((function(e,n){var a;return(0,v.jsxs)(l.default,{mb:n===i.length-1?0:"24px",children:[e.title&&(0,v.jsx)(me.default,{typography:"Body2Strong",children:r.formatMessage({id:e.title})}),e.description?(0,v.jsx)(me.default,{typography:"Body2",color:"text-subdued",mt:"8px",children:r.formatMessage({id:e.description})}):(0,v.jsx)($.default,{mx:-2,mt:"8px",onPress:t,children:function(e){var t=e.isHovered,n=e.isPressed;return(0,v.jsxs)(l.default,{flexDir:"row",py:{base:"12px",sm:"8px"},px:"8px",bgColor:n?"surface-pressed":t?"surface-hovered":void 0,rounded:"xl",children:[(0,v.jsx)(z.default,{source:qt,size:5,borderWidth:te.default.hairlineWidth,borderColor:"border-subdued",rounded:"lg"}),(0,v.jsx)(me.default,{flex:1,typography:"Body2Strong",ml:"12px",children:"MetaMask"}),(0,v.jsx)(c.default,{name:"ChevronRightMini",color:"icon-subdued",size:20})]})}}),null!=(a=e.element)?a:null]},n)}))})]})};tn.defaultProps={};const nn=tn;var an=function(){var e=(0,g.default)(),t=(0,fe.default)("background-default"),n=(0,L.useAppSelector)((function(e){return e.runtime.onBoardingLoadingBehindModal})),r=(0,a.useState)(!1),o=(0,D.default)(r,2),i=o[0],s=o[1],l=(0,m.useRoute)(),u=(0,a.useCallback)((function(){s(!0)}),[]),c=l.params,f=c.disableAnimation,p=c.mode,h="mnemonic"===p,x=(0,Nt.useAccessory)(),y=x.valueText,_=(x.accessoryData,x.onChangeText),j=(x.onSelectedKeybordAcessory,(0,a.useMemo)((function(){return"mnemonic"===p?"title__import_recovery_phrase":"imported"===p?"title__import_private_key":"wallet__watched_accounts"}),[p]));return n?(0,v.jsx)(d.default,{bgColor:t,flex:1,height:"full",children:(0,v.jsx)(ce.default,{size:"lg"})}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(b.default,{disableAnimation:f,title:e.formatMessage({id:j}),secondaryContent:(0,v.jsx)(nn,{mode:p,onPressDrawerTrigger:u}),children:(0,v.jsx)(Wt.OnboardingAddExistingWallet,{inputMode:p,onChangeTextForMnemonic:h?_:void 0,valueTextForMnemonic:h?y:void 0})}),(0,v.jsx)(en,{visible:i,onClose:function(){return s(!1)},mode:p}),!1]})};an.defaultProps={};const rn=an;var on,sn=n(812530);!function(e){e[e.Connecting=0]="Connecting",e[e.Success=1]="Success",e[e.Fail=2]="Fail"}(on||(on={}));var ln=(0,a.createContext)(null);function un(e){var t=e.children,n=e.inputValue,r=(0,a.useState)((function(){var e=0;return n&&(null==n?void 0:n.length)>0&&(e=1),(0,sn.httpServerEnable)()||(e=1),{inputValue:n,selectRange:e}})),o=(0,D.default)(r,2),i=o[0],s=o[1],l=(0,a.useMemo)((function(){return{context:i,setContext:s}}),[i]);return(0,v.jsx)(ln.Provider,{value:l,children:t})}function dn(){return(0,a.useContext)(ln)}var cn=n(231846),fn=n(170766),pn=n(759900),mn=n(529710),gn=n(453028),hn=n(119804),xn=n(707379),bn=n(7075),yn=n(45668),vn=n(447325),_n=n(249831),jn=n(91516),wn=n(153894),On=n(249850);var Cn=n(259825),Mn=n(896953),Dn=n(470310);function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach((function(t){(0,C.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var An=function(e){var t=e.deviceInfo,n=e.confirmPress,r=e.closeOverlay,i=(0,g.default)(),u=(0,Et.parseDeviceInfo)(t),d=(0,Et.parseDeviceInfo)((0,Et.deviceInfo)()),f=(0,a.useState)(!1),p=(0,D.default)(f,2),m=p[0],h=p[1],x=(0,a.useCallback)((0,s.default)((function*(){(yield null==n?void 0:n(!0))&&r()})),[r,n]),b=(0,a.useCallback)((function(){null==n||n(!1),r()}),[r,n]);return(0,v.jsxs)(Cn.default,{title:i.formatMessage({id:"modal__send_data_request"}),closeOverlay:b,children:[(0,v.jsxs)(l.default,{bgColor:"surface-default",borderRadius:"12px",borderColor:"border-subdued",borderWidth:1,py:"16px",children:[(0,v.jsx)(me.default,{typography:"Body2",color:"text-subdued",ml:"16px",children:i.formatMessage({id:"content__to"})}),(0,v.jsxs)(l.default,{paddingX:"16px",flexDirection:"row",mt:"12px",children:[(0,v.jsx)(c.default,{name:u.logo,size:24,color:"icon-subdued"}),(0,v.jsx)(me.default,{ml:"8px",typography:"Body1Strong",children:u.name})]})]}),(0,v.jsx)(Mn.default,{w:"full",mt:"24px",isChecked:m,defaultIsChecked:!1,onChange:function(e){h(e)},title:i.formatMessage({id:"modal__send_data_request_checkbox_label"},{to:u.name,from:d.name}),description:i.formatMessage({id:"modal__send_data_request_desc"})}),(0,v.jsxs)(Dn.default,{mt:"24px",space:"12px",w:"full",children:[(0,v.jsx)(o.default,{flex:1,size:"xl",type:"basic",onPress:b,children:i.formatMessage({id:"action__reject"})}),(0,v.jsx)(o.default,{flex:1,isDisabled:!m,size:"xl",type:"primary",onPromise:x,children:i.formatMessage({id:"action__confirm"})})]})]})};function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(n),!0).forEach((function(t){(0,C.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rn=(0,a.memo)((function(e){var t=e.qrcode,n=e.refreshQrcode,r=(0,g.default)(),o=h.default.serviceHTTP,i=h.default.serviceMigrate,u=(0,jn.useExportData)().exportDataRequest,d=(0,m.useNavigation)(),f=(0,a.useRef)(!1),p=(0,a.useCallback)((function(){var e=(0,Et.addressWithoutHttp)(t);(0,hn.copyToClipboard)(e),O.default.show({title:r.formatMessage({id:"msg__copied"})})}),[r,t]),x=(0,a.useCallback)((function(e){var t,a=e.type,l=e.data;if(a===bn.MigrateNotificationNames.ReceiveDataFromClient){var c=l.postData,p=l.requestId;try{if("string"!==typeof c)throw o.serverRespond({requestId:p,respondData:{success:!1,data:void 0,message:"postData is not string",code:xn.MigrateErrorCode.DecryptFail}}),new Error("postData is not string");var m=(0,Et.parseCloudData)(JSON.parse(c));if("string"!==typeof(null==m?void 0:m.public)||"string"!==typeof(null==m?void 0:m.private))throw o.serverRespond({requestId:p,respondData:{success:!1,data:void 0,message:"can not found public/private.",code:xn.MigrateErrorCode.DecryptFail}}),new Error("can not found public/private.");d.navigate(ye.RootRoutes.Onboarding,{screen:A.EOnboardingRoutes.MigrationPreview,params:{data:m}}),o.serverRespond({requestId:p,respondData:{success:!0}})}catch(y){console.error(y)}}else if(a===bn.MigrateNotificationNames.RequestDataFromClient){var g=l.requestId,h=l.url,x=new URL(h,"http://example.com").searchParams.get("deviceInfo");if("string"===typeof x&&!1===f.current){var b=JSON.parse(x);f.current=!0,t={deviceInfo:b,confirmPress:function(){var e=(0,s.default)((function*(e){if(f.current=!1,e){var t=yield u(),n=t.status,a=t.data;if(n===jn.ExportResult.SUCCESS&&l){var s=yield i.publicKey("Client"),d=yield i.encryptDataWithPublicKey(s,JSON.stringify(a));return!1===d?(o.serverRespond({requestId:g,respondData:{success:!1,code:xn.MigrateErrorCode.EncryptFail}}),O.default.show({title:r.formatMessage({id:"form__failed"})},{type:"error"}),!1):(o.serverRespond({requestId:g,respondData:{success:!0,data:d}}),O.default.show({title:`\ud83e\uddd9 ${r.formatMessage({id:"msg__data_sent_to_platform"},{platform:(0,Et.parseDeviceInfo)(b).name})}`}),!0)}return n===jn.ExportResult.EMPTY&&O.default.show({title:r.formatMessage({id:"msg__no_data_available"})}),!1}return o.serverRespond({requestId:g,respondData:{success:!1,code:xn.MigrateErrorCode.RejectData}}),!0}));return function(t){return e.apply(this,arguments)}}()},(0,wt.showOverlay)((function(e){return(0,v.jsx)(An,kn(kn({},t),{},{closeOverlay:e}))}))}}else a===bn.MigrateNotificationNames.UpdateQrcode&&n()}),[u,r,d,o,i,n]);return(0,a.useEffect)((function(){return vn.appUIEventBus.on(vn.AppUIEventBusNames.Migrate,x),function(){vn.appUIEventBus.removeAllListeners(vn.AppUIEventBusNames.Migrate)}}),[x]),(0,v.jsxs)(v.Fragment,{children:[t.length>0?(0,v.jsx)(l.default,{borderRadius:"24px",bgColor:"#FFFFFF",padding:"11px",size:"192px",borderWidth:te.default.hairlineWidth,borderColor:"border-subdued",shadow:"depth.1",children:(0,v.jsx)(gn.default,{value:`${Et.OneKeyMigrateQRCodePrefix}${t}`,size:170,logo:yn,logoSize:36,logoMargin:5,logoBackgroundColor:"white"})}):(0,v.jsx)(mn.default,{borderRadius:"12px",width:192,height:192}),t.length>0?(0,v.jsxs)($.default,{onPress:p,flexDirection:"row",mt:"16px",alignItems:"center",children:[(0,v.jsx)(c.default,{name:"LinkMini",size:20,color:"icon-subdued"}),(0,v.jsx)(me.default,{ml:"8px",typography:"Body1Strong",children:t})]}):(0,v.jsx)(pn.default,{shape:"Body1"})]})})),Tn=(0,a.memo)((function(){var e,t,n=(0,g.default)(),r=function(){var e=h.default.serviceMigrate,t=(0,a.useCallback)(function(){var t=(0,s.default)((function*(t){var n=yield e.connectServer(t);return!!n&&("string"===typeof n?("ERR_NETWORK"===n&&k.default.isNativeIOS&&(0,wt.showDialog)((0,v.jsx)(wn.default,{type:"localNetwork"})),!1):((0,On.showMigrateDataModal)({serverInfo:n,serverAddress:t}),!0))}));return function(e){return t.apply(this,arguments)}}(),[e]);return{connectServer:t}}(),i=r.connectServer,l=null==(e=dn())?void 0:e.context,u=null==(t=dn())?void 0:t.setContext,d=(0,m.useIsFocused)(),c=(0,a.useMemo)((function(){var e;return 0===(null==l||null==(e=l.inputValue)?void 0:e.replaceAll(" ","").length)}),[null==l?void 0:l.inputValue]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(fn.default,{leftIconName:"LinkSolid",rightCustomElement:(0,v.jsx)(Ft.default,{size:"xl",name:"ViewfinderCircleOutline",type:"plain",onPress:function(){(0,_n.gotoScanQrcode)((function(e){e.startsWith(Et.OneKeyMigrateQRCodePrefix)&&u&&u((function(t){return En(En({},t),{},{inputValue:e.replace(Et.OneKeyMigrateQRCodePrefix,"")})}))}))}}),size:"xl",w:"full",type:"text",value:null==l?void 0:l.inputValue,placeholder:"192.168.5.178:2997/1A2B",onChangeText:function(e){u&&u((function(t){return En(En({},t),{},{inputValue:e})}))}}),(0,v.jsx)(o.default,{type:"primary",size:"xl",w:"full",isDisabled:c,mt:"16px",onPromise:(0,s.default)((function*(){l&&(!(yield i(l.inputValue))&&d&&O.default.show({title:n.formatMessage({id:"msg__invalid_link_or_network_error"})},{type:"error"}))})),children:n.formatMessage({id:"action__connect"})})]})}));const Bn=function(){var e,t,n=(0,g.default)(),r=h.default.serviceHTTP,o=h.default.serviceMigrate,i=null==(e=dn())?void 0:e.context,l=null==(t=dn())?void 0:t.setContext,u=(0,a.useState)(""),c=(0,D.default)(u,2),f=c[0],p=c[1],m=(0,a.useRef)(""),x=(0,a.useCallback)((0,s.default)((function*(){var e="";if(m.current.length>0){var t=yield o.generateRandomNum();e=`${(0,Et.addressWithoutHttp)(m.current)}/${t}`}p(e)})),[o]),b=(0,a.useCallback)((0,s.default)((function*(){var e=yield r.startHttpServer(),t=e&&e.length>0;return m.current=t?e:"",t&&(Te.default.migrate.info("startHttpServer",e),yield x()),t})),[x,r]);return(0,a.useEffect)((function(){0===(null==i?void 0:i.selectRange)?b().then((function(e){l&&l((function(t){return En(En({},t),{},{serverStatus:e?on.Success:on.Fail})}))})):(o.clearMigrateInfo(),r.stopHttpServer(),p(""))}),[null==i?void 0:i.selectRange,r,o,l,b]),(0,v.jsxs)(v.Fragment,{children:[(0,sn.httpServerEnable)()?(0,v.jsx)(d.default,{mb:"16px",children:(0,v.jsx)(cn.default,{enabled:(null==i?void 0:i.serverStatus)===on.Success,selectedIndex:null==i?void 0:i.selectRange,onChange:function(e){l&&l((function(t){return En(En({},t),{},{selectRange:e})}))},values:[n.formatMessage({id:"content__qr_code"}),n.formatMessage({id:"content__enter_link"})],style:{width:192}})}):null,(0,v.jsx)(d.default,{flex:1,children:0===(null==i?void 0:i.selectRange)?(0,v.jsx)(Rn,{qrcode:f,refreshQrcode:x}):(0,v.jsx)(Tn,{})})]})};var In=["step","description"];function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){(0,C.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hn=function(e){var t=e.step,n=e.description,a=(0,ct.default)(e,In);return(0,v.jsxs)(l.default,Nn(Nn({flexDirection:"row"},a),{},{children:[(0,v.jsx)(d.default,{size:"28px",borderRadius:"full",bgColor:"surface-neutral-subdued",mr:"12px",children:(0,v.jsx)(me.default,{typography:"CaptionStrong",color:"text-subdued",children:t})}),(0,v.jsx)(me.default,{py:{base:"4px",md:"2px"},typography:{sm:"Body2",md:"Body1"},flex:1,children:n})]}))},zn=function(){var e,t=(0,g.default)(),n=null==(e=dn())?void 0:e.context,a=[(0,v.jsx)(me.default,{typography:{sm:"Body2",md:"Body1"},color:0===(null==n?void 0:n.selectRange)&&n.serverStatus===on.Fail?"text-critical":"text-default",children:t.formatMessage({id:"content__migration_step_1"})}),t.formatMessage({id:"content__migration_step_2"}),0===(null==n?void 0:n.selectRange)?t.formatMessage({id:"content__migration_step_3"},{addOn:(0,v.jsx)(me.default,{typography:{sm:"Body2",md:"Body1"},color:"text-subdued",children:t.formatMessage({id:"content__migration_step_3_add_on"})})}):t.formatMessage({id:"content__migration_step_3_connect_by_link"})];return k.default.isDesktopWin&&a.splice(1,0,t.formatMessage({id:"content__migration_step_2_windows"})),(0,v.jsxs)(l.default,{children:[a.map((function(e,t){return(0,v.jsx)(Hn,{step:t+1,description:e,mt:0===t?void 0:"16px"},t)})),(0,v.jsx)(me.default,{typography:"Body2",mt:"24px",color:"text-disabled",children:t.formatMessage({id:"content__migration_note_encrypted"})}),(0,v.jsx)(me.default,{typography:"Body2",color:"text-disabled",children:t.formatMessage({id:"content__migration_note_hardware_wallet"})})]})},Fn=function(){var e=(0,g.default)(),t=(0,m.useRoute)().params,n=t.scanText,r=t.disableAnimation,o=void 0===r||r,i=(0,m.useNavigation)(),s=h.default.serviceHTTP,l=h.default.serviceMigrate;(0,a.useLayoutEffect)((function(){i.setOptions({headerShown:!1})}),[i]);var u=(0,p.default)(),d=(0,a.useMemo)((function(){return u?(0,v.jsx)(Bn,{}):(0,v.jsx)(zn,{})}),[u]),c=(0,a.useMemo)((function(){return u?(0,v.jsx)(zn,{}):(0,v.jsx)(Bn,{})}),[u]);return(0,a.useEffect)((function(){return l.registerHttpEvents(),function(){s.stopHttpServer(),l.unRegisterHttpEvents()}}),[s,l]),(0,v.jsx)(un,{inputValue:null!=n?n:"",children:(0,v.jsx)(b.default,{disableAnimation:o,title:e.formatMessage({id:"title__migration"}),description:e.formatMessage({id:"title__migration_desc"}),secondaryContent:c,children:d})})};Fn.defaultProps={};const Ln=Fn;var Kn=n(677346),Vn=n(140368),Un=n(364519),Gn=n(327226),Qn=n(555596),qn=n(973274),Jn=function(){var e=(0,g.default)(),t=(0,m.useRoute)().params.data,n=(0,m.useNavigation)(),r=h.default.serviceCloudBackup,i=(0,jt.useAppSelector)((function(e){return e.settings.version})),u=(0,p.default)(),f=(0,jt.useData)().isPasswordSet,x=(0,Gn.default)().showVerify,y=(0,we.useOnboardingDone)(),_=(0,Ne.useOnboardingClose)().onboardingGoBack,j=(0,Un.default)().requestBackupPassword,w=(0,a.useState)(!1),C=(0,D.default)(w,2),M=C[0],P=C[1],k=(0,a.useState)({alreadyOnDevice:{contacts:{},importedAccounts:{},watchingAccounts:{},HDWallets:{},simpleDb:{}},notOnDevice:{contacts:{},importedAccounts:{},watchingAccounts:{},HDWallets:{},simpleDb:{}}}),A=(0,D.default)(k,2),S=A[0],E=A[1],R=(0,a.useCallback)((0,s.default)((function*(){O.default.show({title:e.formatMessage({id:"msg__backup_imported"})}),yield y({delay:200})})),[e,y]),T=(0,a.useCallback)((function(){O.default.show({title:e.formatMessage({id:"msg__import_icloud_backup_failed_version"})},{type:"error"}),n.goBack()}),[e,n]),B=(0,a.useCallback)((function(){return void 0===t.appVersion||(!t.appVersion||!(0,Vn.gtIgnore)(t.appVersion,i,"patch"))}),[t.appVersion,i]),I=(0,a.useCallback)((0,s.default)((function*(){return new Promise((function(e){if(!1===B())return(0,qn.showUpgrateDialog)(),void e(!1);f?x((function(n){r.restoreFromPrivateBackup({privateBackupData:t.private,notOnDevice:S.notOnDevice,localPassword:n}).then((function(a){a===Kn.RestoreResult.SUCCESS?R().then((function(){e(!0)})):a===Kn.RestoreResult.WRONG_PASSWORD?j((function(e){return r.restoreFromPrivateBackup({privateBackupData:t.private,notOnDevice:S.notOnDevice,localPassword:n,remotePassword:e})}),(0,s.default)((function*(){yield R(),e(!0)})),(function(){T(),e(!1)}),(function(){e(!1)})):(T(),e(!1))}))}),(function(){e(!1)})):j((function(e){return r.restoreFromPrivateBackup({privateBackupData:t.private,notOnDevice:S.notOnDevice,localPassword:e,remotePassword:e})}),(0,s.default)((function*(){yield R(),e(!0)})),(function(){T(),e(!1)}),(function(){e(!1)}))}))})),[S.notOnDevice,B,t.private,f,R,T,j,r,x]);(0,a.useLayoutEffect)((function(){n.setOptions({headerShown:!1})}),[n]),(0,a.useEffect)((function(){r.getBackupDetailsWithRemoteData(JSON.parse(t.public)).then((function(e){E(e),P((0,Qn.checkHasData)(e.notOnDevice))}))}),[r]);var W=(0,a.useMemo)((function(){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.default,{flex:1,flexDirection:"column",children:(0,v.jsx)(zt.ScrollView,{flex:1,mb:"24px",minHeight:"160px",maxHeight:{base:void 0,sm:"320px"},showsVerticalScrollIndicator:!0,children:M?(0,v.jsx)(l.default,{mx:"-48px",children:(0,v.jsx)(Qn.GroupedBackupDetails,{publicBackupData:S.notOnDevice})}):(0,v.jsx)(me.default,{typography:"Body1",children:e.formatMessage({id:"empty__migrated_data_already_exists"})})})}),M?(0,v.jsx)(o.default,{type:"primary",size:u?"xl":"lg",onPress:u?I:void 0,onPromise:u?void 0:I,children:e.formatMessage({id:"action__import"})}):(0,v.jsx)(o.default,{size:u?"xl":"lg",onPress:function(){_()},children:e.formatMessage({id:"action__close"})})]})}),[_,S.notOnDevice,M,I,e,u]),N=(0,a.useMemo)((function(){return u?null:(0,v.jsxs)(l.default,{children:[(0,v.jsx)(d.default,{size:"48px",bgColor:"decorative-surface-two",borderRadius:"9999",children:(0,v.jsx)(c.default,{name:"EllipsisHorizontalCircleOutline",size:24,color:"decorative-icon-two"})}),(0,v.jsx)(me.default,{typography:"Body2",mt:"26px",children:e.formatMessage({id:"content__migration_note_hardware_wallet"})})]})}),[e,u]);return(0,v.jsx)(b.default,{disableAnimation:!0,title:e.formatMessage({id:"action__preview"}),fullHeight:!0,secondaryContent:N,children:W})};Jn.defaultProps={};const Xn=Jn;const Yn=function(){return(0,v.jsx)(b.default,{fullHeight:!0,children:(0,v.jsx)(l.default,{mx:-4,flex:1,children:(0,v.jsx)(Qn.default,{onboarding:!0})})})};var Zn=n(224255);const $n=function(){var e=(0,g.default)();return(0,v.jsx)(b.default,{title:e.formatMessage({id:"content__previous_backups"}),children:(0,v.jsx)(l.default,{mx:-4,children:(0,v.jsx)(Zn.default,{})})})};var ea=function(){var e,t,n=(0,g.default)(),r=(0,Ce.useAddExternalAccount)().addExternalAccount,o=(0,we.useOnboardingDone)(),i=(0,m.useRoute)(),u=null==(e=i.params)?void 0:e.disableOnboardingDone,c=null==(t=i.params)?void 0:t.onSuccess,f=(0,be.default)(),p=(0,a.useState)(!1),h=(0,D.default)(p,2),x=h[0],y=h[1];return(0,v.jsxs)(b.default,{title:n.formatMessage({id:"title__connect_with"}),children:[x&&(0,v.jsx)(d.default,{children:(0,v.jsx)(me.default,{typography:{sm:"Body1",md:"Body1"},children:n.formatMessage({id:"content__no_other_wallets_installed"})})}),(0,v.jsx)(l.default,{flexDir:"row",flexWrap:"wrap",m:"-4px",minH:"10px",children:(0,v.jsx)(je.ConnectWalletListView,{onConnectResult:function(){var e=(0,s.default)((function*(e){yield r(e),u?null==f||null==f.goBack||f.goBack():(yield o(),yield(0,Oe.wait)(600),O.default.show({title:n.formatMessage({id:"msg__account_imported"})})),c&&c()}));return function(t){return e.apply(this,arguments)}}(),walletListsCallback:function(e){y(!!k.default.isNativeIOS&&0===e.length)}})}),(0,v.jsx)(_e.Hidden,{till:"sm",children:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(me.default,{mt:8,mb:3,typography:"Subheading",color:"text-subdued",children:n.formatMessage({id:"content__institutional_wallets"})}),(0,v.jsx)(l.default,{flexDir:"row",flexWrap:"wrap",m:"-4px",children:(0,v.jsx)(je.ConnectWalletListView,{onConnectResult:function(){var e=(0,s.default)((function*(e){yield r(e),null==f||null==f.goBack||f.goBack()}));return function(t){return e.apply(this,arguments)}}(),isInstitutionWallet:!0})})]})})]})};ea.displayName="ThirdPartyWallet";const ta=ea,na=n.p+"static/media/welcome_hardware.738ecd2fdb75a0747179.png";var aa=n(932330);const ra=n.p+"static/media/logo_rainbow.4dc78fbdb1b88a3adc72.png";var oa=n(450688),ia=n(550441),sa=n(454655);function la(e){var t=e.onPress,n=(0,g.default)(),r=(0,Ce.useAddExternalAccount)().addExternalAccount,o=(0,we.useOnboardingDone)(),i=(0,a.useState)(!1),u=(0,D.default)(i,2),d=u[0],f=u[1],p=(0,a.useCallback)(function(){var e=(0,s.default)((function*(e){f(!1),yield r(e),yield o(),yield(0,Oe.wait)(600),O.default.show({title:n.formatMessage({id:"msg__account_imported"})})}));return function(t){return e.apply(this,arguments)}}(),[r,n,o]),m=(0,sa.useConnectExternalWallet)({onConnectResult:p}).connectExternalWallet,h=(0,a.useCallback)((0,s.default)((function*(){try{yield m({})}catch(e){Te.default.common.error(e)}})),[m]),x=(0,a.useCallback)((function(){f(!1)}),[]);(0,ia.useAppStateChange)(x);var b=[qt,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAWlBMVEUAAAD///+/v78YGBgMDAz4+Pjr6+vHx8ecnJw4ODgkJCQICAjj4+MwMDARERF0dHQeHh4GBgbV1dWxsbGOjo7x8fHm5ubc3Ny2trakpKSYmJh7e3tdXV0sLCwp/e6AAAAAgklEQVRYw+3UOQ6EMBBE0TY2zMKMbZZZ2O5/TUTS3QkWQgIR1At/UGERABzDsWq1p4SCfaPqvfTaU8LdiIfqN9WfGMDA4QMhZ4UtWdVK/3naqDMst7RDZsQbAxg4daC0zA8vVkfpjlJaIybVG8mfeO0/wAAGFmPG/l71IL1xBABXNAObbAo54o7OqwAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAAPFBMVEUAAAD///8zdbuZut3l7vdMhsPy9/uAqdVmmMzM3e5Afb+zy+Wmw+FZj8hNhsPZ5vNzoNC/1OmMstm/1Orw5n5WAAAAAXRSTlMAQObYZgAAAjFJREFUaN7t2elu6jAQBWA83sZLSKDv/64Xtbk6ok3KGZSoIOX8Qy3+vEycxJxOJ7drDuAADuAADuBPgDQWfNgBKFUkjvi8NeDlM965XYCgMkfDDkDyVRAfaMDUPBIJggZSUTSP5MsWQCodrX9PnXpJTwGp+VtyHuKPbmf5lqhT9rc0AxCiLCcW59rqHwMN5JUZ8elrwVeEiQbqWvNzQl4cxZkGFr6uPd0vkm4IVEXrSOi6ARCH/Fsllj5pfRo4h0BuUiE+Bzg6Lwfo19pyjaOu1QgID8irAdOuAPaiQN9M55327YErB+DxpLBAmZ8EXgdo8pnGAh/4/32AZgU+TI+ImFIaGFEVuwCoayooaxpIeEoggr2LA7D9DiwwYHsngWi4IaA/LIAxJ6JxzKgygH0zQtFlFkDdXUwXsmcBXJrddBlcCIAY9PoNcGQBLNvZUqXiaADfSYbbzWACMqaVXeNsAhq93aEzPIBFqPxzowQGQJS+azYsAQ2gtpUeQDcCSTCzzAAkmADMUQ0PajSihmxAwdsv0b4UFkCUEMYoGIAVCFXm+Ae7HCaSAZCOd822OIl4GW3OCKCDc6bwo3kVwRCNAAQk3xEhC9E+AEYQH5bPv7ojgQfzjKXo9f6E50kAc4EMt0GMKoJciRMv4jQT8XezpmWDQ8H1M64BzfMAT9S27bnp2vkXD5hWezKe/NLzhNLkAT7pitI0Avwg0H0asKWM/7v/pr/hHMABHMABOPd+wD9+jjDMeVUrrwAAAABJRU5ErkJggg==",ra,oa];return(0,v.jsxs)($.default,{flexDirection:"row",alignSelf:"center",flexWrap:"wrap",justifyContent:"center",alignItems:"center",p:"8px",mt:"24px",borderRadius:"12px",_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},onPress:function(){k.default.isNativeAndroid?(f(!0),h()):t()},children:[(0,v.jsx)(me.default,{typography:{sm:"Body2Strong",md:"DisplaySmall"},color:"text-default",children:n.formatMessage({id:"action__connect_3rd_party_wallet"})}),(0,v.jsxs)(l.default,{flexDirection:"row",alignItems:"center",mx:1.5,children:[b.map((function(e,t){return(0,v.jsx)(z.default,{source:e,size:4,mx:.5,rounded:"sm",borderWidth:te.default.hairlineWidth,borderColor:"border-subdued"},t)})),(0,v.jsx)(l.default,{bg:"surface-neutral-default",borderRadius:"6px",mx:.5,children:(0,v.jsx)(c.default,{name:"EllipsisHorizontalMini",size:16,color:"icon-default"})})]}),d?(0,v.jsx)(ce.default,{}):(0,v.jsx)(c.default,{name:"ChevronRightMini",size:20,color:"icon-subdued"})]})}var ua=["icon","label","description","onPress","isDisabled","children"];function da(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?da(Object(n),!0).forEach((function(t){(0,C.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):da(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const fa=function(e){var t=e.icon,n=e.label,a=e.description,r=e.onPress,o=e.isDisabled,i=e.children,s=(0,ct.default)(e,ua),u=(0,p.default)();return(0,v.jsxs)($.default,ca(ca({flex:{sm:1},flexDir:{base:"row",sm:"column"},mx:2,px:{base:3,sm:6},py:{base:4,sm:6},bgColor:"action-secondary-default",_hover:{bgColor:"action-secondary-hovered"},_pressed:{bgColor:"action-secondary-pressed"},borderWidth:te.default.hairlineWidth,borderColor:"border-default",rounded:"xl",onPress:r,disabled:o},s),{},{children:[(0,v.jsx)(l.default,{mr:3,children:(0,v.jsx)(c.default,{size:u?24:28,name:t,color:o?"icon-disabled":"interactive-default"})}),(0,v.jsx)(me.default,{flex:{sm:void 0,base:1},mt:{sm:6},typography:{sm:"Body1Strong",md:"DisplayMedium"},color:o?"text-disabled":"text-default",children:n}),(0,v.jsx)(_e.Hidden,{till:"sm",children:(0,v.jsx)(me.default,{flex:1,mt:{sm:2},typography:{sm:"Body2",md:"Body2"},color:o?"text-disabled":"text-subdued",children:a})}),i,(0,v.jsx)(_e.Hidden,{from:"sm",children:(0,v.jsx)(l.default,{py:.5,children:(0,v.jsx)(c.default,{name:"ChevronRightMini",size:20,color:o?"icon-disabled":"icon-subdued"})})})]}))};const pa=function(){var e=(0,g.default)(),t=(0,Lt.useSafeAreaInsets)(),n=(0,L.useHelpLink)({path:"articles/360002014776"}),r=(0,L.useHelpLink)({path:"articles/360002003315"}),o=(0,a.useCallback)((function(){(0,Q.openUrl)(n,e.formatMessage({id:"form__user_agreement"}))}),[e,n]),i=(0,a.useCallback)((function(){(0,Q.openUrl)(r,e.formatMessage({id:"form__privacy_policy"}))}),[e,r]),s=(0,a.useCallback)((function(e){return(0,v.jsx)(me.default,{color:"text-subdued",onPress:o,typography:"CaptionUnderline",children:e})}),[o]),l=(0,a.useCallback)((function(e){return(0,v.jsx)(me.default,{color:"text-subdued",onPress:i,typography:"CaptionUnderline",children:e})}),[i]);return(0,v.jsx)(d.default,{position:"absolute",bottom:{base:`${t.bottom}px`,sm:8},w:"full",pb:"16px",bgColor:"background-default",children:(0,v.jsx)(me.default,{maxW:{base:"300px",sm:"auto"},mx:"auto",textAlign:"center",color:"text-subdued",typography:"Caption",children:e.formatMessage({id:"content__agree_to_user_agreement_and_privacy_policy"},{a:s,b:l})})})};const ma=function(){var e,t=(0,m.useNavigation)();(0,L.useNavigationActions)();var n=(0,m.useRoute)(),r=(0,a.useState)(!(null==n||null==(e=n.params)||!e.disableAnimation)),o=(0,D.default)(r,2),i=o[0],u=o[1],d=(0,a.useCallback)((function(){var e;return u(!(null==n||null==(e=n.params)||!e.disableAnimation))}),[n]),f=(0,ve.useOnboardingContext)(),p=null==f?void 0:f.forceVisibleUnfocused;(0,a.useEffect)((function(){(0,s.default)((function*(){if(k.default.isExtensionUiPopup||k.default.isExtensionUiStandaloneWindow){if(yield h.default.serviceApp.isResettingApp())return;h.default.serviceApp.openExtensionExpandTab({routes:[ye.RootRoutes.Onboarding,A.EOnboardingRoutes.Welcome],params:{}}),setTimeout((function(){window.close()}),200)}}))()}),[]),(0,a.useEffect)((function(){0}),[]);var x=(0,g.default)(),y=(0,S.default)().screenHeight<=667,_=(0,a.useCallback)((function(){d(),h.default.dispatch((0,aa.setOnBoardingLoadingBehindModal)(!1)),t.navigate(A.EOnboardingRoutes.SetPassword)}),[t,d]),j=(0,a.useCallback)((function(){d(),h.default.dispatch((0,aa.setOnBoardingLoadingBehindModal)(!1)),t.navigate(A.EOnboardingRoutes.ImportWallet)}),[t,d]),w=(0,a.useCallback)((function(){u(!0),null==p||p(),h.default.dispatch((0,aa.setOnBoardingLoadingBehindModal)(!1)),i?t.navigate(ye.RootRoutes.Modal,{screen:ye.ModalRoutes.CreateWallet,params:{screen:ye.CreateWalletModalRoutes.ConnectHardwareModal}}):setTimeout((function(){t.navigate(ye.RootRoutes.Modal,{screen:ye.ModalRoutes.CreateWallet,params:{screen:ye.CreateWalletModalRoutes.ConnectHardwareModal}})}),100)}),[p,t,i]),O=(0,a.useCallback)((function(){d(),h.default.dispatch((0,aa.setOnBoardingLoadingBehindModal)(!1)),setTimeout((function(){return t.navigate(A.EOnboardingRoutes.ThirdPartyWallet)}))}),[t,d]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(b.default,{showCloseButton:!0,backButton:!1,pt:{base:y?8:20,sm:0},scaleFade:!0,disableAnimation:i,children:[(0,v.jsx)(c.default,{name:"BrandLogoIllus",size:48}),(0,v.jsxs)(me.default,{typography:{sm:"DisplayXLarge",md:"Display2XLarge"},mt:6,flexGrow:1,children:[x.formatMessage({id:"onboarding__landing_welcome_title"}),"\n",(0,v.jsx)(me.default,{color:"text-subdued",children:x.formatMessage({id:"onboarding__landing_welcome_desc"})})]}),(0,v.jsx)(l.default,{flexDir:{sm:"row"},flexWrap:{sm:"wrap"},mt:{base:y?8:16,sm:20},mx:-2,children:(0,v.jsxs)(l.default,{flexDirection:{sm:"row"},w:{sm:"100%"},children:[(0,v.jsx)(fa,{icon:"PlusCircleOutline",label:x.formatMessage({id:"action__create_wallet"}),description:x.formatMessage({id:"content__create_wallet_desc"}),roundedBottom:{base:0,sm:"xl"},onPress:_}),(0,v.jsx)(fa,{icon:"ArrowDownCircleOutline",label:x.formatMessage({id:"action__import_wallet"}),description:x.formatMessage({id:"content__onboarding_import_wallet_desc"}),mt:"-1px",mb:{base:6,sm:0},roundedTop:{base:0,sm:"xl"},onPress:j}),(0,v.jsx)(fa,{icon:"UsbCableOutline",label:x.formatMessage({id:"action__connect_hardware_wallet"}),description:x.formatMessage({id:"content__conenct_hardware_wallet_desc"}),onPress:w,overflow:"hidden",children:(0,v.jsx)(_e.Hidden,{till:"sm",children:(0,v.jsx)(l.default,{position:"absolute",zIndex:-1,right:"0",top:"0",children:(0,v.jsx)(z.default,{source:na,w:"256px",h:"207px",opacity:.75})})})})]})}),(0,v.jsx)(_e.Hidden,{till:"sm",children:(0,v.jsxs)(l.default,{flexDirection:"row",alignItems:"center",mt:"24px",mb:"-12px",children:[(0,v.jsx)(U.default,{flex:1}),(0,v.jsx)(me.default,{mx:"14px",typography:"Subheading",color:"text-disabled",children:x.formatMessage({id:"content__or_lowercase"})}),(0,v.jsx)(U.default,{flex:1})]})}),(0,v.jsx)(la,{onPress:O})]}),(0,v.jsx)(pa,{})]})};var ga=[{name:A.EOnboardingRoutes.Welcome,component:ma},{name:A.EOnboardingRoutes.ConnectWallet,component:Se},{name:A.EOnboardingRoutes.ConnectHardwareModal,component:de.default},{name:A.EOnboardingRoutes.ThirdPartyWallet,component:ta},{name:A.EOnboardingRoutes.ImportWallet,component:It},{name:A.EOnboardingRoutes.RecoveryWallet,component:rn},{name:A.EOnboardingRoutes.SetPassword,component:Pt},{name:A.EOnboardingRoutes.RecoveryPhrase,component:yt},{name:A.EOnboardingRoutes.ShowRecoveryPhrase,component:kt},{name:A.EOnboardingRoutes.BehindTheScene,component:ut},{name:A.EOnboardingRoutes.RestoreFromCloud,component:$n},{name:A.EOnboardingRoutes.CloudBackupDetails,component:Yn},{name:A.EOnboardingRoutes.KeyTag,component:function(){var e=(0,a.useMemo)((function(){return le.map((function(e){return(0,v.jsx)(ue.Screen,{name:e.name,component:e.component},e.name)}))}),[]);return(0,v.jsx)(ue.Navigator,{screenOptions:{headerShown:!1},children:e})}},{name:A.EOnboardingRoutes.Migration,component:Ln},{name:A.EOnboardingRoutes.MigrationPreview,component:Xn}],ha=(0,r.default)();function xa(){var e=(0,a.useMemo)((function(){return ga.map((function(e){return(0,v.jsx)(ha.Screen,{name:e.name,component:e.component},e.name)}))}),[]);return(0,a.useEffect)((function(){return h.default.serviceOnboarding.checkOnboardingStatus(),function(){h.default.serviceOnboarding.checkOnboardingStatus()}}),[]),(0,v.jsx)(ha.Navigator,{screenOptions:{headerShown:!1},children:(0,v.jsx)(ha.Group,{children:e})})}},535307:(e,t,n)=>{n.r(t),n.d(t,{OptionAdress:()=>v,OptionGoogleDrive:()=>M,OptionKeyTag:()=>j,OptionMigration:()=>O,OptionOneKeyLite:()=>_,OptionPrivateKey:()=>y,OptionRecoveryPhrase:()=>b,OptioniCloud:()=>C});var a=n(795116),r=n(225447),o=n(561220),i=n(297263),s=n(866904),l=n(18861),u=n(719392),d=n(435581),c=n(586874),f=n(163142),p=n(46486);const m=n.p+"static/media/import_with_keytag.0b5129bb805a03b1b01f.png",g=n.p+"static/media/import_with_lite.eeedb5e7b00d20a674a0.png";var h=n(552322),x=function(e){var t=e.icon,n=e.title,a=e.description,r=e.children,m=e.isDisabled,g=e.isLoading,x=e.onPress,b=(0,c.default)().themeVariant;return(0,h.jsxs)(o.default,{flex:1,onPress:x,p:"16px",pb:"80px",bg:"action-secondary-default",_hover:{bgColor:"action-secondary-hovered"},_pressed:{bgColor:"action-secondary-pressed"},borderWidth:p.default.hairlineWidth,borderColor:"border-default",borderRadius:"12px",overflow:"hidden",disabled:m,children:[(0,h.jsxs)(l.default,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,h.jsx)(d.default,{name:t||"AcademicCapOutline",color:m||g?"icon-disabled":"interactive-default"}),g&&(0,h.jsx)(u.default,{})]}),(0,h.jsx)(s.default,{mt:4,typography:"Heading",flex:1,color:m||g?"text-disabled":"text-default",children:n}),a&&(0,h.jsx)(s.default,{mt:1,typography:"Body2",flex:1,color:m||g?"text-disabled":"text-subdued",children:a}),(0,h.jsxs)(l.default,{position:"absolute",bottom:"-64px",left:"16px",right:"16px",h:"128px",borderRadius:"12px",bg:"surface-default",overflow:"hidden",children:[(0,h.jsx)(f.LinearGradient,{colors:["rgb(255, 255, 255)","rgba(255, 255, 255, 0)"],style:{position:"absolute",height:64,width:"100%",opacity:.1,zIndex:-1}}),r,(0,h.jsx)(f.LinearGradient,{colors:["light"===b?"rgba(255, 255, 255, 0)":"rgba(30, 30, 42, 0)",(0,i.default)("surface-default")],style:{position:"absolute",height:"100%",width:"100%",bottom:64}})]})]})},b=function(e){var t=e.title,n=e.icon,a=e.description,r=e.onPress;return(0,h.jsx)(x,{title:t,description:a,icon:n||"ClipboardDocumentListOutline",onPress:r,children:(0,h.jsx)(l.default,{flexDirection:"row",px:"16px",h:"64px",flexWrap:"wrap",py:"8px",children:["shy","owner","almost","explain","movie","subway"].map((function(e,t){return(0,h.jsxs)(l.default,{flexDirection:"row",w:"1/3",py:"4px",children:[(0,h.jsx)(s.default,{typography:"Caption",w:"12px",color:"text-subdued",children:t+1}),(0,h.jsx)(s.default,{typography:"Caption",children:e})]},t)}))})})},y=function(e){var t=e.title,n=e.icon,a=e.description,r=e.onPress;return(0,h.jsx)(x,{title:t,description:a,icon:n||"ClipboardDocumentListOutline",onPress:r,children:(0,h.jsx)(l.default,{px:"16px",h:"64px",pt:"12px",children:(0,h.jsx)(s.default,{typography:"Caption",color:"text-subdued",children:"0xd819390d77f9bfe05b74c729394deec8c4e7f3ec52b6cbe9f64b6a0e1c9d9435"})})})},v=function(e){var t=e.title,n=e.icon,a=e.description,r=e.onPress;return(0,h.jsx)(x,{title:t,description:a,icon:n||"ClipboardDocumentListOutline",onPress:r,children:(0,h.jsx)(l.default,{px:"16px",h:"64px",pt:"12px",children:(0,h.jsx)(s.default,{typography:"Caption",color:"text-subdued",children:"0xb0CfcFdA37F05185324dC3A61dE9030bf6d98fb8"})})})},_=function(e){var t=e.title,n=e.description,o=e.onPress;return(0,h.jsx)(x,{title:t,description:n,icon:"OnekeyLiteOutline",onPress:o,children:(0,h.jsx)(a.default,{children:(0,h.jsx)(r.default,{source:g,w:"224px",h:"64px"})})})},j=function(e){var t=e.title,n=e.description,o=e.onPress;return(0,h.jsx)(x,{title:t,description:n,icon:"KeytagOutline",onPress:o,children:(0,h.jsx)(a.default,{children:(0,h.jsx)(r.default,{source:m,w:"224px",h:"64px"})})})},w=function(e){var t=e.leftIcon,n=e.rightIcon;return(0,h.jsxs)(a.default,{h:"64px",flexDirection:"row",px:"24px",children:[(0,h.jsx)(d.default,{name:t,size:32,color:"icon-default"}),(0,h.jsx)(f.LinearGradient,{colors:["transparent",(0,i.default)("icon-subdued"),"transparent"],start:{x:0,y:0},end:{x:1,y:0},style:{flex:1,height:2,marginHorizontal:8}}),(0,h.jsx)(d.default,{name:n,size:32,color:"icon-default"})]})},O=function(e){var t=e.title,n=e.onPress;return(0,h.jsx)(x,{title:t,icon:"ArrowPathRoundedSquareOutline",onPress:n,children:(0,h.jsx)(w,{leftIcon:"ComputerDesktopSolid",rightIcon:"DevicePhoneMobileSolid"})})},C=function(e){var t=e.title,n=e.onPress,a=e.isDisabled,r=e.isLoading;return(0,h.jsx)(x,{title:t,icon:"CloudOutline",onPress:n,isDisabled:a,isLoading:r,children:(0,h.jsx)(w,{leftIcon:"CloudSolid",rightIcon:"OnekeyLogoSolid"})})},M=function(e){var t=e.title,n=e.onPress,a=e.isDisabled,r=e.isLoading;return(0,h.jsx)(x,{title:t,icon:"CloudOutline",onPress:n,isDisabled:a,isLoading:r,children:(0,h.jsx)(w,{leftIcon:"CloudSolid",rightIcon:"OnekeyLogoSolid"})})}},249850:(e,t,n)=>{n.r(t),n.d(t,{showMigrateDataModal:()=>z});var a,r=n(256666),o=n(259825),i=n(321668),s=n(259924),l=n(795116),u=n(433996),d=n(854787),c=n(435581),f=n(510374),p=n(18861),m=n(866904),g=n(719392),h=n(669083),x=n(634795),b=n(545455),y=n.n(b),v=n(196234),_=n(202784),j=n(472719),w=n(553197),O=n(783112),C=n(46486),M=n(707379),D=n(153894),P=n(481047),k=n(213208),A=n(945821),S=n(793525),E=n(526002),R=n(574393),T=n(91516),B=n(552322);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.Success=0]="Success",e[e.Fail=1]="Fail",e[e.Connecting=2]="Connecting"}(a||(a={}));var N=(0,R.deviceInfo)(),H=function(e){var t=e.serverAddress,n=e.serverInfo,r=e.closeOverlay,b=A.default.serviceMigrate,I=(0,_.useRef)(n),W=(0,_.useState)((function(){return n?a.Success:a.Connecting})),H=(0,v.default)(W,2),z=H[0],F=H[1],L=(0,_.useState)(N),K=(0,v.default)(L,2),V=K[0],U=K[1],G=(0,_.useState)(I.current),Q=(0,v.default)(G,2),q=Q[0],J=Q[1],X=(0,_.useMemo)((function(){return(0,R.parseDeviceInfo)(V)}),[V]),Y=(0,_.useMemo)((function(){if(q)return(0,R.parseDeviceInfo)(q)}),[q]),Z=(0,_.useState)(!0),$=(0,v.default)(Z,2),ee=$[0],te=$[1],ne=(0,O.default)(),ae=(0,T.useExportData)().exportDataRequest,re=(0,j.useNavigation)();(0,_.useEffect)((function(){z===a.Connecting&&setTimeout((function(){b.connectServer(t).then((function(e){e?"string"===typeof e?("ERR_NETWORK"===e&&k.default.isNativeIOS&&(0,S.showDialog)((0,B.jsx)(D.default,{type:"localNetwork"})),F(a.Fail)):(I.current=e,J(e),F(a.Success)):F(a.Fail)}))}),500)}),[z,t,b]),(0,_.useEffect)((function(){z===a.Success&&void 0!==I.current&&(ee?(U(N),J(I.current)):(U(I.current),J(N)))}),[z,V,ee,q]);var oe=(0,_.useCallback)((0,x.default)((function*(){var e=yield ae(),n=e.status,a=e.data;if(n===T.ExportResult.SUCCESS){var r=yield b.sendDataToServer({ipAddress:t,data:JSON.stringify(a)});return r&&Y?h.default.show({title:`\ud83e\uddd9 ${ne.formatMessage({id:"msg__data_sent_to_platform"},{platform:Y.name})}`}):h.default.show({title:ne.formatMessage({id:"form__failed"})},{type:"error"}),r}return n===T.ExportResult.EMPTY&&h.default.show({title:ne.formatMessage({id:"msg__no_data_available"})},{type:"default"}),!1})),[ae,ne,Y,t,b]),ie=(0,_.useCallback)((0,x.default)((function*(){var e=yield b.getDataFromServer({ipAddress:t});return!!e&&("number"===typeof e?void(e===M.MigrateErrorCode.ConnectFail&&F(a.Fail)):function(e){var t=!0;return Object.entries(e).forEach((function(e){var n=(0,v.default)(e,2),a=(n[0],n[1]);y()(a)||(t=!1)})),t}(JSON.parse(e.public))?(h.default.show({title:ne.formatMessage({id:"msg__no_data_available"})},{type:"default"}),!1):(b.disConnectServer(t),r(),re.navigate(P.RootRoutes.Onboarding,{screen:E.EOnboardingRoutes.MigrationPreview,params:{data:e}}),!0))})),[r,ne,re,t,b]),se=(0,_.useState)(!1),le=(0,v.default)(se,2),ue=le[0],de=le[1],ce=(0,_.useCallback)((0,x.default)((function*(){de(!0),ee?(yield oe(),b.disConnectServer(t),r()):yield ie(),de(!1)})),[r,ie,ee,oe,t,b]),fe=(0,_.useMemo)((function(){return z===a.Connecting?(0,B.jsx)(f.default,{title:"",subTitle:(0,B.jsxs)(p.default,{children:[(0,B.jsx)(g.default,{size:"lg"}),(0,B.jsx)(m.default,{mt:"12px",typography:"DisplayMedium",children:ne.formatMessage({id:"content__connecting"})})]})}):z===a.Fail?(0,B.jsx)(f.default,{emoji:"\ud83d\udeab",title:ne.formatMessage({id:"modal__failed_to_connect"}),subTitle:ne.formatMessage({id:"modal__migrating_data_connection_failed_desc"})}):z===a.Success&&Y&&X?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(p.default,{bgColor:"surface-default",borderRadius:"12px",borderColor:"border-subdued",borderWidth:C.default.hairlineWidth,children:[(0,B.jsxs)(p.default,{py:"16px",children:[(0,B.jsx)(m.default,{typography:"Body2",color:"text-subdued",ml:"16px",children:ne.formatMessage({id:"content__from"})}),(0,B.jsxs)(p.default,{paddingX:"16px",flexDirection:"row",mt:"12px",children:[(0,B.jsx)(c.default,{name:X.logo,size:24,color:"icon-subdued"}),(0,B.jsx)(m.default,{typography:"Body1Strong",flex:1,ml:"8px",children:X.name}),ee&&(0,B.jsx)(w.View,{from:{scale:0},animate:{scale:1},transition:{type:"timing"},children:(0,B.jsx)(d.default,{size:"sm",type:"info",title:ne.formatMessage({id:"content__current"})})})]})]}),(0,B.jsx)(p.default,{borderBottomWidth:C.default.hairlineWidth,borderColor:"border-subdued"}),(0,B.jsxs)(p.default,{py:"16px",children:[(0,B.jsx)(m.default,{typography:"Body2",color:"text-subdued",ml:"16px",children:ne.formatMessage({id:"content__to"})}),(0,B.jsxs)(p.default,{paddingX:"16px",flexDirection:"row",justifyContent:"space-between",mt:"12px",children:[(0,B.jsx)(c.default,{name:Y.logo,size:24,color:"icon-subdued"}),(0,B.jsx)(m.default,{typography:"Body1Strong",flex:1,ml:"8px",children:Y.name}),!ee&&(0,B.jsx)(w.View,{from:{scale:0},animate:{scale:1},transition:{type:"timing"},children:(0,B.jsx)(d.default,{size:"sm",type:"info",title:ne.formatMessage({id:"content__current"})})})]})]}),(0,B.jsx)(l.default,{position:"absolute",width:"full",height:"full",children:(0,B.jsx)(u.default,{onPress:function(){te((function(e){return!e}))},name:"SwitchVerticalOutline",circle:!0,type:"basic",size:"base",iconColor:"icon-default"})})]}),(0,B.jsxs)(p.default,{mt:"24px",children:[ue&&!ee&&(0,B.jsx)(s.default,{customIconName:"EllipsisHorizontalCircleMini",title:ne.formatMessage({id:"modal__migrating_data_awaiting_confirmation"},{from:X.name}),alertType:"success",dismiss:!1}),(0,B.jsx)(i.default,{mt:"12px",size:"xl",type:"primary",onPress:ce,isLoading:ue,children:ne.formatMessage({id:"action__migrate"})})]})]}):void 0}),[z,ne,ue,ee,ce,X,Y]);return(0,B.jsx)(o.default,{title:ne.formatMessage({id:"modal__migrating_data"}),headerDescription:z===a.Success?(0,B.jsxs)(m.default,{typography:"Caption",color:"text-success",children:["\ud83c\udf89 ",ne.formatMessage({id:"modal__migrating_data_desc"})]}):null,closeOverlay:function(){b.disConnectServer(t),r()},children:fe})},z=function(e){return(0,S.showOverlay)((function(t){return(0,B.jsx)(H,W(W({},e),{},{closeOverlay:t}))}))}},91516:(e,t,n)=>{n.r(t),n.d(t,{ExportResult:()=>a,useExportData:()=>f});var a,r=n(634795),o=n(545455),i=n.n(o),s=n(196234),l=n(202784),u=n(945821),d=n(268883),c=n(327226);function f(){var e=(0,c.default)().showVerify,t=u.default.serviceCloudBackup,n=(0,l.useCallback)(function(){var e=(0,r.default)((function*(e){var n=yield t.getDataForBackup(e);return{status:a.SUCCESS,data:n}}));return function(t){return e.apply(this,arguments)}}(),[t]);return{exportDataRequest:(0,l.useCallback)((0,r.default)((function*(){return new Promise((function(r){t.getDataForBackup("").then((function(t){!function(e){var t=!0;return Object.entries(e).forEach((function(e){var n=(0,s.default)(e,2),a=(n[0],n[1]);i()(a)||(t=!1)})),t}(JSON.parse(t.publicData))?e((function(e){n(e).then((function(e){r(e)}))}),(function(){r({status:a.CANCEL})}),null,d.ValidationFields.Secret):r({status:a.EMPTY})}))}))})),[n,t,e])}}!function(e){e.SUCCESS="success",e.EMPTY="empty",e.CANCEL="cancel"}(a||(a={}))},140368:(e,t,n)=>{n.r(t),n.d(t,{gtIgnore:()=>s,gteIgnore:()=>i,ltIgnore:()=>u,lteIgnore:()=>l});var a=n(197699),r=n.n(a);function o(e,t,n,a){var o=r().parse(e),i=r().parse(t);if(null===o||null===i)return!1;if("major"===n)throw new Error("major is not supported");return"minor"===n&&(o.minor=0,i.minor=0),"minor"!==n&&"patch"!==n||(o.patch=0,i.patch=0),a(o.format(),i.format())}var i=function(e,t,n){return o(e,t,n,r().gte)},s=function(e,t,n){return o(e,t,n,r().gt)},l=function(e,t,n){return o(e,t,n,r().lte)},u=function(e,t,n){return o(e,t,n,r().lt)}}}]);