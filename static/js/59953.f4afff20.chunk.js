"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[59953,36738,79105],{873638:(e,t,n)=>{n.r(t),n.d(t,{captureRef:()=>_,captureScreen:()=>O,default:()=>T,ensureModuleIsLoaded:()=>I,releaseCapture:()=>S});var r=n(887371),o=n(580753),a=n(545754),i=n(411987),u=n(695058),s=n(256666),l=n(202784),d=n(824931),c=n(341290),f=n(190769),p=n(320713),m=n(552322);function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,i.default)(this,n)}}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=c.default.RNViewShot,x=new Promise((function(){}));g||console.warn("react-native-view-shot: NativeModules.RNViewShot is undefined. Make sure the library is linked on the native side.");var y=["png","jpg"].concat("android"===f.default.OS?["webm","raw"]:[]),k=["tmpfile","base64","data-uri"].concat("android"===f.default.OS?["zip-base64"]:[]),b={format:"png",quality:1,result:"tmpfile",snapshotContentContainer:!1,handleGLSurfaceViewOnAndroid:!1};function j(e){var t=w(w({},b),e),n=[];return"width"in t&&("number"!==typeof t.width||t.width<=0)&&(n.push("option width should be a positive number"),delete t.width),"height"in t&&("number"!==typeof t.height||t.height<=0)&&(n.push("option height should be a positive number"),delete t.height),("number"!==typeof t.quality||t.quality<0||t.quality>1)&&(n.push("option quality should be a number between 0.0 and 1.0"),t.quality=b.quality),"boolean"!==typeof t.snapshotContentContainer&&n.push("option snapshotContentContainer should be a boolean"),"boolean"!==typeof t.handleGLSurfaceViewOnAndroid&&n.push("option handleGLSurfaceViewOnAndroid should be a boolean"),-1===y.indexOf(t.format)&&(t.format=b.format,n.push("option format '"+t.format+"' is not in valid formats: "+y.join(" | "))),-1===k.indexOf(t.result)&&(t.result=b.result,n.push("option result '"+t.result+"' is not in valid formats: "+k.join(" | "))),{options:t,errors:n}}function I(){if(!g)throw new Error("react-native-view-shot: NativeModules.RNViewShot is undefined. Make sure the library is linked on the native side.")}function _(e,t){if(I(),e&&"object"===typeof e&&"current"in e&&e.current&&!(e=e.current))return Promise.reject(new Error("ref.current is null"));if("number"!==typeof e){var n=(0,p.default)(e);if(!n)return Promise.reject(new Error("findNodeHandle failed to resolve view="+String(e)));e=n}var r=j(t),o=r.options;r.errors;return g.captureRef(e,o)}function S(e){"string"!==typeof e||g.releaseCapture(e)}function O(e){I();var t=j(e),n=t.options;t.errors;return g.captureScreen(n)}var T=function(e){(0,a.default)(n,e);var t=h(n);function n(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).firstLayoutPromise=new Promise((function(t){e.resolveFirstLayout=t})),e.capture=function(){return e.firstLayoutPromise.then((function(){var t=(0,o.default)(e).root;return t?_(t,e.props.options):x})).then((function(t){return e.onCapture(t),t}),(function(t){throw e.onCaptureFailure(t),t}))},e.onCapture=function(t){if(e.root){e.lastCapturedURI&&setTimeout(S,500,e.lastCapturedURI),e.lastCapturedURI=t;var n=e.props.onCapture;n&&n(t)}},e.onCaptureFailure=function(t){if(e.root){var n=e.props.onCaptureFailure;n&&n(t)}},e.syncCaptureLoop=function(t){if(cancelAnimationFrame(e._raf),"continuous"===t){var n="-";e._raf=requestAnimationFrame((function t(){e._raf=requestAnimationFrame(t),n!==e.lastCapturedURI&&(n=e.lastCapturedURI,e.capture())}))}},e.onRef=function(t){e.root=t},e.onLayout=function(t){var n=e.props.onLayout;e.resolveFirstLayout(t.nativeEvent.layout),n&&n(t)},e}var i=n.prototype;return i.componentDidMount=function(){"mount"===this.props.captureMode?this.capture():this.syncCaptureLoop(this.props.captureMode)},i.componentDidUpdate=function(e){void 0!==this.props.captureMode&&this.props.captureMode!==e.captureMode&&this.syncCaptureLoop(this.props.captureMode),"update"===this.props.captureMode&&this.capture()},i.componentWillUnmount=function(){this.syncCaptureLoop(null)},i.render=function(){var e=this.props.children;return(0,m.jsx)(d.default,{ref:this.onRef,collapsable:!1,onLayout:this.onLayout,style:this.props.style,children:e})},(0,r.default)(n)}(l.Component);T.captureRef=_,T.releaseCapture=S},991786:(e,t,n)=>{n.r(t),n.d(t,{WebView:()=>i,default:()=>u});n(202784);var r=n(489094),o=n(824931),a=n(552322);const i=function(){return(0,a.jsx)(o.default,{style:{alignSelf:"flex-start"},children:(0,a.jsx)(r.default,{style:{color:"red"},children:"React Native WebView does not support this platform."})})},u=i},161695:e=>{var t=/[|\\{}()[\]^$+*?.-]/g;e.exports=function(e){if("string"!==typeof e)throw new TypeError("Expected a string");return e.replace(t,"\\$&")}},536738:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var r=n(256666),o=n(968594),a=n(552322);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const s=function(e){return(0,a.jsxs)(o.default,u(u({viewBox:"0 0 82 25",fill:"none",accessibilityRole:"image"},e),{},{children:[(0,a.jsx)(o.Path,{d:"M32.835 18.409c-.967 0-1.855-.23-2.665-.69a5.132 5.132 0 0 1-1.924-1.906c-.473-.82-.71-1.745-.71-2.775 0-1.02.237-1.935.71-2.745a5.1 5.1 0 0 1 1.924-1.92c.81-.46 1.698-.69 2.665-.69.977 0 1.865.23 2.664.69.809.46 1.445 1.1 1.91 1.92.473.81.71 1.725.71 2.745 0 1.03-.237 1.955-.71 2.775a5.025 5.025 0 0 1-1.91 1.905c-.81.46-1.697.69-2.664.69Zm0-1.876c.621 0 1.169-.14 1.643-.42.473-.29.843-.7 1.11-1.23.266-.53.4-1.145.4-1.845s-.134-1.31-.4-1.83a2.867 2.867 0 0 0-1.11-1.216c-.474-.28-1.022-.42-1.643-.42-.622 0-1.175.14-1.658.42-.474.28-.844.685-1.11 1.216-.267.52-.4 1.13-.4 1.83 0 .7.133 1.315.4 1.845.266.53.636.94 1.11 1.23.483.28 1.036.42 1.658.42ZM43.464 9.872c.977 0 1.767.315 2.368.946.602.62.903 1.49.903 2.61v4.875h-2.072v-4.59c0-.66-.163-1.165-.488-1.515-.326-.36-.77-.54-1.332-.54-.573 0-1.027.18-1.362.54-.326.35-.489.855-.489 1.515v4.59H38.92v-8.31h2.072v1.035c.277-.36.627-.64 1.051-.84a3.22 3.22 0 0 1 1.421-.316ZM55.736 13.968c0 .3-.02.57-.059.81h-5.994c.049.6.256 1.07.621 1.41.365.34.814.51 1.347.51.77 0 1.317-.335 1.643-1.005h2.235c-.237.8-.69 1.46-1.362 1.98-.67.51-1.495.766-2.471.766-.79 0-1.5-.175-2.132-.526a3.84 3.84 0 0 1-1.465-1.515c-.345-.65-.518-1.4-.518-2.25 0-.86.173-1.615.518-2.265.345-.65.829-1.15 1.45-1.5.622-.35 1.337-.526 2.147-.526.78 0 1.475.17 2.087.51.621.34 1.1.826 1.435 1.456.346.62.518 1.335.518 2.145Zm-2.146-.6c-.01-.54-.202-.97-.577-1.29-.375-.33-.834-.495-1.377-.495-.513 0-.947.16-1.302.48-.346.31-.558.745-.637 1.305h3.893ZM62.636 18.303l-3.76-4.665v4.665h-2.071V7.833h2.072v4.695l3.76-4.696h2.5l-4.262 5.19 4.381 5.281h-2.62Z",fill:"#8C8CA1"}),(0,a.jsx)(o.Path,{d:"M72.614 13.968c0 .3-.02.57-.06.81H66.56c.05.6.257 1.07.622 1.41.365.34.814.51 1.347.51.77 0 1.317-.335 1.642-1.005h2.235c-.236.8-.69 1.46-1.361 1.98-.671.51-1.495.766-2.472.766-.79 0-1.5-.175-2.131-.526a3.84 3.84 0 0 1-1.466-1.515c-.345-.65-.518-1.4-.518-2.25 0-.86.173-1.615.518-2.265.346-.65.83-1.15 1.45-1.5.623-.35 1.338-.526 2.147-.526.78 0 1.475.17 2.087.51.622.34 1.1.826 1.436 1.456.345.62.518 1.335.518 2.145Zm-2.147-.6c-.01-.54-.202-.97-.577-1.29-.375-.33-.834-.495-1.376-.495-.513 0-.947.16-1.303.48-.345.31-.557.745-.636 1.305h3.892ZM81.23 9.992l-5.076 12.242h-2.205l1.776-4.14-3.286-8.102h2.324l2.116 5.806 2.146-5.806h2.206Z",fill:"#8C8CA1"}),(0,a.jsx)(o.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M11.801 24.755c8.147 0 11.801-3.678 11.801-11.88 0-8.2-3.654-11.878-11.8-11.878C3.653.997 0 4.675 0 12.876c0 8.2 3.654 11.879 11.801 11.879ZM9.584 6.036h3.283v5.446h-2.035V7.79H9.008l.576-1.753Zm2.217 13.684c2.068 0 3.744-1.687 3.744-3.769 0-2.081-1.676-3.769-3.744-3.769-2.068 0-3.744 1.688-3.744 3.77 0 2.08 1.676 3.768 3.744 3.768Zm0-1.71c1.13 0 2.044-.922 2.044-2.059a2.051 2.051 0 0 0-2.044-2.058 2.051 2.051 0 0 0-2.044 2.058c0 1.137.915 2.058 2.044 2.058Z",fill:"#8C8CA1"})]}))}},579105:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var r=n(256666),o=n(968594),a=n(552322);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const s=function(e){return(0,a.jsxs)(o.default,u(u({viewBox:"0 0 82 25",fill:"none",accessibilityRole:"image"},e),{},{children:[(0,a.jsx)(o.Path,{d:"M32.835 18.409c-.967 0-1.855-.23-2.665-.69a5.133 5.133 0 0 1-1.924-1.906c-.473-.82-.71-1.745-.71-2.775 0-1.02.237-1.935.71-2.745a5.1 5.1 0 0 1 1.925-1.92c.809-.46 1.697-.69 2.664-.69.977 0 1.865.23 2.664.69.809.46 1.445 1.1 1.91 1.92.473.81.71 1.725.71 2.745 0 1.03-.237 1.955-.71 2.775a5.025 5.025 0 0 1-1.91 1.905c-.81.46-1.697.69-2.664.69Zm0-1.876c.621 0 1.169-.14 1.643-.42.473-.29.843-.7 1.11-1.23.266-.53.4-1.145.4-1.845s-.134-1.31-.4-1.83a2.866 2.866 0 0 0-1.11-1.216c-.474-.28-1.022-.42-1.643-.42-.622 0-1.175.14-1.658.42-.474.28-.844.685-1.11 1.216-.267.52-.4 1.13-.4 1.83 0 .7.133 1.315.4 1.845.266.53.636.94 1.11 1.23.483.28 1.036.42 1.658.42ZM43.464 9.872c.977 0 1.767.315 2.368.946.602.62.903 1.49.903 2.61v4.875h-2.072v-4.59c0-.66-.163-1.165-.488-1.515-.326-.36-.77-.54-1.332-.54-.573 0-1.027.18-1.362.54-.326.35-.489.855-.489 1.515v4.59H38.92v-8.31h2.072v1.035c.277-.36.627-.64 1.051-.84a3.22 3.22 0 0 1 1.421-.316ZM55.736 13.968c0 .3-.02.57-.059.81h-5.994c.049.6.256 1.07.621 1.41.365.34.814.51 1.347.51.77 0 1.318-.335 1.643-1.005h2.235c-.237.8-.69 1.46-1.362 1.98-.67.51-1.495.766-2.471.766-.79 0-1.5-.175-2.132-.526a3.84 3.84 0 0 1-1.465-1.515c-.345-.65-.518-1.4-.518-2.25 0-.86.173-1.615.518-2.265a3.64 3.64 0 0 1 1.45-1.5c.622-.35 1.337-.526 2.147-.526.78 0 1.475.17 2.087.51.621.34 1.1.826 1.435 1.456.346.62.518 1.335.518 2.145Zm-2.146-.6c-.01-.54-.202-.97-.577-1.29-.375-.33-.834-.495-1.377-.495-.513 0-.947.16-1.302.48-.345.31-.558.745-.637 1.305h3.893ZM62.636 18.303l-3.759-4.665v4.665h-2.072V7.833h2.072v4.695l3.76-4.696h2.5l-4.262 5.19 4.381 5.281h-2.62Z",fill:"#33C641"}),(0,a.jsx)(o.Path,{d:"M72.614 13.968c0 .3-.02.57-.06.81H66.56c.05.6.257 1.07.622 1.41.365.34.814.51 1.347.51.77 0 1.317-.335 1.643-1.005h2.234c-.236.8-.69 1.46-1.361 1.98-.671.51-1.495.766-2.472.766-.79 0-1.5-.175-2.131-.526a3.84 3.84 0 0 1-1.466-1.515c-.345-.65-.518-1.4-.518-2.25 0-.86.173-1.615.518-2.265a3.64 3.64 0 0 1 1.45-1.5c.623-.35 1.338-.526 2.147-.526.78 0 1.475.17 2.087.51.622.34 1.1.826 1.436 1.456.345.62.518 1.335.518 2.145Zm-2.146-.6c-.01-.54-.203-.97-.578-1.29-.375-.33-.834-.495-1.376-.495-.513 0-.947.16-1.303.48-.345.31-.557.745-.636 1.305h3.893ZM81.23 9.992l-5.076 12.242h-2.205l1.776-4.14-3.286-8.102h2.324l2.116 5.806 2.146-5.806h2.206Z",fill:"#33C641"}),(0,a.jsx)(o.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M11.801 24.755c8.147 0 11.801-3.678 11.801-11.88 0-8.2-3.654-11.878-11.8-11.878C3.653.997 0 4.675 0 12.876c0 8.2 3.654 11.879 11.801 11.879ZM9.584 6.036h3.283v5.446h-2.035V7.79H9.008l.576-1.753Zm2.217 13.684c2.068 0 3.744-1.687 3.744-3.769 0-2.081-1.676-3.769-3.744-3.769-2.068 0-3.744 1.688-3.744 3.77 0 2.08 1.676 3.768 3.744 3.768Zm0-1.71c1.13 0 2.044-.922 2.044-2.059a2.051 2.051 0 0 0-2.044-2.058 2.051 2.051 0 0 0-2.044 2.058c0 1.137.915 2.058 2.044 2.058Z",fill:"#33C641"})]}))}},758248:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});var r=n(18861),o=n(795116),a=n(256666),i=n(433996),u=n(459740),s=n(202784),l=n(132242),d=n(309021),c=n(558726),f=n(600378),p=n(808855),m=n(41690),h=n(552322),v=["children","renderLeftArrow","renderRightArrow","bg","selectedIndex","leftButtonProps","rightButtonProps"];function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x={code:"function anonymous({contentOffset:contentOffset,contentSize:contentSize}){const{currentOffsetX,showLeftArrow,showRightArrow,containerWidth}=this._closure;currentOffsetX.value=contentOffset.x;showLeftArrow.value=currentOffsetX.value>0;showRightArrow.value=Math.floor(contentSize.width-currentOffsetX.value)>containerWidth.value;}",location:"/home/runner/work/app-monorepo/app-monorepo/packages/components/src/ScrollableButtonGroup/ScrollableButtonGroup.tsx"},y={code:"function anonymous(){const{withTiming,showLeftArrow}=this._closure;return{opacity:withTiming(showLeftArrow.value?1:0,{duration:300}),scale:withTiming(showLeftArrow.value?1:0,{duration:300}),zIndex:withTiming(showLeftArrow.value?1:-1,{duration:300})};}",location:"/home/runner/work/app-monorepo/app-monorepo/packages/components/src/ScrollableButtonGroup/ScrollableButtonGroup.tsx"},k={code:"function anonymous(){const{withTiming,showRightArrow}=this._closure;return{opacity:withTiming(showRightArrow.value?1:0,{duration:300}),scale:withTiming(showRightArrow.value?1:0,{duration:300}),zIndex:withTiming(showRightArrow.value?1:-1,{duration:300})};}",location:"/home/runner/work/app-monorepo/app-monorepo/packages/components/src/ScrollableButtonGroup/ScrollableButtonGroup.tsx"},b=(0,s.forwardRef)((function(e,t){var n=e.children,a=e.renderLeftArrow,w=e.renderRightArrow,b=e.bg,j=void 0===b?"surface-default":b,I=e.selectedIndex,_=e.leftButtonProps,S=e.rightButtonProps,O=(0,u.default)(e,v),T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=(0,s.useRef)(t);return(0,s.useEffect)((function(){e&&("function"===typeof e?e(n.current):e.current=n.current)}),[e]),n}(t),A=(0,l.useSharedValue)(!1),C=(0,l.useSharedValue)(!1),M=(0,l.useSharedValue)(0),P=(0,l.useSharedValue)(0),R=(0,l.useSharedValue)(0),B=(0,s.useCallback)((function(e){R.value=e,P.value&&(C.value=Math.floor(R.value-M.value)>P.value)}),[]),N=(0,d.useAnimatedScrollHandler)(function(){var e=function(e){var t=e.contentOffset,n=e.contentSize;M.value=t.x,A.value=M.value>0,C.value=Math.floor(n.width-M.value)>P.value};return e._closure={currentOffsetX:M,showLeftArrow:A,showRightArrow:C,containerWidth:P},e.__initData=x,e.__workletHash=0xa0ebe17979e,e}(),[]),D=(0,s.useRef)([]),L=(0,s.useRef)(0),E=(0,s.useRef)(),U=(0,s.useCallback)((function(e){if(T.current){var t=D.current[e];if(t&&L.current){var n=t.x+t.width/2-L.current/2;return E.current=void 0,T.current.scrollTo({x:n,animated:!0})}}E.current=e}),[T]),H=s.Children.count(n);(0,s.useEffect)((function(){D.current=[],E.current=void 0}),[H]),(0,s.useEffect)((function(){void 0!==I&&U(I)}),[U,I]);var q=(0,s.useCallback)((function(){var e;null==(e=T.current)||e.scrollTo({x:M.value-P.value||0,animated:!0})}),[]),W=(0,s.useCallback)((function(){var e;null==(e=T.current)||e.scrollTo({x:M.value+P.value,animated:!0})}),[]),V=(0,s.useCallback)((function(e){var t=e.nativeEvent.layout.width;P.value=t,C.value=Math.floor(R.value-M.value)>P.value}),[]);return(0,h.jsxs)(r.default,g(g({bg:j},O),{},{onLayout:V,children:[(0,h.jsx)(c.default,{style:[{position:"absolute"},(0,f.useAnimatedStyle)(function(){var e=function(){return{opacity:(0,p.withTiming)(A.value?1:0,{duration:300}),scale:(0,p.withTiming)(A.value?1:0,{duration:300}),zIndex:(0,p.withTiming)(A.value?1:-1,{duration:300})}};return e._closure={withTiming:p.withTiming,showLeftArrow:A},e.__initData=y,e.__workletHash=0xeb84360e287,e}(),[])],children:(0,h.jsx)(o.default,{bg:j,children:a?a({onPress:q}):(0,h.jsx)(i.default,g({type:"plain",circle:!0,name:"ChevronLeftMini",size:"sm",onPress:q},_))})}),(0,h.jsx)(m.default,{ref:T,onLayout:function(e){var t=e.nativeEvent.layout.width;L.current=t,E.current&&U(E.current)},style:{flex:1},horizontal:!0,onScroll:N,scrollEventThrottle:16,showsHorizontalScrollIndicator:!1,onContentSizeChange:B,children:s.Children.map(n,(function(e,t){return(0,s.cloneElement)(e,g(g({},e.props),{},{onPress:function(){U(t),null==e.props.onPress||e.props.onPress()},onLayout:function(e){var n=e.nativeEvent.layout,r=n.width,o=n.x;D.current[t]={x:o,width:r}}}))}))}),(0,h.jsx)(c.default,{style:[{position:"absolute",right:0},(0,f.useAnimatedStyle)(function(){var e=function(){return{opacity:(0,p.withTiming)(C.value?1:0,{duration:300}),scale:(0,p.withTiming)(C.value?1:0,{duration:300}),zIndex:(0,p.withTiming)(C.value?1:-1,{duration:300})}};return e._closure={withTiming:p.withTiming,showRightArrow:C},e.__initData=k,e.__workletHash=3239759055399,e}(),[])],children:(0,h.jsx)(o.default,{bg:j,children:w?w({onPress:W}):(0,h.jsx)(i.default,g({type:"plain",circle:!0,name:"ChevronRightMini",size:"sm",onPress:W},S))})})]}))}));b.displayName="ScrollableButtonGroup";const j=b},538732:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var r=n(256666),o=n(459740),a=n(561220),i=n(470310),u=n(10918),s=n(795116),l=n(550398),d=n(435581),c=n(202784),f=n(758248),p=n(552322),m=["buttons","selectedIndex","onButtonPress","size","bg","maxTextWidth"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(e){var t=e.text,n=e.leftIcon,r=e.leftImage,o=e.leftComponentRender,f=e.rightIcon,m=e.rightImage,h=e.rightComponentRender,v=e.isCurrent,w=e.onPress,g=e.leftIconSize,x=e.onLayout,y=e.size,k=e.maxTextWidth,b=e.leftIconSelectedColor,j=e.rightIconSelectedColor,I="sm"===y,_=g||(I?"16px":"20px"),S=b||"icon-hovered",O=j||"icon-hovered",T=(0,c.useMemo)((function(){var e="0px";return t.length>0&&(e=I?"4px":"8px"),e}),[I,t.length]);return(0,p.jsx)(a.default,{mr:"8px",onPress:w,onLayout:x,children:function(e){var a=e.isHovered,c=e.isPressed;return(0,p.jsxs)(i.default,{alignItems:"center",h:I?"32px":"36px",px:I?"8px":"12px",py:I?"6px":"8px",borderRadius:"9999px",bg:v?"surface-selected":c?"surface-pressed":a?"surface-hovered":"transparent",children:[(!!n||!!r)&&(0,p.jsxs)(s.default,{borderRadius:"9999px",w:_,h:_,mr:T,children:[!!n&&(0,p.jsx)(d.default,{name:n,color:v?S:"icon-default"}),!!r&&(0,p.jsx)(l.default,{height:_,width:_,src:r})]}),null==o?void 0:o(),t.length>0?(0,p.jsx)(u.default.Body2Strong,{maxW:k,isTruncated:!0,color:v?"text-default":"text-subdued",children:t}):null,(!!f||!!m)&&(0,p.jsxs)(s.default,{borderRadius:"9999px",w:_,h:_,mr:T,children:[!!f&&(0,p.jsx)(d.default,{name:f,color:v?O:"icon-default"}),!!m&&(0,p.jsx)(l.default,{height:_,width:_,src:m})]}),null==h?void 0:h()]})}})},g=function(e){var t=e.buttons,n=e.selectedIndex,r=e.onButtonPress,a=e.size,i=void 0===a?"sm":a,u=e.bg,s=void 0===u?"surface-default":u,l=e.maxTextWidth,d=(0,o.default)(e,m);return(0,p.jsx)(f.default,v(v({bg:s,overflow:"hidden",w:"full",flexDirection:"row",alignItems:"center",position:"relative",selectedIndex:n},d),{},{children:t.map((function(e,t){return(0,p.jsx)(w,v(v({isCurrent:n===t},e),{},{size:i,maxTextWidth:l,onPress:function(){r(t)}}),t)}))}))};g.displayName="ToggleButtonGroup";const x=g},268165:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ir});var r=n(539144),o=n(386499),a=n(877531),i=n(561220),u=n(10918),s=n(225447),l=n(196234),d=n(18861),c=n(592923),f=n(202784),p=n(472719),m=n(783112),h=n(859071),v=n(552322),w=function(e){var t=e.searchContent,n=e.setSearchContext,r=(0,m.default)();return(0,v.jsx)(d.default,{children:(0,v.jsx)(c.default,{w:"full",placeholder:r.formatMessage({id:"form__search"}),mb:"4",value:t,onClear:function(){return n("")},onChangeText:n})})};const g=function(){var e=(0,m.default)(),t=(0,p.useRoute)(),n=(0,h.useNavigation)(),r=(0,f.useState)(""),o=(0,l.default)(r,2),c=o[0],g=o[1],x=(0,h.useAppSelector)((function(e){return e.swapTransactions.tokenList})),y=(0,f.useMemo)((function(){if(!t.params.networkIds)return x;var e=new Set(t.params.networkIds);return null==x?void 0:x.filter((function(t){return e.has(t.networkId)}))}),[x,t.params.networkIds]),k=(0,f.useMemo)((function(){if(!y)return[];var e=y.map((function(e){return{name:e.name,networkId:e.networkId,logoURI:e.logoURI,fullname:e.fullname}})).filter((function(e){return e.logoURI&&e.networkId&&e.name&&"All"!==e.name})),t=c.trim();return t&&(e=e.filter((function(e){return(e.fullname?e.fullname:e.name).toLowerCase().includes(t.toLowerCase())}))),e}),[y,c]);return(0,v.jsx)(a.default,{height:"560px",footer:null,header:e.formatMessage({id:"network__networks"}),flatListProps:{data:k,renderItem:function(e){var r=e.item;return(0,v.jsx)(i.default,{onPress:function(){null==t.params.onSelect||t.params.onSelect(r.networkId),n.goBack()},children:function(e){var t=e.isHovered,n=e.isPressed;return(0,v.jsxs)(d.default,{p:"2",alignItems:"center",borderRadius:12,flexDirection:"row",bg:n?"surface-pressed":t?"surface-hovered":"transparent",children:[(0,v.jsx)(s.default,{borderRadius:"full",overflow:"hidden",src:r.logoURI,w:"10",h:"10",mr:"2"}),(0,v.jsx)(u.default.Body1Strong,{children:r.fullname?r.fullname:r.name})]})}})},ListHeaderComponent:(0,v.jsx)(w,{searchContent:c,setSearchContext:g})}})};var x=n(566147),y=n(669083),k=n(634795),b=n(921311),j=n(79722),I=n(945821),_=n(265999);const S=function(){var e,t=(0,m.default)(),n=(0,p.useNavigation)(),r=null!=(e=(0,p.useRoute)().params)?e:{},o=r.onSelected,i=r.networkId,u=r.contactExcludeWalletAccount,s=(0,b.default)({defaultValues:{address:""},mode:"onChange"}),l=s.control,d=s.watch,c=s.trigger,w=s.setError,g=s.setValue,S=s.handleSubmit,O=s.formState.isValid,T=(0,j.useNameServiceStatus)(),A=T.onChange,C=T.disableSubmitBtn,M=T.address,P=(0,h.useDebounce)(d("address"),300),R=M||P;(0,f.useEffect)((function(){function e(){return(e=(0,k.default)((function*(){if(R&&i){if(C)return void c("address");try{yield I.default.validator.validateAddress(i,R.trim()),c("address")}catch(e){w("address",{message:t.formatMessage({id:"form__address_invalid"})})}}}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[R,i,c,w,t,C]);var B=(0,f.useCallback)(function(){var e=(0,k.default)((function*(e){if(i)try{yield I.default.validator.validateAddress(i,e.address.trim())}catch(a){return void y.default.show({title:t.formatMessage({id:"form__address_invalid"})},{type:"error"})}null==o||o({address:e.address,name:e.name});var r=n.getParent();null!=r&&r.canGoBack()?r.goBack():n.goBack()}));return function(t){return e.apply(this,arguments)}}(),[n,o,i,t]),N=(0,f.useCallback)((function(e){A(e)}),[A]),D=(0,f.useCallback)((function(e){return(0,v.jsx)(j.default,{name:e,onChange:N,networkId:i})}),[i,N]);return(0,v.jsx)(a.default,{header:t.formatMessage({id:"form__enter_address"}),hideSecondaryAction:!0,primaryActionTranslationId:"action__confirm",primaryActionProps:{isDisabled:!O||C,onPress:function(){return S((function(e){!C&&M&&(e.address=M),B(e)}))()}},children:(0,v.jsx)(x.default.Item,{control:l,name:"address",rules:{required:{value:!0,message:t.formatMessage({id:"form__field_is_required"})}},helpText:D,children:(0,v.jsx)(_.default,{networkId:i,onChangeAddressName:function(e){return g("name",e)},contactExcludeWalletAccount:u,plugins:["paste","scan","contact"]})})})};var O=n(361301),T=n(719392),A=n(795116),C=n(435581),M=n(866904),P=n(465760),R=n(749888),B=n(447325);const N=function(){var e=(0,m.default)(),t=(0,R.default)();return(0,f.useEffect)((function(){return B.appUIEventBus.on(B.AppUIEventBusNames.LimitOrderError,t),B.appUIEventBus.on(B.AppUIEventBusNames.LimitOrderCompleted,t),function(){B.appUIEventBus.off(B.AppUIEventBusNames.LimitOrderError,t),B.appUIEventBus.off(B.AppUIEventBusNames.LimitOrderCompleted,t)}}),[]),(0,v.jsx)(a.default,{children:(0,v.jsxs)(O.default,{alignItems:"center",justifyContent:"center",flex:1,children:[(0,v.jsx)(d.default,{w:"200px",h:"200px",children:(0,v.jsx)(P.default,{width:200,source:n(831903),autoPlay:!0,loop:!1})}),(0,v.jsx)(M.default,{typography:"DisplayMedium",children:e.formatMessage({id:"title__swap_processing_1_2"})}),(0,v.jsx)(d.default,{h:8}),(0,v.jsxs)(d.default,{position:"relative",children:[(0,v.jsxs)(d.default,{display:"flex",flexDirection:"row",alignItems:"center",children:[(0,v.jsx)(A.default,{w:"8",h:"8",backgroundColor:"interactive-default",borderRadius:"full",mr:"6",children:(0,v.jsx)(C.default,{name:"CheckMini",size:20,color:"text-on-primary"})}),(0,v.jsxs)(d.default,{children:[(0,v.jsx)(u.default.Body1Strong,{children:e.formatMessage({id:"title__approved"})}),(0,v.jsx)(u.default.Body1Strong,{children:e.formatMessage({id:"transaction__swap_status_completed"})})]})]}),(0,v.jsx)(d.default,{h:"6"}),(0,v.jsxs)(d.default,{display:"flex",flexDirection:"row",alignItems:"center",children:[(0,v.jsx)(A.default,{w:"8",h:"8",backgroundColor:"surface-subdued",borderRadius:"full",borderWidth:"2",borderColor:"interactive-default",mr:"6",children:(0,v.jsx)(d.default,{w:"2",h:"2",borderRadius:"full",backgroundColor:"interactive-default"})}),(0,v.jsxs)(d.default,{children:[(0,v.jsx)(u.default.Body1Strong,{children:e.formatMessage({id:"action__sign"})}),(0,v.jsxs)(d.default,{flexDirection:"row",children:[(0,v.jsx)(T.default,{size:"sm"}),(0,v.jsx)(u.default.Body1Strong,{ml:"2",children:e.formatMessage({id:"form__please_confirm_on_device"})})]})]})]}),(0,v.jsx)(d.default,{w:"8",h:"full",position:"absolute",top:"0",left:"0",display:"flex",justifyContent:"center",alignItems:"center",zIndex:-1,children:(0,v.jsx)(d.default,{w:"1",height:"80%",bg:"interactive-default"})})]})]})})};var D=n(737790),L=n(510374),E=n(470310),U=n(550398),H=n(626015),q=n(481047),W=n(423114),V=n(174915),z=n(428357),F=n(433996),$=n(256666),Q=n(459740),Z=n(119804),G=n(534756),K=n(331639),X=n(534159),J=n(395795),Y=n(393072),ee=n(415008),te=["token"];function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var re=function(e){var t=e.token,n=(0,Q.default)(e,te),r=(0,m.default)(),o=(0,h.useNavigation)(),a=(0,h.useNetworkSimple)(null==t?void 0:t.networkId),i=(0,J.default)(a).openAddressDetails,u=(0,f.useCallback)((function(){var e;(0,Z.copyToClipboard)(null!=(e=null==t?void 0:t.address)?e:""),y.default.show({title:r.formatMessage({id:"msg__copied"})})}),[r,null==t?void 0:t.address]),s=(0,f.useCallback)((function(){var e;o.navigate(q.RootRoutes.Modal,{screen:q.ModalRoutes.ScanQrcode,params:{screen:Y.ScanQrcodeRoutes.ScanQrcodeResult,params:{type:Y.ScanSubResultCategory.TEXT,data:null!=(e=null==t?void 0:t.address)?e:"",hideMoreMenu:!0}}})}),[o,null==t?void 0:t.address]),l=(0,f.useCallback)((function(){var e;i(null!=(e=null==t?void 0:t.tokenIdOnNetwork)?e:"")}),[i,t]),d=(0,f.useMemo)((function(){var e=[{id:"action__copy_address",onPress:u,icon:"Square2StackOutline"},{id:"action__show_full_address",onPress:s,icon:"MagnifyingGlassPlusOutline"}];return null!=a&&a.settings.hiddenBlockBrowserTokenDetailLink||e.push({id:"action__view_in_browser",onPress:l,icon:"ArrowTopRightOnSquareOutline"}),e}),[null==a?void 0:a.settings.hiddenBlockBrowserTokenDetailLink,u,s,l]);return(0,v.jsx)(K.default,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){(0,$.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({options:d},n))},oe=function(e){var t,n,r=e.accountId,o=e.token,a=(0,h.useTokenBalanceWithoutFrozen)({networkId:null!=(t=null==o?void 0:o.networkId)?t:"",accountId:null!=r?r:"",token:o,useRecycleBalance:null==(n=null==o?void 0:o.isNative)||n}),i=(0,V.useTokenPrice)(o),s=(0,ee.formatAmount)(a,6);return(0,ee.lte)(s,0)?null:(0,v.jsxs)(d.default,{alignItems:"flex-end",children:[(0,v.jsx)(u.default.Heading,{fontSize:16,lineHeight:24,children:s}),(0,v.jsx)(u.default.Caption,{color:"text-subdued",numberOfLines:2,children:(0,v.jsx)(X.FormatCurrency,{numbers:[null!=i?i:0,null!=a?a:0],render:function(e){return(0,v.jsx)(u.default.Caption,{ml:3,color:"text-subdued",children:i?e:"-"})}})})]})},ae=function(e){var t,n=e.accountId,r=e.token,o=(0,G.isAccountCompatibleWithNetwork)(null!=n?n:"",null!=(t=null==r?void 0:r.networkId)?t:"");return(0,v.jsxs)(d.default,{flexDirection:"row",children:[o?(0,v.jsx)(oe,{accountId:n,token:r}):null,(0,v.jsx)(re,{token:r,children:(0,v.jsx)(F.default,{w:"10",h:"10",name:"EllipsisVerticalMini",type:"plain",ml:"1",circle:!0,hitSlop:8,isDisabled:!(null!=r&&r.tokenIdOnNetwork)})})]})},ie=n(25655),ue=n(529710),se=function(){return(0,v.jsx)(d.default,{h:"4"})},le=function(){return(0,v.jsx)(E.default,{mb:"4",space:1,children:[1,2,3,4].map((function(e){return(0,v.jsx)(d.default,{h:"7",w:"12",borderRadius:12,overflow:"hidden",children:(0,v.jsx)(ue.default,{})},e)}))})},de=function(){return(0,v.jsx)(ie.default,{data:[1,2,3],ListHeaderComponent:le,renderItem:function(){return(0,v.jsxs)(d.default,{w:"full",flexDirection:"row",children:[(0,v.jsx)(d.default,{w:"10",h:"10",borderRadius:"full",overflow:"hidden",mr:"3",children:(0,v.jsx)(ue.default,{})}),(0,v.jsxs)(d.default,{flex:"1",children:[(0,v.jsx)(d.default,{h:"4",borderRadius:8,w:"40%",mb:"2",overflow:"hidden",children:(0,v.jsx)(ue.default,{})}),(0,v.jsx)(d.default,{h:"3",borderRadius:6,overflow:"hidden",width:"70%",children:(0,v.jsx)(ue.default,{})})]})]})},keyExtractor:function(e){return String(e)},ItemSeparatorComponent:se,showsVerticalScrollIndicator:!1})},ce=function(){return(0,v.jsx)(ie.default,{data:[1,2,3],renderItem:function(){return(0,v.jsxs)(d.default,{w:"full",flexDirection:"row",children:[(0,v.jsx)(d.default,{w:"10",h:"10",borderRadius:"full",overflow:"hidden",mr:"3",children:(0,v.jsx)(ue.default,{})}),(0,v.jsxs)(d.default,{flex:"1",children:[(0,v.jsx)(d.default,{h:"4",borderRadius:8,w:"40%",mb:"2",overflow:"hidden",children:(0,v.jsx)(ue.default,{})}),(0,v.jsx)(d.default,{h:"3",borderRadius:6,overflow:"hidden",width:"70%",children:(0,v.jsx)(ue.default,{})})]})]})},keyExtractor:function(e){return String(e)},ItemSeparatorComponent:se,showsVerticalScrollIndicator:!1})},fe=(0,f.createContext)({networkId:""}),pe=n(545455),me=n.n(pe),he=n(968079),ve=n(206391),we=n.n(ve),ge=n(134662),xe=n(63450),ye=n(613549);function ke(e){function t(t){var n=(0,f.useContext)(e).tokenList;return(0,f.useMemo)((function(){var e;if(!n)return[];var r=t||"All",o=n.find((function(e){return e.networkId===r}));return null!=(e=null==o?void 0:o.tokens)?e:[]}),[n,t])}function n(e,n){var r=t(e),o=(0,h.useAccountTokensOnChain)(e,n),a=(0,V.useCachedBalances)(e,n),i=(0,h.useAppSelector)((function(e){return e.tokens.tokenPriceMap})),u=(0,h.useAppSelector)((function(e){return e.settings.selectedFiatMoneySymbol})),s=(0,f.useCallback)((function(e){var t,n,r=i[`${e.networkId}${e.address?"-":""}${null!=(t=e.tokenIdOnNetwork)?t:""}`];return null!=(n=null==r?void 0:r[u])?n:0}),[i,u]);return(0,f.useMemo)((function(){var t=[].concat((0,he.default)(r),(0,he.default)(o));(0,ye.isBTCNetwork)(e)&&(t=t.filter((function(e){return e.isNative})));var n=new Set,i=function(e){return`${e.networkId}${e.tokenIdOnNetwork}`},u=t.filter((function(e){return!n.has(i(e))&&(n.add(i(e)),!0)})),l=function(e){var t,n,r=(0,ge.getBalanceKey)(e);return Boolean(a[r]&&Number((0,ee.formatAmount)(null!=(t=null==(n=a[r])?void 0:n.balance)?t:"0",6))>0)},d=function(e){var t;return e.riskLevel===xe.TokenRiskLevel.VERIFIED?-1:null!=(t=e.riskLevel)?t:xe.TokenRiskLevel.UNKNOWN};if(me()(a))return u;var c=u.filter((function(e){return l(e)}));c.sort((function(e,t){var n,r,o=(0,ge.getBalanceKey)(e),i=(0,ge.getBalanceKey)(t),u=a[o],l=a[i],c=new(we())(null!=(n=null==u?void 0:u.balance)?n:"0").multipliedBy(s(e)),f=new(we())(null!=(r=null==l?void 0:l.balance)?r:"0").multipliedBy(s(t));return c.isZero()&&f.isZero()?d(e)-d(t):c.isLessThan(f)?1:-1}));var f=u.filter((function(e){return!l(e)}));return c.concat(f)}),[r,o,a,s,e])}return{useTokenList:t,useAccountTokens:n,Observer:function(){var t=(0,f.useContext)(e),r=t.networkId,o=t.accountId,a=n(r,o),i=(0,h.useAppSelector)((function(e){return e.settings.selectedFiatMoneySymbol}));return(0,f.useEffect)((function(){r&&o&&I.default.servicePrice.fetchSimpleTokenPrice({accountId:o,networkId:r,tokenIds:a.map((function(e){return e.tokenIdOnNetwork})),vsCurrency:i})}),[a,r,o,i]),null}}}var be=ke(fe),je=be.useAccountTokens,Ie=(be.useTokenList,be.Observer),_e=function(){var e=(0,m.default)(),t=(0,h.useNavigation)(),n=(0,f.useContext)(fe),r=n.networkId,o=n.setNetworkId,a=n.networkOptions,s=n.otherNetworkOptions;return a&&0!==a.length?(0,v.jsx)(d.default,{mb:"4",children:(0,v.jsxs)(E.default,{space:"2",children:[a.map((function(e){return(0,v.jsx)(i.default,{onPress:function(){return null==o?void 0:o(e.networkId)},children:(0,v.jsxs)(d.default,{px:"2",py:"1.5",flexDirection:"row",alignItems:"center",bg:"surface-neutral-subdued",borderRadius:"12",borderWidth:1,borderColor:e.networkId===r?"interactive-default":"border-default",children:[e.logoURI?(0,v.jsx)(d.default,{w:"5",h:"5",borderRadius:"full",overflow:"hidden",mr:"1",children:(0,v.jsx)(U.default,{width:"20px",height:"20px",src:e.logoURI})}):null,(0,v.jsx)(u.default.Body2Strong,{children:e.name})]})},e.name)})),s&&s.length?(0,v.jsx)(i.default,{onPress:function(){return t.navigate(q.RootRoutes.Modal,{screen:q.ModalRoutes.Swap,params:{screen:z.SwapRoutes.ChainSelector,params:{networkIds:s?null==s?void 0:s.map((function(e){return e.networkId})).filter((function(e){return Boolean(e)})):void 0,onSelect:function(e){null==o||o(e)}}}})},children:(0,v.jsxs)(d.default,{px:"2",py:"1.5",flexDirection:"row",alignItems:"center",bg:"surface-neutral-subdued",borderRadius:"12",borderWidth:1,borderColor:"border-default",children:[(0,v.jsx)(u.default.Body2Strong,{children:`${s.length} ${e.formatMessage({id:"action__more"})}`}),(0,v.jsx)(d.default,{ml:"1",children:(0,v.jsx)(C.default,{size:12,name:"ChevronDownSolid"})})]})},"more"):null]})}):null},Se=function(e){var t=e.keyword,n=e.onChange,r=(0,m.default)();return(0,v.jsxs)(d.default,{px:"8px",children:[(0,v.jsx)(c.default,{w:"full",placeholder:r.formatMessage({id:"content__search_token_or_contract_address",defaultMessage:"Search Tokens"}),mb:"16px",value:t,onClear:function(){return n("")},onChangeText:function(e){return n(e)}}),(0,v.jsx)(_e,{})]})},Oe=function(e){var t=e.isLoading,n=e.terms,r=(0,m.default)();return t?(0,v.jsx)(d.default,{px:"2",children:(0,v.jsx)(ce,{})}):n.length>0?(0,v.jsx)(L.default,{emoji:"\ud83d\udd50",title:r.formatMessage({id:"content__no_results",defaultMessage:"No Result"}),subTitle:r.formatMessage({id:"content__no_results_desc",defaultMessage:"The token you searched for was not found"})}):null},Te=function(e){var t=e.token,n=e.onSelect,r=e.isSearchMode,o=(0,f.useContext)(fe),a=o.selectedToken,u=o.accountId,s=(0,h.useNetworkSimple)(t.networkId),l=(0,f.useCallback)((function(){null==n||n(t),(0,W.notifyIfRiskToken)(t)}),[n,t]),d=t.networkId===(null==a?void 0:a.networkId)&&t.tokenIdOnNetwork===(null==a?void 0:a.tokenIdOnNetwork),c=t.name;return t.tokenIdOnNetwork?(c=(0,H.shortenAddress)(t.tokenIdOnNetwork),r&&null!=s&&s.name&&(c=`${s.name} \xb7 ${c}`)):s&&(c=null==s?void 0:s.name),(0,v.jsxs)(i.default,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",p:"8px",borderRadius:"12px",overflow:"hidden",onPress:l,width:"full",opacity:d?60:1e3,_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},children:[(0,v.jsx)(D.default,{token:t,showInfo:!0,showNetworkIcon:!0,showTokenVerifiedIcon:!0,name:t.symbol,description:c,nameProps:{numberOfLines:2,maxW:"24"}}),(0,v.jsx)(ae,{token:t,accountId:u,isSearchMode:r})]},t.tokenIdOnNetwork)};const Ae=function(e){var t=e.onSelect,n=e.excluded,r=(0,m.default)(),o=(0,f.useState)(""),i=(0,l.default)(o,2),u=i[0],s=i[1],d=(0,f.useContext)(fe),c=d.networkId,p=d.accountId,w=je(c,p),g=(0,h.useDebounce)(u.trim(),300),x=(0,V.useTokenSearch)(g,c),y=x.loading,k=x.result,b=y||u!==g,j=(0,f.useMemo)((function(){return{dataSources:(null!=k?k:w).filter((function(e){return!(null!=n&&n.includes(e.tokenIdOnNetwork))})),renderItem:function(e){var n=e.item;return(0,v.jsx)(Te,{token:n,onSelect:t,isSearchMode:!!k})}}}),[k,w,t,n]),I=j.dataSources,_=j.renderItem;return w&&0!==w.length?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(a.default,{header:r.formatMessage({id:"title__select_a_token"}),height:"560px",footer:null,hidePrimaryAction:!0,flatListProps:{data:I,renderItem:_,keyExtractor:function(e){return`${null==e?void 0:e.tokenIdOnNetwork}:${null==e?void 0:e.networkId}`},showsVerticalScrollIndicator:!1,ListEmptyComponent:(0,v.jsx)(Oe,{isLoading:b,terms:g}),ListHeaderComponent:(0,v.jsx)(Se,{keyword:u,onChange:s}),mx:"-8px"}}),(0,v.jsx)(Ie,{})]}):(0,v.jsx)(a.default,{header:r.formatMessage({id:"title__select_a_token"}),height:"560px",footer:null,hidePrimaryAction:!0,children:(0,v.jsx)(de,{})})};const Ce=function(){var e=(0,m.default)(),t=(0,h.useNavigation)(),n=(0,h.useActiveWalletAccount)().network,r=(0,h.useAppSelector)((function(e){return e.swap.outputToken})),o=(0,h.useAppSelector)((function(e){return e.swap.inputToken})),a=(0,h.useAppSelector)((function(e){return e.swapTransactions.tokenList})),i=(0,h.useAppSelector)((function(e){return e.swap.sendingAccount})),u=(0,f.useState)((function(){var e=(null!=a?a:[]).map((function(e){return e.networkId}));if(o&&e.includes(o.networkId))return o.networkId})),s=(0,l.default)(u,2),d=s[0],c=s[1],p=(0,h.usePrevious)(d),w=(0,f.useCallback)((function(e){I.default.serviceSwap.setInputToken(e),t.goBack()}),[t]),g=(0,f.useMemo)((function(){if(!a)return{actives:[],inactives:[]};for(var t=a.filter((function(e){return e.name&&e.networkId})).map((function(t){return{name:"all"===t.name.toLowerCase()?e.formatMessage({id:"option__all"}):t.name,networkId:"all"===t.name.toLowerCase()?void 0:t.networkId,logoURI:t.logoURI}})),n=[],r=[],o=0;o<t.length;o+=1){var i=t[o],u=d||p;i.networkId&&i.networkId!==u?r.push(i):n.push(i)}return{actives:n,inactives:r}}),[a,e,d,p]),x=(0,f.useMemo)((function(){return{impl:null==n?void 0:n.impl,networkId:d,setNetworkId:c,selectedToken:r,accountId:null==i?void 0:i.id,tokenList:a,networkOptions:g.actives,otherNetworkOptions:g.inactives}}),[r,d,c,null==n?void 0:n.impl,null==i?void 0:i.id,a,g]);return(0,f.useEffect)((function(){I.default.serviceSwap.fetchSwapTokenBalance({accountId:null==i?void 0:i.id,networkId:d})}),[d,null==i?void 0:i.id]),(0,v.jsx)(fe.Provider,{value:x,children:(0,v.jsx)(Ae,{onSelect:w})})};var Me=n(854787),Pe=n(785192),Re=n(74008),Be=n(799126),Ne=n(512607),De=["label","children"];function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){(0,$.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ue=function(e){var t,n=e.limitOrder,r=(0,h.useNetwork)({networkId:n.networkId}).network,o=(0,ee.formatAmountExact)((0,ee.getTokenAmountValue)(n.tokenIn,n.tokenInValue)),a=(0,ee.formatAmountExact)((0,ee.getTokenAmountValue)(n.tokenOut,n.tokenOutValue));return(0,v.jsxs)(d.default,{my:"0",px:"0",children:[(0,v.jsx)(d.default,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:(0,v.jsxs)(d.default,{flexDirection:"row",alignItems:"center",children:[(0,v.jsx)(D.default,{size:"8",token:n.tokenIn}),(0,v.jsxs)(d.default,{ml:"3",children:[(0,v.jsxs)(u.default.Body1,{children:[o,null==(t=n.tokenIn)?void 0:t.symbol.toString()]}),(0,v.jsx)(u.default.Body2,{color:"text-subdued",children:null==r?void 0:r.name})]})]})}),(0,v.jsx)(d.default,{h:"8",w:"full",flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:(0,v.jsx)(d.default,{mr:"4",width:"8",flexDirection:"row",justifyContent:"center",children:(0,v.jsx)(C.default,{name:"ArrowDownMini",size:16})})}),(0,v.jsx)(d.default,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:(0,v.jsxs)(d.default,{flexDirection:"row",alignItems:"center",children:[(0,v.jsx)(D.default,{size:"8",token:n.tokenOut}),(0,v.jsxs)(d.default,{ml:"3",children:[(0,v.jsx)(d.default,{flexDirection:"row",alignItems:"center",children:(0,v.jsxs)(u.default.Body1,{children:[a,n.tokenOut.symbol.toUpperCase()]})}),(0,v.jsx)(u.default.Body2,{color:"text-subdued",children:null==r?void 0:r.name})]})]})})]})},He=function(e){var t=e.label,n=e.children,r=(0,Q.default)(e,De);return(0,v.jsxs)(d.default,Ee(Ee({position:"relative",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},r),{},{children:[(0,v.jsx)(u.default.Body2,{color:"text-disabled",children:t}),(0,v.jsx)(d.default,{children:n})]}))};const qe=function(){var e,t,n=(0,p.useRoute)(),r=(0,m.default)(),o=(0,Ne.useAllLimitOrders)(),s=(0,Re.default)().formatDate,c=(0,f.useState)(!1),w=(0,l.default)(c,2),g=w[0],x=w[1],b=(0,Ne.useCancelLimitOrderCallback)(),j=n.params.orderHash,I=function(e){var t=(0,f.useState)(e),n=(0,l.default)(t,2),r=n[0],o=n[1];return(0,f.useEffect)((function(){e&&o(e)}),[e]),r}(o.find((function(e){return e.orderHash===j}))),_=(0,h.useAccount)({accountId:null!=(e=null==I?void 0:I.accountId)?e:"",networkId:null!=(t=null==I?void 0:I.networkId)?t:""}).account,S=(0,f.useCallback)((function(){I&&((0,Z.copyToClipboard)(I.orderHash),y.default.show({title:r.formatMessage({id:"msg__copied"})}))}),[I,r]),T=(0,f.useCallback)((0,k.default)((function*(){if(_&&I){x(!0);try{yield b({activeAccount:_,details:I})}finally{x(!1)}}})),[b,I,_]);if(!I)return null;var A=0===Number(I.remainingFillable)?r.formatMessage({id:"form_opened"}):`${Math.floor(Number((0,ee.getLimitOrderPercent)(I)))}%`;return(0,v.jsx)(a.default,{header:r.formatMessage({id:"title__order_details"}),hideSecondaryAction:!0,primaryActionTranslationId:"action__cancel",onPrimaryActionPress:T,footer:I.canceled?null:void 0,primaryActionProps:{leftIconName:"XMarkOutline",type:"plain",width:"full",isLoading:g},children:(0,v.jsxs)(d.default,{children:[(0,v.jsx)(Ue,{limitOrder:I}),(0,v.jsx)(Pe.default,{my:"4"}),(0,v.jsxs)(O.default,{space:"4",children:[(0,v.jsx)(He,{label:r.formatMessage({id:"Rate"}),children:(0,v.jsx)(Be.default,{tokenA:I.tokenIn,tokenB:I.tokenOut,rate:I.rate})}),(0,v.jsx)(He,{label:r.formatMessage({id:"form__order_hash"}),children:(0,v.jsx)(i.default,{textAlign:"right",onPress:S,maxW:56,children:(0,v.jsx)(u.default.Body2Strong,{mr:"1",children:I.orderHash})})}),(0,v.jsx)(He,{label:r.formatMessage({id:"content__created"}),children:(0,v.jsx)(u.default.Body2Strong,{children:s(new Date(1e3*I.createdAt))})}),(0,v.jsx)(He,{label:r.formatMessage({id:"form__expiration"}),children:(0,v.jsx)(u.default.Body2Strong,{children:s(new Date(1e3*I.expiredIn))})}),(0,v.jsx)(He,{label:r.formatMessage({id:"form__status"}),children:I.canceled?(0,v.jsx)(Me.default,{type:"warning",size:"sm",title:r.formatMessage({id:"badge__cancelling"})}):(0,v.jsx)(Me.default,{type:"info",size:"sm",title:A})})]})]})})};var We=n(538732),Ve=(0,f.createContext)({networkId:""}),ze=ke(Ve),Fe=ze.useAccountTokens,$e=(ze.useTokenList,ze.Observer),Qe=function(){var e=(0,f.useContext)(Ve),t=e.networkId,n=e.setNetworkId,r=e.networkOptions,o=(0,f.useMemo)((function(){return r?r.map((function(e){return{text:e.name,networkId:e.networkId,leftComponentRender:function(){return(0,v.jsx)(d.default,{mr:"1",children:(0,v.jsx)(s.default,{size:5,src:e.logoURI})})}}})):[]}),[r]),a=(0,f.useCallback)((function(e){var t=o[e];null==n||n(t.networkId)}),[o,n]),i=(0,f.useMemo)((function(){return o.findIndex((function(e){return e.networkId===t}))}),[o,t]);return 0===o.length?null:(0,v.jsx)(d.default,{mb:"4",children:(0,v.jsx)(We.default,{buttons:o,selectedIndex:i,onButtonPress:a,bg:"background-default"})})},Ze=function(e){var t=e.keyword,n=e.onChange,r=(0,m.default)();return(0,v.jsxs)(d.default,{px:"8px",children:[(0,v.jsx)(Qe,{}),(0,v.jsx)(c.default,{w:"full",placeholder:r.formatMessage({id:"content__search_token_or_contract_address",defaultMessage:"Search Tokens"}),mb:"16px",value:t,onClear:function(){return n("")},onChangeText:function(e){return n(e)}})]})},Ge=function(e){var t=e.isLoading,n=e.terms,r=(0,m.default)();return t?(0,v.jsx)(d.default,{px:"2",children:(0,v.jsx)(ce,{})}):n.length>0?(0,v.jsx)(L.default,{emoji:"\ud83d\udd50",title:r.formatMessage({id:"content__no_results",defaultMessage:"No Result"}),subTitle:r.formatMessage({id:"content__no_results_desc",defaultMessage:"The token you searched for was not found"})}):null},Ke=function(e){var t,n,r,o=e.token,a=e.isSearchMode,i=(0,f.useContext)(Ve).accountId,s=(0,G.isAccountCompatibleWithNetwork)(null!=i?i:"",null!=(t=null==o?void 0:o.networkId)?t:""),l=(0,h.useTokenBalance)({networkId:null!=(n=null==o?void 0:o.networkId)?n:"",accountId:null!=i?i:"",token:o,useRecycleBalance:null==(r=null==o?void 0:o.isNative)||r}),c=(0,V.useTokenPrice)(o);return!a&&s&&(0,ee.gt)(l,0)?(0,v.jsxs)(d.default,{alignItems:"flex-end",children:[(0,v.jsx)(u.default.Heading,{fontSize:16,lineHeight:24,children:(0,ee.formatAmount)(l,6)}),(0,v.jsx)(u.default.Caption,{color:"text-subdued",numberOfLines:2,children:(0,v.jsx)(X.FormatCurrency,{numbers:[null!=c?c:0,null!=l?l:0],render:function(e){return(0,v.jsx)(u.default.Caption,{ml:3,color:"text-subdued",children:c?e:"-"})}})})]}):(0,v.jsx)(C.default,{name:"ChevronRightMini",size:20,color:"icon-subdued"})},Xe=function(e){var t=e.token,n=e.onSelect,r=e.isSearchMode,o=(0,f.useContext)(Ve).selectedToken,a=(0,h.useNetworkSimple)(t.networkId),u=(0,f.useCallback)((function(){null==n||n(t),(0,W.notifyIfRiskToken)(t)}),[n,t]),s=t.networkId===(null==o?void 0:o.networkId)&&t.tokenIdOnNetwork===(null==o?void 0:o.tokenIdOnNetwork),l=t.name;return t.tokenIdOnNetwork?(l=(0,H.shortenAddress)(t.tokenIdOnNetwork),r&&null!=a&&a.name&&(l=`${a.name} \xb7 ${l}`)):a&&(l=null==a?void 0:a.name),(0,v.jsxs)(i.default,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",p:"8px",borderRadius:"12px",overflow:"hidden",onPress:u,width:"full",opacity:s?60:1e3,_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},children:[(0,v.jsx)(D.default,{token:t,showInfo:!0,showNetworkIcon:!0,showTokenVerifiedIcon:!0,name:t.symbol,description:l,nameProps:{numberOfLines:2}}),(0,v.jsx)(Ke,{token:t,isSearchMode:r})]},t.tokenIdOnNetwork)};const Je=function(e){var t=e.onSelect,n=e.excluded,r=(0,m.default)(),o=(0,f.useState)(""),i=(0,l.default)(o,2),u=i[0],s=i[1],d=(0,f.useContext)(Ve),c=d.networkId,p=d.accountId,w=Fe(c,p),g=(0,h.useDebounce)(u.trim(),300),x=(0,V.useTokenSearch)(g,c),y=x.loading,k=x.result,b=y||u!==g,j=(0,f.useMemo)((function(){return{dataSources:(null!=k?k:w).filter((function(e){return!(null!=n&&n.includes(e.tokenIdOnNetwork))})),renderItem:function(e){var n=e.item;return(0,v.jsx)(Xe,{token:n,onSelect:t,isSearchMode:!!k})}}}),[k,w,t,n]),I=j.dataSources,_=j.renderItem;return w&&0!==w.length?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(a.default,{header:r.formatMessage({id:"title__select_a_token"}),height:"560px",footer:null,hidePrimaryAction:!0,flatListProps:{data:I,renderItem:_,keyExtractor:function(e){return`${null==e?void 0:e.tokenIdOnNetwork}:${null==e?void 0:e.networkId}`},showsVerticalScrollIndicator:!1,ListEmptyComponent:(0,v.jsx)(Ge,{isLoading:b,terms:g}),ListHeaderComponent:(0,v.jsx)(Ze,{keyword:u,onChange:s}),mx:"-8px"}}),(0,v.jsx)($e,{})]}):(0,v.jsx)(a.default,{header:r.formatMessage({id:"title__select_a_token"}),height:"560px",footer:null,hidePrimaryAction:!0,children:(0,v.jsx)(de,{})})};var Ye=n(363250);const et=function(){var e=(0,m.default)(),t=(0,h.useNavigation)(),n=(0,h.useActiveWalletAccount)().network,r=(0,h.useAppSelector)((function(e){return e.limitOrder.tokenIn})),o=(0,h.useAppSelector)((function(e){return e.limitOrder.tokenOut})),a=(0,h.useAppSelector)((function(e){return e.limitOrder.activeAccount})),i=(0,h.useAppSelector)((function(e){return e.swapTransactions.tokenList})),u=(0,f.useState)((function(){var e=(null!=i?i:[]).map((function(e){return e.networkId}));if(r&&e.includes(r.networkId))return r.networkId})),s=(0,l.default)(u,2),d=s[0],c=s[1],p=(0,f.useCallback)((function(e){I.default.serviceLimitOrder.setInputToken(e),t.goBack()}),[t]),w=(0,f.useMemo)((function(){return i?i.filter((function(e){return Ye.limitOrderNetworkIds.includes(e.networkId)})):[]}),[i]),g=(0,f.useMemo)((function(){return w?w.map((function(t){return{name:"all"===t.name.toLowerCase()?e.formatMessage({id:"option__all"}):t.name,networkId:"all"===t.name.toLowerCase()?void 0:t.networkId,logoURI:t.logoURI}})):[]}),[w,e]),x=(0,f.useMemo)((function(){return{impl:null==n?void 0:n.impl,networkId:d,setNetworkId:c,selectedToken:o,accountId:null==a?void 0:a.id,networkOptions:g,tokenList:w}}),[o,d,c,null==n?void 0:n.impl,null==a?void 0:a.id,g,w]);(0,f.useEffect)((function(){I.default.serviceSwap.fetchSwapTokenBalance({accountId:null==a?void 0:a.id,networkId:d})}),[d,null==a?void 0:a.id]);var y=(0,f.useMemo)((function(){return[""]}),[]);return(0,v.jsx)(Ve.Provider,{value:x,children:(0,v.jsx)(Je,{onSelect:p,excluded:y})})};const tt=function(){var e=(0,h.useNavigation)(),t=(0,h.useAppSelector)((function(e){return e.limitOrder.tokenIn})),n=(0,h.useAppSelector)((function(e){return e.limitOrder.tokenOut})),r=(0,h.useAppSelector)((function(e){return e.swapTransactions.tokenList})),o=(0,h.useAppSelector)((function(e){return e.limitOrder.activeAccount})),a=null==n?void 0:n.networkId,i=(0,f.useCallback)((function(t){I.default.serviceLimitOrder.setOutputToken(t),e.goBack()}),[e]),u=(0,f.useMemo)((function(){return r?r.filter((function(e){return Ye.limitOrderNetworkIds.includes(e.networkId)})):[]}),[r]),s=(0,f.useMemo)((function(){return{networkId:null==t?void 0:t.networkId,selectedToken:t,accountId:null==o?void 0:o.id,tokenList:u}}),[t,u,null==o?void 0:o.id]);(0,f.useEffect)((function(){I.default.serviceSwap.fetchSwapTokenBalance({accountId:null==o?void 0:o.id,networkId:a})}),[a,null==o?void 0:o.id]);var l=(0,f.useMemo)((function(){return[""]}),[]);return(0,v.jsx)(Ve.Provider,{value:s,children:(0,v.jsx)(Je,{onSelect:i,excluded:l})})};var nt=n(469712);const rt=function(){var e=(0,m.default)(),t=(0,h.useNavigation)(),n=(0,h.useAppSelector)((function(e){return e.swap.inputToken})),r=(0,h.useAppSelector)((function(e){return e.swap.outputToken})),o=(0,h.useAppSelector)((function(e){return e.swapTransactions.tokenList})),a=(0,nt.useSwapRecipient)(),i=(0,f.useState)((function(){var e=(null!=o?o:[]).map((function(e){return e.networkId}));if(r&&e.includes(r.networkId))return r.networkId})),u=(0,l.default)(i,2),s=u[0],d=u[1],c=(0,f.useState)((null==n?void 0:n.networkId)===(null==r?void 0:r.networkId)||null==r?void 0:r.networkId),p=(0,l.default)(c,2),w=p[0],g=p[1];(0,f.useEffect)((function(){s&&s!==(null==n?void 0:n.networkId)&&g(s)}),[s,n]);var x=(0,f.useMemo)((function(){if(!o)return{actives:[],inactives:[]};var t=o.filter((function(e){return e.name&&e.networkId})).map((function(t){return{name:"all"===t.name.toLowerCase()?e.formatMessage({id:"option__all"}):t.name,networkId:"all"===t.name.toLowerCase()?void 0:t.networkId,logoURI:t.logoURI}})),r=function(e){return e.networkId?e.networkId===(null==n?void 0:n.networkId)?-9:w&&e.networkId===w?-8:0:-10};t=t.sort((function(e,t){return r(e)-r(t)}));var a=w?3:2;return{actives:t.slice(0,a),inactives:t.slice(a)}}),[o,e,n,w]),y=(0,f.useCallback)((function(e){I.default.serviceSwap.setOutputToken(e),t.goBack()}),[t]),k=(0,f.useMemo)((function(){return{networkId:s,setNetworkId:d,selectedToken:n,accountId:null==a?void 0:a.accountId,tokenList:o,networkOptions:x.actives,more:x.inactives.length}}),[s,d,n,null==a?void 0:a.accountId,o,x]);return(0,f.useEffect)((function(){I.default.serviceSwap.fetchSwapTokenBalance({accountId:null==a?void 0:a.accountId,networkId:s})}),[s,null==a?void 0:a.accountId]),(0,v.jsx)(fe.Provider,{value:k,children:(0,v.jsx)(Ae,{onSelect:y})})};var ot=(0,f.createContext)({networkId:""}),at=ke(ot),it=at.useAccountTokens,ut=(at.useTokenList,at.Observer),st=function(){var e=(0,h.useNavigation)(),t=(0,f.useContext)(ot),n=t.networkId,r=t.setNetworkId,o=t.networkOptions,a=t.crosschainOptions;return o&&0!==o.length?(0,v.jsx)(d.default,{mb:"4",w:"full",overflow:"hidden",children:(0,v.jsx)(E.default,{space:"2",children:o.map((function(t){return(0,v.jsx)(i.default,{onPress:function(){t.isCrosschain?e.navigate(q.RootRoutes.Modal,{screen:q.ModalRoutes.Swap,params:{screen:z.SwapRoutes.ChainSelector,params:{networkIds:a?a.map((function(e){return e.networkId})).filter((function(e){return Boolean(e)})):void 0,onSelect:function(e){null==r||r(e)}}}}):null==r||r(t.networkId)},children:(0,v.jsxs)(d.default,{px:"2",py:"1.5",flexDirection:"row",alignItems:"center",bg:"surface-neutral-subdued",borderRadius:"12",borderWidth:1,borderColor:t.networkId===n?"interactive-default":"border-default",children:[t.logoURI?(0,v.jsx)(d.default,{w:"5",h:"5",borderRadius:"full",overflow:"hidden",mr:"1",children:(0,v.jsx)(U.default,{width:"20px",height:"20px",src:t.logoURI})}):null,(0,v.jsx)(u.default.Body2Strong,{children:t.name}),t.isCrosschain?(0,v.jsx)(d.default,{ml:"1",children:(0,v.jsx)(C.default,{size:12,name:"ChevronDownSolid"})}):null]})},t.networkId)}))})}):null},lt=function(e){var t=e.keyword,n=e.onChange,r=(0,m.default)();return(0,v.jsxs)(d.default,{px:"8px",children:[(0,v.jsx)(c.default,{w:"full",placeholder:r.formatMessage({id:"content__search_token_or_contract_address",defaultMessage:"Search Tokens"}),mb:"16px",value:t,onClear:function(){return n("")},onChangeText:function(e){return n(e)}}),(0,v.jsx)(st,{})]})},dt=function(e){var t=e.isLoading,n=e.terms,r=(0,m.default)();return t?(0,v.jsx)(d.default,{px:"2",children:(0,v.jsx)(ce,{})}):n.length>0?(0,v.jsx)(L.default,{emoji:"\ud83d\udd50",title:r.formatMessage({id:"content__no_results",defaultMessage:"No Result"}),subTitle:r.formatMessage({id:"content__no_results_desc",defaultMessage:"The token you searched for was not found"})}):null},ct=function(e){var t=e.token,n=e.onSelect,r=e.isSearchMode,o=(0,f.useContext)(ot),a=o.selectedToken,u=o.accountId,s=(0,h.useNetworkSimple)(t.networkId),l=(0,f.useCallback)((function(){null==n||n(t),(0,W.notifyIfRiskToken)(t)}),[n,t]),d=t.networkId===(null==a?void 0:a.networkId)&&t.tokenIdOnNetwork===(null==a?void 0:a.tokenIdOnNetwork),c=t.name;return t.tokenIdOnNetwork?(c=(0,H.shortenAddress)(t.tokenIdOnNetwork),r&&null!=s&&s.name&&(c=`${s.name} \xb7 ${c}`)):s&&(c=null==s?void 0:s.name),(0,v.jsxs)(i.default,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",p:"8px",borderRadius:"12px",overflow:"hidden",onPress:l,width:"full",opacity:d?60:1e3,_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},children:[(0,v.jsx)(D.default,{token:t,showInfo:!0,showNetworkIcon:!0,showTokenVerifiedIcon:!0,name:t.symbol,description:c,nameProps:{numberOfLines:2,maxW:"24"}}),(0,v.jsx)(ae,{token:t,isSearchMode:r,accountId:u})]},t.tokenIdOnNetwork)};const ft=function(e){var t=e.onSelect,n=e.excluded,r=(0,m.default)(),o=(0,f.useState)(""),i=(0,l.default)(o,2),u=i[0],s=i[1],d=(0,f.useContext)(ot),c=d.networkId,p=d.accountId,w=it(c,p),g=(0,h.useDebounce)(u.trim(),300),x=(0,V.useTokenSearch)(g,c),y=x.loading,k=x.result,b=y||u!==g,j=(0,f.useMemo)((function(){return{dataSources:(null!=k?k:w).filter((function(e){return!(null!=n&&n.includes(e.tokenIdOnNetwork))})),renderItem:function(e){var n=e.item;return(0,v.jsx)(ct,{token:n,onSelect:t,isSearchMode:!!k})}}}),[k,w,t,n]),I=j.dataSources,_=j.renderItem;return w&&0!==w.length?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(a.default,{header:r.formatMessage({id:"title__select_a_token"}),height:"560px",footer:null,hidePrimaryAction:!0,flatListProps:{data:I,renderItem:_,keyExtractor:function(e){return`${null==e?void 0:e.tokenIdOnNetwork}:${null==e?void 0:e.networkId}`},showsVerticalScrollIndicator:!1,ListEmptyComponent:(0,v.jsx)(dt,{isLoading:b,terms:g}),ListHeaderComponent:(0,v.jsx)(lt,{keyword:u,onChange:s}),mx:"-8px"}}),(0,v.jsx)(ut,{})]}):(0,v.jsx)(a.default,{header:r.formatMessage({id:"title__select_a_token"}),height:"560px",footer:null,hidePrimaryAction:!0,children:(0,v.jsx)(de,{})})};const pt=function(){var e=(0,m.default)(),t=(0,h.useNavigation)(),n=(0,h.useAppSelector)((function(e){return e.swap.inputToken})),r=(0,h.useAppSelector)((function(e){return e.swap.outputToken})),o=(0,h.useAppSelector)((function(e){return e.swapTransactions.tokenList})),a=(0,nt.useSwapRecipient)(),i=(0,f.useState)((function(){var e=(null!=o?o:[]).map((function(e){return e.networkId}));if(r&&e.includes(r.networkId))return r.networkId})),u=(0,l.default)(i,2),s=u[0],d=u[1],c=(0,f.useMemo)((function(){if(!o)return{actives:[],inactives:[]};var t=o.filter((function(e){return e.name&&e.networkId})).map((function(t){return{name:"all"===t.name.toLowerCase()?e.formatMessage({id:"option__all"}):t.name,networkId:"all"===t.name.toLowerCase()?void 0:t.networkId,logoURI:t.logoURI}})),r=function(e){return e.networkId?e.networkId===(null==n?void 0:n.networkId)?-9:0:-10},a=(t=t.sort((function(e,t){return r(e)-r(t)}))).slice(0,2),i=t.slice(2);if(s&&s!==(null==n?void 0:n.networkId)){var u=i.findIndex((function(e){return e.networkId===s}));if(u>=0){var l=i.splice(u,1)[0];l&&(l.name=e.formatMessage({id:"form__cross_chain_str"},{0:l.name}),l.isCrosschain=!0,a.push(l))}}else{var d={name:e.formatMessage({id:"form__cross_chain_desc"}),isCrosschain:!0,networkId:"cross-chain"};a.push(d)}return{actives:a,inactives:i}}),[o,e,n,s]),p=(0,f.useCallback)((function(e){I.default.serviceSwap.setOutputToken(e),t.goBack()}),[t]),w=(0,f.useMemo)((function(){return{networkId:s,setNetworkId:d,selectedToken:n,accountId:null==a?void 0:a.accountId,tokenList:o,networkOptions:c.actives,crosschainOptions:c.inactives}}),[s,d,n,null==a?void 0:a.accountId,o,c]);return(0,f.useEffect)((function(){I.default.serviceSwap.fetchSwapTokenBalance({accountId:null==a?void 0:a.accountId,networkId:s})}),[s,null==a?void 0:a.accountId]),(0,v.jsx)(ot.Provider,{value:w,children:(0,v.jsx)(ft,{onSelect:p})})};var mt=n(465022),ht=n(432986),vt=n(559656),wt=n(747225),gt=function(){var e,t=(0,wt.useRuntime)().wallets,n=(0,p.useNavigation)(),r=null!=(e=(0,p.useRoute)().params)?e:{},o=r.networkId,a=r.onSelected,s=(0,f.useState)([]),c=(0,l.default)(s,2),m=c[0],h=c[1];(0,f.useEffect)((function(){function e(){return(e=(0,k.default)((function*(){for(var e=function*(){var e=t[n];if("watching"!==e.type){var r=yield I.default.engine.getAccounts(e.accounts,o);r&&r.length>0&&h((function(t){return[].concat((0,he.default)(t),[{wallet:e,data:r,key:e.id}])}))}},n=0;n<t.length;n+=1)yield*e()}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var w=(0,f.useCallback)((function(e){null==a||a(e),n.goBack()}),[a,n]);return(0,v.jsx)(mt.SectionList,{stickySectionHeadersEnabled:!1,sections:m,keyExtractor:function(e,t){return`${e.address}${t}`},renderItem:function(e){var t=e.item,n=e.section,r=e.index;return(0,v.jsxs)(i.default,{flexDirection:"row",p:"4",mx:{base:4,md:6},borderTopLeftRadius:0===r?"12":void 0,borderTopRightRadius:0===r?"12":void 0,borderBottomLeftRadius:r===n.data.length-1?"12":void 0,borderBottomRightRadius:r===n.data.length-1?"12":void 0,borderBottomWidth:r===n.data.length-1?1:0,borderWidth:1,borderColor:"divider",onPress:function(){return w(t)},alignItems:"center",children:[(0,v.jsx)(d.default,{mr:"3",children:(0,v.jsx)(vt.default,{avatar:n.wallet.avatar,walletImage:n.wallet.type,hwWalletType:n.wallet.deviceType||(0,ht.getDeviceTypeByDeviceId)(n.wallet.associatedDevice),size:"sm"})},t.address),(0,v.jsxs)(d.default,{flex:"1",children:[(0,v.jsx)(u.default.Body1Strong,{color:"text-default",numberOfLines:1,children:t.name}),(0,v.jsx)(u.default.Body2,{color:"text-subdued",children:(0,H.shortenAddress)(t.address)})]})]})},renderSectionHeader:function(e){var t=e.section;return(0,v.jsx)(u.default.Subheading,{my:"2",mx:{base:4,md:6},color:"text-subdued",children:t.wallet.name})}})};const xt=function(){var e=(0,m.default)();return(0,v.jsx)(a.default,{header:e.formatMessage({id:"title__choose_an_account"}),footer:null,primaryActionTranslationId:"form__enter_address",hideSecondaryAction:!0,hidePrimaryAction:!0,maxHeight:"560px",staticChildrenProps:{flex:1,py:6},children:(0,v.jsx)(gt,{})})};var yt=n(231846),kt=function(){var e,t=(0,m.default)(),n=(0,p.useNavigation)(),r=null!=(e=(0,p.useRoute)().params)?e:{},o=r.networkId,a=r.onSelected,s=(0,h.useAppSelector)((function(e){return e.contacts.contacts})),l=(0,f.useMemo)((function(){var e=Object.values(s);if(e=e.sort((function(e,t){return e.createAt,t.createAt,-1})),o){var t=o.split("--")[0];e=e.filter((function(e){return e.badge.toUpperCase()===t.toUpperCase()}))}return e}),[s,o]),c=(0,f.useCallback)((function(e){null==a||a({address:e.address,name:e.name}),n.goBack()}),[a,n]),w=(0,f.useCallback)((function(e){var t=e.item,n=e.index;return(0,v.jsxs)(i.default,{py:"4",px:"4",mx:{base:4,md:6},flexDirection:"row",alignItems:"center",bg:"surface-default",borderTopRadius:0===n?"12":void 0,borderBottomRadius:n===l.length-1?"12":void 0,borderBottomWidth:n===l.length-1?1:0,borderWidth:1,borderColor:"divider",onPress:function(){return c(t)},children:[(0,v.jsx)(d.default,{w:"8",h:"8",borderRadius:"full",bg:"decorative-surface-one",justifyContent:"center",alignItems:"center",children:(0,v.jsx)(u.default.DisplaySmall,{color:"decorative-icon-one",children:t.name.toUpperCase()[0]})}),(0,v.jsxs)(d.default,{flex:"1",ml:"4",children:[(0,v.jsxs)(d.default,{flexDirection:"row",children:[(0,v.jsx)(u.default.Body1Strong,{mr:"2",numberOfLines:1,maxWidth:"80%",children:t.name}),(0,v.jsx)(Me.default,{size:"sm",title:t.badge.toUpperCase()})]}),(0,v.jsx)(d.default,{children:(0,v.jsx)(u.default.Body2,{color:"text-subdued",numberOfLines:2,children:t.address})})]})]})}),[l,c]),g=(0,f.useMemo)((function(){return(0,v.jsx)(A.default,{w:"full",h:"full",children:(0,v.jsx)(L.default,{title:t.formatMessage({id:"title__no_cantact"}),subTitle:t.formatMessage({id:"title__no_cantact_desc"}),emoji:"\ud83d\udcc7"})})}),[t]);return(0,v.jsx)(ie.default,{ListEmptyComponent:g,data:l,renderItem:w,keyExtractor:function(e){return e.address}})},bt=function(){var e,t=(0,wt.useRuntime)().wallets,n=(0,p.useNavigation)(),r=null!=(e=(0,p.useRoute)().params)?e:{},o=r.networkId,a=r.onSelected,s=(0,f.useState)([]),c=(0,l.default)(s,2),m=c[0],h=c[1];(0,f.useEffect)((function(){function e(){return(e=(0,k.default)((function*(){for(var e=function*(){var e=t[n],r=yield I.default.engine.getAccounts(e.accounts,o);r&&r.length>0&&h((function(t){return[].concat((0,he.default)(t),[{wallet:e,data:r,key:e.id}])}))},n=0;n<t.length;n+=1)yield*e()}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var w=(0,f.useCallback)((function(e){null==a||a({address:e.address,name:e.name,accountId:e.accountId}),n.goBack()}),[a,n]);return(0,v.jsx)(mt.SectionList,{sections:m,keyExtractor:function(e,t){return`${e.address}${t}`},renderItem:function(e){var t=e.item,n=e.section,r=e.index;return(0,v.jsxs)(i.default,{flexDirection:"row",p:"4",bg:"surface-default",mx:{base:4,md:6},borderTopLeftRadius:0===r?"12":void 0,borderTopRightRadius:0===r?"12":void 0,borderBottomLeftRadius:r===n.data.length-1?"12":void 0,borderBottomRightRadius:r===n.data.length-1?"12":void 0,borderBottomWidth:r===n.data.length-1?1:0,borderWidth:1,borderColor:"divider",onPress:function(){return w({address:t.address,name:t.name,accountId:t.id})},alignItems:"center",children:[(0,v.jsx)(d.default,{mr:"3",children:(0,v.jsx)(vt.default,{avatar:n.wallet.avatar,walletImage:n.wallet.type,hwWalletType:n.wallet.deviceType||(0,ht.getDeviceTypeByDeviceId)(n.wallet.associatedDevice),size:"sm"})},t.address),(0,v.jsxs)(d.default,{flex:"1",children:[(0,v.jsx)(u.default.Body1Strong,{color:"text-default",numberOfLines:1,children:t.name}),(0,v.jsx)(u.default.Body2,{color:"text-subdued",children:(0,H.shortenAddress)(t.address)})]})]})},stickySectionHeadersEnabled:!1,renderSectionHeader:function(e){var t=e.section;return(0,v.jsx)(u.default.Subheading,{my:"2",mx:{base:4,md:6},color:"text-subdued",children:t.wallet.name})}})};const jt=function(){var e,t=(0,m.default)(),n=(0,f.useState)(0),r=(0,l.default)(n,2),o=r[0],i=r[1],u=(0,p.useNavigation)(),s=null!=(e=(0,p.useRoute)().params)?e:{},c=s.networkId,h=s.onSelected,w=(0,f.useCallback)((function(){u.navigate(z.SwapRoutes.EnterAddress,{networkId:c,onSelected:h})}),[u,c,h]),g=(0,f.useMemo)((function(){return(0,v.jsx)(bt,{})}),[]),x=(0,f.useMemo)((function(){return(0,v.jsx)(kt,{})}),[]);return(0,v.jsxs)(a.default,{header:t.formatMessage({id:"title__choose_an_account"}),hideSecondaryAction:!0,footer:0===o?void 0:null,primaryActionTranslationId:"form__enter_address",primaryActionProps:{leftIconName:"PencilMini",type:"basic",onPress:w},maxHeight:"560",hidePrimaryAction:0!==o,staticChildrenProps:{flex:1,py:6},children:[(0,v.jsx)(d.default,{mb:"6",px:{base:4,md:6},children:(0,v.jsx)(yt.default,{values:[t.formatMessage({id:"form__my_wallet"}),t.formatMessage({id:"title__address_book"})],selectedIndex:o,onChange:i})}),(0,v.jsx)(d.default,{flex:"1",children:0===o?g:x})]})};var It=n(380845),_t=n(468702),St=n(759900),Ot=n(328012),Tt=n(671029),At=n(722363),Ct=n(768496),Mt=n(342954),Pt=["networkId","accountId","onSelect","excluded"];function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){(0,$.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nt=function(e){var t=e.wallet,n=e.setWalletId,o=(0,m.default)(),a=(0,r.default)(),u=(0,wt.useRuntime)().wallets,s=(0,f.useMemo)((function(){return u.filter((function(e){return"watching"!==e.type})).map((function(e){return{label:(0,Ct.getWalletName)({wallet:e,intl:o})||"-",value:e.id,wallet:e}}))}),[u,o]);return(0,v.jsx)(d.default,{pb:2,children:(0,v.jsx)(d.default,{flexDirection:"row",alignItems:"center",children:(0,v.jsx)(Ot.default,{title:o.formatMessage({id:"title__wallets"}),footer:null,value:null==t?void 0:t.id,activatable:!1,containerProps:{flex:1,alignItems:"flex-start"},options:s,renderTrigger:function(e){var n=e.visible,r=e.onPress;return(0,v.jsx)(i.default,{onPress:r,children:function(e){var r=e.isHovered,a=e.isPressed;return(0,v.jsxs)(d.default,{flexDirection:"row",alignItems:"center",maxW:"240px",p:2,rounded:"xl",bgColor:n?"surface-selected":a?"surface-pressed":r?"surface-hovered":void 0,children:[t?(0,v.jsx)(vt.WalletAvatarPro,{wallet:t,size:"xs",devicesStatus:void 0}):null,(0,v.jsx)(M.default,{typography:"Body2Strong",ml:2,mr:1,color:"text-subdued",isTruncated:!0,children:(0,Ct.getWalletName)({wallet:t,intl:o})}),(0,v.jsx)(d.default,{children:(0,v.jsx)(C.default,{name:"ChevronUpDownMini",color:"icon-subdued",size:20})})]})}})},renderItem:function(e,t,r){return(0,v.jsx)(i.default,{onPress:function(){null==r||r(e.value,e),null==n||n(e.value)},children:function(n){var r=n.isHovered,o=n.isPressed;return(0,v.jsxs)(d.default,{p:2,pr:{base:3,md:2},flexDirection:"row",alignItems:"center",bgColor:o?"surface-pressed":r?"surface-hovered":void 0,rounded:"xl",children:[e.wallet?(0,v.jsx)(vt.WalletAvatarPro,{wallet:e.wallet,devicesStatus:void 0,size:a?"lg":"xs"}):null,(0,v.jsx)(M.default,{typography:{sm:"Body1Strong",md:"Body2Strong"},flex:1,mx:3,children:e.label}),t?(0,v.jsx)(C.default,{name:a?"CheckOutline":"CheckMini",size:a?24:20,color:"interactive-default"}):null]})}},e.value)}})})})},Dt=function(e){var t=e.networkId,n=(0,h.useNetworkSimple)(t);return(0,v.jsxs)(d.default,{flexDirection:"row",children:[null!=n&&n.logoURI?(0,v.jsx)(s.default,{source:{uri:null==n?void 0:n.logoURI},size:4,borderRadius:"full",mr:2}):null,(0,v.jsx)(u.default.Caption,{color:"text-subdued",children:(null==n?void 0:n.name)||"-"})]})},Lt=function(e){var t=e.account,n=e.networkId,r=e.onSelect,o=e.isActive,a=(0,h.useNetworkSimple)(n),u=(0,h.useNativeTokenBalance)(null==a?void 0:a.id,t.id),s=(0,wt.useAppSelector)((function(e){return e.general.activeExternalWalletName})),l=(0,ye.isLightningNetworkByNetworkId)(n),c=(0,f.useCallback)((function(){null==r||r(t)}),[t,r]);return(0,v.jsx)(i.default,{onPress:c,children:function(e){var n=e.isHovered,r=e.isPressed;return(0,v.jsxs)(d.default,{flexDirection:"row",alignItems:"center",p:2,pr:1.5,rounded:"xl",bgColor:o?"surface-selected":r?"surface-pressed":n?"surface-hovered":"transparent",children:[(0,v.jsx)(Mt.default,{mr:3,accountId:null==t?void 0:t.id,walletName:o?s:null}),(0,v.jsxs)(d.default,{flex:1,mr:3,children:[(0,v.jsx)(M.default,{typography:"Body2Strong",isTruncated:!0,numberOfLines:1,children:t.name}),(0,v.jsxs)(d.default,{flexDirection:"row",children:[(0,v.jsx)(M.default,{typography:"Body2",color:"text-subdued",children:l?null:(0,H.shortenAddress)(t.displayAddress||t.address)}),!l&&(0,v.jsx)(d.default,{w:1,h:1,m:2,bgColor:"icon-disabled",rounded:"full"}),u?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(M.default,{typography:"Body2",color:"text-subdued",isTruncated:!0,children:(0,ee.formatAmount)(u,6)}),(0,v.jsx)(M.default,{typography:"Body2",color:"text-subdued",ml:"2px",children:null==a?void 0:a.symbol.toUpperCase()})]}):(0,v.jsx)(St.default,{shape:"Body2"})]})]})]})}})},Et=function(e){var t=e.activeAccountId,n=e.accounts,r=e.networkId,o=e.searchValue,a=e.onSelect,i=(0,h.useDebounce)(o,500),u=(0,f.useMemo)((function(){if(n){var e=i.toLowerCase();return null==n?void 0:n.filter((function(t){var n=t.name,r=t.address;return n.toLowerCase().includes(e)||r.toLowerCase().includes(e)}))}}),[n,i]);return(0,v.jsx)(_t.ScrollView,{children:(0,v.jsx)(O.default,{space:"1",children:null==u?void 0:u.map((function(e){return(0,v.jsx)(Lt,{account:e,isActive:e.id===t,networkId:r,onSelect:a},e.id)}))})})},Ut=function(e){var t=e.walletId,n=e.networkId,r=(0,m.default)(),o=(0,At.useCreateAccountInWallet)({walletId:t,networkId:n}),a=o.createAccount,i=o.isCreateAccountSupported,u=(0,h.useNetwork)({networkId:n}).network;return(0,v.jsx)(L.default,{emoji:"\ud83d\udcb3",title:r.formatMessage({id:"empty__no_account_title"}),subTitle:r.formatMessage({id:"empty__no_account_desc"}),handleAction:function(){i?a():y.default.show({title:r.formatMessage({id:At.NETWORK_NOT_SUPPORT_CREATE_ACCOUNT_I18N_KEY},{0:null==u?void 0:u.shortName})})},actionTitle:r.formatMessage({id:"action__create_account"}),actionProps:{leftIconName:"PlusOutline"},flex:1,mt:8})};const Ht=function(e){var t=e.networkId,n=e.accountId,r=e.onSelect,o=e.excluded,i=(0,Q.default)(e,Pt),u=(0,m.default)(),s=(0,f.useState)(""),p=(0,l.default)(s,2),h=p[0],w=p[1],g=(0,f.useState)(),x=(0,l.default)(g,2),y=x[0],b=x[1],j=(0,wt.useAppSelector)((function(e){return e.runtime.wallets})),_=(0,f.useState)((function(){var e;if(n)for(var t=0;t<j.length;t+=1){var r=j[t];if(r.accounts.includes(n))return r.id}return null==(e=j[0])?void 0:e.id})),S=(0,l.default)(_,2),O=S[0],T=S[1],A=(0,f.useMemo)((function(){return j.find((function(e){return e.id===O}))}),[j,O]);return(0,f.useEffect)((function(){function e(){return(e=(0,k.default)((function*(){var e,r=yield I.default.engine.getAccounts(null!=(e=null==A?void 0:A.accounts)?e:[],t);if(n&&t&&o&&o.accountId&&o.networkId){var a=yield I.default.engine.getAccount(o.accountId,o.networkId);r=r.filter((function(e){return e.address!==a.address}))}if((0,ye.isLightningNetworkByNetworkId)(t)){var i=yield I.default.serviceLightningNetwork.batchGetLnUrlByAccounts({networkId:null!=t?t:"",accounts:r});r=r.map((function(e){var t=i[e.id];return Bt(Bt({},e),{},{address:t})}))}b(r)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[A,t,n,j,o]),(0,v.jsx)(a.default,Bt(Bt({height:"560px",header:u.formatMessage({id:"title__accounts"}),headerDescription:(0,v.jsx)(Dt,{networkId:t})},i),{},{children:(0,v.jsx)(Tt.LazyDisplayView,{children:(0,v.jsxs)(d.default,{flex:"1",children:[(0,v.jsxs)(d.default,{children:[(0,v.jsx)(Nt,{wallet:A,setWalletId:T}),(0,v.jsx)(c.default,{w:"full",value:h,placeholder:u.formatMessage({id:"form__search"}),onChangeText:w,onClear:function(){return w("")}})]}),(0,v.jsx)(d.default,{flex:"1",mt:"2",children:y&&(null==y?void 0:y.length)>0?(0,v.jsx)(Et,{accounts:y,networkId:t,searchValue:h,onSelect:r,activeAccountId:n}):(0,v.jsx)(Ut,{walletId:O,networkId:null!=t?t:""})})]})})}))};const qt=function(){var e,t,n=(0,p.useRoute)(),r=(0,p.useNavigation)(),o=(0,nt.useSwapRecipient)(),a=(0,f.useCallback)((function(e){var t;null==(t=n.params)||null==t.onSelected||t.onSelected({address:e.address,name:e.name,accountId:e.id}),r.goBack()}),[n,r]),i=null==(e=n.params)?void 0:e.networkId,u=(0,f.useCallback)((function(){r.navigate(q.RootRoutes.Modal,{screen:q.ModalRoutes.Swap,params:{screen:z.SwapRoutes.EnterAddress,params:{networkId:i,contactExcludeWalletAccount:!0,onSelected:function(e){var t;null==(t=n.params)||null==t.onSelected||t.onSelected({address:e.address,name:null==e?void 0:e.name})}}}})}),[r,i,n.params]),s=(0,f.useMemo)((function(){return{accountId:(0,It.appSelector)((function(e){var t;return null==(t=e.swap.sendingAccount)?void 0:t.id})),networkId:(0,It.appSelector)((function(e){var t;return null==(t=e.swap.inputToken)?void 0:t.networkId}))}}),[]),l=(0,f.useMemo)((function(){return{type:"basic",leftIconName:"PencilSolid"}}),[]);return(0,v.jsx)(Ht,{accountId:null==o?void 0:o.accountId,networkId:null==(t=n.params)?void 0:t.networkId,excluded:s,onSelect:a,hideSecondaryAction:!0,primaryActionTranslationId:"form__enter_address",onPrimaryActionPress:u,primaryActionProps:l})};var Wt=n(277170),Vt=function(e){var t,n,r=e.response,o=e.token,a=null==r?void 0:r.limited,i=(0,nt.useTokenAmount)(o,null==a?void 0:a.max),s=(0,nt.useTokenAmount)(o,null==a?void 0:a.min),l=(0,m.default)();return o?(a&&a.max?n=(0,v.jsxs)(u.default.Caption,{color:"text-subdued",children:[l.formatMessage({id:"form__max_amount"})," ",null==i?void 0:i.typedValue,null==o?void 0:o.symbol]}):a&&a.min?n=(0,v.jsxs)(u.default.Caption,{color:"text-subdued",children:[l.formatMessage({id:"form__min_amount"}),null==s?void 0:s.typedValue,null==o?void 0:o.symbol]}):"swftc"===(null==r||null==(t=r.data)?void 0:t.type)&&(n=(0,v.jsx)(u.default.Caption,{color:"text-subdued",children:l.formatMessage({id:"form__cap_str_day_rates_may_change_due_to_market"},{0:"200,000 USDT"})})),n?(0,v.jsx)(d.default,{mt:"3",children:n}):null):null};function zt(e){var t=e.token,n=e.amount,r="";return t&&n&&(r=(0,ee.formatAmount)((0,ee.getTokenAmountValue)(t,n),4)),r}function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){(0,$.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qt=(0,f.createContext)({selectedIndex:0,onSelect:function(e){}}),Zt=function(){return(0,v.jsxs)(d.default,{children:[(0,v.jsx)(d.default,{w:"full",h:"20",borderRadius:12,overflow:"hidden",children:(0,v.jsx)(ue.default,{})}),(0,v.jsx)(d.default,{h:"3"}),(0,v.jsx)(d.default,{w:"full",h:"20",borderRadius:12,overflow:"hidden",children:(0,v.jsx)(ue.default,{})})]})},Gt=function(e){var t=e.imageSrc;return t?(0,v.jsx)(d.default,{w:"full",h:"full",bgColor:"surface-default",borderRadius:"full",overflow:"hidden",children:(0,v.jsx)(s.default,{w:"full",h:"full",borderRadius:"full",overflow:"hidden",src:t})}):(0,v.jsx)(s.default,{w:"full",h:"full",borderRadius:"full",overflow:"hidden",source:n(55337)})},Kt=function(e){var t=e.providers,n=(0,m.default)();return t&&1!==t.length?(0,v.jsx)(d.default,{mt:"3",children:(0,v.jsx)(u.default.Caption,{color:"text-subdued",children:n.formatMessage({id:"form__via_str"},{0:t.map((function(e){return e.name})).join(", ")})})}):null},Xt=function(e){var t,n,r,o,a,s=e.response,l=e.index,c=(0,m.default)(),p=(0,h.useAppSelector)((function(e){return e.swap.inputToken})),w=(0,h.useAppSelector)((function(e){return e.swap.outputToken})),g=(0,f.useContext)(Qt),x=g.selectedIndex,y=g.onSelect,k=s.data,b=!!s.limited,j=zt({token:w,amount:null!=(t=null==k?void 0:k.estimatedBuyAmount)?t:null==k?void 0:k.buyAmount}),I=zt({token:w,amount:null==k?void 0:k.buyAmount}),_=null==(n=s.data)?void 0:n.providers,S=null==_||null==(r=_[0])?void 0:r.logoUrl,O=null==_||null==(o=_[0])?void 0:o.name;return _&&_.length>2&&(O=c.formatMessage({id:"form__multiple_routes"})),(0,v.jsxs)(i.default,{_hover:{bg:"surface-hovered"},_pressed:{bg:"surface-pressed"},bgColor:x===l?"surface-selected":void 0,p:"2",borderRadius:12,onPress:function(){return y(l)},isDisabled:b,mb:"3",children:[(0,v.jsxs)(d.default,{flexDirection:"row",justifyContent:"space-between",children:[(0,v.jsxs)(d.default,{flexDirection:"row",children:[(0,v.jsxs)(d.default,{position:"relative",w:"10",h:"10",mr:"3",children:[(0,v.jsx)(d.default,{w:"10",h:"10",children:(0,v.jsx)(Gt,{imageSrc:S})}),(0,v.jsx)(d.default,{position:"absolute",backgroundColor:"surface-default",w:"5",h:"5",right:"0",top:"-1",borderRadius:"full",borderWidth:1,borderColor:"border-default",overflow:"hidden",children:(0,v.jsx)(Gt,{imageSrc:null==k?void 0:k.quoterlogo})})]}),(0,v.jsxs)(d.default,{children:[(0,v.jsx)(u.default.Body1Strong,{maxW:"32",numberOfLines:1,children:O||"OneKey Swap"}),(0,v.jsx)(Wt.ArrivalTime,{typography:"Body2",value:null==k?void 0:k.arrivalTime})]})]}),(0,v.jsxs)(d.default,{alignItems:"flex-end",children:[(0,v.jsx)(u.default.Body1Strong,{children:j}),(0,v.jsxs)(u.default.Body2,{color:"text-subdued",children:[c.formatMessage({id:"form__no_fee_price"}),I]})]})]}),(0,v.jsx)(Kt,{providers:null==(a=s.data)?void 0:a.providers}),(0,v.jsx)(Vt,{response:s,token:p})]})},Jt=function(e){var t=e.responses,n=(0,m.default)(),r=t.map((function(e,t){return $t($t({},e),{},{index:t})})),o=r.filter((function(e){return e.limited})),a=r.filter((function(e){return!e.limited}));return(0,v.jsx)(_t.ScrollView,{children:(0,v.jsxs)(d.default,{children:[(0,v.jsx)(d.default,{children:a.map((function(e){var t,n;return(0,v.jsx)(Xt,{response:e,index:e.index},null!=(t=null==(n=e.data)?void 0:n.type)?t:"")}))}),o.length?(0,v.jsxs)(d.default,{children:[(0,v.jsx)(u.default.Subheading,{mb:"3",color:"text-subdued",children:n.formatMessage({id:"form__unavailable_uppercase"})}),(0,v.jsx)(d.default,{children:o.map((function(e){var t,n;return(0,v.jsx)(Xt,{response:e,index:e.index},null!=(t=null==(n=e.data)?void 0:n.type)?t:"")}))})]}):null]})})};const Yt=function(){var e=(0,m.default)(),t=(0,h.useNavigation)(),n=(0,f.useState)(-1),r=(0,l.default)(n,2),o=r[0],i=r[1],u=(0,h.useAppSelector)((function(e){return e.swap.inputToken})),s=(0,h.useAppSelector)((function(e){return e.swap.outputToken})),d=(0,h.useAppSelector)((function(e){return e.swap.quote})),c=(0,h.useAppSelector)((function(e){return e.swap.responses})),p=(0,f.useMemo)((function(){return null!=c?c:[]}),[c]);(0,f.useEffect)((function(){!function(){var e=p.findIndex((function(e){var t;return(null==(t=e.data)?void 0:t.type)===(null==d?void 0:d.type)}));-1!==e&&i(e)}()}),[p,d]);var w=(0,f.useCallback)((function(){var e=p[o];if(e){if(e.data){I.default.serviceSwap.setQuote(e.data);var n=(0,ee.stringifyTokens)(u,s);I.default.serviceSwap.setUserSelectedQuoter(n,e.data.type)}I.default.serviceSwap.setQuoteLimited(e.limited)}t.goBack()}),[o,p,t,u,s]),g=(0,f.useMemo)((function(){return{selectedIndex:o,onSelect:i}}),[o]);return(0,v.jsx)(Qt.Provider,{value:g,children:(0,v.jsx)(a.default,{header:e.formatMessage({id:"title__select_route"}),hideSecondaryAction:!0,primaryActionTranslationId:"action__confirm",onPrimaryActionPress:w,children:0===p.length?(0,v.jsx)(Zt,{}):(0,v.jsx)(Jt,{responses:p})})})};const en=function(){var e,t,n=(0,p.useRoute)(),r=(0,p.useNavigation)(),o=(0,f.useCallback)((function(e){var t;null==(t=n.params)||null==t.onSelected||t.onSelected(e),r.goBack()}),[n,r]);return(0,v.jsx)(Ht,{accountId:null==(e=n.params)?void 0:e.accountId,networkId:null==(t=n.params)?void 0:t.networkId,onSelect:o,footer:null})};var tn=n(103722),nn=n(362691),rn=n(821919);const on=function(){var e=(0,m.default)(),t=(0,wt.useSettings)().swapSlippagePercent,n=(0,f.useState)(t||"3"),r=(0,l.default)(n,2),o=r[0],s=r[1],c=(0,f.useCallback)((function(e){s(e.trim())}),[]);(0,f.useEffect)((function(){return function(){var e=new(we())(o);e.gt(0)&&e.lt(50)?I.default.dispatch((0,rn.setSwapSlippagePercent)(o)):e.gte(50)&&I.default.dispatch((0,rn.setSwapSlippagePercent)("3"))}}),[o]);var p=(0,f.useMemo)((function(){var t=new(we())(o);return!o||t.gte(50)||t.eq(0)?e.formatMessage({id:"msg__enter_a_valid_slippage_percentage"}):t.lt(.1)?e.formatMessage({id:"msg__your_transaction_may_fail"}):t.gte(5)&&t.lt(50)?e.formatMessage({id:"msg__your_transaction_may_be_frontrun"}):void 0}),[o,e]);return(0,v.jsx)(a.default,{header:e.formatMessage({id:"title__settings"}),footer:null,children:(0,v.jsxs)(d.default,{children:[(0,v.jsx)(u.default.Body2,{children:e.formatMessage({id:"form__slippage_tolerance"})}),(0,v.jsx)(tn.default,{w:"full",size:"xl",mt:"1",mb:"2",rightText:"%",value:o,onChangeText:c}),(0,v.jsxs)(E.default,{space:"2",children:[(0,v.jsx)(i.default,{alignItems:"center",justifyContent:"center",px:3.5,py:1.5,bg:"surface-neutral-subdued",_hover:{bg:"surface-hovered"},_pressed:{bg:"surface-pressed"},borderRadius:"full",onPress:function(){c("1")},children:(0,v.jsx)(u.default.Body2Strong,{children:"1%"})}),(0,v.jsx)(i.default,{alignItems:"center",justifyContent:"center",px:3.5,py:1.5,bg:"surface-neutral-subdued",_hover:{bg:"surface-hovered"},_pressed:{bg:"surface-pressed"},borderRadius:"full",onPress:function(){c("2")},children:(0,v.jsx)(u.default.Body2Strong,{children:"2%"})}),(0,v.jsx)(i.default,{alignItems:"center",justifyContent:"center",px:3.5,py:1.5,bg:"surface-neutral-subdued",_hover:{bg:"surface-hovered"},_pressed:{bg:"surface-pressed"},borderRadius:"full",onPress:function(){c("3")},children:(0,v.jsx)(u.default.Body2Strong,{children:"3%"})})]}),p?(0,v.jsx)(nn.FormErrorMessage,{message:p}):null]})})};var an=n(453028),un=n(190769),sn=n(873638),ln=n(579105),dn=(n(213208),n(321668)),cn=n(536738),fn=n(627009),pn=n(48369),mn=n(695662),hn=n(204230),vn=n(284315),wn=n(49198),gn=["tx"];function xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var yn=function(e){var t=e.tx,n=(0,Q.default)(e,gn),r=t.networkId,o=t.hash,a=(0,vn.useClipboard)().copyText,i=(0,wn.useNetwork)({networkId:r}).network,u=(0,J.default)(i),s=(0,f.useMemo)((function(){return[{id:"action_copy_hash",onPress:function(){return a(o)},icon:"Square2StackOutline"},u.hasAvailable&&{id:"action__view_in_browser",onPress:function(){return u.openTransactionDetails(o)},icon:"ArrowTopRightOnSquareOutline"}]}),[a,o,u]);return(0,v.jsx)(K.default,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(n),!0).forEach((function(t){(0,$.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({options:s},n))},kn=["accountId","networkId"],bn=["accountId","address","networkId"];function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function In(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(n),!0).forEach((function(t){(0,$.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _n=function(e){var t=e.accountId,n=e.networkId,r=(0,Q.default)(e,kn),o=(0,vn.useClipboard)().copyText,a=(0,wn.useNetwork)({networkId:n}).network,i=(0,h.useAccount)({accountId:null!=t?t:"",networkId:null!=n?n:""}).account,u=(0,J.default)(a),s=(0,h.useNavigationActions)().openRootHome,l=(0,f.useCallback)((function(){i&&n&&(I.default.serviceAccount.changeCurrrentAccount({accountId:i.id,networkId:n}),s())}),[s,i,n]),d=(0,f.useMemo)((function(){return[Boolean(i)&&{id:"action__view_account",onPress:function(){return l()},icon:"UserOutline"},Boolean((null==i?void 0:i.address)&&(null==i?void 0:i.address.length)>0)&&{id:"action__copy_address",onPress:function(){var e;return o(null!=(e=null==i?void 0:i.address)?e:"")},icon:"Square2StackOutline"},u.hasAvailable&&{id:"action__view_in_browser",onPress:function(){return u.openAddressDetails(null==i?void 0:i.address)},icon:"ArrowTopRightOnSquareOutline"}]}),[o,u,l,i]);return(0,v.jsx)(K.default,In({options:d},r))},Sn=function(e){var t=e.accountId,n=e.address,r=e.networkId,o=(0,Q.default)(e,bn),a=(0,vn.useClipboard)().copyText,i=(0,wn.useNetwork)({networkId:r}).network,u=(0,h.useAccount)({accountId:null!=t?t:"",networkId:null!=r?r:""}).account,s=(0,J.default)(i),l=(0,h.useNavigationActions)().openRootHome,d=(0,f.useCallback)((function(){u&&r&&(I.default.serviceAccount.changeCurrrentAccount({accountId:u.id,networkId:r}),l())}),[l,u,r]),c=(0,f.useMemo)((function(){return[Boolean(u)&&{id:"action__view_account",onPress:function(){return d()},icon:"UserOutline"},{id:"action__copy_address",onPress:function(){return a(null!=n?n:"")},icon:"Square2StackOutline"},s.hasAvailable&&{id:"action__view_in_browser",onPress:function(){return s.openAddressDetails(n)},icon:"ArrowTopRightOnSquareOutline"}]}),[a,s,d,n,u]);return(0,v.jsx)(K.default,In({options:c},o))},On=["label","children"];function Tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(n),!0).forEach((function(t){(0,$.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cn=function(e){var t=e.status;return"sucesss"===t?(0,v.jsx)(A.default,{w:"4",h:"4",borderRadius:"full",bg:"action-primary-default",children:(0,v.jsx)(C.default,{name:"CheckMini",size:12,color:"icon-on-primary"})}):"pending"===t?(0,v.jsx)(A.default,{w:"4",h:"4",borderRadius:"full",style:{backgroundColor:"#008CB8"},children:(0,v.jsx)(C.default,{name:"ClockMini",size:12,color:"icon-on-primary"})}):(0,v.jsx)(A.default,{w:"4",h:"4",borderRadius:"full",bg:"action-critical-default",children:(0,v.jsx)(C.default,{name:"XMarkMini",size:12,color:"icon-on-primary"})})},Mn=function(e){var t=e.status,n=(0,m.default)();return"sucesss"===t?(0,v.jsx)(u.default.Body1Strong,{children:n.formatMessage({id:"form__swap_success"})}):"pending"===t?(0,v.jsx)(u.default.Body1Strong,{children:n.formatMessage({id:"form__swap_pending"})}):(0,v.jsx)(u.default.Body1Strong,{children:n.formatMessage({id:"form__swap_failed"})})},Pn=function(e){var t,n=e.tx,r=e.onPress,o=(0,m.default)(),a=(0,f.useCallback)((function(e){var t=Math.max(Math.ceil(e/1e3),1);return t>=60?o.formatMessage({id:"content__str_mins"},{content__str_mins:Math.ceil(t/60)}):o.formatMessage({id:"content__str_seconds"},{content__str_seconds:t})}),[o]);return(0,v.jsxs)(d.default,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[(0,v.jsxs)(d.default,{flexDirection:"row",children:[(0,v.jsxs)(A.default,{w:"10",h:"10",bg:"surface-neutral-default",borderRadius:"full",position:"relative",mr:"3",children:[(0,v.jsx)(C.default,{name:"ArrowsRightLeftMini",size:25,color:"text-on-primary"}),(0,v.jsx)(d.default,{position:"absolute",bottom:"0",right:"0",children:(0,v.jsx)(Cn,{status:n.status})})]}),(0,v.jsxs)(d.default,{children:[(0,v.jsx)(Mn,{status:n.status}),n.confirmedTime?(0,v.jsx)(u.default.Caption,{color:"text-subdued",children:o.formatMessage({id:"form__str_used"},{0:a(n.confirmedTime-n.addedTime)})}):(0,v.jsx)(u.default.Caption,{color:"text-subdued",children:o.formatMessage({id:"form__estimate_str"},{0:a(1e3*(null!=(t=n.arrivalTime)?t:1))})})]})]}),"sucesss"===n.status?(0,v.jsx)(dn.default,{size:"xs",onPress:r,children:o.formatMessage({id:"action__swap_again"})}):null]})},Rn=function(e){var t=e.children,n=(0,f.useState)(""),r=(0,l.default)(n,2),o=r[0],a=r[1],i=(0,f.useCallback)((function(e){var t=e.nativeEvent.layout.width,n=`${Math.floor(.9*t)}px`;a(n)}),[]);return(0,v.jsx)(d.default,{flex:"1",onLayout:i,children:o?(0,v.jsx)(d.default,{width:o,children:t}):null})},Bn=function(e){var t,n,r,o,a,l,c,f,p,m,w,g,x=e.tx,y=(0,h.useNetworkSimple)(null==(t=x.tokens)?void 0:t.from.networkId),k=(0,h.useNetworkSimple)(null==(n=x.tokens)?void 0:n.to.networkId),b=(0,pn.useTransactionsAccount)(x.receivingAccountId,null==(r=x.tokens)?void 0:r.to.networkId),j=(0,pn.useTransactionsAccount)(x.accountId,null==(o=x.tokens)?void 0:o.from.networkId),I=(0,h.useAddressName)({address:x.receivingAddress});return(0,v.jsxs)(d.default,{my:"0",px:"0",children:[(0,v.jsxs)(d.default,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,v.jsxs)(d.default,{flex:1,flexDirection:"row",alignItems:"center",children:[(0,v.jsx)(D.default,{size:"8",token:null==(a=x.tokens)?void 0:a.from.token}),(0,v.jsxs)(d.default,{ml:"3",flex:1,children:[(0,v.jsx)(d.default,{flexDirection:"row",alignItems:"center",children:(0,v.jsx)(Rn,{children:(0,v.jsxs)(u.default.Body1,{numberOfLines:2,isTruncated:!0,children:[(0,ee.formatAmount)(null==(l=x.tokens)?void 0:l.from.amount,4),null==(c=x.tokens)||null==(f=c.from.token)?void 0:f.symbol.toString()]})})}),(0,v.jsx)(u.default.Body2,{color:"text-subdued",children:null==y?void 0:y.name})]})]}),(0,v.jsx)(_n,{networkId:x.networkId,accountId:x.accountId,children:(0,v.jsx)(i.default,{children:(0,v.jsxs)(d.default,{bg:"action-secondary-default",borderWidth:"1px",py:"1",pl:"1",pr:"2",borderRadius:"full",borderColor:"border-default",flexDirection:"row",alignItems:"center",children:[(0,v.jsx)(s.default,{w:"4",h:"4",mr:"1",src:null==y?void 0:y.logoURI}),(0,v.jsx)(u.default.Body2Strong,{selectable:!1,maxW:"120",children:null==j?void 0:j.name})]})})})]}),(0,v.jsx)(d.default,{h:"8",w:"full",flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:(0,v.jsx)(d.default,{mr:"4",width:"8",flexDirection:"row",justifyContent:"center",children:(0,v.jsx)(C.default,{name:"ArrowDownMini",size:16})})}),(0,v.jsxs)(d.default,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,v.jsxs)(d.default,{flex:1,flexDirection:"row",alignItems:"center",children:[(0,v.jsx)(D.default,{size:"8",token:null==(p=x.tokens)?void 0:p.to.token}),(0,v.jsxs)(d.default,{ml:"3",flex:1,children:[(0,v.jsxs)(d.default,{flexDirection:"row",alignItems:"center",children:[x.actualReceived?null:(0,v.jsx)(u.default.Caption,{mr:"1",children:"~"}),(0,v.jsx)(Rn,{children:(0,v.jsxs)(u.default.Body1,{numberOfLines:2,isTruncated:!0,children:[(0,ee.formatAmount)(null==(m=x.tokens)?void 0:m.to.amount,4),null==(w=x.tokens)?void 0:w.to.token.symbol.toUpperCase()]})})]}),(0,v.jsx)(u.default.Body2,{color:"text-subdued",children:null==k?void 0:k.name})]})]}),(0,v.jsx)(Sn,{address:x.receivingAddress,networkId:null==(g=x.tokens)?void 0:g.to.networkId,accountId:x.receivingAccountId,children:(0,v.jsx)(i.default,{children:(0,v.jsxs)(d.default,{bg:"action-secondary-default",borderWidth:"1px",py:"1",pl:"1",pr:"2",borderRadius:"full",borderColor:"border-default",flexDirection:"row",alignItems:"center",children:[(0,v.jsx)(s.default,{w:"4",h:"4",mr:"1",src:null==k?void 0:k.logoURI}),(0,v.jsx)(u.default.Body2Strong,{selectable:!1,maxW:"120",children:(null==b?void 0:b.name)||I||(0,H.shortenAddress)(x.receivingAddress||"")})]})})})]})]})},Nn=function(e){var t=e.label,n=e.children,r=(0,Q.default)(e,On);return(0,v.jsxs)(d.default,An(An({position:"relative",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},r),{},{children:[(0,v.jsx)(u.default.Body2,{color:"text-disabled",children:t}),(0,v.jsx)(d.default,{children:n})]}))},Dn=function(e){var t,n,r=e.tx,o=(0,m.default)(),a=(0,h.useNetworkSimple)(null==(t=r.tokens)?void 0:t.from.networkId),s=(0,h.useNetworkSimple)(null==(n=r.tokens)?void 0:n.to.networkId),l=(0,f.useMemo)((function(){var e,t,n,i,u,l,d,c,f=[{networkId:null!=(e=null==a?void 0:a.id)?e:"",header:o.formatMessage({id:"form__from_uppercase"}),label:null!=(t=null==a?void 0:a.shortName)?t:"",logoURI:null!=(n=null==a?void 0:a.logoURI)?n:"",value:null!=(i=r.hash)?i:"",url:(0,J.buildTransactionDetailsUrl)(a,r.hash)},{networkId:null!=(u=null==s?void 0:s.id)?u:"",header:o.formatMessage({id:"form__to_uppercase"}),label:null!=(l=null==s?void 0:s.shortName)?l:"",logoURI:null!=(d=null==s?void 0:s.logoURI)?d:"",value:null!=(c=r.destinationTransactionHash)?c:"",url:(0,J.buildTransactionDetailsUrl)(s,r.destinationTransactionHash)}];"socket"===r.quoterType&&(f=[{networkId:"",header:o.formatMessage({id:"form__provider_uppercase"}),label:"Socketscan",logoURI:"https://common.onekey-asset.com/logo/SocketBridge.png",value:"Socketscan",url:`https://socketscan.io/tx/${r.hash}`}].concat(f));return f.filter((function(e){return!(0,ye.isLightningNetworkByNetworkId)(e.networkId)}))}),[r,a,s,o]),c=(0,f.useCallback)((function(e,t){t.url&&(0,fn.openUrlExternal)(t.url)}),[]);return(0,v.jsx)(Ot.default,{footer:null,title:o.formatMessage({id:"action__view_in_browser"}),isTriggerPlain:!0,options:l,headerShown:!1,dropdownProps:{width:"64"},dropdownPosition:"right",onChange:c,renderItem:function(e,t,n){var r=e;return(0,v.jsxs)(i.default,{py:"2",px:"3",onPress:function(){return null==n?void 0:n("",e)},children:[(0,v.jsx)(u.default.Subheading,{mb:"3",children:r.header}),(0,v.jsxs)(d.default,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[(0,v.jsxs)(d.default,{flexDirection:"row",alignItems:"center",children:[(0,v.jsx)(D.default,{size:"8",token:r}),(0,v.jsx)(u.default.Body1Strong,{ml:3,children:r.label})]}),r.value?(0,v.jsx)(A.default,{w:"5",h:"5",children:(0,v.jsx)(C.default,{name:"ChevronRightMini",size:16})}):(0,v.jsx)(u.default.Body1,{color:"text-disabled",children:o.formatMessage({id:"transaction__swap_status_waiting"})})]})]},e.value)},renderTrigger:function(){return(0,v.jsxs)(d.default,{flexDirection:"row",alignItems:"center",children:[(0,v.jsx)(u.default.Body2Strong,{mr:"1",children:o.formatMessage({id:"action__view_in_browser"})}),(0,v.jsx)(C.default,{name:"ArrowTopRightOnSquareOutline",size:16})]})}})},Ln=function(e){var t=e.tx,n=(0,m.default)(),r=(0,h.useNetworkSimple)(t.networkId),o=(0,f.useCallback)((function(){var e=(0,J.buildTransactionDetailsUrl)(r,t.hash);(0,fn.openUrlExternal)(e)}),[r,t.hash]);return(0,v.jsxs)(i.default,{flexDirection:"row",onPress:o,alignItems:"center",children:[(0,v.jsx)(u.default.Body2Strong,{mr:"1",children:n.formatMessage({id:"action__view_in_browser"})}),(0,v.jsx)(C.default,{name:"ArrowTopRightOnSquareOutline",size:16})]})},En=function(e){var t,n=e.tx,r=null!=(t=n.tokens)?t:{},o=r.from,a=r.to;return(null==o?void 0:o.networkId)!==(null==a?void 0:a.networkId)?(0,v.jsx)(Dn,{tx:n}):(0,v.jsx)(Ln,{tx:n})},Un=function(e){var t,n,r=e.tx,o=null==(t=r.tokens)?void 0:t.from,a=null==(n=r.tokens)?void 0:n.to,i="";return r.percentageFee&&(r.quoterType===z.QuoterType.jupiter&&a?i=`${(0,ee.formatAmount)((0,ee.multiply)(r.percentageFee,a.amount),8)}${a.token.symbol.toUpperCase()}`:o&&(i=`${(0,ee.formatAmount)((0,ee.multiply)(r.percentageFee,o.amount),8)}${o.token.symbol.toUpperCase()}`)),(0,v.jsxs)(d.default,{flexDirection:"row",alignItems:"center",children:[(0,v.jsx)(hn.default,{type:r.quoterType,percentageFee:r.percentageFee,typography:"Body2Strong",color:"text-default"}),i?(0,v.jsxs)(u.default.Body2Strong,{children:["(",i,")"]}):null]})},Hn=function(e){var t=e.tx,n=(0,m.default)();if(t.protocalFees){var r=(0,ee.calculateProtocalsFee)(t.protocalFees);if(Number(r.value)>0)return(0,v.jsx)(Nn,{label:n.formatMessage({id:"form__bridge_fee"}),children:(0,v.jsx)(u.default.Body2Strong,{children:`${(0,ee.formatAmount)(r.value)} ${r.symbol.toUpperCase()}`})})}return null};const qn=function(e){var t,n,r,o,a,l,c,w,g,x,b,j,_,S,T=e.tx,A=e.showViewInBrowser,M=(0,m.default)(),P=(0,p.useRoute)(),R=(0,p.useNavigation)(),B=(0,pn.useTransactionsAccount)(T.accountId,null==(t=T.tokens)?void 0:t.from.networkId),N=(0,h.useNetworkSimple)(T.networkId),D=(0,h.useNetworkSimple)(null==(n=T.tokens)?void 0:n.from.networkId),L=(0,h.useNetworkSimple)(null==(r=T.tokens)?void 0:r.to.networkId),E=(0,Re.default)().formatDate,U=null!=(o=T.tokens)?o:{},H=U.from,q=U.to,W=null!=(a=null==(l=T.attachment)?void 0:l.swftcOrderId)?a:T.thirdPartyOrderId,V=(0,f.useCallback)((function(e){e&&((0,Z.copyToClipboard)(e),y.default.show({title:M.formatMessage({id:"msg__copied"})}))}),[M]),z=(0,f.useCallback)((0,k.default)((function*(){var e;H&&q&&D&&L&&(yield I.default.serviceSwap.setInputToken(H.token),yield I.default.serviceSwap.setOutputToken(q.token),(null!=(e=R.getParent())?e:R).goBack(),setTimeout((function(){null==P.params.goBack||P.params.goBack()}),100))})),[H,q,D,L,R,P.params]);return B&&N?(0,v.jsxs)(d.default,{children:[(0,v.jsx)(Pn,{tx:T,onPress:z}),(0,v.jsx)(Pe.default,{my:"6"}),(0,v.jsx)(Bn,{tx:T}),(0,v.jsx)(Pe.default,{my:"6"}),(0,v.jsxs)(d.default,{children:[(0,v.jsx)(u.default.Subheading,{color:"text-subdued",mb:"4",children:M.formatMessage({id:"form__on_chain_info_uppercase"})}),(0,v.jsxs)(O.default,{space:4,children:[T.actualReceived?(0,v.jsx)(Nn,{label:M.formatMessage({id:"form__actual_received"}),children:(0,v.jsx)(u.default.Body2Strong,{children:`${(0,ee.formatAmount)(T.actualReceived,6)} ${null!=(c=null==q?void 0:q.token.symbol.toUpperCase())?c:""}`})}):null,T.networkFee?(0,v.jsx)(Nn,{label:M.formatMessage({id:"form__network_fee"}),children:(0,v.jsx)(u.default.Body2Strong,{children:`${(0,ee.formatAmount)(T.networkFee,8)} ${null!=(w=N.symbol.toUpperCase())?w:""}`})}):null,(0,v.jsx)(Nn,{label:M.formatMessage({id:"content__hash"}),children:(0,v.jsx)(yn,{tx:T,children:(0,v.jsx)(i.default,{mr:"1",maxW:"56",children:(0,v.jsx)(u.default.Body2Strong,{textAlign:"right",children:T.hash})})})})]})]}),(0,v.jsx)(Pe.default,{my:"6"}),(0,v.jsxs)(d.default,{children:[(0,v.jsx)(u.default.Subheading,{color:"text-subdued",mb:"4",children:M.formatMessage({id:"form__swap_info_uppercase"})}),(0,v.jsxs)(O.default,{space:4,children:[(0,v.jsx)(Nn,{label:M.formatMessage({id:"Rate"}),children:(0,v.jsx)(Be.default,{tokenA:null==(g=T.tokens)?void 0:g.from.token,tokenB:null==(x=T.tokens)?void 0:x.to.token,rate:null==(b=T.tokens)?void 0:b.rate,typography:"Body2Strong",color:"text-default"})}),T.quoterType?(0,v.jsx)(Nn,{label:M.formatMessage({id:"form__provided_by"}),children:(0,v.jsxs)(d.default,{flexDirection:"row",alignItems:"center",children:[T.quoterLogo?(0,v.jsx)(s.default,{borderRadius:"full",overflow:"hidden",src:T.quoterLogo,w:"4",h:"4",mr:"2"}):null,(0,v.jsx)(u.default.Body2Strong,{children:(0,ee.normalizeProviderName)(T.quoterType)})]})}):null,(0,v.jsx)(Nn,{label:M.formatMessage({id:"form__swapping_via"}),children:(0,v.jsx)(mn.default,{providers:T.providers,typography:"Body2Strong",color:"text-default"})}),(0,ee.gt)(null!=(j=null==(_=T.protocalFees)?void 0:_.amount)?j:"0",0)?(0,v.jsx)(Hn,{tx:T}):null,T.percentageFee?(0,v.jsx)(Nn,{label:M.formatMessage({id:"form__included_onekey_fee"}),children:(0,v.jsx)(Un,{tx:T})}):null,W?(0,v.jsx)(Nn,{label:M.formatMessage({id:"form__order_no"}),children:(0,v.jsxs)(i.default,{flexDirection:"row",alignItems:"center",onPress:function(){return V(null!=W?W:"")},children:[(0,v.jsx)(d.default,{maxW:"56",mr:"1",children:(0,v.jsx)(u.default.Body2Strong,{textAlign:"right",children:W})}),(0,v.jsx)(C.default,{name:"Square2StackOutline",size:16})]})}):null]})]}),(0,v.jsx)(Pe.default,{my:"6"}),(0,v.jsxs)(d.default,{children:[(0,v.jsx)(u.default.Subheading,{color:"text-subdued",mb:"4",children:M.formatMessage({id:"form__time_uppercase"})}),(0,v.jsxs)(O.default,{space:4,children:[(0,v.jsx)(Nn,{label:M.formatMessage({id:"form__created"}),children:(0,v.jsx)(u.default.Body2Strong,{color:"text-default",children:E(new Date(T.addedTime))})}),(0,v.jsx)(Nn,{label:M.formatMessage({id:"form__updated"}),children:(0,v.jsx)(u.default.Body2Strong,{color:"text-default",children:E(new Date(null!=(S=T.confirmedTime)?S:T.addedTime))})})]})]}),(0,v.jsx)(Pe.default,{my:"7"}),A?(0,v.jsxs)(d.default,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[(0,v.jsx)(cn.default,{width:82,height:25}),(0,v.jsx)(En,{tx:T})]}):null]}):null};var Wn=function(){var e=(0,k.default)((function*(){return null}));return function(){return e.apply(this,arguments)}}();const Vn=function(){var e=(0,f.useRef)(null),t=(0,p.useRoute)(),n=(0,h.useNavigation)(),r=(0,pn.useWalletsSwapTransactions)().find((function(e){return e.hash===t.params.txid}));return(0,f.useEffect)((function(){function t(){return(t=(0,k.default)((function*(){var t,r=yield null==(t=e.current)||null==t.capture?void 0:t.capture();if(r){var o=yield Wn(),a=un.default.select({ios:{activityItemSources:[{placeholderItem:{type:"url",content:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJwAAACcCAMAAAC9ZjJ/AAAAllBMVEUAAAAAuBIAtxAAuBMAtxIAuRIAtxMAuRIAtxIAtxIAuBIAuBMAuBEAsxAAtxIAtxIAuBIAuRIAuBIAuBL///8AtRIAtxIAsxKA2ojf9uG/7cRg0WsgvzCg5Kbv+/BAyk2v6LUQvSFw13pAxk0wxT/P8dMQuiEQtyHv+vBw1HpQzFyQ3Zcwwj6Q4JiQ35fP8tOQ35iP35ce/Hr/AAAAE3RSTlMA3yC/QO9gsJCAz1AwENCgn39wIDfjZgAABGxJREFUeNrtnNlS4zAQReV4zcYALcmWF7ITwjDb///c2BCQwImdcTt2ZyqH5SGVh1NXaklxSs3qmE68wB9ZLrSJZfvBvcNwOHe2C+fDHjrNzVw4O9btoImaDR1he+zf8CzoEMsjmdqH3pidxtSHHjht7o0RZXDusQ2gN+5YNYMb6JHRoNLNgl6xKuwmCLdz2w1c6B13QnNM37Oj63bE7gaIMGIl7oAMQWmnB0KMaU64N9wpM/kGpPCZwRiI4TANqUEtsIlWwxse3eAALMLB6VlnA0Hs/RoHJHEornHvDKmWQ4HLchwgSjGuQyDKkGqtvtcrUMWd0p1yABN2D2TxWABkCZgPOBQvE0Er+NhinfFDcgLaYITdH7LDchJawGKAQ51RzkXKzfgZ5QApl1GWU4flQgpyM044uYyynOJ0h3Uda+glJ4UQYYEIySX3aielKKCXnEYSTE5DOTm4JncyV7mmXOWacrFy16WkimtyTbnKNeVi5xxpOdLDepX7BxKDF2pyIEUocsL8P9atfTmQbwDkf+1A92uIduUW61nyPFsvAEnrcovlXPE9v+ZJCghalpvF/AvZDHDg5bRamTiVgAQvl8b8CH8WOD283OyBH0WlgAAvt+RVPD0jskPLRbyGBGGHlFvyWl4Qdii5Na/nKRXQALRcqvgJxIhTAEIu4594yHbP6ctqN8d/KYGXSz+r7bZhKF5JI/VpYB97kIu5wfdtYSYl5D+53hwRHVKuXA1Rnpo+xUkpok/RCWgARi776gYGUvxGRIeXM7atLCwfzEWMKFis3MzcQvPcKoe9wVqHkvthDqqQ1eOeNIgOIxcbuYSyJtusYzk95WId3LG3bMJu5YwlLhRwEL3YqVDAyeDlUmNCHYvlJ/+gRzk4TERBTki6cjsh61abp27lwNwfZN1qszEKuh68nKotxYX2jztOzjgUrQQcIjFWm47llrX7uuIfPHe8Q6y5ZiWrg+PbjuXMYNSBg3hqHKnmYddyEddsHmXVJ7Mk7PjIBIsH0y6VJTfEzoqWkxE3UIk09JamOE+6ltPRab3F/vWl4iYq7EGu/KQknmdZpvgX0rDbj4Z6Ia4nauSGl1soXkt8wqBi5DCPctQW4YaSq7dTiAmHlpPVdvEW4YaWA/n4s6oWcG7AXEAhRaKOxLbCugH6Spo8rKeSXE0ACouNAI0QSfzlIeeqUJOAw8Zdc9HpPa6i+UblbLLdavuamgQkfjsXhGSuJ0S4Z/+QE03APMCi4yvQYmju2QTaQxa/7eGwKYE+IEegfhGS9BVSsjchHZZDdNJZjNEd11tG+FL1gH6TAZrReZfQ2IJiZ4siOKqtLV6DozrrxszAB1LcMgNiZ5Oi4xbZ/kIeoXaC5eNIiREQ4ebSWrwRsTPdTCYEStYdUG0WCWBNLrOVZW7Xa83eVLj1fWgPqLUS1rhjdgKDb9AD/pSdxrjz8Gzn/2gTXeDZgACdWv3c6yA+F9E6fXjO/Fw7N8Ph3Ae+bbVrZY38wJvU1udfiwGx6zsgLxcAAAAASUVORK5CYII="},item:{default:{type:"url",content:`file://${r}`}},linkMetadata:{title:"Share"}}],failOnCancel:!0},default:{url:`file://${r}`,title:"Share",filename:"onekey_share.png",failOnCancel:!0}});if(!o)return;yield o.open(a).catch((function(){console.log("something wrong")})),n.goBack()}}))).apply(this,arguments)}var r=setTimeout((function(){return t.apply(this,arguments)}),1e3);return function(){clearTimeout(r)}}),[]),r?(0,v.jsx)(a.default,{footer:null,staticChildrenProps:{},children:(0,v.jsxs)(d.default,{w:"full",h:"full",position:"relative",children:[(0,v.jsx)(sn.default,{ref:e,children:(0,v.jsxs)(d.default,{px:{base:4,md:6},py:"6",bg:"surface-subdued",children:[(0,v.jsx)(qn,{tx:r}),(0,v.jsxs)(d.default,{mt:"8",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,v.jsxs)(d.default,{children:[(0,v.jsx)(ln.default,{width:82,height:25}),(0,v.jsx)(u.default.Caption,{mt:"2",color:"text-subdued",children:"All-in-one crypto wallet"})]}),(0,v.jsx)(d.default,{bg:"white",p:"1",borderRadius:4,shadow:"depth.4",children:(0,v.jsx)(an.default,{value:"https://onekey.so/download",size:64,logoSize:0,logoMargin:0,logoBackgroundColor:"white"})})]})]})}),(0,v.jsx)(d.default,{position:"absolute",top:"0",left:"0",w:"full",h:"full"})]})}):null};var zn=n(436873),Fn=n(34035);function $n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$n(Object(n),!0).forEach((function(t){(0,$.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zn=function(e){var t=e.message,n=e.type;return(0,v.jsxs)(d.default,{display:"flex",flexDirection:"row",mt:"2",children:[(0,v.jsx)(d.default,{mr:"2",children:(0,v.jsx)(C.default,{size:20,name:"ExclamationTriangleMini",color:"error"===n?"icon-critical":"icon-warning"})}),(0,v.jsx)(u.default.Body2,{color:"error"===n?"text-critical":"text-warning",children:t})]})},Gn=function(e){return(0,v.jsx)(u.default.Body1,{children:e})},Kn=function(){var e=(0,m.default)(),t=(0,Fn.useSwapSlippageAuto)();if(t&&t.value){if("stable"===(null==t?void 0:t.type))return(0,v.jsx)(u.default.Body1,{color:"text-subdued",my:"4",children:e.formatMessage({id:"content__default_slippage_of_str_set_for_current_token_type_mainstream_asset_pairs"},{1:`${t.value}%`,2:e.formatMessage({id:"content__stablecoin_pairs"}),a:Gn})});if("popular"===(null==t?void 0:t.type))return(0,v.jsx)(u.default.Body1,{color:"text-subdued",my:"4",children:e.formatMessage({id:"content__default_slippage_of_str_set_for_current_token_type_mainstream_asset_pairs"},{1:`${t.value}%`,2:e.formatMessage({id:"content__mainstream_asset_pairs"}),a:Gn})});if("others"===(null==t?void 0:t.type))return(0,v.jsx)(u.default.Body1,{color:"text-subdued",my:"4",children:e.formatMessage({id:"content__default_slippage_of_str_set_for_current_token_type_mainstream_asset_pairs"},{1:`${t.value}%`,2:e.formatMessage({id:"content__altcoin_pairs"}),a:Gn})})}return null};const Xn=function(){var e=(0,m.default)(),t=(0,h.useNavigation)(),n=(0,Fn.useSlippageLevels)(),r=(0,wt.useAppSelector)((function(e){return e.swapTransactions.slippage})),o=(0,f.useState)((function(){return r||{mode:"auto"}})),i=(0,l.default)(o,2),s=i[0],c=i[1],p=(0,f.useCallback)((function(e){c({mode:"custom",value:e.trim()})}),[]),w=(0,f.useCallback)((function(){return c({mode:"auto"})}),[]),g=(0,f.useCallback)((function(e){return c({mode:"preset",value:e})}),[]),x=(0,f.useCallback)((function(e){return"preset"===s.mode&&s.value===e?"primary":"basic"}),[s]),y=(0,f.useMemo)((function(){if(s&&"custom"===s.mode){var t=s.value?s.value.trim():"";if(!t)return{type:"error",message:e.formatMessage({id:"msg__enter_a_valid_slippage_percentage"})};var n=new(we())(t);if(n.gte(50)||n.eq(0))return{type:"error",message:e.formatMessage({id:"msg__enter_a_value_50_to_save_the_slippage"})};if(n.lt(.1))return{type:"warn",message:e.formatMessage({id:"msg__your_transaction_may_fail"})};if(n.gte(5)&&n.lt(50))return{type:"warn",message:e.formatMessage({id:"msg__your_transaction_may_be_frontrun"})}}}),[s,e]),k=(0,f.useCallback)((function(){"auto"===(null==r?void 0:r.mode)&&"auto"!==s.mode?t.navigate(q.RootRoutes.Modal,{screen:q.ModalRoutes.Swap,params:{screen:z.SwapRoutes.SlippageCheck,params:s}}):(I.default.dispatch((0,zn.setSlippage)(s)),t.goBack())}),[r,s,t]);return(0,v.jsxs)(a.default,{header:e.formatMessage({id:"form__slippage_tolerance"}),footer:null,children:[(0,v.jsxs)(d.default,{flexDirection:"row",justifyContent:"space-between",children:[(0,v.jsx)(d.default,{w:"22%",children:(0,v.jsx)(dn.default,{w:"full",type:"auto"===s.mode?"primary":"basic",onPress:w,children:e.formatMessage({id:"form__auto"})})}),(0,v.jsx)(d.default,{w:"22%",children:(0,v.jsx)(dn.default,{w:"full",type:x(n.stable),onPress:function(){return g(n.stable)},children:`${n.stable}%`})}),(0,v.jsx)(d.default,{w:"22%",children:(0,v.jsx)(dn.default,{w:"full",type:x(n.popular),onPress:function(){return g(n.popular)},children:`${n.popular}%`})}),(0,v.jsx)(d.default,{w:"22%",children:(0,v.jsx)(dn.default,{w:"full",type:x(n.others),onPress:function(){return g(n.others)},children:`${n.others}%`})})]}),(0,v.jsxs)(d.default,{mt:"3",children:[(0,v.jsx)(tn.default,{w:"full",size:"xl",mt:"1",mb:"2",rightText:"%",value:"custom"===s.mode?s.value:"",placeholder:e.formatMessage({id:"content__custom"}),onChangeText:p}),y?(0,v.jsx)(Zn,Qn({},y)):null]}),"auto"===s.mode?(0,v.jsx)(Kn,{}):null,"preset"===s.mode&&s.value===n.stable?(0,v.jsx)(u.default.Body1,{color:"text-subdued",my:"4",children:e.formatMessage({id:"content__str_is_recommended_as_the_default_slippage_for_stablecoin_pairs"},{0:`${n.stable}%`,a:Gn})}):null,"preset"===s.mode&&s.value===n.popular?(0,v.jsx)(u.default.Body1,{color:"text-subdued",my:"4",children:e.formatMessage({id:"content__str_is_recommended_as_the_default_slippage_for_mainstream_asset_pairs"},{0:`${n.popular}%`,a:Gn})}):null,"preset"===s.mode&&s.value===n.others?(0,v.jsx)(u.default.Body1,{color:"text-subdued",my:"4",children:e.formatMessage({id:"content__str_is_recommended_as_the_default_slippage_for_altcoin_pairs"},{0:`${n.others}%`,a:Gn})}):null,(0,v.jsxs)(d.default,{children:[(0,v.jsx)(u.default.Body1Strong,{my:"4",children:e.formatMessage({id:"content__what_is_slippage"})}),(0,v.jsx)(u.default.Body1,{color:"text-subdued",children:e.formatMessage({id:"content__what_is_slippage_desc"})})]}),(0,v.jsx)(d.default,{mt:"4",children:(0,v.jsx)(dn.default,{isDisabled:!("error"!==(null==y?void 0:y.type)),onPress:k,w:"full",size:"lg",type:"primary",children:e.formatMessage({id:"action__save"})})})]})};function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(n),!0).forEach((function(t){(0,$.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const er=function(){var e,t=(0,m.default)(),n=(0,p.useRoute)(),r=(0,p.useNavigation)(),o=(0,f.useCallback)((function(){I.default.dispatch((0,zn.setSlippage)(n.params)),(r.getParent()||r).goBack()}),[r,n.params]),i=(0,f.useCallback)((function(){I.default.dispatch((0,zn.setSlippage)(Yn(Yn({},n.params),{},{autoReset:!0}))),(r.getParent()||r).goBack()}),[n.params,r]);return(0,v.jsx)(a.default,{footer:null,children:(0,v.jsxs)(d.default,{children:[(0,v.jsx)(A.default,{py:"8",children:(0,v.jsx)(u.default.Heading,{fontSize:"56px",lineHeight:"70px",children:"\ud83d\udd04"})}),(0,v.jsx)(A.default,{py:"3",children:(0,v.jsx)(u.default.DisplayMedium,{children:t.formatMessage({id:"modal__slippage_changed"})})}),(0,v.jsx)(u.default.Body1,{color:"text-subdued",children:t.formatMessage({id:"modal__slippage_changed_desc"})}),(0,v.jsxs)(d.default,{mt:"5",children:[(0,v.jsx)(dn.default,{size:"xl",onPress:o,children:t.formatMessage({id:"action__keep_this_settings_str"},{0:`${null!=(e=n.params.value)?e:""}%`})}),(0,v.jsx)(dn.default,{mt:"3",size:"xl",type:"primary",onPress:i,children:t.formatMessage({id:"action__reset_for_me_in_the_next_swap"})})]})]})})};var tr=n(586874),nr=n(28524);nr.JsBridgeBase;class rr extends nr.JsBridgeBase{constructor(e){super(e),this.sendAsString=!0,this.webviewRef=e.webviewRef}sendPayload(e){var t,n;if(this.webviewRef&&this.webviewRef.current){const r=e,o=nr.injectedFactory.createCodeJsBridgeReceive(r);null===(n=null===(t=this.webviewRef.current)||void 0===t?void 0:t.injectJavaScript)||void 0===n||n.call(t,o)}}}var or=n(991786),ar=n(292147),ir=n(257212);n(161695),n(735260),n(824931),n(281238),n(489094);n(46486).default.create({container:{flex:1,overflow:"hidden"},loadingOrErrorView:{position:"absolute",flex:1,justifyContent:"center",alignItems:"center",height:"100%",width:"100%",backgroundColor:"white"},loadingProgressBar:{height:20},errorText:{fontSize:14,textAlign:"center",marginBottom:2},errorTextTitle:{fontSize:15,fontWeight:"500",marginBottom:10},webView:{backgroundColor:"#ffffff"}});var ur=-1001e3;const sr=function(e){var t=e.errorCode,n=e.onRefresh,r=(0,m.default)(),o=(0,f.useMemo)((function(){return t===ur?{title:"title__connection_refused",subTitle:"title__connection_refused_desc"}:{title:"title__no_connection",subTitle:"title__no_connection_desc"}}),[t]);return(0,v.jsxs)(A.default,{w:"full",h:"full",bg:"background-default",children:[(0,v.jsx)(L.default,{emoji:"\ud83c\udf10",title:r.formatMessage({id:o.title}),subTitle:r.formatMessage({id:o.subTitle}),mb:3}),(0,v.jsx)(dn.default,{mt:6,size:"lg",type:"primary",leftIconName:"ArrowPathOutline",onPress:n,children:r.formatMessage({id:"action__refresh"})})]})};var lr=["style","src","receiveHandler","onSrcChange","onLoadProgress","injectedJavaScriptBeforeContentLoaded","onMessage"];function dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var cr=(0,f.forwardRef)((function(e,t){e.style;var n=e.src,r=e.receiveHandler,o=(e.onSrcChange,e.onLoadProgress),a=e.injectedJavaScriptBeforeContentLoaded,i=e.onMessage,u=(0,Q.default)(e,lr),s=(0,tr.default)().themeVariant,l=(0,f.useRef)(),d=(0,f.useMemo)((function(){return new rr({webviewRef:l,receiveHandler:r})}),[r]),c=(0,f.useCallback)((function(e){var t=e.nativeEvent.data;try{var n=new URL(e.nativeEvent.url),r=(null==n?void 0:n.origin)||"";ar.default.webview.info("onMessage",r,t),d.receive(t,{origin:r})}catch(o){}null==i||i(e)}),[d,i]);(0,f.useImperativeHandle)(t,(function(){var e={innerRef:l.current,jsBridge:d,reload:function(){var e;return null==(e=l.current)?void 0:e.reload()},loadURL:function(e){var t;return null==(t=l.current)?void 0:t.loadUrl(e)}};return d.webviewWrapper=e,e}));var p=(0,f.useCallback)((function(e){var t=(null==e?void 0:e.nativeEvent).url;try{var n;if((0,ir.checkOneKeyCardGoogleOauthUrl)({url:t}))(0,fn.openUrlExternal)(t),null==(n=l.current)||n.stopLoading()}catch(r){ar.default.webview.error("onLoadStart",r)}}),[]),m=(0,f.useCallback)((function(e,t,r){return ar.default.webview.error({errorDomain:e,errorCode:t,errorDesc:r,src:n}),(0,v.jsx)(sr,{errorCode:t,onRefresh:function(){var e;return null==(e=l.current)?void 0:e.reload()}})}),[n]);return(0,v.jsx)(or.WebView,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(n),!0).forEach((function(t){(0,$.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({style:{flex:1,backgroundColor:"light"===s?void 0:"transparent"},originWhitelist:["*"],allowFileAccess:!0,allowFileAccessFromFileURLs:!0,allowUniversalAccessFromFileURLs:!0,allowsBackForwardNavigationGestures:!0,fraudulentWebsiteWarningEnabled:!1,onLoadProgress:o,ref:l,injectedJavaScriptBeforeContentLoaded:a||"",allowsInlineMediaPlayback:!0,mediaPlaybackRequiresUserAction:!0,source:{uri:n},onMessage:c,onLoadStart:p,renderError:m},u))}));cr.displayName="NativeWebView";const fr=function(){return(0,v.jsx)(a.default,{footer:null,children:(0,v.jsx)(cr,{src:Ye.swftcCustomerSupportUrl,injectedJavaScript:"(function(){\n    var style = document.createElement('style');\n    style.textContent = '#bw8_while_container { height: 100%!important; width: 100%; }'\n    document.head.append(style);\n  })()"})})},pr=n.p+"static/media/swft_logo.ca134069259f279de612.png";var mr=n(218513),hr=n(870291);const vr=function(){var e=(0,p.useRoute)(),t=(0,p.useNavigation)(),r=(0,m.default)(),o=(0,pn.useWalletsSwapTransactions)(),i=e.params.txid,l=o.filter((function(e){return e.hash===i}))[0],c=(0,f.useCallback)((function(){"swftc"===l.quoterType?n.g.open(Ye.swftcCustomerSupportUrl,"_blank"):t.navigate(q.RootRoutes.Modal,{screen:q.ModalRoutes.HistoryRequest,params:{screen:mr.HistoryRequestRoutes.SubmitRequestModal}})}),[t,l]),h=(0,f.useCallback)((function(){t.navigate(q.RootRoutes.Modal,{screen:q.ModalRoutes.Swap,params:{screen:z.SwapRoutes.Share,params:{txid:i}}})}),[t,i]),w=(0,f.useMemo)((function(){return"swftc"!==l.quoterType?{leftIconName:"ChatBubbleLeftEllipsisMini",onPress:c}:{onPress:c,children:(0,v.jsxs)(d.default,{flexDirection:"row",alignItems:"center",children:[(0,v.jsxs)(d.default,{w:"5",h:"5",children:[(0,v.jsx)(s.default,{w:"5",h:"5",source:pr}),(0,v.jsx)(d.default,{position:"absolute",bg:"surface-neutral-default",bottom:-4,right:-4,borderRadius:"full",children:(0,v.jsx)(C.default,{name:"ChatBubbleLeftEllipsisMini",size:14})})]}),(0,v.jsx)(u.default.Button1,{ml:"2",children:r.formatMessage({id:"action__support"})})]})}}),[l,r,c]),g=(0,f.useCallback)((function(){var e=function(e){var t,n,r=[`accountId: ${e.accountId}`,`txhash: ${e.hash}`];if(null!=(t=e.tokens)&&t.from){var o=e.tokens.from;r=r.concat([`fromAmount: ${o.amount}`,`fromTokenSymbol: ${o.token.symbol}`,`fromNetworkId: ${o.networkId}`,`fromTokenIdOnNetwork: ${o.token.tokenIdOnNetwork}`])}if(null!=(n=e.tokens)&&n.to){var a=e.tokens.to;r=r.concat([`toAmount: ${a.amount}`,`toTokenSymbol: ${a.token.symbol}`,`toNetworkId: ${a.networkId}`,`toTokenIdOnNetwork: ${a.token.tokenIdOnNetwork}`])}return e.destinationTransactionHash&&r.push(`destinationTransactionHash: ${e.destinationTransactionHash}`),e.actualReceived&&r.push(`actualReceived: ${e.actualReceived}`),r.join("\n")}(l);(0,Z.copyToClipboard)(e),y.default.show({title:r.formatMessage({id:"msg__copied"})})}),[l,r]);return(0,f.useEffect)((function(){var e,t;"failed"!==l.status||l.destinationTransactionHash||(null==(e=l.tokens)?void 0:e.from.networkId)!==(null==(t=l.tokens)?void 0:t.to.networkId)||new hr.Scheduler(l).runTask()}),[]),(0,v.jsx)(a.default,{hidePrimaryAction:!0,scrollViewProps:{children:(0,v.jsx)(qn,{tx:l,showViewInBrowser:!0})},primaryActionTranslationId:"action__share",primaryActionProps:{leftIconName:"ShareMini",type:"basic",onPress:h,onLongPress:g},secondaryActionTranslationId:"action__support",secondaryActionProps:w})};const wr=function(){var e=(0,m.default)(),t=(0,p.useRoute)(),r=(0,p.useNavigation)(),o=(0,f.useCallback)((function(){r.navigate(q.RootRoutes.Modal,{screen:q.ModalRoutes.Swap,params:{screen:z.SwapRoutes.LimitOrderDetails,params:{orderHash:t.params.orderHash}}})}),[r,t.params.orderHash]);return(0,v.jsx)(a.default,{header:e.formatMessage({id:"modal__transaction_submitted"}),primaryActionTranslationId:"action__close",secondaryActionTranslationId:"action__view_details",onPrimaryActionPress:function(e){var t=e.close;return null==t?void 0:t()},onSecondaryActionPress:o,children:(0,v.jsxs)(O.default,{alignItems:"center",justifyContent:"center",flex:1,children:[(0,v.jsx)(d.default,{w:"200px",h:"200px",children:(0,v.jsx)(P.default,{width:200,source:n(831903),autoPlay:!0,loop:!1})}),(0,v.jsx)(M.default,{typography:"DisplayMedium",children:e.formatMessage({id:"action__submit"})}),(0,v.jsx)(d.default,{h:8})]})})};var gr=n(592323);const xr=function(){var e=(0,p.useRoute)().params.url;return(0,v.jsx)(a.default,{footer:null,children:(0,v.jsx)(gr.default,{src:e})})};var yr=function(){var e=(0,m.default)();return(0,f.useEffect)((function(){I.default.serviceSwap.setSwapWelcomeShown(!0)}),[]),(0,v.jsxs)(d.default,{children:[(0,v.jsxs)(A.default,{mt:"8",mb:"10",children:[(0,v.jsx)(u.default.DisplayLarge,{children:e.formatMessage({id:"title__welcome_to_onekey_swap"})}),(0,v.jsx)(u.default.Body2,{color:"text-subdued",mt:"2",children:e.formatMessage({id:"title__welcome_to_onekey_swap_desc"})})]}),(0,v.jsxs)(d.default,{children:[(0,v.jsxs)(d.default,{flexDirection:"row",mb:"8",children:[(0,v.jsx)(u.default.DisplayXLarge,{mr:"4",children:"\ud83c\udf08"}),(0,v.jsxs)(d.default,{flex:"1",children:[(0,v.jsx)(u.default.DisplayMedium,{children:e.formatMessage({id:"form__cross_chain_swap"})}),(0,v.jsx)(u.default.Body1,{color:"text-subdued",children:e.formatMessage({id:"form__cross_chain_swap_desc"},{0:"25"})})]})]}),(0,v.jsxs)(d.default,{flexDirection:"row",mb:"8",children:[(0,v.jsx)(u.default.DisplayXLarge,{mr:"4",children:"\ud83d\udee1\ufe0f"}),(0,v.jsxs)(d.default,{flex:"1",children:[(0,v.jsx)(u.default.DisplayMedium,{children:e.formatMessage({id:"form__exact_amount_allowance"})}),(0,v.jsx)(u.default.Body1,{color:"text-subdued",children:e.formatMessage({id:"form__exact_amount_allowance_significantly_reduces_risk_exposure"})})]})]}),(0,v.jsxs)(d.default,{flexDirection:"row",mb:"8",children:[(0,v.jsx)(u.default.DisplayXLarge,{mr:"4",children:"\ud83d\udc65"}),(0,v.jsxs)(d.default,{flex:"1",children:[(0,v.jsx)(u.default.DisplayMedium,{children:e.formatMessage({id:"form__designated_recipient"})}),(0,v.jsx)(u.default.Body1,{color:"text-subdued",children:e.formatMessage({id:"form__designated_recipient_desc"})})]})]})]})]})};const kr=function(){var e=(0,h.useNavigation)();return(0,v.jsx)(a.default,{hideSecondaryAction:!0,primaryActionTranslationId:"action__i_got_it",primaryActionProps:{size:"xl",type:"primary"},onPrimaryActionPress:function(){return e.goBack()},scrollViewProps:{children:(0,v.jsx)(yr,{})}})};var br=(0,n(324665).default)(),jr=[{name:z.SwapRoutes.Input,component:Ce},{name:z.SwapRoutes.Output,component:rt},{name:z.SwapRoutes.Settings,component:on},{name:z.SwapRoutes.CustomToken,component:o.default},{name:z.SwapRoutes.Transaction,component:vr},{name:z.SwapRoutes.Webview,component:xr},{name:z.SwapRoutes.SwftcHelp,component:fr},{name:z.SwapRoutes.Share,component:Vn},{name:z.SwapRoutes.PickRecipient,component:jt},{name:z.SwapRoutes.PickAccount,component:xt},{name:z.SwapRoutes.EnterAddress,component:S},{name:z.SwapRoutes.Welcome,component:kr},{name:z.SwapRoutes.SelectRoutes,component:Yt},{name:z.SwapRoutes.Slippage,component:Xn},{name:z.SwapRoutes.SlippageCheck,component:er},{name:z.SwapRoutes.LimitOrderInput,component:et},{name:z.SwapRoutes.LimitOrderOutput,component:tt},{name:z.SwapRoutes.LimitOrderDetails,component:qe},{name:z.SwapRoutes.TransactionSubmitted,component:wr},{name:z.SwapRoutes.HardwareContinue,component:N},{name:z.SwapRoutes.ChainSelector,component:g},{name:z.SwapRoutes.OutputCrosschain,component:pt},{name:z.SwapRoutes.SelectSendingAccount,component:en},{name:z.SwapRoutes.SelectRecipient,component:qt}];const Ir=function(){var e=(0,r.default)();return(0,v.jsx)(br.Navigator,{screenOptions:{headerShown:!1,animationEnabled:!!e},children:jr.map((function(e){return(0,v.jsx)(br.Screen,{name:e.name,component:e.component},e.name)}))})}},257212:(e,t,n)=>{n.r(t),n.d(t,{SUPPORTED_AUDIO_EXTENSIONS:()=>l,SUPPORTED_IMAGE_EXTENSIONS:()=>s,SUPPORTED_SVG_EXTENSIONS:()=>c,SUPPORTED_VIDEO_EXTENSIONS:()=>d,checkOneKeyCardGoogleOauthUrl:()=>k,default:()=>h,getSvgContent:()=>y,getUrlDomain:()=>b,isAudio:()=>w,isImage:()=>v,isSVG:()=>x,isVideo:()=>g,parseQuerystring:()=>p,parseUri:()=>f,parseUrlObject:()=>m});var r=n(856642),o=n(764846),a=n.n(o),i=n(292147),u=n(348834).Buffer,s=[".png",".jpg",".jpeg",".svg",".gif"],l=[".mp3",".wav"],d=[".mp4"],c=[".svg"];function f(e){return a()(e)}function p(e){return r.parse(e)}function m(e){return new URL(e)}function h(e,t){if("string"!==typeof t||!Array.isArray(e))return!1;try{var n=a()(t||""),r=n.href,o=n.pathname,i=n.protocol,u=e.reduce((function(e,t){return e||"string"===typeof t&&o.toLowerCase().endsWith(t.toLowerCase())}),!1);return r===t&&u&&"https:"===i}catch(s){return!1}}var v=function(e){return h(s,e)},w=function(e){return h(l,e)},g=function(e){return h(d,e)},x=function(e){return h(c,e)};function y(e){if(e.startsWith("data:image/svg+xml;base64,")){var t=e.replace("data:image/svg+xml;base64,","");return u.from(t,"base64").toString("utf-8")}return e.startsWith("data:image/svg+xml;utf8,")?e.replace("data:image/svg+xml;utf8,",""):e}function k(e){var t=function(e){var t=e.url;try{return new URL(t).origin||""}catch(n){console.error(n)}return""}({url:e.url});return["https://card.onekey.so","https://card.onekeytest.com","https://precard-762def0c-eacd-49b3-ad89-0bf807b37f57.onekeycn.com","https://accounts.google.com"].includes(t)}var b=function(e){var t=e;try{t=new URL(e).hostname}catch(n){i.default.common.error(`failed to parse url ${e}`)}return t}},218513:(e,t,n)=>{var r;n.r(t),n.d(t,{HistoryRequestRoutes:()=>r}),function(e){e.HistoryRequestModal="HistoryRequestModal",e.TicketDetailModal="TicketDetailModal",e.ReplyTicketModel="ReplyTicketModel",e.SubmitRequestModal="SubmitRequestModal"}(r||(r={}))},386499:(e,t,n)=>{n.r(t),n.d(t,{AddCustomToken:()=>x,default:()=>y});var r=n(877531),o=n(783723),a=n(566147),i=n(669083),u=n(634795),s=n(921311),l=n(539144),d=n(196234),c=n(202784),f=n(472719),p=n(783112),m=n(945821),h=n(859071),v=n(481047),w=n(423114),g=n(552322),x=function(e){var t,n,x=e.route,y=null==(t=x.params)?void 0:t.address,k=null==(n=x.params)?void 0:n.networkId,b=(0,p.default)(),j=(0,f.useNavigation)(),I=(0,c.useState)(!1),_=(0,d.default)(I,2),S=_[0],O=_[1],T=(0,c.useState)(!1),A=(0,d.default)(T,2),C=A[0],M=A[1],P=(0,c.useState)(!1),R=(0,d.default)(P,2),B=R[0],N=R[1],D=(0,h.useActiveWalletAccount)(),L=D.walletId,E=D.account,U=D.network,H=(0,h.useNetworkSimple)(null!=k?k:null,U),q=(0,l.default)(),W=(0,h.useAccountTokensOnChain)(null==H?void 0:H.id,null==E?void 0:E.id),V=b.formatMessage({id:"form__searching_token"}),z=(0,s.default)({defaultValues:{address:"",symbol:"",decimal:""},mode:"onChange"}),F=z.control,$=z.handleSubmit,Q=z.setValue,Z=z.formState.isValid,G=z.trigger,K=z.setError,X=z.watch;(0,c.useEffect)((function(){y&&Q("address",y)}),[y,Q]);var J=X("address"),Y=(0,h.useDebounce)(J,1e3),ee=(0,c.useCallback)(function(){var e=(0,u.default)((function*(e,t,n){var r=yield m.default.serviceToken.addAccountToken(t,e,n);r&&((0,w.notifyIfRiskToken)(r),i.default.show({title:b.formatMessage({id:"msg__token_added",defaultMessage:"Token Added"})}),yield m.default.serviceToken.fetchAccountTokens({accountId:e,networkId:t}),null!=j&&null!=j.canGoBack&&j.canGoBack()&&j.goBack())}));return function(t,n,r){return e.apply(this,arguments)}}(),[b,j]),te=(0,c.useCallback)(function(){var e=(0,u.default)((function*(e){if(H&&E){O(!0);var t=E.id,n=H.id,r=e.address,o=yield m.default.engine.getVaultSettings(H.id);null!=o&&o.activateTokenRequired?j.navigate(v.RootRoutes.Modal,{screen:v.ModalRoutes.ManageToken,params:{screen:v.ManageTokenModalRoutes.ActivateToken,params:{walletId:L,accountId:t,networkId:n,tokenId:r,onSuccess:function(){ee(t,n,r).finally((function(){O(!1)}))}}}}):ee(t,n,r).finally((function(){O(!1)}))}}));return function(t){return e.apply(this,arguments)}}(),[H,E,j,L,ee]),ne=(0,c.useCallback)((function(e){e?(Q("decimal",String(e.decimals)),Q("symbol",e.symbol),N(!0),G("address")):(K("address",{message:b.formatMessage({id:"msg__wrong_address_format"})}),N(!1),Q("decimal",""),Q("symbol",""))}),[Q,G,K,b]);return(0,c.useEffect)((function(){function e(){return(e=(0,u.default)((function*(){if(H){var e=yield m.default.validator.normalizeTokenAddress(null==H?void 0:H.id,Y);if(!W.some((function(t){return t.tokenIdOnNetwork===e}))&&E&&e){var t;M(!0);try{var n,r;if(null!=(n=t=yield m.default.engine.preAddToken(E.id,H.id,e))&&n[1])ne(null==(r=t)?void 0:r[1]);else ne(void 0)}catch(o){console.error(o),ne(void 0)}finally{M(!1)}}}}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[y,E,H,ne,Y]),(0,g.jsx)(r.default,{header:b.formatMessage({id:"action__add_custom_tokens",defaultMessage:"Add Custom Token"}),hideSecondaryAction:!0,primaryActionTranslationId:"action__add",primaryActionProps:{type:"primary",isDisabled:!Z&&!C,isLoading:S},onPrimaryActionPress:function(){return $(te)()},children:(0,g.jsx)(o.default,{children:(0,g.jsxs)(a.default,{children:[(0,g.jsx)(a.default.Item,{name:"address",label:b.formatMessage({id:"transaction__contract_address",defaultMessage:"Contract Address"}),control:F,defaultValue:"",labelAddon:["paste"],helpText:C?V:void 0,rules:{required:b.formatMessage({id:"form__field_is_required"}),validate:function(){var e=(0,u.default)((function*(e){if(H){var t=yield m.default.validator.normalizeTokenAddress(null==H?void 0:H.id,e);return W.some((function(e){return e.tokenIdOnNetwork===t}))?b.formatMessage({id:"msg__token_already_existed"}):void 0}}));return function(t){return e.apply(this,arguments)}}()},children:(0,g.jsx)(a.default.Textarea,{trimValue:!0,placeholder:b.formatMessage({id:"form__enter_or_paste_contract_address",defaultMessage:"Enter or paste contract address"})})}),(0,g.jsx)(a.default.Item,{name:"symbol",label:b.formatMessage({id:"form__token_symbol",defaultMessage:"Token Symbol"}),rules:{required:b.formatMessage({id:"form__field_is_required"})},defaultValue:"",control:F,children:(0,g.jsx)(a.default.Input,{size:q?"xl":"default",isDisabled:B})}),(0,g.jsx)(a.default.Item,{name:"decimal",label:b.formatMessage({id:"form__decimal",defaultMessage:"Decimal"}),control:F,defaultValue:"",rules:{required:b.formatMessage({id:"form__field_is_required"})},children:(0,g.jsx)(a.default.Input,{size:q?"xl":"default",isDisabled:B})})]})})})};const y=x},277170:(e,t,n)=>{n.r(t),n.d(t,{ArrivalTime:()=>u});var r=n(866904),o=n(202784),a=n(783112),i=n(552322),u=function(e){var t=e.value,n=e.typography,u=void 0===n?"Caption":n,s=e.color,l=void 0===s?"text-subdued":s,d=(0,a.default)(),c=(0,o.useMemo)((function(){if(!t)return d.formatMessage({id:"content__str_mins"},{content__str_mins:1});if(t<60)return d.formatMessage({id:"content__str_seconds"},{content__str_seconds:t});var e=Math.ceil(t/60);return d.formatMessage({id:"content__str_mins"},{content__str_mins:e})}),[t,d]);return(0,i.jsxs)(r.default,{typography:u,color:l,children:["<",c]})}},870291:(e,t,n)=>{n.r(t),n.d(t,{Scheduler:()=>c,default:()=>f});var r=n(256666),o=n(634795),a=n(887371),i=n(202784),u=n(945821),s=n(436873),l=n(556805);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var c=function(){function e(e){this.tx=e}var t=e.prototype;return t.run=function(){var e=this;this.runTask();var t=this.getMs();t?this.timer=setTimeout((function(){e.run()}),t):this.stop()},t.stop=function(){this.timer&&(clearTimeout(this.timer),this.timer=void 0)},t.getMs=function(){var e=this.tx,t=e.addedTime,n=e.tokens,r=(null==n?void 0:n.from.networkId)===(null==n?void 0:n.to.networkId)?5e3:3e4;return Date.now()-t<=36e5?r:3e5},t.runTask=function(){var e=(0,o.default)((function*(){var e=this.tx,t=yield l.SwapQuoter.client.queryTransactionProgress(e);if(t){var n=t.status;if(n&&"pending"!==n&&(this.stop(),u.default.dispatch((0,s.updateTransaction)({accountId:e.accountId,networkId:e.networkId,hash:e.hash,transaction:{confirmedTime:Date.now(),status:n}})),e.tokens)){var o=e.tokens.from,a=o.token.tokenIdOnNetwork?[o.token.tokenIdOnNetwork]:[];if(u.default.serviceToken.fetchAndSaveAccountTokenBalance({accountId:e.accountId,networkId:o.networkId,tokenIds:a}),e.receivingAddress){var i=yield u.default.serviceAccount.getAccountByAddress({address:e.receivingAddress}),c=e.tokens.to;if(i){var f=c.token.tokenIdOnNetwork?[c.token.tokenIdOnNetwork]:[];u.default.serviceToken.fetchAndSaveAccountTokenBalance({accountId:i.id,networkId:c.networkId,tokenIds:f})}}}var p=t.destinationTransactionHash;if(t.destinationTransactionHash&&u.default.dispatch((0,s.updateTransaction)({accountId:e.accountId,networkId:e.networkId,hash:e.hash,transaction:{destinationTransactionHash:t.destinationTransactionHash}})),"sucesss"===n){var m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);m.destinationTransactionHash=p;var h=yield l.SwapQuoter.client.getActualReceived(m);u.default.dispatch((0,s.updateTransaction)({accountId:e.accountId,networkId:e.networkId,hash:e.hash,transaction:{actualReceived:h}}));var v=yield l.SwapQuoter.client.getTxCompletedTime(e);v&&u.default.dispatch((0,s.updateTransaction)({accountId:e.accountId,networkId:e.networkId,hash:e.hash,transaction:{confirmedTime:Number(v)}}));var w=yield l.SwapQuoter.client.getTxActualNetworkFee(e);w&&u.default.dispatch((0,s.updateTransaction)({accountId:e.accountId,networkId:e.networkId,hash:e.hash,transaction:{networkFee:w}}))}}}));return function(){return e.apply(this,arguments)}}(),(0,a.default)(e)}();const f=function(e){var t=e.tx;return(0,i.useEffect)((function(){var e=new c(t);return e.run(),function(){e.stop()}}),[]),null}},695662:(e,t,n)=>{n.r(t),n.d(t,{OneKeyLogo:()=>l,SwappingViaLogos:()=>d,default:()=>c});var r=n(866904),o=n(795116),a=n(18861),i=n(225447),u=n(552322);function s(e){return`https://node.onekey.so/proxyimg?base=${e}`}var l=function(e){var t=e.size||4;return(0,u.jsx)(a.default,{borderRadius:"full",w:t,h:t,overflow:"hidden",bgColor:"surface-neutral-default",children:(0,u.jsx)(i.default,{size:t,source:n(55337)})})},d=function(e){var t=e.sources,n=e.size||4;if(!t||0===t.length)return(0,u.jsx)(l,{});if(1===t.length)return(0,u.jsx)(a.default,{borderRadius:"full",w:n,h:n,overflow:"hidden",bgColor:"surface-neutral-default",children:(0,u.jsx)(i.default,{size:n,src:s(t[0]),testID:t[0]})},t[0]);var r=function(e,t){return e<=0?0:-t/2};return(0,u.jsx)(a.default,{flexDirection:"row",alignItems:"center",children:t.map((function(e,t){return(0,u.jsx)(o.default,{ml:r(t,n),borderRadius:"full",h:n,w:n,overflow:"hidden",bgColor:"surface-neutral-default",children:(0,u.jsx)(i.default,{size:n,src:s(e)})},e)}))})};const c=function(e){var t=e.providers,n=e.typography,o=void 0===n?"Caption":n,i=e.color,s=void 0===i?"text-subdued":i,l=e.fontWeight,c=void 0===l?400:l;if(!t)return(0,u.jsx)(a.default,{flexDirection:"row",flexGrow:1,children:(0,u.jsx)(r.default,{typography:o,color:s,isTruncated:!0,children:"OneKey Swap"})});if(1===t.length)return(0,u.jsxs)(a.default,{flexDirection:"row",alignItems:"center",flexGrow:1,children:[t[0].logoUrl?(0,u.jsx)(d,{sources:[t[0].logoUrl]}):null,(0,u.jsx)(r.default,{ml:2,typography:o,color:s,fontWeight:c,isTruncated:!0,children:t[0].name})]});if(t.length>1){var f=t.map((function(e){return e.logoUrl})).filter(Boolean);return(0,u.jsxs)(a.default,{alignItems:"center",flexDirection:"row",flexGrow:1,children:[f.length>0?(0,u.jsx)(d,{sources:f}):null,(0,u.jsxs)(r.default,{ml:"2",typography:o,color:s,fontWeight:c,isTruncated:!0,children:[t.length," Exchanges"]})]})}return(0,u.jsx)(a.default,{alignItems:"center",flexDirection:"row",flexGrow:1,children:(0,u.jsx)(r.default,{typography:o,color:s,children:"OneKey Swap"})})}},204230:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(18861),o=n(866904),a=n(206391),i=n.n(a),u=n(783112),s=n(428357),l=n(552322);function d(e){if(!e)return"0";var t=new(i())(e);return(t=t.multipliedBy(100)).isNaN()?"0":t.toFixed()}function c(e){return!!e&&[s.QuoterType.mdex].includes(e)}const f=function(e){var t=e.type,n=e.percentageFee,a=e.typography,i=void 0===a?"Caption":a,s=e.color,f=void 0===s?"text-subdued":s,p=(0,u.default)();return(0,l.jsx)(r.default,{children:c(t)||n&&0===Number(n)?(0,l.jsxs)(r.default,{flexDirection:"column",alignItems:"flex-end",children:[(0,l.jsx)(o.default,{typography:i,color:f,strikeThrough:!0,children:"0.3%"}),(0,l.jsx)(o.default,{typography:i,color:f,children:p.formatMessage({id:"form__free_limited_time"})})]}):(0,l.jsx)(o.default,{typography:i,color:f,children:n?`${d(n)}%`:" 0.3%"})})}},799126:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var r=n(561220),o=n(435581),a=n(866904),i=n(196234),u=n(202784),s=n(206391),l=n.n(s),d=n(415008),c=n(552322),f=function(e){var t=(0,d.formatAmount)(e,8),n=new(l())(t);return n.isZero()?(0,d.formatAmount)(e,16):n.isGreaterThan(1*10**9)?(0,d.formatAmount)(e,0):t};const p=function(e){var t=e.tokenA,n=e.tokenB,s=e.rate,l=e.typography,d=void 0===l?"Body2":l,p=e.color,m=void 0===p?"text-default":p,h=e.hideIcon,v=(0,u.useState)(!1),w=(0,i.default)(v,2),g=w[0],x=w[1];if(!t||!n||!s)return(0,c.jsx)(a.default,{typography:d,color:m,children:"---"});var y=t.symbol,k=n.symbol,b="";return b=g?`1 ${k} \u2248 ${f(1/Number(s))} ${y}`:`1 ${y} \u2248 ${f(s)} ${k}`,(0,c.jsxs)(r.default,{flexDirection:"row",alignItems:"center",onPress:function(){return x((function(e){return!e}))},children:[(0,c.jsx)(a.default,{typography:d,color:m,textAlign:"right",mr:"1",selectable:!1,children:b}),h?null:(0,c.jsx)(o.default,{size:16,name:"ArrowsRightLeftMini",color:"icon-subdued"})]})}},512607:(e,t,n)=>{n.r(t),n.d(t,{useAllLimitOrders:()=>w,useCancelLimitOrderCallback:()=>x,useCheckLimitOrderInputBalance:()=>g,useLimitOrderOutput:()=>h,useLimitOrderParams:()=>m,useLimitOrders:()=>v});var r=n(669083),o=n(634795),a=n(968079),i=n(202784),u=n(783112),s=n(945821),l=n(859071),d=n(436873),c=n(415008),f=n(797749),p=n(174915);function m(){var e=(0,l.useAppSelector)((function(e){return e.limitOrder.tokenIn})),t=(0,l.useAppSelector)((function(e){return e.limitOrder.tokenOut})),n=(0,l.useAppSelector)((function(e){return e.limitOrder.typedValue})),r=(0,l.useAppSelector)((function(e){return e.limitOrder.activeAccount})),o=(0,i.useMemo)((function(){if(e&&t&&n&&(0,c.gt)(n,0)&&r)return{tokenIn:e,tokenOut:t,tokenInValue:n,activeAccount:r}}),[e,t,n,r]);return(0,l.useDebounce)(o,500)}function h(){var e=(0,l.useAppSelector)((function(e){return e.limitOrder.instantRate})),t=(0,l.useAppSelector)((function(e){return e.limitOrder.typedValue}));return(0,i.useMemo)((function(){return e&&t?(0,c.multiply)(t,e):"0"}),[e,t])}function v(e,t){var n=(0,l.useAppSelector)((function(e){return e.swapTransactions.limitOrderDetails}));return(0,i.useMemo)((function(){if(!n||!e)return[];var r;if(e&&t)return null==(r=n[e])?void 0:r[t];var o=n[e];return o?Object.values(o).reduce((function(e,t){return e.concat(t)}),[]).sort((function(e,t){return t.createdAt-e.createdAt})):[]}),[n,e,t])}function w(){var e=(0,l.useAppSelector)((function(e){return e.swapTransactions.limitOrderDetails}));return(0,i.useMemo)((function(){return e?Object.values(e).reduce((function(e,t){return e.concat.apply(e,(0,a.default)(Object.values(t)))}),[]).sort((function(e,t){return t.createdAt-e.createdAt})):[]}),[e])}var g=function(){var e=(0,l.useAppSelector)((function(e){return e.limitOrder.tokenIn})),t=(0,l.useAppSelector)((function(e){return e.limitOrder.activeAccount})),n=(0,l.useAppSelector)((function(e){return e.limitOrder.typedValue})),r=(0,p.useTokenBalance)((0,c.gt)(n,0)?e:void 0,null==t?void 0:t.id);return(0,i.useMemo)((function(){if(e&&r&&n)return{insufficient:(0,c.lt)(r,n),token:e}}),[e,r,n])},x=function(){var e=(0,u.default)(),t=(0,f.useSwapSend)();return(0,i.useCallback)(function(){var n=(0,o.default)((function*(n){var a=n.activeAccount,i=n.details;if(yield s.default.serviceSwap.checkAccountInWallets(a.id)){var u=i.limitOrder;if(!u)u=(yield s.default.serviceLimitOrder.fetchOrderState({networkId:i.networkId,orderHash:i.orderHash})).order;if(u){var l=yield s.default.serviceLimitOrder.buildCancelLimitOrderTx(u);yield t({accountId:i.accountId,networkId:i.networkId,encodedTx:{from:a.address,to:l.to,data:l.data,value:"0x00"},onSuccess:function(){var t=(0,o.default)((function*(){s.default.dispatch((0,d.updateLimitOrderTransaction)({networkId:i.networkId,accountId:i.accountId,orderHash:i.orderHash,details:{canceled:!0}})),r.default.show({title:e.formatMessage({id:"msg__success"})})}));return function(){return t.apply(this,arguments)}}()})}}else r.default.show({title:e.formatMessage({id:"msg__account_deleted"},{0:a.name})},{type:"error"})}));return function(e){return n.apply(this,arguments)}}(),[e,t])}},469712:(e,t,n)=>{n.r(t),n.d(t,{useCheckInputBalance:()=>y,useDerivedSwapState:()=>g,useInputLimitsError:()=>b,useSwapError:()=>k,useSwapInputAmount:()=>x,useSwapQuoteRequestParams:()=>w,useSwapRecipient:()=>v,useSwapState:()=>h,useTokenAmount:()=>m});var r=n(887371),o=n(202784),a=n(206391),i=n.n(a),u=n(783112),s=n(859071),l=n(428357),d=n(415008),c=n(174915),f=n(34035),p=function(){function e(e,t){this.token=e,this.typedValue=t,this.base=new(i())(10),this.value=new(i())(t),this.decimals=new(i())(e.decimals),this.amount=this.base.exponentiatedBy(this.decimals).multipliedBy(this.value)}var t=e.prototype;return t.toNumber=function(){return this.amount},t.toFormat=function(){return this.toNumber().toFixed(0)},(0,r.default)(e)}();function m(e,t){return(0,o.useMemo)((function(){if(e&&t){var n=(0,d.getTokenAmountValue)(e,t);return new p(e,n.toFixed())}}),[e,t])}function h(){return(0,s.useAppSelector)((function(e){return e.swap}))}function v(){var e=(0,s.useAppSelector)((function(e){return e.swap.inputToken})),t=(0,s.useAppSelector)((function(e){return e.swap.outputToken})),n=(0,s.useAppSelector)((function(e){return e.swap.recipient})),r=(0,s.useAppSelector)((function(e){return e.swap.sendingAccount})),a=(0,s.useAppSelector)((function(e){return e.swap.allowAnotherRecipientAddress}));return(0,o.useMemo)((function(){if(e&&t&&((0,d.recipientMustBeSendingAccount)(e,t,a)&&r))return{accountId:r.id,address:r.address,name:r.name,networkId:e.networkId,networkImpl:e.impl};return n}),[n,r,a,e,t])}function w(){var e=(0,f.useSwapSlippage)().value,t=(0,s.useAppSelector)((function(e){return e.swap.inputToken})),n=(0,s.useAppSelector)((function(e){return e.swap.outputToken})),r=(0,s.useAppSelector)((function(e){return e.swap.independentField})),a=(0,s.useAppSelector)((function(e){return e.swap.typedValue})),u=(0,s.useAppSelector)((function(e){return e.swap.inputTokenNetwork})),l=(0,s.useAppSelector)((function(e){return e.swap.outputTokenNetwork})),d=(0,s.useAppSelector)((function(e){return e.swap.sendingAccount})),c=v(),p=null==c?void 0:c.address,m=(0,o.useMemo)((function(){if(t&&n&&a&&u&&l&&d&&p&&!new(i())(a).lte(0))return{typedValue:a,independentField:r,networkOut:l,networkIn:u,tokenOut:n,tokenIn:t,slippagePercentage:e,activeAccount:d,receivingAddress:p}}),[a,r,t,n,u,l,e,d,p]);return(0,s.useDebounce)(m,500)}function g(){var e=(0,s.useAppSelector)((function(e){return e.swap.independentField})),t=(0,s.useAppSelector)((function(e){return e.swap.typedValue})),n=(0,s.useAppSelector)((function(e){return e.swap.inputToken})),r=(0,s.useAppSelector)((function(e){return e.swap.outputToken})),a=(0,s.useAppSelector)((function(e){return e.swap.quote})),i=m(n,(0,d.greaterThanZeroOrUndefined)(null==a?void 0:a.sellAmount)),u=m(r,(0,d.greaterThanZeroOrUndefined)(null==a?void 0:a.buyAmount)),l=null!=a&&a.wrapperTxInfo?18:void 0,c=(0,o.useMemo)((function(){var n,r="INPUT"===e?"OUTPUT":"INPUT";return(n={})[e]=t,n[r]="INPUT"===r?(0,d.formatAmount)(null==i?void 0:i.value,l):(0,d.formatAmount)(null==u?void 0:u.value,l),n}),[e,i,u,t,l]);return{inputAmount:i,outputAmount:u,formattedAmounts:c}}function x(){var e=(0,s.useAppSelector)((function(e){return e.swap.inputToken})),t=(0,s.useAppSelector)((function(e){return e.swap.typedValue}));return(0,o.useMemo)((function(){if(e&&t)return(0,d.getTokenAmountString)(e,t)}),[e,t])}var y=function(){var e=(0,s.useAppSelector)((function(e){return e.swap.inputToken})),t=(0,s.useAppSelector)((function(e){return e.swap.sendingAccount})),n=x(),r=(0,c.useTokenBalance)(n?e:void 0,null==t?void 0:t.id);return(0,o.useMemo)((function(){if(e&&r&&n)return{insufficient:new p(e,r).toNumber().lt(n),token:e}}),[e,r,n])},k=function(){var e=(0,s.useAppSelector)((function(e){return e.swap.error})),t=y();return(0,o.useMemo)((function(){return e||(t&&t.insufficient?l.SwapError.InsufficientBalance:void 0)}),[e,t])};function b(){var e=(0,u.default)(),t=(0,s.useAppSelector)((function(e){return e.swap.inputToken})),n=(0,s.useAppSelector)((function(e){return e.swap.quoteLimited})),r=(0,s.useAppSelector)((function(e){return e.swap.typedValue})),a=(0,d.greaterThanZeroOrUndefined)(r),i=m(t,void 0!==a&&t?(0,d.getTokenAmountString)(t,a):void 0),l=m(t,null==n?void 0:n.max),c=m(t,null==n?void 0:n.min);return(0,o.useMemo)((function(){var n,r;if(i&&t&&(l||c)){if(c){var o=c.typedValue;c.amount.gt(i.amount)&&(n=e.formatMessage({id:"msg__str_minimum_amount"},{0:`${o} ${t.symbol}`}),r=o)}if(l){var a=l.typedValue;l.amount.lt(i.amount)&&(n=e.formatMessage({id:"msg__str_maximum_amount"},{0:`${a} ${t.symbol}`}),r=a)}}if(n&&r)return{message:n,value:r}}),[i,t,l,c,e])}},797749:(e,t,n)=>{n.r(t),n.d(t,{useSwapSend:()=>m,useSwapSignMessage:()=>h});var r=n(634795),o=n(202784),a=n(534756),i=n(292147),u=(n(213208),n(945821)),s=n(493877),l=n(420454),d=n(481047),c=n(432986),f=n(530483),p=n(415008);function m(){var e=(0,s.default)(),t=(0,l.useAppSelector)((function(e){return e.settings.validationSetting}));return(0,o.useCallback)(function(){var n=(0,r.default)((function*(n){var r=n.encodedTx,o=n.accountId,s=n.networkId,l=n.payloadInfo,m=n.prepaidFee,h=n.onFail,v=n.onSuccess,w=n.onDetail,g=n.gasEstimateFallback,x=n.showSendFeedbackReceipt,y=(0,p.createLoggerTimer)(),k=(0,a.getWalletIdFromAccountId)(o),b=yield u.default.engine.getWallet(k),j=(yield u.default.servicePassword.getPassword())&&!(null!=t&&t.Payment);if("hw"===b.type||"external"!==b.type&&j)try{y.start(p.LoggerTimerTags.sendTransaction);var I=yield u.default.serviceSwap.sendTransaction({accountId:o,networkId:s,encodedTx:r,payload:l,autoFallback:g,prepaidFee:m}),_=I.result,S=I.decodedTx;y.end(p.LoggerTimerTags.sendTransaction),yield null==v?void 0:v({result:_,decodedTx:S}),x&&setTimeout((function(){e.navigate(d.RootRoutes.Modal,{screen:d.ModalRoutes.Send,params:{screen:f.SendModalRoutes.SendFeedbackReceipt,params:{networkId:s,accountId:o,txid:_.txid,type:"Send"}}})}),10)}catch(A){var O,T=(null==A||null==(O=A.data)?void 0:O.message)||A.message;i.default.swap.error(`swap send failed with message ${T}`),c.deviceUtils.showErrorToast(A,T),null==h||h(A)}else{setTimeout((function(){e.navigate(d.RootRoutes.Modal,{screen:d.ModalRoutes.Send,params:{screen:f.SendModalRoutes.SendConfirm,params:{accountId:o,networkId:s,payloadInfo:l,feeInfoEditable:!0,feeInfoUseFeeInTx:!1,encodedTx:r,prepaidFee:m,hideSendFeedbackReceipt:!x,onDetail:w,onFail:h,onSuccess:function(e,t){var n;null==v||v({result:e,decodedTx:null!=(n=null==t?void 0:t.decodedTx)?n:void 0})}}}})}),100)}}));return function(e){return n.apply(this,arguments)}}(),[t,e])}function h(){var e=(0,s.default)(),t=(0,l.useAppSelector)((function(e){return e.settings.validationSetting}));return(0,o.useCallback)(function(){var n=(0,r.default)((function*(n){var r=n.accountId,o=n.networkId,i=n.unsignedMessage,s=n.onSuccess,l=n.onFail,m=(0,p.createLoggerTimer)(),h=(0,a.getWalletIdFromAccountId)(r),v=yield u.default.engine.getWallet(h),w=(yield u.default.servicePassword.getPassword())&&!(null!=t&&t.Payment);if("hw"===v.type||"external"!==v.type&&w)try{m.start(p.LoggerTimerTags.signMessage);var g=yield u.default.serviceTransaction.signMessage({accountId:r,networkId:o,unsignedMessage:i});m.end(p.LoggerTimerTags.signMessage),yield null==s?void 0:s(g)}catch(y){var x;c.deviceUtils.showErrorToast(y,(null==y||null==(x=y.data)?void 0:x.message)||y.message),null==l||l()}else e.navigate(d.RootRoutes.Modal,{screen:d.ModalRoutes.Send,params:{screen:f.SendModalRoutes.SignMessageConfirm,params:{accountId:r,networkId:o,unsignedMessage:i,onSuccess:s,onFail:l}}})}));return function(e){return n.apply(this,arguments)}}(),[e,t])}},174915:(e,t,n)=>{n.r(t),n.d(t,{useCachedBalances:()=>p,useTokenBalance:()=>h,useTokenBalanceSimple:()=>m,useTokenPrice:()=>v,useTokenSearch:()=>f});var r=n(634795),o=n(196234),a=n(202784),i=n(534756),u=n(134662),s=n(945821),l=n(859071),d=n(920453),c=n(380845);var f=function(e,t){var n=(0,a.useState)(!1),i=(0,o.default)(n,2),u=i[0],l=i[1],d=(0,a.useState)(),f=(0,o.default)(d,2),p=f[0],m=f[1],h=(0,a.useRef)({keyword:"",count:0});return(0,a.useEffect)((function(){function n(){return n=(0,r.default)((function*(t,n){if(0!==t.length){l(!0),m([]);var r=[];try{h.current.count+=1;var o=function(e,t){if(t)return{combined:!1,symbol:"",networkName:""};var n=e.split(" ").filter((function(e){return Boolean(e)}));return 2===n.length?{combined:!0,symbol:n[0],networkName:n[1]}:{combined:!1,symbol:"",networkName:""}}(t,n);if(o.combined){r=yield s.default.serviceSwap.searchTokens({keyword:o.symbol});var a=(0,c.appSelector)((function(e){return e.runtime.networks})).filter((function(e){return e.name.toLowerCase().includes(o.networkName.toLowerCase())})).map((function(e){return e.id})),i=new Set(a);r=r.filter((function(e){return i.has(e.networkId)})),t===h.current.keyword&&n===h.current.networkId&&m(r)}else r=yield s.default.serviceSwap.searchTokens({networkId:null!=n?n:void 0,keyword:e}),t===h.current.keyword&&n===h.current.networkId&&m(r)}finally{h.current.count-=1,0===h.current.count&&l(!1)}}else m(void 0)})),n.apply(this,arguments)}h.current.keyword=e,h.current.networkId=t,function(e,t){n.apply(this,arguments)}(e,t)}),[e,t]),{loading:u,result:p}},p=function(e,t){var n=(0,l.useAccountTokensBalance)(e,t);return(0,l.useThrottle)(n,2e3)},m=function(e,t){var n=p(null==e?void 0:e.networkId,t);return(0,a.useMemo)((function(){if(e)return n[(0,u.getBalanceKey)(e)]}),[n,e])},h=function(e,t){var n,r,o=(0,l.useTokenBalanceWithoutFrozen)({networkId:null!=(n=null==e?void 0:e.networkId)?n:"",accountId:null!=t?t:"",token:e,useRecycleBalance:null==(r=null==e?void 0:e.isNative)||r});return(0,a.useEffect)((function(){e&&t&&(0,i.isAccountCompatibleWithNetwork)(t,e.networkId)&&s.default.serviceToken.fetchAndSaveAccountTokenBalance({accountId:t,networkId:e.networkId,tokenIds:e.tokenIdOnNetwork?[e.tokenIdOnNetwork]:[]})}),[e,t]),(0,a.useMemo)((function(){if(e)return o}),[o,e])},v=function(e){var t=(0,d.useSimpleTokenPriceValue)({networkId:null==e?void 0:e.networkId,contractAdress:null==e?void 0:e.tokenIdOnNetwork});return(0,a.useMemo)((function(){if(e)return t}),[t,e])}},34035:(e,t,n)=>{n.r(t),n.d(t,{usePriceImpact:()=>p,useProgressStatusContext:()=>x,useSlippageLevels:()=>m,useSummaryTx:()=>f,useSwapChartMode:()=>g,useSwapMinimumReceivedAmount:()=>w,useSwapSlippage:()=>v,useSwapSlippageAuto:()=>h});var r=n(196234),o=n(539144),a=n(202784),i=n(206391),u=n.n(i),s=n(783112),l=n(859071),d=n(415008),c=n(174915);function f(){var e=(0,s.default)();return(0,a.useCallback)((function(t){var n;if("approve"===t.type)return t.approval?`${e.formatMessage({id:"title__approve"})} ${null==(n=t.approval)?void 0:n.token.symbol}`:`${e.formatMessage({id:"title__approve"})}`;if("swap"===t.type&&t.tokens){var r=t.tokens,o=r.from,a=r.to;return`${`${(0,d.formatAmount)(o.amount,4)} ${o.token.symbol}`} \u2192 ${`${(0,d.formatAmount)(a.amount,4)} ${a.token.symbol}`}`}return""}),[e])}function p(){var e=(0,l.useAppSelector)((function(e){return e.swap.inputToken})),t=(0,l.useAppSelector)((function(e){return e.swap.outputToken})),n=(0,c.useTokenPrice)(e),r=(0,c.useTokenPrice)(t),o=(0,l.useAppSelector)((function(e){var t;return null==(t=e.swap.quote)?void 0:t.instantRate}));if(r&&n&&o){var a=(0,d.div)(n,r);if((0,d.lte)(o,a)){var i=(0,d.multiply)((0,d.div)((0,d.minus)(a,o),a),100);return Number(i)}}}function m(){var e=(0,l.useAppSelector)((function(e){return e.swapTransactions.recommendedSlippage}));return(0,a.useMemo)((function(){var t,n,r;return{stable:null!=(t=null==e?void 0:e.stable)?t:"0.1",popular:null!=(n=null==e?void 0:e.popular)?n:"0.5",others:null!=(r=null==e?void 0:e.others)?r:"1"}}),[e])}function h(){var e=(0,l.useAppSelector)((function(e){return e.swap.inputToken})),t=(0,l.useAppSelector)((function(e){return e.swap.outputToken})),n=(0,l.useAppSelector)((function(e){return e.swapTransactions.slippage})),r=(0,l.useAppSelector)((function(e){return e.swapTransactions.coingeckoIds})),o=m(),i=(0,a.useCallback)((function(e){if(r&&e){var t=r.popular,n=r.stable;return n&&n.includes(e)?{type:"stable",value:o.stable}:t&&t.includes(e)?{type:"popular",value:o.popular}:{type:"others",value:o.others}}}),[r,o]);return(0,a.useMemo)((function(){if((!n||"auto"===n.mode)&&e&&t){var r=i(e.coingeckoId),o=i(t.coingeckoId);return Number(null==r?void 0:r.value)>Number(null==o?void 0:o.value)?r:o}}),[n,e,t,i])}function v(){var e=(0,l.useAppSelector)((function(e){return e.swapTransactions.slippage})),t=h(),n=(0,a.useMemo)((function(){var n,r;return t?{mode:"auto",value:null!=(r=t.value)?r:"1"}:{mode:null==e?void 0:e.mode,value:null!=(n=null==e?void 0:e.value)?n:"1"}}),[t,e]);return(0,l.useDebounce)(n,500)}var w=function(){var e=(0,l.useAppSelector)((function(e){return e.swap.quote})),t=v().value;return(0,a.useMemo)((function(){if(e){var n=e.minAmountOut,r=e.estimatedBuyAmount,o=e.buyAmount;if(n)return Number(n);var a=r||o;if(a){var i=new(u())(a);if(!i.isNaN())return i.minus(i.multipliedBy(Number(t)/100)).toFixed()}}}),[e,t])},g=function(){var e=(0,l.useAppSelector)((function(e){return e.swapTransactions.swapChartMode}));return(0,o.default)()?"simple":null!=e?e:"chart"},x=function(){var e=(0,a.useState)(),t=(0,r.default)(e,2),n=t[0],o=t[1],i=(0,a.useCallback)((function(){return o({})}),[o]),u=(0,a.useCallback)((function(){return o(void 0)}),[o]);return(0,a.useMemo)((function(){return{progressStatus:n,setProgressStatus:o,openProgressStatus:i,closeProgressStatus:u}}),[n,o,i,u])}},48369:(e,t,n)=>{n.r(t),n.d(t,{isTransactionRecent:()=>s,useAllTransactions:()=>l,useTransactionsAccount:()=>f,useWalletsAccounts:()=>d,useWalletsSwapTransactions:()=>c});var r=n(196234),o=n(968079),a=n(202784),i=n(945821),u=n(747225);function s(e){return Date.now()-e.addedTime<864e5}function l(){var e=(0,u.useAppSelector)((function(e){return e.swapTransactions.transactions}));return(0,a.useMemo)((function(){var t=Object.values(e).reduce((function(e,t){return e.concat.apply(e,(0,o.default)(Object.values(t)))}),[]);return(0,o.default)(t).sort((function(e,t){return e.addedTime>t.addedTime?-1:1}))}),[e])}function d(){var e=(0,u.useAppSelector)((function(e){return e.runtime.wallets}));return(0,a.useMemo)((function(){return e.reduce((function(e,t){return e.concat(t.accounts.map((function(e){return{accountId:e,walletId:t.id}})))}),[])}),[e])}function c(){var e=function(){var e=l();return(0,a.useMemo)((function(){return e.filter((function(e){return"swap"===e.type}))}),[e])}(),t=d(),n=(0,u.useAppSelector)((function(e){return e.runtime.networks})),r=(0,a.useMemo)((function(){return n.map((function(e){return e.id}))}),[n]),o=(0,a.useMemo)((function(){return t.map((function(e){return e.accountId}))}),[t]);return e.filter((function(e){return o.includes(e.accountId)&&r.includes(e.networkId)}))}function f(e,t){var n=d(),o=(0,a.useState)((function(){return n.find((function(t){return t.accountId===e}))?void 0:null})),u=(0,r.default)(o,2),s=u[0],l=u[1];return(0,a.useEffect)((function(){var o=n.find((function(t){return t.accountId===e}));o&&i.default.engine.getAccounts([o.accountId],t).then((function(e){var t=(0,r.default)(e,1)[0];t&&l(t)}))}),[n,e,t]),s}},556805:(e,t,n)=>{n.r(t),n.d(t,{SwapQuoter:()=>A});var r=n(256666),o=n(634795),a=n(887371),i=n(789644),u=n.n(i),s=n(206391),l=n.n(s),d=n(849877),c=n(398514),f=n(942013),p=n(613549),m=n(292147),h=n(945821),v=n(428357),w=n(415008),g=function(){function e(){this.type=v.QuoterType.zeroX}return e.prototype.queryTransactionProgress=function(){var e=(0,o.default)((function*(e){var t=e.networkId,n=e.accountId,r=e.nonce;if(void 0!==r)return{status:yield h.default.serviceHistory.queryTransactionNonceStatus({networkId:t,accountId:n,nonce:r})};var o=yield h.default.serviceNetwork.rpcCall(t,{method:"eth_getTransactionReceipt",params:[e.hash]});return o?{status:1===Number(o.status)?"sucesss":"failed"}:Date.now()-e.addedTime>864e5?{status:"failed"}:void 0}));return function(t){return e.apply(this,arguments)}}(),(0,a.default)(e)}();function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(){var e=t.prototype;function t(){this.type=v.QuoterType.deezy,this.client=u().create({timeout:6e4})}return e.getBaseUrl=function(){var e=(0,o.default)((function*(){return`${yield h.default.serviceSwap.getServerEndPoint()}/deezy`}));return function(){return e.apply(this,arguments)}}(),e.queryTransactionProgress=function(){var e=(0,o.default)((function*(e){var t,n;console.log("=====>>>>TX: ",e);var r,o,a,i,s=(0,p.isLightningNetworkByNetworkId)(e.networkId),l=yield this.getBaseUrl(),d=((n={networkId:e.networkId})[s?"bolt11Invoice":"secretAccessKey"]=null==(t=e.attachment)?void 0:t.swftcOrderId,n),c=yield u().get(`${l}${s?"/lookupLnToBtc":"/lookupBtcToLn"}`,{params:d});return c.data&&c.data.progress?y(y({},c.data.progress),{},{status:"success"===(null==(r=c.data)||null==(o=r.progress)?void 0:o.status)?"sucesss":null==(a=c.data)||null==(i=a.progress)?void 0:i.status}):{status:"pending",destinationTransactionHash:s?c.data.on_chain_txid:""}}));return function(t){return e.apply(this,arguments)}}(),(0,a.default)(t)}(),b=function(){function e(){this.type=v.QuoterType.jupiter}return e.prototype.queryTransactionProgress=function(){var e=(0,o.default)((function*(e){var t=e.networkId,n=e.accountId,r=e.hash;return{status:yield h.default.serviceHistory.queryTransactionByTxid({networkId:t,accountId:n,txid:r})}}));return function(t){return e.apply(this,arguments)}}(),(0,a.default)(e)}(),j=function(){function e(){this.type=v.QuoterType.socket,this.client=u().create({timeout:3e4})}var t=e.prototype;return t.getBaseURL=function(){var e=(0,o.default)((function*(){return`${yield h.default.serviceSwap.getServerEndPoint()}/socketBridge`}));return function(){return e.apply(this,arguments)}}(),t.querySocketBridgeStatus=function(){var e=(0,o.default)((function*(e){var t,n;try{var r=yield this.getBaseURL();n=yield this.client.get(`${r}/bridge-status`,{params:e})}catch(i){return void console.log(i)}var o,a=n.data.result;return"COMPLETED"===a.sourceTxStatus&&"COMPLETED"===a.destinationTxStatus||"COMPLETED"===(null==(t=a.refuel)?void 0:t.status)?{status:"sucesss",destinationTransactionHash:a.destinationTransactionHash||(null==(o=a.refuel)?void 0:o.destinationTransactionHash)}:"FAILED"===a.destinationTxStatus||"FAILED"===a.sourceTxStatus?{status:"failed"}:void 0}));return function(t){return e.apply(this,arguments)}}(),t.queryCrosschainTransactionProgress=function(){var e=(0,o.default)((function*(e){var t=e.nonce,n=e.networkId,r=e.accountId,o=e.tokens,a=e.attachment;if(void 0!==t&&o)for(var i=o.from,u=o.to,s=(0,w.getChainIdFromNetworkId)(i.networkId),l=(0,w.getChainIdFromNetworkId)(u.networkId),d=yield h.default.serviceHistory.getTransactionsWithNonce({nonce:t,networkId:n,accountId:r}),c=0;c<d.length;c+=1){var f,p=d[c].decodedTx.txid,m=yield this.querySocketBridgeStatus({fromChainId:s,toChainId:l,transactionHash:p,bridgeName:null==a||null==(f=a.socketUsedBridgeNames)?void 0:f[0]});if("sucesss"===(null==m?void 0:m.status))return{status:m.status,destinationTransactionHash:m.destinationTransactionHash};if("failed"===(null==m?void 0:m.status))return{status:m.status};if(null!=m&&m.destinationTransactionHash)return{destinationTransactionHash:m.destinationTransactionHash}}if(Date.now()-e.addedTime>864e5)return{status:"failed"}}));return function(t){return e.apply(this,arguments)}}(),t.querySimpleTransactionProgress=function(){var e=(0,o.default)((function*(e){var t=e.networkId,n=e.accountId,r=e.nonce;if(void 0!==r)return{status:yield h.default.serviceHistory.queryTransactionNonceStatus({networkId:t,accountId:n,nonce:r})};var o=yield h.default.serviceNetwork.rpcCall(t,{method:"eth_getTransactionReceipt",params:[e.hash]});return o?{status:1===Number(o.status)?"sucesss":"failed"}:Date.now()-e.addedTime>864e5?{status:"failed"}:void 0}));return function(t){return e.apply(this,arguments)}}(),t.queryTransactionProgress=function(){var e=(0,o.default)((function*(e){if(e.tokens){var t=yield this.querySimpleTransactionProgress(e);return"failed"===(null==t?void 0:t.status)||"canceled"===(null==t?void 0:t.status)?t:this.queryCrosschainTransactionProgress(e)}}));return function(t){return e.apply(this,arguments)}}(),(0,a.default)(e)}(),I=function(){var e=t.prototype;function t(){this.type=v.QuoterType.swftc,this.client=u().create({timeout:6e4})}return e.getBaseUrl=function(){var e=(0,o.default)((function*(){return`${yield h.default.serviceSwap.getServerEndPoint()}/swft`}));return function(){return e.apply(this,arguments)}}(),e.modifyTxId=function(){var e=(0,o.default)((function*(e,t){var n=`${yield this.getBaseUrl()}/modifyTxId`;return(yield this.client.post(n,{orderId:e,depositTxid:t})).data.data}));return function(t,n){return e.apply(this,arguments)}}(),e.getTxOrderInfo=function(){var e=(0,o.default)((function*(e){var t,n,r=null!=(t=null==(n=e.attachment)?void 0:n.swftcOrderId)?t:e.thirdPartyOrderId;if(r){var o=`${yield this.getBaseUrl()}/queryOrderState`;return(yield u().post(o,{equipmentNo:e.from,sourceType:"H5",orderId:r})).data.data}}));return function(t){return e.apply(this,arguments)}}(),e.queryTransactionProgress=function(){var e=(0,o.default)((function*(e){var t,n,r=null!=(t=null==(n=e.attachment)?void 0:n.swftcOrderId)?t:e.thirdPartyOrderId;if(r){var o=`${yield this.getBaseUrl()}/queryOrderState`,a=(yield u().post(o,{equipmentNo:e.from,sourceType:"H5",orderId:r})).data.data;if("complete"===a.tradeState)return{status:"sucesss",destinationTransactionHash:a.transactionId};if("refund_complete"===a.tradeState)return{status:"failed"};if(a.transactionId)return{destinationTransactionHash:a.transactionId}}var i=e.networkId,s=e.accountId,l=e.nonce,c=e.hash;if("evm"===(0,d.getNetworkImpl)(i)&&void 0!==l){var f=yield h.default.serviceHistory.queryTransactionNonceStatus({networkId:i,accountId:s,nonce:l});if("canceled"===f||"failed"===f)return{status:f}}else if("evm"!==(0,d.getNetworkImpl)(i)){var p=yield h.default.serviceHistory.queryTransactionByTxid({networkId:i,accountId:s,txid:c});if("canceled"===p||"failed"===p)return{status:p}}if(Date.now()-e.addedTime>864e5)return{status:"failed"}}));return function(t){return e.apply(this,arguments)}}(),(0,a.default)(t)}(),_=function(){function e(){this.type=v.QuoterType.thorswap}var t=e.prototype;return t.getBaseUrl=function(){var e=(0,o.default)((function*(){return`${yield h.default.serviceSwap.getServerEndPoint()}/thorswap`}));return function(){return e.apply(this,arguments)}}(),t.queryTransactionProgress=function(){var e=(0,o.default)((function*(e){var t=e.networkId,n=e.accountId,r=e.nonce,o=e.hash,a=e.attachment;if(void 0!==r){var i=yield h.default.serviceHistory.queryTransactionNonceStatus({networkId:t,accountId:n,nonce:r});if("failed"===i||"canceled"===i)return{status:i}}if(o&&null!=a&&a.thorswapQuoteId){var u=yield this.getTransactionInfo(e);if(u&&"success"===u.status)return{status:"sucesss",destinationTransactionHash:u.destinationTransactionHash}}if(Date.now()-e.addedTime>864e5)return{status:"failed"}}));return function(t){return e.apply(this,arguments)}}(),t.getTransactionInfo=function(){var e=(0,o.default)((function*(e){var t=e.hash,n=e.attachment;if(t&&null!=n&&n.thorswapQuoteId){var r=`${yield this.getBaseUrl()}/transaction_status_v2`;try{return(yield u().get(r,{params:{hash:t,quoteId:null==n?void 0:n.thorswapQuoteId}})).data}catch(o){return void m.default.common.info("thorswap getTransactionInfo error",o)}}}));return function(t){return e.apply(this,arguments)}}(),(0,a.default)(e)}(),S=function(){function e(){this.type=v.QuoterType.thorswapStream,this.client=new _}return e.prototype.queryTransactionProgress=function(){var e=(0,o.default)((function*(e){return this.client.queryTransactionProgress(e)}));return function(t){return e.apply(this,arguments)}}(),(0,a.default)(e)}();function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(){function e(){this.httpClient=u().create({timeout:6e4}),this.jupiter=new b,this.swftc=new I,this.simple=new g,this.socket=new j,this.thorswap=new _,this.thorswapStream=new S,this.deezy=new k,this.quoters=[this.simple,this.socket,this.jupiter,this.swftc,this.deezy,this.thorswap,this.thorswapStream],this.transactionReceipts={},this.solTransactionReceipts={}}var t=e.prototype;return t.convertOrderToTransaction=function(){var e=(0,o.default)((function*(e,t){var n=e.tokenIn,r=e.networkIn,o=e.activeAccount,a=e.sellAmount;if(a&&n){if(!t.platformAddr)throw new Error("failed to build transaction due to invalid platformAddr");var i=new(l())(a).shiftedBy(-n.decimals).toFixed();return n.tokenIdOnNetwork?yield h.default.engine.buildEncodedTxFromTransfer({networkId:r.id,accountId:o.id,transferInfo:{from:o.address,to:t.platformAddr,amount:i,token:n.tokenIdOnNetwork}}):yield h.default.engine.buildEncodedTxFromTransfer({networkId:r.id,accountId:o.id,transferInfo:{from:o.address,to:t.platformAddr,amount:i}})}}));return function(t,n){return e.apply(this,arguments)}}(),t.convertThorswapOrderToTransaction=function(){var e=(0,o.default)((function*(e,t){var n=e.tokenIn,r=e.networkIn,o=e.activeAccount,a=e.sellAmount;if(a&&n){if(!t.tcVault)throw new Error("failed to build transaction due to invalid tcVault");var i,u=new(l())(a).shiftedBy(-n.decimals).toFixed();if(!n.tokenIdOnNetwork&&[f.OnekeyNetwork.btc,f.OnekeyNetwork.doge,f.OnekeyNetwork.ltc,f.OnekeyNetwork.bch].includes(r.id)){if(i=yield h.default.engine.buildEncodedTxFromTransfer({networkId:r.id,accountId:o.id,transferInfo:{from:o.address,to:t.tcVault,amount:u,opReturn:t.memo}}))if(!i.outputs.some((function(e){var n;return(null==(n=e.payload)?void 0:n.opReturn)===t.memo})))throw new Error("failed to build transaction due to invalid opReturn");return i}if(!n.tokenIdOnNetwork&&[f.OnekeyNetwork.cosmoshub].includes(r.id))return i=yield h.default.engine.buildEncodedTxFromTransfer({networkId:r.id,accountId:o.id,transferInfo:{from:o.address,to:t.tcVault,amount:u,destinationTag:t.memo}});throw new Error("not support network")}}));return function(t,n){return e.apply(this,arguments)}}(),t.fetchLimitOrderQuote=function(){var e=(0,o.default)((function*(e){var t,n,r=(0,w.convertLimitOrderParams)(e);if(r){r.quoterType="0x";var o=`${yield h.default.serviceSwap.getServerEndPoint()}/exchange/quote`,a=null==(t=(yield this.httpClient.get(o,{params:r})).data)?void 0:t.data;if(a&&null!=(n=a.result)&&n.instantRate)return{instantRate:(0,w.formatAmountExact)(a.result.instantRate)}}}));return function(t){return e.apply(this,arguments)}}(),t.buildQuote=function(){var e=(0,o.default)((function*(e){var t=e.responses,n=e.params;if(t&&0!==t.length){var r,o=t.filter((function(e){var t;return null==(t=e.result)?void 0:t.allowanceTarget})).map((function(e){return e.result.allowanceTarget})),a=yield h.default.engine.batchTokensAllowance({networkId:n.tokenIn.networkId,accountId:n.activeAccount.id,tokenIdOnNetwork:n.tokenIn.tokenIdOnNetwork,spenders:o});return a&&a.length===o.length&&o.forEach((function(e,t){var n=a[t];r||(r={}),r[e]=n})),t.map((function(e){var t,n=e.result,o=0;"swft"===n.quoter&&(o=.002);var a,i=o+Number(null!=(t=n.percentageFee)?t:0),u={type:n.quoter,quoterlogo:n.quoterLogo,instantRate:n.instantRate,sellAmount:n.sellAmount,sellTokenAddress:n.sellTokenAddress,buyAmount:n.buyAmount,buyTokenAddress:n.buyTokenAddress,providers:n.sources,percentageFee:n.percentageFee,allowanceTarget:n.allowanceTarget,arrivalTime:n.arrivalTime,needApproved:!1,estimatedBuyAmount:(0,w.multiply)(n.buyAmount,1-i),minAmountOut:n.minAmountOut,protocolFees:n.protocolFees,estimatedPriceImpact:n.estimatedPriceImpact,onChainSatsPerVbyte:n.onChainSatsPerVbyte,notImpactBySlippage:n.notImpactBySlippage,quoteExtraData:n.quoterExtraData};if(u.allowanceTarget&&r){var s=r[u.allowanceTarget];void 0!==s&&n.sellAmount&&(u.needApproved=Number(n.sellAmount)>s)}return e.limit&&(a={max:e.limit.max,min:e.limit.min}),{data:u,limited:a}}))}}));return function(t){return e.apply(this,arguments)}}(),t.fetchQuote=function(){var e=(0,o.default)((function*(e){var t,n=(0,w.convertParams)(e);if(n){var r=yield h.default.serviceSwap.getCurrentUserSelectedQuoter();r&&(n.quoterType=r);var o=`${yield h.default.serviceSwap.getServerEndPoint()}/exchange/quote`,a=null==(t=(yield this.httpClient.get(o,{params:n})).data)?void 0:t.data;if(a){var i=yield this.buildQuote({responses:[a],params:e});return null==i?void 0:i[0]}}}));return function(t){return e.apply(this,arguments)}}(),t.fetchQuotes=function(){var e=(0,o.default)((function*(e){var t,n=(0,w.convertParams)(e);if(n){var r=`${yield h.default.serviceSwap.getServerEndPoint()}/exchange/quote_all`,o=null==(t=(yield this.httpClient.get(r,{params:n})).data)?void 0:t.data;if(o){var a=yield this.buildQuote({responses:o,params:e});if(a)return a.filter((function(e){return Boolean(e)}))}}}));return function(t){return e.apply(this,arguments)}}(),t.parseRequestId=function(e){try{var t=e.config.headers,n=null==t?void 0:t["x-onekey-request-id"];if(!n){var r=null==t?void 0:t["X-Request-By"];if("string"===typeof r)n=JSON.parse(r)["x-onekey-request-id"]}return n}catch(o){m.default.common.error("Failed to get request id with reason",o.message)}},t.buildTransaction=function(){var e=(0,o.default)((function*(e,t){var n,r=(0,w.convertBuildParams)(t);if(r){r.quoterType=e,r.disableValidate=Boolean(t.disableValidate);var o=`${yield h.default.serviceSwap.getServerEndPoint()}/exchange/build_tx`,a=yield this.httpClient.post(o,r),i=this.parseRequestId(a),u=a.data;if(u.errMsg)throw new Error(u.errMsg);if(null!=u&&u.transaction){if("object"===typeof u.transaction){if(t.networkIn.impl===p.IMPL_APTOS)return{data:T(T({},u.transaction),{},{sender:t.activeAccount.address}),result:u.result,requestId:i};var s={data:T(T({},u.transaction),{},{from:t.activeAccount.address}),result:u.result,requestId:i};return u.thor&&(s.attachment={thorswapQuoteId:u.thor.quoteId}),s}var l={data:u.transaction,result:u.result,requestId:i};return u.thor&&(l.attachment={thorswapQuoteId:u.thor.quoteId}),l}if(u.order&&null!=(n=u.result)&&n.instantRate)return{data:yield this.convertOrderToTransaction(t,u.order),result:u.result,attachment:{swftcOrderId:u.order.orderId,swftcPlatformAddr:u.order.platformAddr,swftcDepositCoinAmt:u.order.depositCoinAmt,swftcDepositCoinCode:u.order.depositCoinCode,swftcReceiveCoinAmt:u.order.receiveCoinAmt,swftcReceiveCoinCode:u.order.receiveCoinCode},requestId:i};if(u.thorOrder){var d={data:yield this.convertThorswapOrderToTransaction(t,u.thorOrder),result:u.result};return u.thor&&(d.attachment={thorswapQuoteId:u.thor.quoteId}),d}}}));return function(t,n){return e.apply(this,arguments)}}(),t.queryTransactionProgress=function(){var e=(0,o.default)((function*(e){if((0,w.isSimpleTx)(e))return this.simple.queryTransactionProgress(e);for(var t=(0,w.getQuoteType)(e),n=0;n<this.quoters.length;n+=1){var r=this.quoters[n];if(r.type===t)return r.queryTransactionProgress(e)}}));return function(t){return e.apply(this,arguments)}}(),t.getHistoryTx=function(){var e=(0,o.default)((function*(e){var t=h.default.serviceHistory,n=e.accountId,r=e.networkId,o=e.nonce;if((0,d.getNetworkImpl)(e.networkId)!==p.IMPL_EVM||void 0===o)return(yield t.getLocalHistory({accountId:n,networkId:r})).find((function(t){return t.decodedTx.txid===e.hash}));var a=(yield t.getTransactionsWithNonce({accountId:n,networkId:r,nonce:o})).find((function(e){return e.decodedTx.status===c.IDecodedTxStatus.Confirmed}));return a||void 0}));return function(t){return e.apply(this,arguments)}}(),t.getTransactionReceipt=function(){var e=(0,o.default)((function*(e,t){var n,r;if(this.transactionReceipts[e]||(this.transactionReceipts[e]={}),null!=(n=this.transactionReceipts[e])&&n[t])return null==(r=this.transactionReceipts[e])?void 0:r[t];var o=yield h.default.serviceNetwork.rpcCall(e,{method:"eth_getTransactionReceipt",params:[t]});return o?(this.transactionReceipts[e][t]=o,o):void 0}));return function(t,n){return e.apply(this,arguments)}}(),t.getSOLTransactionReceipt=function(){var e=(0,o.default)((function*(e,t){var n,r;if(this.solTransactionReceipts[e]||(this.solTransactionReceipts[e]={}),null!=(n=this.solTransactionReceipts[e])&&n[t])return null==(r=this.solTransactionReceipts[e])?void 0:r[t];var o=yield h.default.serviceNetwork.rpcCall(e,{method:"getTransaction",params:[t,{encoding:"jsonParsed",maxSupportedTransactionVersion:0}]});return o?(this.solTransactionReceipts[e][t]=o,o):void 0}));return function(t,n){return e.apply(this,arguments)}}(),t.doQueryReceivedToken=function(){var e=(0,o.default)((function*(e,t,n){if((0,w.isEvmNetworkId)(t.networkId)){var r=yield this.getTransactionReceipt(t.networkId,e);if(r){var o,a=function(e){return`0x${e.slice(2).replace(/^0+/,"").padStart(40,"0")}`};if(t.tokenIdOnNetwork){var i,u=null==(i=r.logs)?void 0:i.find((function(e){return a(e.address.toLowerCase())===t.tokenIdOnNetwork.toLowerCase()&&3===e.topics.length&&e.topics[2]&&a(e.topics[2])===n.toLowerCase()}));return null==u?void 0:u.data}var s=null==(o=r.logs)?void 0:o.find((function(e){if(2===e.topics.length){var t=e.topics[0];if("0x7fcf532c15f0a6db0bd6d0e038bea71d30d808c7d98cb3bf7268a95bf5081b65"===a(t).toLowerCase())return!0}return!1}));return null==s?void 0:s.data}}else if((0,w.isSolNetworkId)(t.networkId)){var l=yield this.getSOLTransactionReceipt(t.networkId,e);if(l){var d=function(e){var r=t.tokenIdOnNetwork;return e.owner.toLowerCase()===n.toLowerCase()&&e.mint.toLowerCase()===r.toLowerCase()},c=l.meta.preTokenBalances.find(d),f=l.meta.postTokenBalances.find(d);if(c&&f)return(0,w.minus)(f.uiTokenAmount.amount,c.uiTokenAmount.amount)}}}));return function(t,n,r){return e.apply(this,arguments)}}(),t.getActualReceived=function(){var e=(0,o.default)((function*(e){if(e.tokens){var t=e.receivingAddress,n=e.tokens,r=n.from,o=n.to;if("swftc"===(null==e?void 0:e.quoterType)){var a=yield this.swftc.getTxOrderInfo(e);if(a)return a.receiveCoinAmt}else if((null==e?void 0:e.quoterType)===v.QuoterType.thorswap||e.quoterType===v.QuoterType.thorswapStream){var i=yield this.thorswap.getTransactionInfo(e);if(i)return i.actualReceived}else{var u=yield this.getHistoryTx(e),s=(null==u?void 0:u.decodedTx.txid)||e.hash;if((0,w.isEvmNetworkId)(r.networkId)&&(0,w.isEvmNetworkId)(o.networkId)&&t){if(s&&r.networkId===o.networkId){var l=yield this.doQueryReceivedToken(s,o.token,t);if(l)return(0,w.getTokenAmountValue)(e.tokens.to.token,l).toFixed()}else if(e.destinationTransactionHash){var d=yield this.doQueryReceivedToken(e.destinationTransactionHash,o.token,t);if(d)return(0,w.getTokenAmountValue)(e.tokens.to.token,d).toFixed()}}else if((0,w.isSolNetworkId)(r.networkId)&&(0,w.isSolNetworkId)(o.networkId)&&t){var c=yield this.doQueryReceivedToken(e.hash,o.token,t);if(c)return(0,w.getTokenAmountValue)(e.tokens.to.token,c).toFixed()}}}}));return function(t){return e.apply(this,arguments)}}(),t.getTxCompletedTime=function(){var e=(0,o.default)((function*(e){if(e.tokens){var t=e.tokens.to;if((0,w.isEvmNetworkId)(t.networkId)){var n=e.hash,r=yield this.getHistoryTx(e);null!=r&&r.decodedTx.txid&&(n=null==r?void 0:r.decodedTx.txid),e.destinationTransactionHash&&(n=e.destinationTransactionHash);var o=yield this.getTransactionReceipt(t.networkId,n);if(null!=o&&o.blockHash){var a=yield h.default.serviceNetwork.rpcCall(t.networkId,{method:"eth_getBlockByHash",params:[o.blockHash,!0]});if(null!=a&&a.timestamp)return new(l())(a.timestamp).multipliedBy(1e3).toFixed()}}}}));return function(t){return e.apply(this,arguments)}}(),t.getTxActualNetworkFee=function(){var e=(0,o.default)((function*(e){if(e.tokens){var t=e.tokens.from;if((0,w.isEvmNetworkId)(t.networkId)){var n=yield this.getHistoryTx(e),r=(null==n?void 0:n.decodedTx.txid)||e.hash,o=yield this.getTransactionReceipt(t.networkId,r);if(o&&o.gasUsed&&o.effectiveGasPrice){var a=yield h.default.engine.getNetwork(e.networkId);return(0,w.calculateNetworkFee)({limit:o.gasUsed,price:(0,w.div)(o.effectiveGasPrice,10**9)},a)}}}}));return function(t){return e.apply(this,arguments)}}(),t.swftModifyTxId=function(){var e=(0,o.default)((function*(e,t){return this.swftc.modifyTxId(e,t)}));return function(t,n){return e.apply(this,arguments)}}(),(0,a.default)(e)}();A.client=new A},192808:e=>{function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,r,o){n=n||"&",r=r||"=";var a={};if("string"!==typeof e||0===e.length)return a;var i=/\+/g;e=e.split(n);var u=1e3;o&&"number"===typeof o.maxKeys&&(u=o.maxKeys);var s=e.length;u>0&&s>u&&(s=u);for(var l=0;l<s;++l){var d,c,f,p,m=e[l].replace(i,"%20"),h=m.indexOf(r);h>=0?(d=m.substr(0,h),c=m.substr(h+1)):(d=m,c=""),f=decodeURIComponent(d),p=decodeURIComponent(c),t(a,f)?Array.isArray(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a}},31368:e=>{var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,r,o){return n=n||"&",r=r||"=",null===e&&(e=void 0),"object"===typeof e?Object.keys(e).map((function(o){var a=encodeURIComponent(t(o))+r;return Array.isArray(e[o])?e[o].map((function(e){return a+encodeURIComponent(t(e))})).join(n):a+encodeURIComponent(t(e[o]))})).filter(Boolean).join(n):o?encodeURIComponent(t(o))+r+encodeURIComponent(t(e)):""}},856642:(e,t,n)=>{t.decode=t.parse=n(192808),t.encode=t.stringify=n(31368)},55337:(e,t,n)=>{e.exports=n.p+"static/media/logo.b0cff82fee531cbed919.png"}}]);