(self.webpackChunkweb=self.webpackChunkweb||[]).push([[57466],{256078:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._paused=!1,this._messageListeners={},this._queue=[],this._send=t}var t,r,a;return t=e,(r=[{key:"post",value:function(e){var t=this;return new Promise((function(n){"set"!==e.type&&(t._messageListeners[e.id]=n),t._paused?t._queue.push(e):t._send(e)}))}},{key:"handle",value:function(e){var t=this._messageListeners[e.id];delete this._messageListeners[e.id],t?t(e):console.warn("Received unexpected message",e)}},{key:"pause",value:function(){this._paused=!0}},{key:"resume",value:function(){this._paused=!1,this._send(this._queue),this._queue=[]}}])&&n(t.prototype,r),a&&n(t,a),e}();t.default=r},381527:(e,t,n)=>{var r=n(382841);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"ImageData",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"Path2D",{enumerable:!0,get:function(){return p.default}}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(202784)),o=n(208650),i=n(991786),s=m(n(256078)),u=n(260080),c=m(n(797505)),l=m(n(663923)),d=m(n(972626)),f=m(n(100755)),p=m(n(76035));n(440272);var h,v="src/Canvas.js";function m(e){return e&&e.__esModule?e:{default:e}}function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(("function"===typeof Symbol?Symbol.iterator:"@@iterator")in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){w(e,t,n[t])}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e){return _=Object.getPrototypeOf||function(e){return e.__proto__},_(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var C=o.StyleSheet.create({container:{overflow:"hidden",flex:0},webview:{overflow:"hidden",backgroundColor:"transparent",flex:0},webviewAndroid9:{overflow:"hidden",backgroundColor:"transparent",flex:0,opacity:.99}}),I=(0,u.webviewTarget)("canvas")(h=(0,u.webviewProperties)({width:300,height:150})(h=(0,u.webviewMethods)(["toDataURL"])(h=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?T(e):t}(this,_(t).call(this))).state={isLoaded:!1},e.addMessageListener=function(t){return e.listeners.push(t),function(){return e.removeMessageListener(t)}},e.removeMessageListener=function(t){e.listeners.splice(e.listeners.indexOf(t),1)},e.webviewPostMessage=function(t){e.webview&&e.webview.postMessage(JSON.stringify(t))},e.bus=new s.default(e.webviewPostMessage),e.listeners=[],e.context2D=new c.default(T(T(e))),e.getContext=function(t,n){return"2d"===t?e.context2D:null},e.postMessage=function(t){var n,a,o,i,s,u;return r.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=new Error,a=n.stack,c.next=3,r.awrap(e.bus.post(b({id:Math.random()},t)));case 3:o=c.sent,i=o.type,s=o.payload,c.t0=i,c.next="error"===c.t0?9:"json"===c.t0?12:"blob"===c.t0?13:14;break;case 9:throw(u=new Error(s.message)).stack=a,u;case 12:return c.abrupt("return",s);case 13:return c.abrupt("return",atob(s));case 14:case"end":return c.stop()}}),null,this)},e.handleMessage=function(t){var n=JSON.parse(t.nativeEvent.data);switch(n.type){case"log":var r;(r=console).log.apply(r,y(n.payload));break;case"error":throw new Error(n.payload.message);default:if(n.payload){var a=u.constructors[n.meta.constructor];if(a){var o=n,i=o.args,s=o.payload,c=a.constructLocally.apply(a,[T(T(e))].concat(y(i)));g(c,s,w({},u.WEBVIEW_TARGET,n.meta.target)),n=b({},n,{payload:c})}var l=e.listeners,d=Array.isArray(l),f=0;for(l=d?l:l["function"===typeof Symbol&&"function"===typeof Symbol?Symbol.iterator:"@@iterator"]();;){var p;if(d){if(f>=l.length)break;p=l[f++]}else{if((f=l.next()).done)break;p=f.value}p(n.payload)}}e.bus.handle(n)}},e.handleRef=function(t){e.webview=t},e.handleLoad=function(){e.setState({isLoaded:!0}),e.bus.resume()},e.bus.pause(),e}var n,d,f;return n=t,(d=[{key:"render",value:function(){var e=this.width,t=this.height,n=this.props,r=n.style,s=n.baseUrl,u=void 0===s?"":s,c=n.originWhitelist,d=void 0===c?["*"]:c,f=this.state.isLoaded;if("android"===o.Platform.OS){var p=o.Platform.Version>=28;return a.default.createElement(o.View,{style:[C.container,{width:e,height:t},r],__source:{fileName:v,lineNumber:139}},a.default.createElement(i.WebView,{ref:this.handleRef,style:[p?C.webviewAndroid9:C.webview,{height:t,width:e}],source:{html:l.default,baseUrl:u},originWhitelist:d,onMessage:this.handleMessage,onLoad:this.handleLoad,overScrollMode:"never",mixedContentMode:"always",scalesPageToFit:!1,javaScriptEnabled:!0,domStorageEnabled:!0,thirdPartyCookiesEnabled:!0,allowUniversalAccessFromFileURLs:!0,__source:{fileName:v,lineNumber:140}}))}return a.default.createElement(o.View,{style:[C.container,{width:e,height:t,opacity:f?1:0},r],__source:{fileName:v,lineNumber:159}},a.default.createElement(i.WebView,{ref:this.handleRef,style:[C.webview,{height:t,width:e}],source:{html:l.default,baseUrl:u},originWhitelist:d,onMessage:this.handleMessage,onLoad:this.handleLoad,scrollEnabled:!1,__source:{fileName:v,lineNumber:160}}))}}])&&x(n.prototype,d),f&&x(n,f),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");k(e.prototype,t&&t.prototype),t&&k(e,t)}(t,e),t}(a.Component))||h)||h)||h;t.default=I},440272:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=n(260080);var o=(0,a.webviewMethods)(["addColorStop"])(r=(0,a.webviewConstructor)("CanvasGradient")(r=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.postMessage=function(e){return n.canvas.postMessage(e)},this.canvas=t})||r)||r;t.default=o},797505:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=n(260080);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=(0,a.webviewTarget)("context2D")(r=(0,a.webviewProperties)({fillStyle:"#000",font:"10px sans-serif",globalAlpha:1,globalCompositeOperation:"source-over",lineCap:"butt",lineDashOffset:0,lineJoin:"miter",lineWidth:1,miterLimit:10,shadowBlur:0,shadowColor:"rgba(0,0,0,0)",shadowOffsetX:0,shadowOffsetY:0,strokeStyle:"#000",textAlign:"start",textBaseline:"alphabetic"})(r=(0,a.webviewMethods)(["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createImageData","createLinearGradient","createPattern","createRadialGradient","drawFocusIfNeeded","drawImage","drawWidgetAsOnScreen","drawWindow","ellipse","fill","fillRect","fillText","getImageData","getLineDash","isPointInPath","isPointInStroke","lineTo","measureText","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeRect","strokeText","transform","translate"])(r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t}var t,n,r;return t=e,(n=[{key:"postMessage",value:function(e){return this.canvas.postMessage(e)}}])&&o(t.prototype,n),r&&o(t,r),e}())||r)||r)||r;t.default=i},972626:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o=(r=n(381527))&&r.__esModule?r:{default:r},i=n(260080);var s=(0,i.webviewProperties)({crossOrigin:void 0,height:void 0,src:void 0,width:void 0})(a=(0,i.webviewEvents)(["load","error"])(a=(0,i.webviewConstructor)("Image")(a=function e(t,n,r,a){var i=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.postMessage=function(e){return i.canvas.postMessage(e)},this.addMessageListener=function(e){return i.canvas.addMessageListener(e)},!(t instanceof o.default))throw new Error("Image must be initialized with a Canvas instance");this.canvas=t,this.onConstruction&&!a&&this.onConstruction(),this.width&&(this.width=n),this.height&&(this.height=r)})||a)||a)||a;t.default=s},100755:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o=(r=n(381527))&&r.__esModule?r:{default:r};var i=(0,n(260080).webviewConstructor)("ImageData")(a=function e(t,n,r,a,i){var s=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.postMessage=function(e){return s.canvas.postMessage(e)},this.addMessageListener=function(e){return s.canvas.addMessageListener(e)},!(t instanceof o.default))throw new Error("ImageData must be initialized with a Canvas instance");this.canvas=t,this.onConstruction&&!i&&this.onConstruction(n,r,a)})||a;t.default=i},76035:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=n(260080);var o=(0,a.webviewMethods)(["addPath","closePath","moveTo","lineTo","bezierCurveTo","quadraticCurveTo","arc","arcTo","ellipse","rect"])(r=(0,a.webviewConstructor)("Path2D")(r=function e(t,n,r){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.postMessage=function(e){return a.canvas.postMessage(e)},this.addMessageListener=function(e){return a.canvas.addMessageListener(e)},this.canvas=t,this.onConstruction&&!r&&this.onConstruction(n)})||r)||r;t.default=o},663923:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r="<html><head>\n    <meta content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scaleable=no\" name=\"viewport\">\n    <style>\n      html {\n        -ms-content-zooming: none;\n        -ms-touch-action: pan-x pan-y;\n      }\n      body {\n        position: fixed;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        margin: 0;\n        padding: 0;\n        overflow: hidden;\n      }\n      * {\n        user-select: none;\n        -ms-user-select: none;\n        -moz-user-select: none;\n        -webkit-user-select: none;\n      }\n    </style>\n  </head>\n  <body>\n    <script>(function () {\n  if (CanvasRenderingContext2D.useSVGMatrix === void 0) {\n    CanvasRenderingContext2D.useSVGMatrix = false;\n  }\n\n  CanvasRenderingContext2D.arrayToSVGMatrix = function (matrix) {\n    if (matrix instanceof SVGMatrix) {\n      return matrix;\n    } else if (matrix instanceof Array) {\n      var _matrix = document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGMatrix();\n\n      _matrix.a = array[0];\n      _matrix.b = array[1];\n      _matrix.c = array[2];\n      _matrix.d = array[3];\n      _matrix.e = array[4];\n      _matrix.f = array[5];\n      return _matrix;\n    } else {\n      throw new Error('Matrix is not an Array');\n    }\n  };\n\n  CanvasRenderingContext2D.svgMatrixToArray = function (matrix) {\n    if (matrix instanceof Array) {\n      return matrix;\n    } else if (matrix instanceof SVGMatrix) {\n      return [matrix.a, matrix.b, matrix.c, matrix.d, matrix.e, matrix.f];\n    } else {\n      throw new Error('Matrix is not a SVGMatrix');\n    }\n  };\n})();\n\n(function () {\n  var canvasRenderingContext2DPrototype = CanvasRenderingContext2D.prototype;\n  var HTMLCanvasElementPrototype = HTMLCanvasElement.prototype;\n\n  if (!('resetTransform' in canvasRenderingContext2DPrototype)) {\n    canvasRenderingContext2DPrototype.resetTransform = function () {\n      this.setTransform(1, 0, 0, 1, 0, 0);\n    };\n  }\n\n  if (!('currentTransform' in canvasRenderingContext2DPrototype)) {\n    if ('mozCurrentTransform' in canvasRenderingContext2DPrototype) {\n      Object.defineProperty(canvasRenderingContext2DPrototype, 'currentTransform', {\n        get: function () {\n          return this.mozCurrentTransform;\n        },\n        set: function (matrix) {\n          this.mozCurrentTransform = matrix;\n        },\n        enumerable: true,\n        configurable: true\n      });\n    } else {\n      var getContext = HTMLCanvasElementPrototype.getContext;\n\n      HTMLCanvasElementPrototype.getContext = function (contextType, contextAttributes) {\n        var context = getContext.call(this, contextType, contextAttributes);\n\n        switch (contextType) {\n          case '2d':\n            Object.defineProperties(context, {\n              '_transformStack': {\n                value: [],\n                configurable: true,\n                writable: true\n              },\n              '_transformMatrix': {\n                value: [1, 0, 0, 1, 0, 0],\n                configurable: true,\n                writable: true\n              }\n            });\n            break;\n        }\n\n        return context;\n      };\n\n      Object.defineProperty(canvasRenderingContext2DPrototype, 'currentTransform', {\n        get: function () {\n          return this._transformMatrix;\n        },\n        set: function (matrix) {\n          this._transformMatrix = matrix;\n          this.setTransform(matrix[0], matrix[1], matrix[2], matrix[3], matrix[4], matrix[5]);\n        },\n        enumerable: true,\n        configurable: true\n      });\n      var translate = canvasRenderingContext2DPrototype.translate;\n\n      canvasRenderingContext2DPrototype.translate = function (x, y) {\n        var matrix = this._transformMatrix;\n        matrix[4] = matrix[0] * x + matrix[2] * y + matrix[4];\n        matrix[5] = matrix[1] * x + matrix[3] * y + matrix[5];\n        translate.call(this, x, y);\n      };\n\n      var scale = canvasRenderingContext2DPrototype.scale;\n\n      canvasRenderingContext2DPrototype.scale = function (x, y) {\n        var matrix = this._transformMatrix;\n        matrix[0] *= x;\n        matrix[1] *= x;\n        matrix[2] *= y;\n        matrix[3] *= y;\n        scale.call(this, x, y);\n      };\n\n      var rotate = canvasRenderingContext2DPrototype.rotate;\n\n      canvasRenderingContext2DPrototype.rotate = function (angle) {\n        var cosValue = Math.cos(angle);\n        var sinValue = Math.sin(angle);\n        var matrix = this._transformMatrix;\n        this._transformMatrix = [matrix[0] * cosValue + matrix[2] * sinValue, matrix[1] * cosValue + matrix[3] * sinValue, matrix[0] * -sinValue + matrix[2] * cosValue, matrix[1] * -sinValue + matrix[3] * cosValue, matrix[4], matrix[5]];\n        rotate.call(this, angle);\n      };\n\n      var transform = canvasRenderingContext2DPrototype.transform;\n\n      canvasRenderingContext2DPrototype.transform = function (a, b, c, d, e, f) {\n        var matrix = this._transformMatrix;\n        this._transformMatrix = [matrix[0] * a + matrix[2] * b, matrix[1] * a + matrix[3] * b, matrix[0] * c + matrix[2] * d, matrix[1] * c + matrix[3] * d, matrix[0] * e + matrix[2] * f + matrix[4], matrix[1] * e + matrix[3] * f + matrix[5]];\n        transform.call(this, a, b, c, d, e, f);\n      };\n\n      var setTransform = canvasRenderingContext2DPrototype.setTransform;\n\n      canvasRenderingContext2DPrototype.setTransform = function (a, b, c, d, e, f) {\n        this._transformMatrix = [a, b, c, d, e, f];\n        setTransform.call(this, a, b, c, d, e, f);\n      };\n\n      var resetTransform = canvasRenderingContext2DPrototype.resetTransform;\n\n      canvasRenderingContext2DPrototype.resetTransform = function () {\n        this._transformMatrix = [1, 0, 0, 1, 0, 0];\n        resetTransform.call(this);\n      };\n\n      var save = canvasRenderingContext2DPrototype.save;\n\n      canvasRenderingContext2DPrototype.save = function () {\n        this._transformStack.push(this._transformMatrix);\n\n        this._transformMatrix = this._transformMatrix.slice(0, 6);\n        save.call(this);\n      };\n\n      var restore = canvasRenderingContext2DPrototype.restore;\n\n      canvasRenderingContext2DPrototype.restore = function () {\n        var matrix = this._transformStack.pop();\n\n        if (matrix) {\n          this._transformMatrix = matrix;\n        }\n\n        restore.call(this);\n      };\n    }\n  }\n\n  var currentTransform = Object.getOwnPropertyDescriptor(CanvasRenderingContext2D.prototype, 'currentTransform');\n  var currentTransformIsSVGMatrix = document.createElement('canvas').getContext('2d').currentTransform instanceof SVGMatrix;\n  Object.defineProperty(canvasRenderingContext2DPrototype, 'currentTransform', {\n    get: function () {\n      var value = currentTransform.get.call(this);\n      return CanvasRenderingContext2D.useSVGMatrix ? CanvasRenderingContext2D.arrayToSVGMatrix(value) : CanvasRenderingContext2D.svgMatrixToArray(value);\n    },\n    set: function (matrix) {\n      currentTransform.set.call(this, currentTransformIsSVGMatrix ? CanvasRenderingContext2D.svgMatrixToArray(matrix) : CanvasRenderingContext2D.svgMatrixToArray(matrix));\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  if (!('imageSmoothingEnabled' in canvasRenderingContext2DPrototype)) {\n    Object.defineProperty(canvasRenderingContext2DPrototype, 'imageSmoothingEnabled', {\n      get: function () {\n        if (this.mozImageSmoothingEnabled !== void 0) {\n          return this.mozImageSmoothingEnabled;\n        } else if (this.webkitImageSmoothingEnabled !== void 0) {\n          return this.webkitImageSmoothingEnabled;\n        } else if (this.msImageSmoothingEnabled !== void 0) {\n          return this.msImageSmoothingEnabled;\n        } else {\n          return true;\n        }\n      },\n      set: function (enable) {\n        if (this.mozImageSmoothingEnabled !== void 0) {\n          this.mozImageSmoothingEnabled = enable;\n        } else if (this.webkitImageSmoothingEnabled !== void 0) {\n          this.webkitImageSmoothingEnabled = enable;\n        } else if (this.msImageSmoothingEnabled !== void 0) {\n          this.msImageSmoothingEnabled = enable;\n        }\n      },\n      enumerable: true,\n      configurable: true\n    });\n  }\n\n  if (!('ellipse' in canvasRenderingContext2DPrototype)) {\n    canvasRenderingContext2DPrototype.ellipse = function (x, y, radiusX, radiusY, rotation, startAngle, endAngle, antiClockwise) {\n      this.save();\n      this.translate(x, y);\n      this.rotate(rotation);\n      this.scale(radiusX, radiusY);\n      this.arc(0, 0, 1, startAngle, endAngle, antiClockwise);\n      this.restore();\n    };\n  }\n})();\n\n(function () {\n  if (!('Path2D' in window) || !('addPath' in window.Path2D.prototype)) {\n    var _Path2D = window.Path2D;\n\n    var Path2D = function (path2D) {\n      Object.defineProperty(this, '_operations', {\n        value: [],\n        configurable: true,\n        writable: true\n      });\n\n      if (path2D instanceof Path2D) {\n        if (path2D._original && _Path2D) {\n          Object.defineProperty(this, '_original', {\n            value: new _Path2D(path2D._original),\n            configurable: true,\n            writable: true\n          });\n          this._operations = path2D._operations.slice(0);\n        } else {\n          this.addPath(path2D);\n        }\n      } else if (_Path2D) {\n        Object.defineProperty(this, '_original', {\n          value: new _Path2D(path2D),\n          configurable: true,\n          writable: true\n        });\n      }\n    };\n\n    window.Path2D = Path2D;\n    var path2DPrototype = Path2D.prototype;\n    ['arc', 'arcTo', 'bezierCurveTo', 'closePath', 'ellipse', 'lineTo', 'moveTo', 'quadraticCurveTo', 'rect'].forEach(function (attributeName) {\n      path2DPrototype[attributeName] = function () {\n        this._operations.push({\n          type: attributeName,\n          arguments: Array.prototype.slice.call(arguments, 0)\n        });\n\n        if (this._original) _Path2D.prototype[attributeName].apply(this._original, arguments);\n      };\n    });\n    var canvasRenderingContext2DPrototype = CanvasRenderingContext2D.prototype;\n    ['fill', 'stroke', 'clip', 'isPointInPath', 'isPointInStroke'].forEach(function (attributeName) {\n      var original = canvasRenderingContext2DPrototype[attributeName];\n\n      canvasRenderingContext2DPrototype[attributeName] = function (path2D) {\n        if (path2D instanceof Path2D) {\n          if (path2D._original) {\n            return original.apply(this, [path2D._original].concat(Array.prototype.slice.call(arguments, 1)));\n          } else {\n            this.beginPath();\n            var operation;\n\n            for (var i = 0, l = path2D._operations.length; i < l; i++) {\n              operation = path2D._operations[i];\n              canvasRenderingContext2DPrototype[operation.type].apply(this, operation.arguments);\n            }\n\n            return original.apply(this, Array.prototype.slice.call(arguments, 1));\n          }\n        } else {\n          return original.apply(this, arguments);\n        }\n      };\n    });\n\n    if (!('addPath' in path2DPrototype)) {\n      path2DPrototype.addPath = function (path2D, transform) {\n        if (transform !== void 0) {\n          if (path2D._original) delete path2D._original;\n\n          this._operations.push({\n            type: 'save',\n            arguments: []\n          });\n\n          this._operations.push({\n            type: 'transform',\n            arguments: CanvasRenderingContext2D.svgMatrixToArray(transform)\n          });\n        }\n\n        var operation;\n\n        for (var i = 0, l = path2D._operations.length; i < l; i++) {\n          operation = path2D._operations[i];\n          path2DPrototype[operation.type].apply(this, operation.arguments);\n        }\n\n        if (transform !== void 0) {\n          this._operations.push({\n            type: 'restore',\n            arguments: []\n          });\n        }\n      };\n    }\n  }\n})();<\/script>\n    <script>var scale = function scale(ratio) {\n  return function (item) {\n    if (typeof item === 'number') {\n      return item * ratio;\n    }\n\n    return item;\n  };\n};\n\nwindow.autoScaleCanvas = function autoScaleCanvas(canvas) {\n  var ctx = canvas.getContext('2d');\n  var ratio = window.devicePixelRatio || 1;\n\n  if (ratio != 1) {\n    canvas.style.width = canvas.width + 'px';\n    canvas.style.height = canvas.height + 'px';\n    canvas.width *= ratio;\n    canvas.height *= ratio;\n    ctx.scale(ratio, ratio);\n\n    ctx.isPointInPath = function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return CanvasRenderingContext2D.prototype.isPointInPath.apply(ctx, args.map(scale(ratio)));\n    };\n  }\n\n  return canvas;\n};<\/script>\n    <script>function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _construct(Parent, args, Class) {\n  if (typeof Reflect !== \"undefined\" && Reflect.construct) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Parent.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if ((typeof Symbol === \"function\" ? Symbol.iterator : \"@@iterator\") in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar WEBVIEW_TARGET = '@@WEBVIEW_TARGET';\n\nvar ID = function ID() {\n  return Math.random().toString(32).slice(2);\n};\n\nvar flattenObjectCopyValue = function flattenObjectCopyValue(flatObj, srcObj, key) {\n  var value = srcObj[key];\n\n  if (typeof value === 'function') {\n    return;\n  }\n\n  if (typeof value === 'object' && value instanceof Node) {\n    return;\n  }\n\n  flatObj[key] = flattenObject(value);\n};\n\nvar flattenObject = function flattenObject(object) {\n  if (typeof object !== 'object' || object === null) {\n    return object;\n  }\n\n  var flatObject = {};\n\n  for (var key in object) {\n    flattenObjectCopyValue(flatObject, object, key);\n  }\n\n  for (var _key in Object.getOwnPropertyNames(object)) {\n    flattenObjectCopyValue(flatObject, object, _key);\n  }\n\n  return flatObject;\n};\n\nvar AutoScaledCanvas = function () {\n  function AutoScaledCanvas(element) {\n    _classCallCheck(this, AutoScaledCanvas);\n\n    this.element = element;\n  }\n\n  _createClass(AutoScaledCanvas, [{\n    key: \"toDataURL\",\n    value: function toDataURL() {\n      var _this$element;\n\n      return (_this$element = this.element).toDataURL.apply(_this$element, arguments);\n    }\n  }, {\n    key: \"autoScale\",\n    value: function autoScale() {\n      if (this.savedHeight !== undefined) {\n        this.element.height = this.savedHeight;\n      }\n\n      if (this.savedWidth !== undefined) {\n        this.element.width = this.savedWidth;\n      }\n\n      window.autoScaleCanvas(this.element);\n    }\n  }, {\n    key: \"width\",\n    get: function get() {\n      return this.element.width;\n    },\n    set: function set(value) {\n      this.savedWidth = value;\n      this.autoScale();\n      return value;\n    }\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this.element.height;\n    },\n    set: function set(value) {\n      this.savedHeight = value;\n      this.autoScale();\n      return value;\n    }\n  }]);\n\n  return AutoScaledCanvas;\n}();\n\nvar toMessage = function toMessage(result) {\n  if (result instanceof Blob) {\n    return {\n      type: 'blob',\n      payload: btoa(result),\n      meta: {}\n    };\n  }\n\n  if (result instanceof Object) {\n    if (!result[WEBVIEW_TARGET]) {\n      var id = ID();\n      result[WEBVIEW_TARGET] = id;\n      targets[id] = result;\n    }\n\n    return {\n      type: 'json',\n      payload: flattenObject(result),\n      args: toArgs(flattenObject(result)),\n      meta: {\n        target: result[WEBVIEW_TARGET],\n        constructor: result.__constructorName__ || result.constructor.name\n      }\n    };\n  }\n\n  return {\n    type: 'json',\n    payload: JSON.stringify(result),\n    meta: {}\n  };\n};\n\nvar toArgs = function toArgs(result) {\n  var args = [];\n\n  for (var key in result) {\n    if (result[key] !== undefined && key !== '@@WEBVIEW_TARGET') {\n      if (typedArrays[result[key].constructor.name] !== undefined) {\n        result[key] = Array.from(result[key]);\n      }\n\n      args.push(result[key]);\n    }\n  }\n\n  return args;\n};\n\nvar createObjectsFromArgs = function createObjectsFromArgs(args) {\n  for (var index = 0; index < args.length; index += 1) {\n    var currentArg = args[index];\n\n    if (currentArg && currentArg.className !== undefined) {\n      var className = currentArg.className,\n          classArgs = currentArg.classArgs;\n\n      var object = _construct(constructors[className], _toConsumableArray(classArgs));\n\n      args[index] = object;\n    }\n  }\n\n  return args;\n};\n\nvar print = function print() {\n  for (var _len = arguments.length, args = new Array(_len), _key2 = 0; _key2 < _len; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n\n  var message = JSON.stringify({\n    type: 'log',\n    payload: args\n  });\n  window.ReactNativeWebView.postMessage(message);\n};\n\nvar canvas = document.createElement('canvas');\nvar autoScaledCanvas = new AutoScaledCanvas(canvas);\nvar targets = {\n  canvas: autoScaledCanvas,\n  context2D: canvas.getContext('2d')\n};\nvar constructors = {\n  Image: Image,\n  Path2D: Path2D,\n  CanvasGradient: CanvasGradient,\n  ImageData: ImageData,\n  Uint8ClampedArray: Uint8ClampedArray\n};\nvar typedArrays = {\n  Uint8ClampedArray: Uint8ClampedArray\n};\n\nImage.bind = Image.bind || function () {\n  return Image;\n};\n\nPath2D.bind = Path2D.bind || function () {\n  return Path2D;\n};\n\nImageData.bind = ImageData.bind || function () {\n  return ImageData;\n};\n\nUint8ClampedArray.bind = Uint8ClampedArray.bind || function () {\n  return Uint8ClampedArray;\n};\n\nvar populateRefs = function populateRefs(arg) {\n  if (arg && arg.__ref__) {\n    return targets[arg.__ref__];\n  }\n\n  return arg;\n};\n\ndocument.body.appendChild(canvas);\n\nfunction handleMessage(_ref) {\n  var id = _ref.id,\n      type = _ref.type,\n      payload = _ref.payload;\n\n  switch (type) {\n    case 'exec':\n      {\n        var _targets$target;\n\n        var target = payload.target,\n            method = payload.method,\n            args = payload.args;\n\n        var result = (_targets$target = targets[target])[method].apply(_targets$target, _toConsumableArray(args.map(populateRefs)));\n\n        var message = toMessage(result);\n\n        if (typeof result === 'object' && !message.meta.constructor) {\n          for (var constructorName in constructors) {\n            if (result instanceof constructors[constructorName]) {\n              message.meta.constructor = constructorName;\n            }\n          }\n        }\n\n        window.ReactNativeWebView.postMessage(JSON.stringify(_objectSpread({\n          id: id\n        }, message)));\n        break;\n      }\n\n    case 'set':\n      {\n        var _target = payload.target,\n            key = payload.key,\n            value = payload.value;\n        targets[_target][key] = populateRefs(value);\n        break;\n      }\n\n    case 'construct':\n      {\n        var _constructor = payload.constructor,\n            _target2 = payload.id,\n            _payload$args = payload.args,\n            _args = _payload$args === void 0 ? [] : _payload$args;\n\n        var newArgs = createObjectsFromArgs(_args);\n        var object;\n\n        try {\n          object = _construct(constructors[_constructor], _toConsumableArray(newArgs));\n        } catch (error) {\n          throw new Error(\"Error while constructing \" + _constructor + \" \" + error.message);\n        }\n\n        object.__constructorName__ = _constructor;\n\n        var _message = toMessage({});\n\n        targets[_target2] = object;\n        window.ReactNativeWebView.postMessage(JSON.stringify(_objectSpread({\n          id: id\n        }, _message)));\n        break;\n      }\n\n    case 'listen':\n      {\n        var _ret = function () {\n          var types = payload.types,\n              target = payload.target;\n\n          for (var _iterator = types, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[typeof Symbol === \"function\" ? Symbol.iterator : \"@@iterator\"]();;) {\n            var _ref2;\n\n            if (_isArray) {\n              if (_i >= _iterator.length) break;\n              _ref2 = _iterator[_i++];\n            } else {\n              _i = _iterator.next();\n              if (_i.done) break;\n              _ref2 = _i.value;\n            }\n\n            var _eventType = _ref2;\n            targets[target].addEventListener(_eventType, function (e) {\n              var message = toMessage({\n                type: 'event',\n                payload: {\n                  type: e.type,\n                  target: _objectSpread({}, flattenObject(targets[target]), _defineProperty({}, WEBVIEW_TARGET, target))\n                }\n              });\n              window.ReactNativeWebView.postMessage(JSON.stringify(_objectSpread({\n                id: id\n              }, message)));\n            });\n          }\n\n          return \"break\";\n        }();\n\n        if (_ret === \"break\") break;\n      }\n  }\n}\n\nvar handleError = function handleError(err, message) {\n  window.ReactNativeWebView.postMessage(JSON.stringify({\n    id: message.id,\n    type: 'error',\n    payload: {\n      message: err.message,\n      stack: err.stack\n    }\n  }));\n  document.removeEventListener('message', handleIncomingMessage);\n};\n\nfunction handleIncomingMessage(e) {\n  var data = JSON.parse(e.data);\n\n  if (Array.isArray(data)) {\n    for (var _iterator2 = data, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[typeof Symbol === \"function\" ? Symbol.iterator : \"@@iterator\"]();;) {\n      var _ref3;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref3 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref3 = _i2.value;\n      }\n\n      var _message2 = _ref3;\n\n      try {\n        handleMessage(_message2);\n      } catch (err) {\n        handleError(err, _message2);\n      }\n    }\n  } else {\n    try {\n      handleMessage(data);\n    } catch (err) {\n      handleError(err, data);\n    }\n  }\n}\n\nwindow.addEventListener('message', handleIncomingMessage);\ndocument.addEventListener('message', handleIncomingMessage);<\/script>\n  \n\n</body></html>"},260080:(e,t)=>{function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t,n){return r="undefined"!==typeof Reflect&&Reflect.construct?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&a(o,n.prototype),o},r.apply(null,arguments)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.webviewEvents=t.webviewProperties=t.webviewMethods=t.webviewConstructor=t.webviewTarget=t.constructors=t.WEBVIEW_TARGET=void 0;var o="@@WEBVIEW_TARGET";t.WEBVIEW_TARGET=o;var i={};t.constructors=i;t.webviewTarget=function(e){return function(t){t.prototype[o]=e}};var s={ImageData:{className:"Uint8ClampedArray",paramNum:0}};t.webviewConstructor=function(e){return function(t){i[e]=t,t.constructLocally=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return r(t,n.concat([!0]))},t.prototype.onConstruction=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==s[e]){var a=s[e],i=a.className,u=a.paramNum;n[u]={className:i,classArgs:[n[u]]}}this[o]=Math.random().toString(32).slice(2),this.postMessage({type:"construct",payload:{constructor:e,id:this[o],args:n}})},t.prototype.toJSON=function(){return{__ref__:this[o]}}}};t.webviewMethods=function(e){return function(t){var n=function(e){t.prototype[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.postMessage({type:"exec",payload:{target:this[o],method:e,args:n}})}},r=e,a=Array.isArray(r),i=0;for(r=a?r:r["function"===typeof Symbol?Symbol.iterator:"@@iterator"]();;){var s;if(a){if(i>=r.length)break;s=r[i++]}else{if((i=r.next()).done)break;s=i.value}n(s)}}};t.webviewProperties=function(e){return function(t){for(var n=function(n){var r=e[n],a="__"+n+"__";t.prototype[a]=r,Object.defineProperty(t.prototype,n,{get:function(){return this[a]},set:function(e){return this.postMessage({type:"set",payload:{target:this[o],key:n,value:e}}),this.forceUpdate&&this.forceUpdate(),this[a]=e}})},r=Object.keys(e),a=0;a<r.length;a++){n(r[a])}}};t.webviewEvents=function(e){return function(t){var r=t.prototype.onConstruction;t.prototype.onConstruction=function(){r&&r.call(this),this.postMessage({type:"listen",payload:{types:e,target:this[o]}})},t.prototype.addEventListener=function(e,t){var r=this;this.addMessageListener((function(a){if(a&&"event"===a.type&&a.payload.target[o]===r[o]&&a.payload.type===e){for(var i in a.payload.target){var s=a.payload.target[i];i in r&&r[i]!==s&&(r[i]=s)}t(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),a.forEach((function(t){n(e,t,r[t])}))}return e}({},a.payload,{target:r}))}}))}}}},991786:(e,t,n)=>{"use strict";n.r(t),n.d(t,{WebView:()=>i,default:()=>s});n(202784);var r=n(489094),a=n(824931),o=n(552322);const i=function(){return(0,o.jsx)(a.default,{style:{alignSelf:"flex-start"},children:(0,o.jsx)(r.default,{style:{color:"red"},children:"React Native WebView does not support this platform."})})},s=i},257466:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ee});var r=n(539144),a=n(877531),o=n(196234),i=n(470310),s=n(592923),u=n(510374),c=n(321668),l=n(18861),d=n(795116),f=n(719392),p=n(10918),h=n(202784),v=n(472719),m=n(783112),g=n(46486),y=n(231318),b=n(749888),w=n(481047),k=n(213208),x=n(945821),_=n(25655),T=n(435581),C=n(311631),I=n(627009),M=n(542457),j=n(752683),S=n(393495),P=n(759900),O=n(737790),A=n(561220),E=n(669083),R=n(444092),D=n(552322);const N=(0,h.memo)((function(e){var t=e.marketTokenId,n=e.onPress,r=(0,R.useMarketTokenItem)({coingeckoId:t,isList:!0}),a=(0,m.default)();return(0,D.jsx)(A.default,{onPress:function(){r&&n&&n(r)},children:function(e){var t=e.isHovered,n=e.isPressed;return(0,D.jsxs)(l.default,{p:2,borderRadius:"12px",flexDirection:"row",alignItems:"center",mr:"1px",justifyContent:t||n?"space-between":"flex-start",bgColor:n||t?"surface-selected":void 0,children:[r?(0,D.jsxs)(i.default,{space:3,alignItems:"center",justifyContent:"center",children:[(0,D.jsx)(A.default,{p:1,flexDirection:"row",alignItems:"center",rounded:"full",_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},onPress:function(){r.favorited?(x.default.serviceMarket.cancelMarketFavoriteToken(r.coingeckoId),E.default.show({title:a.formatMessage({id:"msg__removed"})})):(x.default.serviceMarket.saveMarketFavoriteTokens([{coingeckoId:r.coingeckoId,symbol:r.symbol}]),E.default.show({title:a.formatMessage({id:"msg__added_to_favorites"})}))},children:(0,D.jsx)(T.default,{name:r.favorited?"StarSolid":"StarOutline",size:20,color:r.favorited?"icon-warning":"icon-subdued"})}),r.logoURI?(0,D.jsx)(O.default,{size:8,token:{logoURI:r.logoURI,symbol:r.symbol,name:r.name}}):(0,D.jsx)(P.default,{shape:"Avatar",size:32}),(0,D.jsx)(p.default.Body1Strong,{children:r.symbol}),(0,D.jsx)(p.default.Body2,{color:"text-subdued",children:r.name})]}):(0,D.jsxs)(i.default,{space:3,alignItems:"center",justifyContent:"center",children:[(0,D.jsx)(P.default,{shape:"Avatar",size:32}),(0,D.jsx)(P.default,{shape:"Body2"}),(0,D.jsx)(P.default,{shape:"Body2"})]}),t||n?(0,D.jsx)(d.default,{bgColor:"surface-neutral-subdued",w:"32px",h:"24px",borderRadius:"6px",children:(0,D.jsx)(T.default,{name:"ReplyMini",size:16})}):null]})}})}));const L=(0,h.memo)((function(e){var t=e.categoryId,n=e.data,a=e.onPress,i=(0,m.default)(),s=(0,C.useSafeAreaInsets)().bottom,c=(0,r.default)(),l=(0,j.useMarketSearchCategoryList)(),d=(0,h.useState)(null!=n?n:[]),f=(0,o.default)(d,2),p=f[0],v=f[1],g=(0,h.useCallback)((function(e){var t=e.item;return c?(0,D.jsx)(S.default,{marketTokenId:t,onPress:a,headTags:M.ListHeadTagsForSearch}):(0,D.jsx)(N,{onPress:a,marketTokenId:t})}),[c,a]);return(0,h.useEffect)((function(){n&&v(n)}),[n]),(0,h.useEffect)((function(){if(t){var e,n=l.find((function(e){return e.categoryId===t}));n&&null!=n&&n.coingeckoIds&&(null==n||null==(e=n.coingeckoIds)?void 0:e.length)>0&&v(n.coingeckoIds)}}),[t,l]),(0,D.jsx)(_.default,{data:p,contentContainerStyle:{paddingTop:12,paddingBottom:s},showsVerticalScrollIndicator:!1,renderItem:g,ListEmptyComponent:(0,D.jsx)(u.default,{title:i.formatMessage({id:"content__no_results"}),subTitle:i.formatMessage({id:"content__try_searching_with_contract_address_or_submit_a_new_token_to_us"}),emoji:"\ud83d\udd0d",actionTitle:i.formatMessage({id:"action__submit_token"}),handleAction:function(){(0,I.openUrl)(M.SUBMIT_TOKEN_URL,i.formatMessage({id:"action__submit_token"}),{modalMode:!0})},actionProps:{type:"basic",size:"lg",rightIcon:(0,D.jsx)(T.default,{name:"ArrowTopRightOnSquareMini",size:20}),borderRadius:"12px",borderWidth:"1px"}})})}));var W=n(231846),B=n(1491),V=n(514164),H=n(254073),q=n.n(H),F=n(297263),U=n(384247),z=n(859071);const G=function(e){var t=e.navigationStateIndex,n=e.onTabChange,a=e.options,i=(0,h.useState)(t),s=(0,o.default)(i,2),u=s[0],c=s[1],l=function(){var e=(0,r.default)(),t=(0,U.default)().screenHeight,n=(0,F.default)(["background-default","background-default"]),a=(0,o.default)(n,2),i=a[0],s=a[1];return{w:(0,h.useMemo)((function(){return e?"full":360}),[e]),h:(0,h.useMemo)((function(){return e?.9*t:450}),[e,t]),p:(0,h.useMemo)((function(){return e?4:1}),[e]),bgColor:(0,h.useMemo)((function(){return e?s:i}),[e,s,i])}}().bgColor,d=(0,h.useMemo)((function(){return a.map((function(e){return{key:e.tabId}}))}),[a]),f=(0,h.useMemo)((function(){var e={};return a.forEach((function(t){e[t.tabId]=t.view})),(0,B.SceneMap)(e)}),[a]),p=(0,h.useCallback)((function(e){c(e),n&&n(e)}),[n]);return(0,D.jsx)(V.TabView,{navigationState:{index:u,routes:d},renderScene:f,keyboardDismissMode:"none",renderTabBar:function(){return(0,D.jsx)(W.default,{selectedIndex:u,onChange:p,values:a.map((function(e){return e.name}))})},onIndexChange:p,style:{backgroundColor:l}})};const $=(0,h.memo)((function(e){var t=e.name,n=e.logoURI,r=e.onPress,a=(0,F.default)("surface-neutral-subdued");return(0,D.jsx)(A.default,{mr:"2",onPress:r,mb:"2",children:function(e){var r=e.isPressed,o=e.isHovered,i=a;return o&&(i="surface-hovered"),r&&(i="surface-pressed"),(0,D.jsxs)(l.default,{flexDirection:"row",pl:"1.5",pr:"2.5",py:"1.5",borderRadius:"full",bgColor:i,children:[n?(0,D.jsx)(O.default,{size:5,token:{logoURI:n,name:t,symbol:t}}):null,(0,D.jsx)(p.default.Body2Strong,{ml:"1",children:t})]})}})}));var Q=function(e){var t=e.closeOverlay,n=(0,m.default)(),a=function(){var e=(0,z.useAppSelector)((function(e){return e.market.searchHistory}));return(0,h.useEffect)((function(){e||x.default.serviceMarket.syncSearchHistory()}),[e]),(0,h.useMemo)((function(){return e}),[e])}(),o=(0,j.useSimplyMarketSearchCategoryList)(),i=function(){var e=(0,z.useAppSelector)((function(e){return e.market.searchTabCategoryId})),t=(0,j.useMarketSearchCategoryList)();return(0,h.useEffect)((function(){e||t.length>0&&x.default.serviceMarket.setMarketSearchTab(t[0].categoryId)}),[t,e]),(0,h.useEffect)((function(){e&&x.default.serviceMarket.fetchMarketListDebounced({categoryId:e,sparkline:!1})}),[e]),(0,h.useMemo)((function(){return e}),[e])}(),s=function(){var e=(0,z.useAppSelector)((function(e){return e.market.searchKeyword})),t=(0,z.useAppSelector)((function(e){return e.market.searchTokens})),n=(0,h.useMemo)((function(){if(e&&e.length>0)return t[e]}),[t,e]);return(0,h.useEffect)((function(){e&&e.length>0&&x.default.serviceMarket.fetchMarketSearchTokens({searchKeyword:e})}),[e]),{searchTokens:n,searchKeyword:e}}(),g=s.searchTokens,y=s.searchKeyword,b=(0,r.default)(),k=(0,v.useNavigation)(),_=(0,h.useCallback)((function(e){var n,r,a;t(),k.navigate(w.HomeRoutes.MarketDetail,{marketTokenId:e.coingeckoId}),x.default.serviceMarket.saveSearchHistory({coingeckoId:e.coingeckoId,iconUrl:null!=(n=null!=(r=e.logoURI)?r:e.image)?n:"",symbol:null!=(a=e.symbol)?a:""})}),[k,t]),T=(0,h.useMemo)((function(){return o.map((function(e){var t;return{tabId:e.categoryId,name:null!=(t=e.name)?t:"",view:function(){return(0,D.jsx)(L,{onPress:_,categoryId:e.categoryId,data:M.MARKET_FAKE_SKELETON_LIST_ARRAY})}}}))}),[_,o]),C=(0,h.useMemo)((function(){return o.findIndex((function(e){return e.categoryId===i}))}),[o,i]),I=(0,h.useMemo)((function(){return null!=y&&y.length?(0,D.jsxs)(l.default,{flex:1,mt:"3",children:[(0,D.jsx)(p.default.Subheading,{ml:2,mb:"3",children:n.formatMessage({id:"form__search_results_uppercase"})}),g?(0,D.jsx)(L,{data:g,onPress:_}):(0,D.jsx)(d.default,{w:"full",h:"300px",children:(0,D.jsx)(f.default,{size:"lg"})})]}):null!=o&&o.length?(0,D.jsxs)(l.default,{flex:1,children:[null!=a&&a.length?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(l.default,{flexDirection:"row",justifyContent:"space-between",mb:2,children:[(0,D.jsx)(p.default.Subheading,{children:n.formatMessage({id:"form__recent_searched_uppercase"})}),(0,D.jsx)(c.default,{type:"plain",size:"xs",leftIconName:"TrashMini",iconSize:16,mr:"2",onPress:function(){x.default.serviceMarket.clearSearchHistory()},children:n.formatMessage({id:"action__clear_all"})})]}),(0,D.jsx)(l.default,{mb:2,flexDirection:"row",flexWrap:"wrap",children:a.map((function(e,t){return(0,D.jsx)($,{onPress:function(){_({coingeckoId:e.coingeckoId,image:e.iconUrl,symbol:e.symbol})},name:e.symbol,logoURI:e.iconUrl},t)}))})]}):null,C>=0?(0,D.jsx)(G,{onTabChange:function(e){x.default.serviceMarket.setMarketSearchTab(o[e].categoryId)},options:T,navigationStateIndex:C}):null]}):(0,D.jsx)(d.default,{flex:1,children:(0,D.jsx)(u.default,{title:n.formatMessage({id:"title__no_history"}),subTitle:n.formatMessage({id:"content__search_for_token_name_or_contract_address"}),emoji:"\ud83d\udd53"})})}),[null==y?void 0:y.length,o,a,n,C,T,g,_]);return(0,D.jsx)(l.default,{flex:1,px:b?4:6,mt:b?3:5,children:I})},K=function(e){var t=e.keyword,n=e.setKeyword,r=(0,m.default)(),a=(0,b.default)();return(0,D.jsxs)(i.default,{alignItems:"center",borderBottomWidth:g.default.hairlineWidth,borderBottomColor:"border-subdued",pl:{base:"4px",md:"12px"},pr:{base:"16px",md:"24px"},h:"57px",children:[(0,D.jsx)(s.default,{autoFocus:!0,flex:1,w:"auto",bgColor:"transparent",borderWidth:0,focusOutlineColor:"transparent",placeholder:r.formatMessage({id:"form__search_tokens"}),value:t,onClear:function(){n("")},onChangeText:function(e){n(e)}}),!k.default.isNativeIOS&&(0,D.jsx)(y.default,{onPress:a})]})};const Y=function(){var e=function(){var e=(0,h.useCallback)((function(e){var t=e.trim();x.default.serviceMarket.updateMarketSearchKeyword({searchKeyword:t})}),[]);return(0,h.useMemo)((function(){return q()(e,500)}),[e])}(),t=(0,b.default)(),n=(0,h.useState)(""),r=(0,o.default)(n,2),i=r[0],s=r[1];return e(i),(0,D.jsxs)(a.default,{size:"sm",footer:null,height:"640px",headerShown:!1,staticChildrenProps:{flex:1,overflow:"hidden"},children:[(0,D.jsx)(K,{keyword:i,setKeyword:s}),(0,D.jsx)(Q,{closeOverlay:t})]})};var J=n(150295),X=(0,n(324665).default)(),Z=[{name:J.MarketRoutes.MarketSearchModal,component:Y}];const ee=function(){var e=(0,r.default)();return(0,D.jsx)(X.Navigator,{screenOptions:{headerShown:!1,animationEnabled:!!e},children:Z.map((function(e){return(0,D.jsx)(X.Screen,{name:e.name,component:e.component},e.name)}))})}},601634:(e,t,n)=>{"use strict";n.r(t),n.d(t,{showMarketCellMoreMenu:()=>y});var r=n(18861),a=n(866904),o=n(435581),i=n(669083),s=n(539144),u=n(202784),c=n(783112),l=n(540366),d=n(945821),f=n(393093),p=n(793525),h=n(779025),v=n(752683),m=n(552322),g=function(e){var t=e.closeOverlay,n=e.token,p=(0,c.default)(),h=(0,v.useMarketSelectedCategoryId)(),g=(0,s.default)(),y=(0,u.useMemo)((function(){var e={id:p.formatMessage({id:"action__remove_from_favorites"}),onPress:function(){d.default.serviceMarket.cancelMarketFavoriteToken(n.coingeckoId),i.default.show({title:p.formatMessage({id:"msg__removed"})})},icon:"TrashMini",textColor:"text-critical",iconColor:"icon-critical"};return h&&h===f.MARKET_FAVORITES_CATEGORYID?[e,{id:p.formatMessage({id:"action__move_to_top"}),onPress:function(){d.default.serviceMarket.moveTopMarketFavoriteToken(n.coingeckoId)},icon:"ArrowUpMini"}]:n.favorited?[e]:[{id:p.formatMessage({id:"action__add_to_favorites"}),onPress:function(){d.default.serviceMarket.saveMarketFavoriteTokens([{coingeckoId:n.coingeckoId,symbol:n.symbol}]),i.default.show({title:p.formatMessage({id:"msg__added_to_favorites"})})},icon:"StarOutline"}]}),[p,h,n.favorited,n.coingeckoId,n.symbol]);return(0,m.jsx)(r.default,{children:y.map((function(e){var n=e.id,r=e.onPress,i=e.icon,s=e.textColor,u=e.iconColor;return(0,m.jsxs)(l.default,{flexDirection:"row",alignItems:"center",py:{base:"12px",sm:"8px"},px:{base:"16px",sm:"8px"},bg:"transparent",borderRadius:"12px",onPress:function(){t(),r()},children:[(0,m.jsx)(o.default,{size:g?24:20,name:i,color:null!=u?u:"icon-default"}),(0,m.jsx)(a.default,{typography:g?"Body1Strong":"Body2Strong",ml:"12px",color:null!=s?s:"text-default",children:n})]},n)}))})},y=function(e,t,n){return(0,p.showOverlay)((function(r){return(0,m.jsx)(h.OverlayPanel,{triggerEle:n,closeOverlay:r,modalProps:t,useDropdownProps:{autoAdjust:!0},children:(0,m.jsx)(g,{closeOverlay:r,token:e})})}))}},393495:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>W});var r=n(433996),a=n(866904),o=n(18861),i=n(737790),s=n(107867),u=n(470310),c=n(10918),l=n(539144),d=n(561220),f=n(435581),p=n(669083),h=n(759900),v=n(321668),m=n(202784),g=n(472719),y=n(783112),b=n(945821),w=n(859071),k=n(481047),x=n(393093),_=n(925743),T=n(375814),C=n(354703),I=n(542457),M=n(752683),j=n(629397),S=n(444092),P=n(516535),O=n(601634),A=n(968079),E=n(634795),R=(n(381527),n(213208),n(552322));const D=(0,m.memo)((function(e){var t=e.data,n=e.lineColor,r=void 0===n?"rgba(0, 184, 18, 1)":n,a=e.linearGradientColor,o=void 0===a?"rgba(0, 184, 18, 0.3)":a,i=e.height,s=void 0===i?40:i,u=e.width,c=void 0===u?50:u,l=e.lineWidth,d=void 0===l?2:l,f=e.smooth,p=void 0===f||f,h=e.scale,v=void 0===h?.1:h,g=(0,j.useDevicePixelRatio)(),y=(0,m.useCallback)(function(){var e=(0,E.default)((function*(e){if(e){e.width=c*g,e.height=s*g;var n=s-5,a=t||[],i=Math.max.apply(Math,(0,A.default)(a)),u=Math.min.apply(Math,(0,A.default)(a)),l=n/(i-u),f=e.getContext("2d");if(f){f.scale(g,g),f.beginPath(),f.lineWidth=d,f.strokeStyle=r;var h=c/(a.length-1),m=0,y=0;a.forEach((function(e,t){var r=n-(e-u)*l;if(p&&t>=2&&t<a.length-1){var o=h*(t-1),i=n-(a[t-1]-u)*l,s=h*(t-2),c=n-(a[t-2]-u)*l,d=h*(t+1),g=n-(a[t+1]-u)*l,b=o+(m-s)*v,w=i+(r-c)*v,k=m-(d-o)*v,x=r-(g-i)*v;w<0&&(w=0),x<0&&(x=0),f.bezierCurveTo(b,w,k,x,m,r)}else f.lineTo(m,r);t===a.length-1&&(y=r),m+=h})),f.lineTo(m+h,y),f.lineTo(m+h,s),f.lineTo(0,s),f.stroke(),f.closePath();var b=f.createLinearGradient(0,0,0,n);b.addColorStop(0,o),b.addColorStop(1,"rgba(255,255,255,0)"),f.fillStyle=b,f.fill(),f.clearRect(0,s-d,c,d)}}}));return function(t){return e.apply(this,arguments)}}(),[c,g,s,t,d,r,p,v,o]);return(0,R.jsx)("div",{style:{width:c,height:s},children:(0,R.jsx)("canvas",{style:{width:`${c}px`,height:`${s}px`},ref:y})})}));var N=function(e){var t=e.tokens,n=(0,g.useNavigation)(),r=(0,y.default)();return t?(0,R.jsx)(v.default,{borderRadius:12,isDisabled:!t.length,type:"basic",size:"xs",onPress:function(){b.default.serviceSwap.buyToken(t[0]),n.navigate(k.TabRoutes.Swap)},children:r.formatMessage({id:"title__swap"})}):(0,R.jsx)(h.default,{shape:"Caption"})},L=function(e){var t=e.marketTokenItem,n=(0,y.default)();return(0,R.jsx)(d.default,{flexDirection:"row",alignItems:"center",p:"1",rounded:"full",_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},onPress:function(){t.favorited?(b.default.serviceMarket.cancelMarketFavoriteToken(t.coingeckoId),p.default.show({title:n.formatMessage({id:"msg__removed"})})):(b.default.serviceMarket.saveMarketFavoriteTokens([{coingeckoId:t.coingeckoId,symbol:t.symbol}]),p.default.show({title:n.formatMessage({id:"msg__added_to_favorites"})}))},children:(0,R.jsx)(f.default,{name:t.favorited?"StarSolid":"StarOutline",size:20,color:t.favorited?"icon-warning":"icon-subdued"})})};const W=(0,m.memo)((function(e){var t=e.onPress,n=e.marketTokenId,d=e.headTags,f=e.onLongPress,p=(0,l.default)(),v=(0,w.useSettings)().selectedFiatMoneySymbol,g=(0,_.useCurrencyUnit)(v),y=(0,j.useMarketWidthLayout)().marketFillWidth,b=(0,M.useMarketSelectedCategoryId)(),k=T.coingeckoId2StakingTypes[n],A=(0,S.useMarketTokenItem)({coingeckoId:n,isList:!0}),E=(0,m.useRef)(),W=(0,m.useCallback)((function(){var e,t;return A&&(0,O.showMarketCellMoreMenu)(A,{header:`${null!=(e=null!=(t=null==A?void 0:A.symbol)?t:null==A?void 0:A.name)?e:""}`},E.current)}),[A]);return(0,R.jsx)(s.default,{onLongPress:function(){p&&A&&f&&f(A)},onPress:function(){A&&t&&t(A)},children:d.map((function(e){switch(e.id){case I.EMarketCellData.CollectionStarOrSerialNumber:var t,n,l;return(0,R.jsx)(s.default.Column,{children:(0,R.jsx)(u.default,{alignItems:"center",justifyContent:e.isSearch?"center":null!=(t=null==e?void 0:e.textAlign)?t:"center",w:e.isSearch?void 0:e.minW,children:A?(0,R.jsx)(R.Fragment,{children:e.isSearch?(0,R.jsx)(L,{marketTokenItem:A}):(0,R.jsx)(c.default.Body2Strong,{ml:.5,textAlign:null!=(n=null==e?void 0:e.textAlign)?n:"center",children:null!=(l=A.serialNumber)?l:"-"})}):(0,R.jsx)(h.default,{shape:"Avatar",size:20})})},e.id);case I.EMarketCellData.TokenInfo:var d;return(0,R.jsx)(s.default.Column,{children:(0,R.jsxs)(u.default,{alignItems:"center",w:null!=(d=null==e?void 0:e.minW)?d:"100px",space:3,children:[A&&void 0!==A.logoURI?(0,R.jsx)(i.default,{size:8,token:{logoURI:A.logoURI,name:A.name,symbol:A.symbol}}):(0,R.jsx)(o.default,{children:(0,R.jsx)(h.default,{shape:"Avatar",size:32})}),(0,R.jsxs)(o.default,{children:[A&&void 0!==A.symbol?(0,R.jsx)(a.default,{typography:e.isSearch?"Body2Strong":"Body1Strong",ellipsizeMode:"tail",numberOfLines:1,w:"80px",children:A.symbol}):(0,R.jsx)(h.default,{shape:"Body2"}),A&&void 0!==A.marketCap?(0,R.jsx)(c.default.Body2,{numberOfLines:1,color:"text-subdued",ellipsizeMode:"tail",w:"80px",children:p||y<=I.MARKET_LIST_COLUMN_SHOW_WIDTH_1?(0,P.formatMarketUnitPosition)(g,(0,P.formatMarketValueForInfo)(A.marketCap)):A.name}):(0,R.jsx)(h.default,{shape:"Body2"})]})]})},e.id);case I.EMarketCellData.TokenPrice:return A&&void 0!==A.price?(0,R.jsx)(s.default.Column,{text:{label:(0,P.formatMarketUnitPosition)(g,A.price<=1?(0,P.formatDecimalZero)(A.price):(0,P.formatMarketValueForComma)(A.price)),labelProps:{textAlign:e.textAlign},size:"sm"},flex:1},e.id):(0,R.jsx)(s.default.Column,{children:(0,R.jsx)(o.default,{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"flex-end",children:(0,R.jsx)(h.default,{shape:"Body2"})})},e.id);case I.EMarketCellData.Token24hChange:return A&&void 0!==A.priceChangePercentage24H?p?(0,R.jsx)(s.default.Column,{children:(0,R.jsx)(o.default,{w:e.minW,flexDirection:"row",alignItems:"center",justifyContent:"flex-end",children:(0,R.jsx)(o.default,{width:"72px",height:"32px",borderRadius:"6px",backgroundColor:A.priceChangePercentage24H>=0?"surface-success-subdued":"surface-critical-subdued",alignItems:"center",justifyContent:"center",children:(0,R.jsx)(c.default.Body2Strong,{textAlign:"center",color:A.priceChangePercentage24H>=0?"text-success":"text-critical",children:`${(0,P.formatMarketVolatility)(A.priceChangePercentage24H)}%`})})})},e.id):(0,R.jsx)(s.default.Column,{text:{label:`${(0,P.formatMarketVolatility)(A.priceChangePercentage24H)}%`,labelProps:{textAlign:e.textAlign,color:A.priceChangePercentage24H>=0?"text-success":"text-critical"},size:"sm"},w:e.minW},e.id):(0,R.jsx)(s.default.Column,{flex:1,alignItems:"center",justifyContent:"flex-end",children:(0,R.jsx)(o.default,{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"flex-end",children:(0,R.jsx)(h.default,{shape:"Body2"})})},e.id);case I.EMarketCellData.TokenMarketCap:return A&&void 0!==A.marketCap?(0,R.jsx)(s.default.Column,{text:{label:(0,P.formatMarketUnitPosition)(g,(0,P.formatMarketValueForComma)(A.marketCap)),labelProps:{textAlign:e.textAlign},size:"sm"},flex:1},e.id):(0,R.jsx)(s.default.Column,{children:(0,R.jsx)(o.default,{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"flex-end",children:(0,R.jsx)(h.default,{shape:"Body2"})})},e.id);case I.EMarketCellData.TokenSparklineChart:return(0,R.jsx)(s.default.Column,{children:(0,R.jsx)(o.default,{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"flex-end",children:A&&A.sparkline?(0,R.jsx)(D,{data:A.sparkline,width:100,height:40,lineColor:A.priceChangePercentage24H&&A.priceChangePercentage24H>=0?"#33C641":"#FF6259",linearGradientColor:A.priceChangePercentage24H&&A.priceChangePercentage24H>=0?"rgba(0, 184, 18, 0.2)":"rgba(255, 98, 89, 0.2)"}):(0,R.jsx)(h.default,{shape:"DisplayMedium"})})},e.id);case I.EMarketCellData.TokenSwapStatus:return(0,R.jsx)(s.default.Column,{children:(0,R.jsx)(o.default,{flexDirection:"row",justifyContent:"left",flex:1,ref:E,children:A?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(N,{tokens:A.tokens}),k&&(0,R.jsx)(o.default,{ml:"2",children:(0,R.jsx)(C.MarketStakeButton,{stakingType:k,buttonType:"text"})})]}):(0,R.jsx)(h.default,{shape:"DisplaySmall"})})},e.id);case I.EMarketCellData.TokenCollectionStarAndMore:return(0,R.jsx)(s.default.Column,{children:(0,R.jsxs)(o.default,{flexDirection:"row",justifyContent:"center",flex:1,ref:E,children:[A?(0,R.jsx)(L,{marketTokenItem:A}):(0,R.jsx)(h.default,{shape:"Caption"}),b===x.MARKET_FAVORITES_CATEGORYID?(0,R.jsx)(r.default,{isDisabled:Boolean(!A),size:"xs",name:"EllipsisVerticalMini",type:"plain",ml:"2",circle:!0,onPress:W}):null]})},e.id);default:return null}}))})}))},752683:(e,t,n)=>{"use strict";n.r(t),n.d(t,{useMarketCategoryList:()=>v,useMarketFavoriteCategoryTokenIds:()=>g,useMarketFavoriteRecommentedList:()=>m,useMarketSearchCategoryList:()=>y,useMarketSelectedCategory:()=>h,useMarketSelectedCategoryId:()=>l,useSimplyMarketSearchCategoryList:()=>f,useSimplyMarketTabCategoryList:()=>p});var r=n(968079),a=n(539144),o=n(202784),i=n(472719),s=n(945821),u=n(859071),c=n(393093),l=function(){return(0,u.useAppSelector)((function(e){return e.market.selectedCategoryId}))},d=function(){return(0,u.useAppSelector)((function(e){return e.market.categorys}))},f=function(){return(0,u.useAppSelector)((function(e){return e.market.searchSimplyCategories}))},p=function(){return(0,u.useAppSelector)((function(e){return e.market.tabSimplyCategories}))},h=function(){var e=l(),t=d();return(0,o.useMemo)((function(){return e?t[e]:null}),[t,e])},v=function(){var e=(0,i.useIsFocused)();(0,o.useEffect)((function(){e&&s.default.serviceMarket.fetchMarketCategorys()}),[e])},m=function(){var e=d(),t=(0,a.default)(),n=e[c.MARKET_FAVORITES_CATEGORYID];return(0,o.useMemo)((function(){var e,a,o;return n&&null!=(e=n.recommendedTokens)&&e.length?(null==(a=n.recommendedTokens)?void 0:a.length)>12?(0,r.default)(n.recommendedTokens).slice(0,t?8:12):(null==(o=n.recommendedTokens)?void 0:o.length)>8&&t?(0,r.default)(n.recommendedTokens).slice(0,8):(0,r.default)(n.recommendedTokens):[]}),[n,t])},g=function(){var e=d()[c.MARKET_FAVORITES_CATEGORYID];return(0,o.useMemo)((function(){return e&&e.coingeckoIds?e.coingeckoIds:[]}),[e])},y=function(){var e=d();return(0,o.useMemo)((function(){return e&&Object.values(e).length>0?Object.values(e).filter((function(e){return e.type===c.MarketCategoryType.MRKET_CATEGORY_TYPE_SEARCH})):[]}),[e])}},629397:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GRID_MAX_WIDTH:()=>p,GridLayout:()=>f,GridLayoutContext:()=>d,useDevicePixelRatio:()=>g,useGridBoxStyle:()=>h,useMarketMidLayout:()=>m,useMarketWidthLayout:()=>v});var r=n(384247),a=n(539144),o=n(18861),i=n(196234),s=n(202784),u=(n(213208),n(859071)),c=n(542457),l=n(552322),d=(0,s.createContext)({}),f=function(e){var t=e.children,n=(0,s.useState)({}),r=(0,i.default)(n,2),a=r[0],u=r[1],c=(0,s.useCallback)((function(e){var t=e.nativeEvent.layout.width;u({width:t})}),[]);return(0,l.jsx)(d.Provider,{value:a,children:(0,l.jsxs)(o.default,{w:"full",children:[(0,l.jsx)(o.default,{onLayout:c,w:"full"}),(0,l.jsx)(o.default,{children:t})]})})},p=700,h=function(e){var t=e.index,n=e.space,o=e.maxW,i=e.outPadding,u=(0,a.default)(),c=(0,r.default)(),l=c.screenWidth,f=c.size,h=(0,s.useMemo)((function(){return["XLARGE"].includes(f)?256:224}),[f]),v=(0,s.useContext)(d).width,m=null!=n?n:u?12:24,g=null!=o?o:p,y=u?l-(null!=i?i:0):l-h-(null!=i?i:0);v&&(y=v);var b=y<g?y:g,w=u?2:b>p?4:3;return{ml:(0,s.useMemo)((function(){return t?`${t%(u?2:w)!==0?m:0}px`:"0px"}),[t,u,m,w]),my:(0,s.useMemo)((function(){return m/2+"px"}),[m]),width:(0,s.useMemo)((function(){return void 0===t?"full":Math.floor((b-m*(w-1))/w)}),[b,m,w,t])}},v=function(){var e=(0,r.default)(),t=e.screenWidth,n="SMALL"===e.size,a=(0,u.useAppSelector)((function(e){return e.settings.leftSidebarCollapsed}));return{marketFillWidth:(0,s.useMemo)((function(){return n?t:a?t-72:t-224}),[n,a,t]),isVerticalLayout:n}},m=function(){var e=v().marketFillWidth;return(0,s.useMemo)((function(){return e<c.MARKET_LIST_COLUMN_SHOW_WIDTH_3}),[e])},g=function(){return(0,s.useMemo)((function(){return window.devicePixelRatio||1}),[])}},444092:(e,t,n)=>{"use strict";n.r(t),n.d(t,{useMarketTokenChart:()=>c,useMarketTokenItem:()=>l});var r=n(539144),a=n(202784),o=n(472719),i=n(945821),s=n(859071),u=n(629397),c=function(e){var t=e.coingeckoId,n=e.days,r=void 0===n?"1":n,u=e.points,c=e.pollingIntervall,l=void 0===c?120:c,d=(0,s.useAppSelector)((function(e){return e.market.charts})),f=(0,o.useIsFocused)();return(0,a.useEffect)((function(){var e;return f&&(i.default.serviceMarket.fetchMarketTokenChart({coingeckoId:t,days:r,points:u}),e=setInterval((function(){i.default.serviceMarket.fetchMarketTokenChart({coingeckoId:t,days:r,points:u})}),1e3*l)),function(){e&&clearInterval(e)}}),[l,r,u,t,f]),{chart:(0,a.useMemo)((function(){var e=d[t];return e?e[r]:null}),[d,t,r])}},l=function(e){var t=e.coingeckoId,n=e.isList,o=(0,r.default)(),c=(0,u.useMarketMidLayout)(),l=(0,s.useAppSelector)((function(e){return e.market.marketTokens}));return(0,a.useEffect)((function(){if(null!=t&&t.length){var e=l[t];n||e||i.default.serviceMarket.fetchMarketListDebounced({ids:t,sparkline:!o&&!c})}}),[t,n,c,o,l]),(0,a.useMemo)((function(){if(t)return l[t]}),[l,t])}},150295:(e,t,n)=>{"use strict";var r;n.r(t),n.d(t,{MarketRoutes:()=>r}),function(e){e.MarketSearchModal="MarketSearchModal"}(r||(r={}))},925743:(e,t,n)=>{"use strict";n.r(t),n.d(t,{useCurrencyData:()=>l,useCurrencyListData:()=>d,useCurrencyUnit:()=>f});var r=n(968079),a=n(230898),o=n.n(a),i=n(202784),s=n(859071),u=["usd","eur","gbp","jpy","cny","hkd"],c=["btc","eth","sats","bits"],l=function(e){var t=(0,s.useAppSelector)((function(e){return e.fiatMoney.map}));return(0,i.useMemo)((function(){var n;return null!=(n=t[e])?n:{}}),[t,e])},d=function(){var e=(0,s.useAppSelector)((function(e){return e.fiatMoney.symbolList})),t=(0,s.useAppSelector)((function(e){return e.fiatMoney.map})),n=o()(u,e),a=o()(c,e);return{popularList:n,ratesSectionList:[{title:"crypto",data:(0,r.default)(a)},{title:"fiat",data:e.filter((function(e){var n,r;return null==(n=t[e])||null==(r=n.type)?void 0:r.includes("fiat")}))}]}},f=function(e){var t=l(e).unit;return(0,i.useMemo)((function(){return null!=t?t:"$"}),[t])}},779025:(e,t,n)=>{"use strict";n.r(t),n.d(t,{OverlayPanel:()=>b});var r=n(539144),a=n(121815),o=n(18861),i=n(256666),s=n(877531),u=n(311631),c=n(297263),l=n(202784),d=n(17756),f=n(501240),p=n(328012),h=n(552322);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){var t=e.closeOverlay,n=e.modalProps,r=e.children,a=e.modalLizeProps,o=(0,l.useRef)(null),i=(0,c.default)("surface-subdued"),f=(0,u.useSafeAreaInsets)().bottom;return(0,l.useEffect)((function(){setTimeout((function(){var e;return null==(e=o.current)?void 0:e.open()}),10)}),[]),(0,h.jsx)(d.Modalize,m(m({ref:o,onClosed:t,closeOnOverlayTap:!0,adjustToContentHeight:!0,withHandle:!1,modalStyle:{backgroundColor:i,borderTopLeftRadius:24,borderTopRightRadius:24,overflow:"hidden"}},a),{},{children:(0,h.jsx)(s.default,m(m({visible:!0,footer:null,closeAction:t,staticChildrenProps:{padding:"8px",paddingBottom:`${f+8}px`}},n),{},{children:r}))}))},y=function(e){var t=e.closeOverlay,n=e.children,r=e.triggerEle,i=e.dropdownStyle,s=e.useDropdownProps,u=(0,l.useRef)(),c=(0,f.useDropdownPosition)(m({contentRef:u,triggerEle:r,visible:!0,translateY:2,dropdownPosition:"right",autoAdjust:!1},s)),d=c.position,v=c.toPxPositionValue,g=c.isPositionNotReady;return(0,h.jsxs)(o.default,{position:"absolute",w:"full",h:"full",children:[(0,h.jsx)(p.CloseBackDrop,{onClose:t}),(0,h.jsx)(a.default,{visible:!g,initial:{opacity:0,translateY:0},animate:{opacity:1,translateY:2,transition:{duration:150}},children:(0,h.jsx)(o.default,m(m({overflow:"hidden",bg:"surface-subdued",position:"absolute",w:"240px",p:"4px",borderRadius:"12px",borderWidth:1,borderColor:"border-subdued",ref:u,left:v(d.left),right:v(d.right),top:v(d.top),bottom:v(d.bottom)},i),{},{children:n}))})]})},b=function(e){return(0,r.default)()?(0,h.jsx)(g,m({},e)):(0,h.jsx)(y,m({},e))}},354703:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MarketStakeButton:()=>k,MarketStakeButtonContent:()=>w});var r=n(321668),a=n(669083),o=n(634795),i=n(196234),s=n(202784),u=n(472719),c=n(783112),l=n(849877),d=n(292147),f=n(859071),p=n(744128),h=n(481047),v=n(850893),m=n(288471),g=n(375814),y=n(556855),b=n(552322),w=function(e){var t=e.stakingType,n=e.buttonType,y=void 0===n?"icon":n,w=(0,c.default)(),k=(0,s.useState)(!1),x=(0,i.default)(k,2),_=x[0],T=x[1],C=(0,f.useActiveWalletAccount)(),I=C.accountId,M=C.networkId,j=(0,u.useNavigation)(),S=(0,p.useAllNetworksSelectNetworkAccount)({accountId:I,networkId:M,filter:(0,g.getStakeSelectNetworkAccountFilter)(t)}),P=(0,s.useCallback)((0,o.default)((function*(){try{var e,n;if(T(!0),(0,l.isAllNetworks)(M)){var r=yield S(),o=r.account;e=r.network.id,n=o.id}else if((0,g.isAccountCompatibleWithStakingTypes)(I,t)){var i=(0,g.getRecommendNetworkIdByStakingType)(t);i&&(e=i,n=I)}if(!e||!n)return void a.default.show({title:w.formatMessage({id:"msg__unknown_error"})});d.default.staking.info(`use networkId: ${e} and account id ${n} to stake asset`);var s=function(e){if(e===g.StakingTypes.eth)return m.StakingRoutes.ETHStake;if(e===g.StakingTypes.matic)return m.StakingRoutes.MaticStake;throw new Error("wrong stake type params")}(t);j.navigate(h.RootRoutes.Modal,{screen:h.ModalRoutes.Staking,params:{screen:s,params:{networkId:e,accountId:n}}})}finally{T(!1)}})),[S,j,t,I,M,w]);return t&&!_?(0,b.jsx)(b.Fragment,{children:"icon"===y?(0,b.jsx)(v.ButtonItem,{icon:"InboxArrowDownMini",text:w.formatMessage({id:"action__stake"}),onPress:P}):(0,b.jsx)(r.default,{borderRadius:12,type:"basic",size:"xs",onPress:P,children:w.formatMessage({id:"action__stake"})})}):null},k=function(e){var t=e.stakingType,n=e.buttonType,r=(0,f.useActiveWalletAccount)(),a=r.accountId,o=r.networkId;return(0,l.isAllNetworks)(o)||(0,g.isAccountCompatibleWithStakingTypes)(a,t)?(0,b.jsx)(y.WidgetContainer,{stakingType:t,children:(0,b.jsx)(w,{stakingType:t,buttonType:n})}):null}},556855:(e,t,n)=>{"use strict";n.r(t),n.d(t,{WidgetContainer:()=>s});var r=n(849877),a=n(859071),o=n(375814),i=n(552322),s=function(e){var t=e.stakingType,n=e.children,s=(0,a.useActiveWalletAccount)(),u=s.accountId,c=s.networkId;return(0,r.isAllNetworks)(c)||(0,o.isAccountCompatibleWithStakingTypes)(u,t)?(0,i.jsx)(i.Fragment,{children:n}):null}},375814:(e,t,n)=>{"use strict";n.r(t),n.d(t,{StakingTypes:()=>o,buildWithdrawStEthTransaction:()=>I,coingeckoId2StakingTypes:()=>m,fetchStEthRate:()=>T,getLidoTokenEvmAddress:()=>x,getRecommendNetworkIdByStakingType:()=>y,getStakeSelectNetworkAccountFilter:()=>b,getTransactionStakingType:()=>v,isAccountCompatibleWithStakingTypes:()=>w,isSTETH:()=>_,isSupportStakingType:()=>k});var r,a,o,i=n(634795),s=n(534756),u=n(942013),c=n(945821),l=n(556805),d=n(964253),f=[u.OnekeyNetwork.eth,u.OnekeyNetwork.goerli],p=[`${u.OnekeyNetwork.eth}--${d.MainnetMaticContractAddress}`,`${u.OnekeyNetwork.goerli}--${d.TestnetMaticContractAddress}`];!function(e){e.eth="eth",e.matic="matic"}(o||(o={}));var h=((r={})[o.eth]=["lidoClaim","lidoStake","lidoUnstake"],r[o.matic]=["lidoClaimMatic","lidoStakeMatic","lidoUnstakeMatic"],r),v=function(e){for(var t=Object.entries(h),n=0;n<t.length;n+=1){var r=t[n],a=r[0];if(r[1].includes(e))return a}},m={ethereum:o.eth,"matic-network":o.matic},g=((a={})[o.eth]=[u.OnekeyNetwork.eth,u.OnekeyNetwork.goerli],a[o.matic]=[u.OnekeyNetwork.eth,u.OnekeyNetwork.goerli],a),y=function(e){var t;return null==(t=g[e])?void 0:t[0]},b=function(e){var t=g[e];if(t&&0!==t.length)return function(e){var n=e.network;return!!n&&t.includes(n.id)}},w=function(e,t){var n=g[t];return!(!n||0===n.length)&&n.some((function(t){return(0,s.isAccountCompatibleWithNetwork)(e,t)}))},k=function(e){var t=function(e){var t=e.tokenIdOnNetwork,n=e.networkId;return n?t?`${n}--${t}`:`${n}`:""}({networkId:e.networkId,tokenIdOnNetwork:e.tokenIdOnNetwork});return f.includes(t)?o.eth:p.includes(t)?o.matic:void 0},x=function(e,t){if(e)return e!==u.OnekeyNetwork.goerli||t?e!==u.OnekeyNetwork.eth||t?void 0:d.MainnetLidoContractAddress:d.TestnetLidoContractAddress},_=function(e,t){return!(!e||!t)&&(e===u.OnekeyNetwork.goerli&&t.toLowerCase()===d.TestnetLidoContractAddress.toLowerCase()||e===u.OnekeyNetwork.eth&&t.toLowerCase()===d.MainnetLidoContractAddress.toLowerCase())};function T(e){return C.apply(this,arguments)}function C(){return(C=(0,i.default)((function*(e){var t=e.networkId,n=e.account,r=e.amount||"0.1",a=yield c.default.engine.getNativeTokenInfo(t),o=yield c.default.serviceStaking.getStEthToken({networkId:t}),i=yield c.default.engine.getNetwork(t),s={networkOut:i,networkIn:i,tokenOut:a,tokenIn:o,slippagePercentage:"1",typedValue:r,independentField:"INPUT",activeAccount:n,receivingAddress:n.address};return yield l.SwapQuoter.client.fetchQuote(s)}))).apply(this,arguments)}function I(e){return M.apply(this,arguments)}function M(){return(M=(0,i.default)((function*(e){var t=e.networkId,n=e.account,r=e.typedValue,a=yield c.default.engine.getNativeTokenInfo(t),o=yield c.default.serviceStaking.getStEthToken({networkId:t}),i=yield c.default.engine.getNetwork(t),s={networkOut:i,networkIn:i,tokenOut:a,tokenIn:o,slippagePercentage:"1",typedValue:r,independentField:"INPUT",activeAccount:n,receivingAddress:n.address},u=yield l.SwapQuoter.client.fetchQuote(s),d=null==u?void 0:u.data;if(!d)throw new Error("failed to build unstake params");return{params:s,quote:d}}))).apply(this,arguments)}},556805:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SwapQuoter:()=>S});var r=n(256666),a=n(634795),o=n(887371),i=n(789644),s=n.n(i),u=n(206391),c=n.n(u),l=n(849877),d=n(398514),f=n(942013),p=n(613549),h=n(292147),v=n(945821),m=n(428357),g=n(415008),y=function(){function e(){this.type=m.QuoterType.zeroX}return e.prototype.queryTransactionProgress=function(){var e=(0,a.default)((function*(e){var t=e.networkId,n=e.accountId,r=e.nonce;if(void 0!==r)return{status:yield v.default.serviceHistory.queryTransactionNonceStatus({networkId:t,accountId:n,nonce:r})};var a=yield v.default.serviceNetwork.rpcCall(t,{method:"eth_getTransactionReceipt",params:[e.hash]});return a?{status:1===Number(a.status)?"sucesss":"failed"}:Date.now()-e.addedTime>864e5?{status:"failed"}:void 0}));return function(t){return e.apply(this,arguments)}}(),(0,o.default)(e)}();function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(){var e=t.prototype;function t(){this.type=m.QuoterType.deezy,this.client=s().create({timeout:6e4})}return e.getBaseUrl=function(){var e=(0,a.default)((function*(){return`${yield v.default.serviceSwap.getServerEndPoint()}/deezy`}));return function(){return e.apply(this,arguments)}}(),e.queryTransactionProgress=function(){var e=(0,a.default)((function*(e){var t,n;console.log("=====>>>>TX: ",e);var r,a,o,i,u=(0,p.isLightningNetworkByNetworkId)(e.networkId),c=yield this.getBaseUrl(),l=((n={networkId:e.networkId})[u?"bolt11Invoice":"secretAccessKey"]=null==(t=e.attachment)?void 0:t.swftcOrderId,n),d=yield s().get(`${c}${u?"/lookupLnToBtc":"/lookupBtcToLn"}`,{params:l});return d.data&&d.data.progress?w(w({},d.data.progress),{},{status:"success"===(null==(r=d.data)||null==(a=r.progress)?void 0:a.status)?"sucesss":null==(o=d.data)||null==(i=o.progress)?void 0:i.status}):{status:"pending",destinationTransactionHash:u?d.data.on_chain_txid:""}}));return function(t){return e.apply(this,arguments)}}(),(0,o.default)(t)}(),x=function(){function e(){this.type=m.QuoterType.jupiter}return e.prototype.queryTransactionProgress=function(){var e=(0,a.default)((function*(e){var t=e.networkId,n=e.accountId,r=e.hash;return{status:yield v.default.serviceHistory.queryTransactionByTxid({networkId:t,accountId:n,txid:r})}}));return function(t){return e.apply(this,arguments)}}(),(0,o.default)(e)}(),_=function(){function e(){this.type=m.QuoterType.socket,this.client=s().create({timeout:3e4})}var t=e.prototype;return t.getBaseURL=function(){var e=(0,a.default)((function*(){return`${yield v.default.serviceSwap.getServerEndPoint()}/socketBridge`}));return function(){return e.apply(this,arguments)}}(),t.querySocketBridgeStatus=function(){var e=(0,a.default)((function*(e){var t,n;try{var r=yield this.getBaseURL();n=yield this.client.get(`${r}/bridge-status`,{params:e})}catch(i){return void console.log(i)}var a,o=n.data.result;return"COMPLETED"===o.sourceTxStatus&&"COMPLETED"===o.destinationTxStatus||"COMPLETED"===(null==(t=o.refuel)?void 0:t.status)?{status:"sucesss",destinationTransactionHash:o.destinationTransactionHash||(null==(a=o.refuel)?void 0:a.destinationTransactionHash)}:"FAILED"===o.destinationTxStatus||"FAILED"===o.sourceTxStatus?{status:"failed"}:void 0}));return function(t){return e.apply(this,arguments)}}(),t.queryCrosschainTransactionProgress=function(){var e=(0,a.default)((function*(e){var t=e.nonce,n=e.networkId,r=e.accountId,a=e.tokens,o=e.attachment;if(void 0!==t&&a)for(var i=a.from,s=a.to,u=(0,g.getChainIdFromNetworkId)(i.networkId),c=(0,g.getChainIdFromNetworkId)(s.networkId),l=yield v.default.serviceHistory.getTransactionsWithNonce({nonce:t,networkId:n,accountId:r}),d=0;d<l.length;d+=1){var f,p=l[d].decodedTx.txid,h=yield this.querySocketBridgeStatus({fromChainId:u,toChainId:c,transactionHash:p,bridgeName:null==o||null==(f=o.socketUsedBridgeNames)?void 0:f[0]});if("sucesss"===(null==h?void 0:h.status))return{status:h.status,destinationTransactionHash:h.destinationTransactionHash};if("failed"===(null==h?void 0:h.status))return{status:h.status};if(null!=h&&h.destinationTransactionHash)return{destinationTransactionHash:h.destinationTransactionHash}}if(Date.now()-e.addedTime>864e5)return{status:"failed"}}));return function(t){return e.apply(this,arguments)}}(),t.querySimpleTransactionProgress=function(){var e=(0,a.default)((function*(e){var t=e.networkId,n=e.accountId,r=e.nonce;if(void 0!==r)return{status:yield v.default.serviceHistory.queryTransactionNonceStatus({networkId:t,accountId:n,nonce:r})};var a=yield v.default.serviceNetwork.rpcCall(t,{method:"eth_getTransactionReceipt",params:[e.hash]});return a?{status:1===Number(a.status)?"sucesss":"failed"}:Date.now()-e.addedTime>864e5?{status:"failed"}:void 0}));return function(t){return e.apply(this,arguments)}}(),t.queryTransactionProgress=function(){var e=(0,a.default)((function*(e){if(e.tokens){var t=yield this.querySimpleTransactionProgress(e);return"failed"===(null==t?void 0:t.status)||"canceled"===(null==t?void 0:t.status)?t:this.queryCrosschainTransactionProgress(e)}}));return function(t){return e.apply(this,arguments)}}(),(0,o.default)(e)}(),T=function(){var e=t.prototype;function t(){this.type=m.QuoterType.swftc,this.client=s().create({timeout:6e4})}return e.getBaseUrl=function(){var e=(0,a.default)((function*(){return`${yield v.default.serviceSwap.getServerEndPoint()}/swft`}));return function(){return e.apply(this,arguments)}}(),e.modifyTxId=function(){var e=(0,a.default)((function*(e,t){var n=`${yield this.getBaseUrl()}/modifyTxId`;return(yield this.client.post(n,{orderId:e,depositTxid:t})).data.data}));return function(t,n){return e.apply(this,arguments)}}(),e.getTxOrderInfo=function(){var e=(0,a.default)((function*(e){var t,n,r=null!=(t=null==(n=e.attachment)?void 0:n.swftcOrderId)?t:e.thirdPartyOrderId;if(r){var a=`${yield this.getBaseUrl()}/queryOrderState`;return(yield s().post(a,{equipmentNo:e.from,sourceType:"H5",orderId:r})).data.data}}));return function(t){return e.apply(this,arguments)}}(),e.queryTransactionProgress=function(){var e=(0,a.default)((function*(e){var t,n,r=null!=(t=null==(n=e.attachment)?void 0:n.swftcOrderId)?t:e.thirdPartyOrderId;if(r){var a=`${yield this.getBaseUrl()}/queryOrderState`,o=(yield s().post(a,{equipmentNo:e.from,sourceType:"H5",orderId:r})).data.data;if("complete"===o.tradeState)return{status:"sucesss",destinationTransactionHash:o.transactionId};if("refund_complete"===o.tradeState)return{status:"failed"};if(o.transactionId)return{destinationTransactionHash:o.transactionId}}var i=e.networkId,u=e.accountId,c=e.nonce,d=e.hash;if("evm"===(0,l.getNetworkImpl)(i)&&void 0!==c){var f=yield v.default.serviceHistory.queryTransactionNonceStatus({networkId:i,accountId:u,nonce:c});if("canceled"===f||"failed"===f)return{status:f}}else if("evm"!==(0,l.getNetworkImpl)(i)){var p=yield v.default.serviceHistory.queryTransactionByTxid({networkId:i,accountId:u,txid:d});if("canceled"===p||"failed"===p)return{status:p}}if(Date.now()-e.addedTime>864e5)return{status:"failed"}}));return function(t){return e.apply(this,arguments)}}(),(0,o.default)(t)}(),C=function(){function e(){this.type=m.QuoterType.thorswap}var t=e.prototype;return t.getBaseUrl=function(){var e=(0,a.default)((function*(){return`${yield v.default.serviceSwap.getServerEndPoint()}/thorswap`}));return function(){return e.apply(this,arguments)}}(),t.queryTransactionProgress=function(){var e=(0,a.default)((function*(e){var t=e.networkId,n=e.accountId,r=e.nonce,a=e.hash,o=e.attachment;if(void 0!==r){var i=yield v.default.serviceHistory.queryTransactionNonceStatus({networkId:t,accountId:n,nonce:r});if("failed"===i||"canceled"===i)return{status:i}}if(a&&null!=o&&o.thorswapQuoteId){var s=yield this.getTransactionInfo(e);if(s&&"success"===s.status)return{status:"sucesss",destinationTransactionHash:s.destinationTransactionHash}}if(Date.now()-e.addedTime>864e5)return{status:"failed"}}));return function(t){return e.apply(this,arguments)}}(),t.getTransactionInfo=function(){var e=(0,a.default)((function*(e){var t=e.hash,n=e.attachment;if(t&&null!=n&&n.thorswapQuoteId){var r=`${yield this.getBaseUrl()}/transaction_status_v2`;try{return(yield s().get(r,{params:{hash:t,quoteId:null==n?void 0:n.thorswapQuoteId}})).data}catch(a){return void h.default.common.info("thorswap getTransactionInfo error",a)}}}));return function(t){return e.apply(this,arguments)}}(),(0,o.default)(e)}(),I=function(){function e(){this.type=m.QuoterType.thorswapStream,this.client=new C}return e.prototype.queryTransactionProgress=function(){var e=(0,a.default)((function*(e){return this.client.queryTransactionProgress(e)}));return function(t){return e.apply(this,arguments)}}(),(0,o.default)(e)}();function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(){function e(){this.httpClient=s().create({timeout:6e4}),this.jupiter=new x,this.swftc=new T,this.simple=new y,this.socket=new _,this.thorswap=new C,this.thorswapStream=new I,this.deezy=new k,this.quoters=[this.simple,this.socket,this.jupiter,this.swftc,this.deezy,this.thorswap,this.thorswapStream],this.transactionReceipts={},this.solTransactionReceipts={}}var t=e.prototype;return t.convertOrderToTransaction=function(){var e=(0,a.default)((function*(e,t){var n=e.tokenIn,r=e.networkIn,a=e.activeAccount,o=e.sellAmount;if(o&&n){if(!t.platformAddr)throw new Error("failed to build transaction due to invalid platformAddr");var i=new(c())(o).shiftedBy(-n.decimals).toFixed();return n.tokenIdOnNetwork?yield v.default.engine.buildEncodedTxFromTransfer({networkId:r.id,accountId:a.id,transferInfo:{from:a.address,to:t.platformAddr,amount:i,token:n.tokenIdOnNetwork}}):yield v.default.engine.buildEncodedTxFromTransfer({networkId:r.id,accountId:a.id,transferInfo:{from:a.address,to:t.platformAddr,amount:i}})}}));return function(t,n){return e.apply(this,arguments)}}(),t.convertThorswapOrderToTransaction=function(){var e=(0,a.default)((function*(e,t){var n=e.tokenIn,r=e.networkIn,a=e.activeAccount,o=e.sellAmount;if(o&&n){if(!t.tcVault)throw new Error("failed to build transaction due to invalid tcVault");var i,s=new(c())(o).shiftedBy(-n.decimals).toFixed();if(!n.tokenIdOnNetwork&&[f.OnekeyNetwork.btc,f.OnekeyNetwork.doge,f.OnekeyNetwork.ltc,f.OnekeyNetwork.bch].includes(r.id)){if(i=yield v.default.engine.buildEncodedTxFromTransfer({networkId:r.id,accountId:a.id,transferInfo:{from:a.address,to:t.tcVault,amount:s,opReturn:t.memo}}))if(!i.outputs.some((function(e){var n;return(null==(n=e.payload)?void 0:n.opReturn)===t.memo})))throw new Error("failed to build transaction due to invalid opReturn");return i}if(!n.tokenIdOnNetwork&&[f.OnekeyNetwork.cosmoshub].includes(r.id))return i=yield v.default.engine.buildEncodedTxFromTransfer({networkId:r.id,accountId:a.id,transferInfo:{from:a.address,to:t.tcVault,amount:s,destinationTag:t.memo}});throw new Error("not support network")}}));return function(t,n){return e.apply(this,arguments)}}(),t.fetchLimitOrderQuote=function(){var e=(0,a.default)((function*(e){var t,n,r=(0,g.convertLimitOrderParams)(e);if(r){r.quoterType="0x";var a=`${yield v.default.serviceSwap.getServerEndPoint()}/exchange/quote`,o=null==(t=(yield this.httpClient.get(a,{params:r})).data)?void 0:t.data;if(o&&null!=(n=o.result)&&n.instantRate)return{instantRate:(0,g.formatAmountExact)(o.result.instantRate)}}}));return function(t){return e.apply(this,arguments)}}(),t.buildQuote=function(){var e=(0,a.default)((function*(e){var t=e.responses,n=e.params;if(t&&0!==t.length){var r,a=t.filter((function(e){var t;return null==(t=e.result)?void 0:t.allowanceTarget})).map((function(e){return e.result.allowanceTarget})),o=yield v.default.engine.batchTokensAllowance({networkId:n.tokenIn.networkId,accountId:n.activeAccount.id,tokenIdOnNetwork:n.tokenIn.tokenIdOnNetwork,spenders:a});return o&&o.length===a.length&&a.forEach((function(e,t){var n=o[t];r||(r={}),r[e]=n})),t.map((function(e){var t,n=e.result,a=0;"swft"===n.quoter&&(a=.002);var o,i=a+Number(null!=(t=n.percentageFee)?t:0),s={type:n.quoter,quoterlogo:n.quoterLogo,instantRate:n.instantRate,sellAmount:n.sellAmount,sellTokenAddress:n.sellTokenAddress,buyAmount:n.buyAmount,buyTokenAddress:n.buyTokenAddress,providers:n.sources,percentageFee:n.percentageFee,allowanceTarget:n.allowanceTarget,arrivalTime:n.arrivalTime,needApproved:!1,estimatedBuyAmount:(0,g.multiply)(n.buyAmount,1-i),minAmountOut:n.minAmountOut,protocolFees:n.protocolFees,estimatedPriceImpact:n.estimatedPriceImpact,onChainSatsPerVbyte:n.onChainSatsPerVbyte,notImpactBySlippage:n.notImpactBySlippage,quoteExtraData:n.quoterExtraData};if(s.allowanceTarget&&r){var u=r[s.allowanceTarget];void 0!==u&&n.sellAmount&&(s.needApproved=Number(n.sellAmount)>u)}return e.limit&&(o={max:e.limit.max,min:e.limit.min}),{data:s,limited:o}}))}}));return function(t){return e.apply(this,arguments)}}(),t.fetchQuote=function(){var e=(0,a.default)((function*(e){var t,n=(0,g.convertParams)(e);if(n){var r=yield v.default.serviceSwap.getCurrentUserSelectedQuoter();r&&(n.quoterType=r);var a=`${yield v.default.serviceSwap.getServerEndPoint()}/exchange/quote`,o=null==(t=(yield this.httpClient.get(a,{params:n})).data)?void 0:t.data;if(o){var i=yield this.buildQuote({responses:[o],params:e});return null==i?void 0:i[0]}}}));return function(t){return e.apply(this,arguments)}}(),t.fetchQuotes=function(){var e=(0,a.default)((function*(e){var t,n=(0,g.convertParams)(e);if(n){var r=`${yield v.default.serviceSwap.getServerEndPoint()}/exchange/quote_all`,a=null==(t=(yield this.httpClient.get(r,{params:n})).data)?void 0:t.data;if(a){var o=yield this.buildQuote({responses:a,params:e});if(o)return o.filter((function(e){return Boolean(e)}))}}}));return function(t){return e.apply(this,arguments)}}(),t.parseRequestId=function(e){try{var t=e.config.headers,n=null==t?void 0:t["x-onekey-request-id"];if(!n){var r=null==t?void 0:t["X-Request-By"];if("string"===typeof r)n=JSON.parse(r)["x-onekey-request-id"]}return n}catch(a){h.default.common.error("Failed to get request id with reason",a.message)}},t.buildTransaction=function(){var e=(0,a.default)((function*(e,t){var n,r=(0,g.convertBuildParams)(t);if(r){r.quoterType=e,r.disableValidate=Boolean(t.disableValidate);var a=`${yield v.default.serviceSwap.getServerEndPoint()}/exchange/build_tx`,o=yield this.httpClient.post(a,r),i=this.parseRequestId(o),s=o.data;if(s.errMsg)throw new Error(s.errMsg);if(null!=s&&s.transaction){if("object"===typeof s.transaction){if(t.networkIn.impl===p.IMPL_APTOS)return{data:j(j({},s.transaction),{},{sender:t.activeAccount.address}),result:s.result,requestId:i};var u={data:j(j({},s.transaction),{},{from:t.activeAccount.address}),result:s.result,requestId:i};return s.thor&&(u.attachment={thorswapQuoteId:s.thor.quoteId}),u}var c={data:s.transaction,result:s.result,requestId:i};return s.thor&&(c.attachment={thorswapQuoteId:s.thor.quoteId}),c}if(s.order&&null!=(n=s.result)&&n.instantRate)return{data:yield this.convertOrderToTransaction(t,s.order),result:s.result,attachment:{swftcOrderId:s.order.orderId,swftcPlatformAddr:s.order.platformAddr,swftcDepositCoinAmt:s.order.depositCoinAmt,swftcDepositCoinCode:s.order.depositCoinCode,swftcReceiveCoinAmt:s.order.receiveCoinAmt,swftcReceiveCoinCode:s.order.receiveCoinCode},requestId:i};if(s.thorOrder){var l={data:yield this.convertThorswapOrderToTransaction(t,s.thorOrder),result:s.result};return s.thor&&(l.attachment={thorswapQuoteId:s.thor.quoteId}),l}}}));return function(t,n){return e.apply(this,arguments)}}(),t.queryTransactionProgress=function(){var e=(0,a.default)((function*(e){if((0,g.isSimpleTx)(e))return this.simple.queryTransactionProgress(e);for(var t=(0,g.getQuoteType)(e),n=0;n<this.quoters.length;n+=1){var r=this.quoters[n];if(r.type===t)return r.queryTransactionProgress(e)}}));return function(t){return e.apply(this,arguments)}}(),t.getHistoryTx=function(){var e=(0,a.default)((function*(e){var t=v.default.serviceHistory,n=e.accountId,r=e.networkId,a=e.nonce;if((0,l.getNetworkImpl)(e.networkId)!==p.IMPL_EVM||void 0===a)return(yield t.getLocalHistory({accountId:n,networkId:r})).find((function(t){return t.decodedTx.txid===e.hash}));var o=(yield t.getTransactionsWithNonce({accountId:n,networkId:r,nonce:a})).find((function(e){return e.decodedTx.status===d.IDecodedTxStatus.Confirmed}));return o||void 0}));return function(t){return e.apply(this,arguments)}}(),t.getTransactionReceipt=function(){var e=(0,a.default)((function*(e,t){var n,r;if(this.transactionReceipts[e]||(this.transactionReceipts[e]={}),null!=(n=this.transactionReceipts[e])&&n[t])return null==(r=this.transactionReceipts[e])?void 0:r[t];var a=yield v.default.serviceNetwork.rpcCall(e,{method:"eth_getTransactionReceipt",params:[t]});return a?(this.transactionReceipts[e][t]=a,a):void 0}));return function(t,n){return e.apply(this,arguments)}}(),t.getSOLTransactionReceipt=function(){var e=(0,a.default)((function*(e,t){var n,r;if(this.solTransactionReceipts[e]||(this.solTransactionReceipts[e]={}),null!=(n=this.solTransactionReceipts[e])&&n[t])return null==(r=this.solTransactionReceipts[e])?void 0:r[t];var a=yield v.default.serviceNetwork.rpcCall(e,{method:"getTransaction",params:[t,{encoding:"jsonParsed",maxSupportedTransactionVersion:0}]});return a?(this.solTransactionReceipts[e][t]=a,a):void 0}));return function(t,n){return e.apply(this,arguments)}}(),t.doQueryReceivedToken=function(){var e=(0,a.default)((function*(e,t,n){if((0,g.isEvmNetworkId)(t.networkId)){var r=yield this.getTransactionReceipt(t.networkId,e);if(r){var a,o=function(e){return`0x${e.slice(2).replace(/^0+/,"").padStart(40,"0")}`};if(t.tokenIdOnNetwork){var i,s=null==(i=r.logs)?void 0:i.find((function(e){return o(e.address.toLowerCase())===t.tokenIdOnNetwork.toLowerCase()&&3===e.topics.length&&e.topics[2]&&o(e.topics[2])===n.toLowerCase()}));return null==s?void 0:s.data}var u=null==(a=r.logs)?void 0:a.find((function(e){if(2===e.topics.length){var t=e.topics[0];if("0x7fcf532c15f0a6db0bd6d0e038bea71d30d808c7d98cb3bf7268a95bf5081b65"===o(t).toLowerCase())return!0}return!1}));return null==u?void 0:u.data}}else if((0,g.isSolNetworkId)(t.networkId)){var c=yield this.getSOLTransactionReceipt(t.networkId,e);if(c){var l=function(e){var r=t.tokenIdOnNetwork;return e.owner.toLowerCase()===n.toLowerCase()&&e.mint.toLowerCase()===r.toLowerCase()},d=c.meta.preTokenBalances.find(l),f=c.meta.postTokenBalances.find(l);if(d&&f)return(0,g.minus)(f.uiTokenAmount.amount,d.uiTokenAmount.amount)}}}));return function(t,n,r){return e.apply(this,arguments)}}(),t.getActualReceived=function(){var e=(0,a.default)((function*(e){if(e.tokens){var t=e.receivingAddress,n=e.tokens,r=n.from,a=n.to;if("swftc"===(null==e?void 0:e.quoterType)){var o=yield this.swftc.getTxOrderInfo(e);if(o)return o.receiveCoinAmt}else if((null==e?void 0:e.quoterType)===m.QuoterType.thorswap||e.quoterType===m.QuoterType.thorswapStream){var i=yield this.thorswap.getTransactionInfo(e);if(i)return i.actualReceived}else{var s=yield this.getHistoryTx(e),u=(null==s?void 0:s.decodedTx.txid)||e.hash;if((0,g.isEvmNetworkId)(r.networkId)&&(0,g.isEvmNetworkId)(a.networkId)&&t){if(u&&r.networkId===a.networkId){var c=yield this.doQueryReceivedToken(u,a.token,t);if(c)return(0,g.getTokenAmountValue)(e.tokens.to.token,c).toFixed()}else if(e.destinationTransactionHash){var l=yield this.doQueryReceivedToken(e.destinationTransactionHash,a.token,t);if(l)return(0,g.getTokenAmountValue)(e.tokens.to.token,l).toFixed()}}else if((0,g.isSolNetworkId)(r.networkId)&&(0,g.isSolNetworkId)(a.networkId)&&t){var d=yield this.doQueryReceivedToken(e.hash,a.token,t);if(d)return(0,g.getTokenAmountValue)(e.tokens.to.token,d).toFixed()}}}}));return function(t){return e.apply(this,arguments)}}(),t.getTxCompletedTime=function(){var e=(0,a.default)((function*(e){if(e.tokens){var t=e.tokens.to;if((0,g.isEvmNetworkId)(t.networkId)){var n=e.hash,r=yield this.getHistoryTx(e);null!=r&&r.decodedTx.txid&&(n=null==r?void 0:r.decodedTx.txid),e.destinationTransactionHash&&(n=e.destinationTransactionHash);var a=yield this.getTransactionReceipt(t.networkId,n);if(null!=a&&a.blockHash){var o=yield v.default.serviceNetwork.rpcCall(t.networkId,{method:"eth_getBlockByHash",params:[a.blockHash,!0]});if(null!=o&&o.timestamp)return new(c())(o.timestamp).multipliedBy(1e3).toFixed()}}}}));return function(t){return e.apply(this,arguments)}}(),t.getTxActualNetworkFee=function(){var e=(0,a.default)((function*(e){if(e.tokens){var t=e.tokens.from;if((0,g.isEvmNetworkId)(t.networkId)){var n=yield this.getHistoryTx(e),r=(null==n?void 0:n.decodedTx.txid)||e.hash,a=yield this.getTransactionReceipt(t.networkId,r);if(a&&a.gasUsed&&a.effectiveGasPrice){var o=yield v.default.engine.getNetwork(e.networkId);return(0,g.calculateNetworkFee)({limit:a.gasUsed,price:(0,g.div)(a.effectiveGasPrice,10**9)},o)}}}}));return function(t){return e.apply(this,arguments)}}(),t.swftModifyTxId=function(){var e=(0,a.default)((function*(e,t){return this.swftc.modifyTxId(e,t)}));return function(t,n){return e.apply(this,arguments)}}(),(0,o.default)(e)}();S.client=new S},850893:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ButtonItem:()=>p});var r=n(561220),a=n(361301),o=n(10918),i=n(18861),s=n(435581),u=n(433996),c=n(539144),l=n(202784),d=n(527646),f=n(552322),p=function(e){var t=e.icon,n=e.text,p=e.onPress,h=e.isDisabled,v=e.color,m=void 0===v?"icon-default":v,g=(0,c.default)();return(0,l.useMemo)((function(){var e=(0,f.jsxs)(a.default,{mx:g?0:3,alignItems:"center",justifyContent:"center",children:["function"===typeof p?(0,f.jsx)(d.default,{children:(0,f.jsx)(u.default,{circle:!0,size:g?"lg":"sm",name:t,type:"basic",isDisabled:h,onPress:p,w:g?"42px":"34px",h:g?"42px":"34px",iconColor:h?"icon-disabled":m})}):(0,f.jsx)(i.default,{p:g?2:1.5,alignItems:"center",justifyContent:"center",borderWidth:"1px",borderRadius:"999px",borderColor:h?"border-disabled":"border-default",bg:"action-secondary-default",w:g?"42px":"34px",h:g?"42px":"34px",children:(0,f.jsx)(s.default,{name:t,size:g?24:20,color:h?"icon-disabled":m})}),(0,f.jsx)(o.default.CaptionStrong,{textAlign:"center",mt:"8px",color:h?"text-disabled":"text-default",children:n})]});return"function"===typeof p&&(e=h?(0,f.jsx)(i.default,{flex:g?1:void 0,children:e}):(0,f.jsx)(r.default,{flex:g?1:void 0,onPress:p,children:e})),e}),[t,g,n,p,h,m])}},988390:(e,t,n)=>{var r=n(645386),a=n(238333),o=n(834893),i=n(150343),s=n(947826),u=n(759950),c=Math.min;e.exports=function(e,t,n){for(var l=n?o:a,d=e[0].length,f=e.length,p=f,h=Array(f),v=1/0,m=[];p--;){var g=e[p];p&&t&&(g=i(g,s(t))),v=c(g.length,v),h[p]=!n&&(t||d>=120&&g.length>=120)?new r(p&&g):void 0}g=e[0];var y=-1,b=h[0];e:for(;++y<d&&m.length<v;){var w=g[y],k=t?t(w):w;if(w=n||0!==w?w:0,!(b?u(b,k):l(m,k,n))){for(p=f;--p;){var x=h[p];if(!(x?u(x,k):l(e[p],k,n)))continue e}b&&b.push(k),m.push(w)}}return m}},105642:(e,t,n)=>{var r=n(93746);e.exports=function(e){return r(e)?e:[]}},230898:(e,t,n)=>{var r=n(150343),a=n(988390),o=n(636060),i=n(105642),s=o((function(e){var t=r(e,i);return t.length&&t[0]===e[0]?a(t):[]}));e.exports=s}}]);