"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[11958],{11958:(e,t,n)=>{n.r(t),n.d(t,{default:()=>X});var i=n(256666),o=n(539144),l=n(877531),r=n(510374),s=n(795116),a=n(719392),u=n(433996),c=n(18861),d=n(321668),f=n(866904),p=n(669083),h=n(634795),g=n(196234),m=n(202784),x=n(472719),_=n(206391),y=n.n(_),b=n(783112),j=n(447325),v=n(945821),w=n(859071),I=n(793525),k=n(331639),C=n(561220),M=n(361301),O=n(470310),S=n(435581),R=n(968079),N=n(992181),P=n(896953),B=(n(213208),n(534159)),D=n(15304),A=n(74008),E=n(481047),F=n(552322);function U(e){var t=e.inscriptions,n=e.accountId,i=e.networkId,o=e.isSelectMode,l=e.selectedInscriptions,r=e.setSelectedInscriptions,s=e.onRecycleUtxo,a=(0,b.default)(),u=(0,A.default)().formatDistanceToNow,c=(0,w.useNetworkSimple)(i),d=(0,w.useNavigation)(),p=(0,m.useCallback)((function(e){o?r((function(t){return t.includes(e.inscription_id)?t.filter((function(t){return t!==e.inscription_id})):[].concat((0,R.default)(t),[e.inscription_id])})):d.navigate(E.RootRoutes.Modal,{screen:E.ModalRoutes.Collectibles,params:{screen:E.CollectiblesModalRoutes.NFTDetailModal,params:{asset:e,networkId:i,accountId:n,isOwner:!0,onRecycleUtxo:s}}})}),[n,o,d,i,s,r]),h=(0,m.useCallback)((function(e){var t,r,s,a=e.item;return(0,F.jsx)(C.default,{onPress:function(){return p(a)},children:(0,F.jsxs)(O.default,{alignItems:"center",mb:4,justifyContent:"space-between",children:[o&&(0,F.jsx)(P.default,{isChecked:l.includes(a.inscription_id)}),(0,F.jsxs)(M.default,{flex:1,children:[(0,F.jsxs)(O.default,{alignItems:"center",children:[(0,F.jsx)(D.default,{}),(0,F.jsxs)(f.default,{typography:"Body2Strong",children:["#",a.inscription_number]}),o?null:(0,F.jsx)(S.default,{name:"ChevronRightMini",size:20,color:"icon-subdued"})]}),(0,F.jsx)(f.default,{typography:"Body2",color:"text-subdued",children:u(new(y())(a.timestamp).times(1e3).toNumber())})]}),(0,F.jsxs)(M.default,{flex:1,children:[(0,F.jsx)(f.default,{textAlign:"right",typography:"Body2Strong",children:`${new(y())(a.output_value_sat).shiftedBy(-(null!=(t=null==c?void 0:c.decimals)?t:"8")).toFixed()} ${null!=(r=null==c?void 0:c.symbol)?r:""}`}),(0,F.jsx)(B.FormatCurrencyNativeOfAccount,{networkId:i,accountId:n,value:new(y())(a.output_value_sat).shiftedBy(-(null!=(s=null==c?void 0:c.decimals)?s:"8")),render:function(e){return(0,F.jsx)(f.default,{textAlign:"right",typography:"Body2",color:"text-subdued",children:e})}})]})]})})}),[n,u,p,o,null==c?void 0:c.decimals,null==c?void 0:c.symbol,i,l]),g=(0,m.useMemo)((function(){return l.length>0&&l.length===t.length}),[t.length,l.length]),x=(0,m.useMemo)((function(){return l.length>0&&l.length<t.length}),[t.length,l.length]),_=(0,m.useCallback)((function(){r(g?[]:t.map((function(e){return e.inscription_id})))}),[t,g,r]),j=(0,m.useMemo)((function(){return(0,F.jsx)(C.default,{isDisabled:!o,onPress:_,children:(0,F.jsxs)(O.default,{justifyContent:"space-between",alignItems:"center",mb:4,children:[(0,F.jsxs)(O.default,{alignItems:"center",children:[o&&(0,F.jsx)(P.default,{isChecked:g||x,isIndeterminate:x,defaultIsChecked:!1}),(0,F.jsx)(f.default,{typography:"Subheading",textTransform:"uppercase",color:"text-subdued",children:a.formatMessage({id:"form__inscription_id_uppercase"})})]}),(0,F.jsx)(f.default,{typography:"Subheading",textTransform:"uppercase",color:"text-subdued",textAlign:"right",children:a.formatMessage({id:"form__utxo_value_uppercase"})})]})})}),[_,a,x,o,g]);return(0,F.jsxs)(F.Fragment,{children:[j,(0,F.jsx)(N.default,{data:t,renderItem:h,showsVerticalScrollIndicator:!1})]})}var $=n(266810);var z=n(679978);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var V=(0,n(324665).default)(),L=[{name:E.InscriptionControlModalRoutes.InscriptionControlModal,component:function(){var e,t=(0,x.useRoute)(),n=(0,b.default)(),i=t.params,o=i.accountId,_=i.networkId,C=i.token,M=(0,m.useState)(!1),O=(0,g.default)(M,2),S=O[0],R=O[1],N=(0,m.useState)([]),P=(0,g.default)(N,2),B=P[0],D=P[1],A=(0,m.useState)(!1),E=(0,g.default)(A,2),z=E[0],T=E[1],V=(0,m.useState)([]),L=(0,g.default)(V,2),X=L[0],q=L[1],G=(0,w.useAccount)({accountId:o,networkId:_}).account,H=(0,w.useNetwork)({networkId:_}).network,J=(0,m.useCallback)((0,h.default)((function*(){if(_&&G&&C){var e,t;T(!0);var n=yield v.default.serviceBRC20.getBRC20Inscriptions({networkId:_,address:G.address,xpub:null!=(e=G.xpub)?e:"",tokenAddress:null!=(t=C.tokenIdOnNetwork)?t:C.address});q(n.availableInscriptions),T(!1)}})),[G,_,C]),K=(0,m.useCallback)((function(){var e,t,i=X.filter((function(e){return B.includes(e.inscription_id)})).reduce((function(e,t){return new(y())(e).plus(t.output_value_sat).toFixed()}),"0");(0,I.showDialog)((0,F.jsx)($.RecycleDialog,{amount:`${new(y())(i).shiftedBy(-(null!=(e=null==H?void 0:H.decimals)?e:0)).toFixed()} ${null!=(t=null==H?void 0:H.symbol)?t:""}`,onConfirm:(0,h.default)((function*(){R(!1);for(var e=X.filter((function(e){return B.includes(e.inscription_id)})),t=0,i=e.length;t<i;t+=1){var l=e[t],r=l.output.split(":"),s=(0,g.default)(r,2),a=s[0],u=s[1],c=parseInt(u,10);yield v.default.serviceUtxos.updateRecycle({networkId:_,accountId:o,utxo:{txid:a,vout:c,address:l.owner,value:String(l.output_value_sat),path:"",height:NaN},recycle:!0})}p.default.show({title:n.formatMessage({id:"msg__inscription_deoccupied"})},{type:"default"}),J(),D([]),j.appUIEventBus.emit(j.AppUIEventBusNames.InscriptionRecycleChanged)}))}))}),[o,X,J,n,null==H?void 0:H.decimals,null==H?void 0:H.symbol,_,B]),Q=(0,m.useCallback)((function(){return S?(0,F.jsxs)(c.default,{paddingX:4,paddingBottom:4,children:[(0,F.jsx)(f.default,{typography:"Caption",color:"text-subdued",children:n.formatMessage({id:"content__deoccupy_the_inscriptions_will_reclaim_theattached_utxos_value_toe_the_account_balance_once_these_utxos_are_spent_you_will_permanently_lose_the_inscription_assets"})}),(0,F.jsx)(d.default,{isDisabled:0===B.length,type:"destructive",size:"lg",onPress:K,mt:4,children:n.formatMessage({id:"action__deoccupy"})})]}):null}),[K,n,S,B.length]),W=(0,m.useCallback)((function(){return S?(0,F.jsx)(d.default,{size:"xs",onPress:function(){R(!1),D([])},children:n.formatMessage({id:"action__done"})}):(0,F.jsx)(k.default,{options:[{id:"action__deoccupy",onPress:function(){return R(!0)},icon:"RestoreMini",variant:"desctructive"}],children:(0,F.jsx)(u.default,{iconColor:"icon-subdued",type:"basic",size:"xs",circle:!0,name:"EllipsisVerticalMini"})})}),[n,S]),Y=(0,m.useCallback)((function(){return z?(0,F.jsx)(s.default,{width:"full",height:"full",children:(0,F.jsx)(a.default,{})}):X&&0!==X.length?(0,F.jsx)(U,{accountId:o,networkId:_,inscriptions:null!=X?X:[],isSelectMode:S,onRecycleUtxo:J,selectedInscriptions:B,setSelectedInscriptions:D}):(0,F.jsx)(s.default,{width:"full",height:"full",children:(0,F.jsx)(r.default,{emoji:"\ud83d\udd73\ufe0f",title:n.formatMessage({id:"empty__no_data"})})})}),[o,X,J,n,z,S,_,B]);return(0,m.useEffect)((function(){J()}),[J]),(0,F.jsx)(l.default,{header:n.formatMessage({id:"title__manage_inscriptions"}),height:"584px",closeable:!S,headerDescription:(0,F.jsx)(f.default,{typography:"Caption",color:"text-subdued",children:`${null!=(e=null==C?void 0:C.name)?e:""} (brc20)`}),rightContent:W(),footer:Q(),children:Y()})}}];const X=function(){var e=(0,o.default)();return(0,F.jsx)(V.Navigator,{screenOptions:function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({headerShown:!1},(0,z.buildModalStackNavigatorOptions)({isVerticalLayout:e,navInfo:t}))},children:L.map((function(e){return(0,F.jsx)(V.Screen,{name:e.name,component:e.component},e.name)}))})}}}]);