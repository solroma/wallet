"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[54551],{854551:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var r,o=n(256666),a=n(539144),c=n(877531),i=n(259924),u=n(968079),l=n(18861),d=n(435581),s=n(196234),p=n(107867),f=n(866904),y=n(202784),_=n(472719),m=n(783112),v=n(945821),x=n(481047),g=n(768496),w=n(27172),h=n(146571),b=n(398145);!function(e){e.Name="Name",e.ExportPublicKey="ExportPublicKey",e.ExportPrivateKey="ExportPrivateKey",e.ExportSecretMnemonic="ExportSecretMnemonic",e.ExportPrivateViewKey="ExportPrivateViewKey",e.ExportPrivateSpendKey="ExportPrivateSpendKey",e.HardwareCanNotExportPrivateKey="HardwareCanNotExportPrivateKey",e.RemoveAccount="RemoveAccount"}(r||(r={}));var k=[r.ExportPrivateViewKey,r.ExportPrivateSpendKey,r.ExportSecretMnemonic],P=function(e){var t;return(t={})[r.Name]={label:e.formatMessage({id:"form__name"}),key:r.Name},t[r.ExportPublicKey]={label:e.formatMessage({id:"form__export_public_key"}),key:r.ExportPublicKey,description:e.formatMessage({id:"msg__once_exposed_a_third_party_will_be_able_to_see_your_entire_transaction_history"})},t[r.HardwareCanNotExportPrivateKey]={key:r.HardwareCanNotExportPrivateKey},t[r.ExportPrivateKey]={label:e.formatMessage({id:"action__export_private_key"}),key:r.ExportPrivateKey,description:e.formatMessage({id:"msg__once_exposed_a_third_party_will_be_able_to_take_full_control_of_your_account"}),credentialInfo:{type:b.AccountCredentialType.PrivateKey,key:"action__export_private_key"}},t[r.ExportPrivateViewKey]={label:e.formatMessage({id:"action__export_private_view_key"}),description:e.formatMessage({id:"action__export_private_view_key_desc"}),key:r.ExportPrivateViewKey,credentialInfo:{type:b.AccountCredentialType.PrivateViewKey,key:"action__export_view_key"}},t[r.ExportPrivateSpendKey]={label:e.formatMessage({id:"action__export_private_spend_key"}),description:e.formatMessage({id:"action__export_private_spend_key_desc"}),key:r.ExportPrivateSpendKey,credentialInfo:{type:b.AccountCredentialType.PrivateSpendKey,key:"action__export_spend_key"}},t[r.ExportSecretMnemonic]={label:e.formatMessage({id:"action__export_secret_mnemonic"}),description:e.formatMessage({id:"msg__once_exposed_a_third_party_will_be_able_to_take_full_control_of_your_account"}),key:r.ExportSecretMnemonic,credentialInfo:{type:b.AccountCredentialType.Mnemonic,key:"action__export_secret_mnemonic"}},t[r.RemoveAccount]={label:e.formatMessage({id:"action__remove_account"}),key:r.RemoveAccount},t},M=n(859071);var E=n(552322),I=function(e){var t=e.item,n=e.onPress;return(0,E.jsxs)(p.default,{onPress:function(){return n(t)},mx:-2,my:1.5,flexDirection:"column",alignItems:"flex-start",children:[(0,E.jsx)(f.default,{typography:"Body1Strong",color:"text-default",children:t.label}),(0,E.jsx)(f.default,{typography:"Body2",color:"text-subdued",children:t.description})]})};const S=function(){var e=(0,m.default)(),t=(0,_.useNavigation)(),n=(0,h.default)(),o=n.goToRemoveAccount,a=n.RemoveAccountDialog,b=(0,y.useState)(!1),S=(0,s.default)(b,2),K=S[0],j=S[1],A=(0,y.useState)(),C=(0,s.default)(A,2),O=C[0],R=C[1],N=(0,_.useRoute)().params,D=N.walletId,B=N.accountId,T=N.networkId,V=N.refreshAccounts,H=v.default.engine,F=(0,y.useState)(),z=(0,s.default)(F,2),q=z[0],G=z[1],L=(0,y.useState)(),W=(0,s.default)(L,2),U=W[0],J=W[1],Q=function(e){var t=e.wallet,n=e.networkId,o=e.accountId,a=(0,m.default)(),c=(0,M.useNetwork)({networkId:n}).network,i=(0,M.useAccount)({networkId:n,accountId:o}).account,l=(0,y.useMemo)((function(){return P(a)}),[a]),d=(0,y.useState)([{title:a.formatMessage({id:"content__info"}),data:[l[r.Name]]}]),p=(0,s.default)(d,2),f=p[0],_=p[1];return(0,y.useEffect)((function(){var e=[];if(c&&t){var n=c.settings,o=n.exportCredentialInfo,d=n.privateKeyExportEnabled;n.publicKeyExportEnabled&&null!=i&&i.xpub&&e.push(r.ExportPublicKey),!d||"hd"!==t.type&&"imported"!==t.type||(o?k.forEach((function(t){var n=l[t];o.some((function(e){var t;return e.type===(null==(t=n.credentialInfo)?void 0:t.type)}))&&e.push(t)})):e.push(r.ExportPrivateKey)),"hw"===t.type&&e.push(r.HardwareCanNotExportPrivateKey),e.push(r.RemoveAccount);var s=a.formatMessage({id:"form__security_uppercase"}),p=Array.from(new Set(e.map((function(e){return l[e]}))));_((function(e){var t=e.filter((function(e){return e.title!==s}));return[].concat((0,u.default)(t),[{title:s,data:p}])}))}}),[c,t,a,l,null==i?void 0:i.xpub]),{dataSource:f}}({networkId:T,wallet:q,accountId:B}),X=Q.dataSource,Y=(0,y.useCallback)((function(){D&&H.getWallet(D).then((function(e){G(e)}))}),[H,D]),Z=(0,y.useCallback)((function(){B&&T&&H.getAccount(B,T).then((function(e){J(e)})).finally((function(){null==V||V()}))}),[B,H,T,V]);(0,y.useEffect)((function(){Y(),Z()}),[]);var $=(0,g.useWalletName)({wallet:q}),ee=(0,y.useCallback)((function(e){switch(e.key){case r.Name:return R(U),void j(!0);case r.ExportPrivateKey:case r.ExportPrivateSpendKey:case r.ExportPrivateViewKey:case r.ExportSecretMnemonic:return void(e.credentialInfo&&t.navigate(x.RootRoutes.Modal,{screen:x.ModalRoutes.ManagerAccount,params:{screen:x.ManagerAccountModalRoutes.ManagerAccountExportPrivateModal,params:{accountId:B,networkId:T,accountCredential:e.credentialInfo}}}));case r.ExportPublicKey:return void t.navigate(x.RootRoutes.Modal,{screen:x.ModalRoutes.ManagerAccount,params:{screen:x.ManagerAccountModalRoutes.ManagerAccountExportPublicModal,params:{walletId:D,accountId:B,networkId:T}}});case r.RemoveAccount:o({wallet:q,accountId:B,networkId:T,callback:function(){null==V||V(),null!=t&&null!=t.canGoBack&&t.canGoBack()&&t.goBack()}})}}),[U,B,D,o,t,T,V,q]),te=(0,y.useMemo)((function(){return{sections:X,renderSectionHeader:function(e){var t=e.section;return(0,E.jsx)(f.default,{typography:{sm:"Subheading",md:"Subheading"},color:"text-subdued",children:t.title})},renderItem:function(t){var n=t.item;return n.key===r.Name?(0,E.jsxs)(p.default,{onPress:function(){return ee(n)},mx:-2,my:1.5,alignItems:"center",justifyContent:"space-between",children:[(0,E.jsx)(f.default,{typography:"Body1Strong",children:n.label}),(0,E.jsxs)(l.default,{alignItems:"center",flexDirection:"row",children:[(0,E.jsx)(f.default,{typography:"Body1Strong",color:"text-subdued",children:null==U?void 0:U.name}),(0,E.jsx)(d.default,{name:"ChevronRightMini",color:"icon-subdued",size:15})]})]}):[r.ExportPublicKey,r.ExportPrivateKey].concat((0,u.default)(k)).includes(n.key)?(0,E.jsx)(I,{item:n,onPress:function(){return ee(n)}}):n.key===r.HardwareCanNotExportPrivateKey?(0,E.jsx)(i.default,{title:e.formatMessage({id:"msg__for_the_security_of_your_assets_the_hardware_wallet_firmware_restricts_the_private_key_from_being_exported"}),dismiss:!1,alertType:"info",customIconName:"InformationCircleMini"}):n.key===r.RemoveAccount?(0,E.jsx)(p.default,{onPress:function(){return ee(n)},mx:-2,my:1.5,children:(0,E.jsx)(f.default,{typography:"Body1Strong",color:"text-critical",children:n.label})}):null},renderSectionFooter:function(){return(0,E.jsx)(l.default,{h:5})}}}),[X,U,e,ee]);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(c.default,{header:null==U?void 0:U.name,headerDescription:$,footer:null,sectionListProps:te}),a,(0,E.jsx)(w.default,{visible:K,account:O,onClose:function(){return j(!1)},onDone:function(){Z()}})]})};var K=n(268883),j=n(546349),A=function(e){var t=e.accountId,n=e.networkId,r=e.password,o=e.credentialType,a=e.onAccountChange,c=v.default.engine,i=(0,y.useState)(),u=(0,s.default)(i,2),l=u[0],d=u[1];return(0,y.useEffect)((function(){t&&n&&r&&(c.getAccount(t,n).then((function(e){a(e)})),c.getAccountPrivateKey({accountId:t,credentialType:o,password:r}).then((function(e){d(e)})))}),[t,c,n,r]),(0,E.jsx)(j.PrivateOrPublicKeyPreview,{privateOrPublicKey:l,qrCodeContainerSize:{base:296,md:208}})};const C=function(){var e=(0,m.default)(),t=(0,_.useRoute)().params,n=t.accountId,r=t.networkId,o=t.accountCredential,a=(0,y.useState)(),i=(0,s.default)(a,2),u=i[0],l=i[1];return(0,E.jsx)(c.default,{footer:null,header:e.formatMessage({id:o.key}),headerDescription:null==u?void 0:u.name,height:"auto",children:(0,E.jsx)(K.default,{walletId:null,skipSavePassword:!0,field:K.ValidationFields.Secret,children:function(e){return(0,E.jsx)(A,{accountId:n,networkId:r,credentialType:o.type,password:e,onAccountChange:function(e){return l(e)}})}})})};var O=n(634795),R=n(493877),N=n(432986),D=function(e){var t=e.walletId,n=e.accountId,r=e.networkId,o=e.password,a=e.onAccountChange,c=v.default.engine,i=(0,y.useState)(),u=(0,s.default)(i,2),l=u[0],d=u[1],p=(0,R.default)();return(0,y.useEffect)((function(){(0,O.default)((function*(){try{if(!n||!r)return;var e=yield c.getAccount(n,r);a(e);var i=yield c.recomputeAccount({walletId:t,networkId:r,accountId:n,password:o,path:e.path,template:e.template,confirmOnDevice:!0});i&&d(i.xpub)}catch(u){N.deviceUtils.showErrorToast(u),null==p.goBack||p.goBack()}}))()}),[t,n,c,r,o]),(0,E.jsx)(j.PrivateOrPublicKeyPreview,{privateOrPublicKey:l,qrCodeContainerSize:{base:296,md:208}})};const B=function(){var e=(0,m.default)(),t=(0,_.useRoute)().params,n=t.accountId,r=t.networkId,o=t.walletId,a=(0,y.useState)(),i=(0,s.default)(a,2),u=i[0],l=i[1];return(0,E.jsx)(c.default,{footer:null,header:e.formatMessage({id:"title__export_public_key"}),headerDescription:null==u?void 0:u.name,height:"auto",children:(0,E.jsx)(K.default,{walletId:o,skipSavePassword:!0,field:K.ValidationFields.Secret,children:function(e){return(0,E.jsx)(D,{accountId:n,networkId:r,walletId:o,password:e,onAccountChange:function(e){return l(e)}})}})})};var T=n(679978);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var H=(0,n(324665).default)(),F=[{name:x.ManagerAccountModalRoutes.ManagerAccountModal,component:S},{name:x.ManagerAccountModalRoutes.ManagerAccountExportPrivateModal,component:C},{name:x.ManagerAccountModalRoutes.ManagerAccountExportPublicModal,component:B}];const z=function(){var e=(0,a.default)();return(0,E.jsx)(H.Navigator,{screenOptions:function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,T.buildModalStackNavigatorOptions)({isVerticalLayout:e,navInfo:t}))},children:F.map((function(e){return(0,E.jsx)(H.Screen,{name:e.name,component:e.component},e.name)}))})}}}]);