"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[11180],{611180:(e,n,t)=>{t.r(n),t.d(n,{default:()=>N});var a=t(539144),r=t(877531),o=t(18861),u=t(231846),m=t(566147),i=t(866904),l=t(968079),s=t(921311),d=t(196234),f=t(202784),_=t(472719),c=t(206391),p=t.n(c),x=t(783112),y=t(655697),h=t(859071),v=t(870686),g=t(371905),T=t(552322);var I=t(470310),k=t(307061);var M=t(561220),b=t(435581),A=t(737790),w=t(510374),E=t(592923),j=t(749888),C=function(e){var n=e.keyword,t=e.onChange,a=(0,x.default)();return(0,T.jsx)(o.default,{px:"8px",children:(0,T.jsx)(E.default,{w:"full",placeholder:a.formatMessage({id:"form__search_tokens"}),mb:"16px",value:n,onClear:function(){return t("")},onChangeText:function(e){return t(e)}})})},B=function(){var e=(0,x.default)();return(0,T.jsx)(w.default,{emoji:"\ud83d\udd50",title:e.formatMessage({id:"content__no_results"}),subTitle:e.formatMessage({id:"content__no_results_desc"})})},S=function(e){var n,t=e.accountId,a=e.networkId,r=e.token,o=e.onSelect,u=(0,h.useTokenBalanceWithoutFrozen)({accountId:t,networkId:a,token:r,fallback:"0",useRecycleBalance:null==(n=null==r?void 0:r.isNative)||n}),m=(0,x.default)(),i=(0,j.default)(),l=(0,f.useCallback)((function(){null==o||o(r),i()}),[o,i,r]);return(0,T.jsxs)(M.default,{width:"full",display:"flex",justifyContent:"space-between",alignItems:"center",overflow:"hidden",flexDirection:"row",px:4,py:2,borderRadius:12,onPress:l,_hover:{bgColor:"surface-hovered"},_pressed:{bgColor:"surface-pressed"},children:[(0,T.jsx)(A.default,{size:8,showInfo:!0,showTokenVerifiedIcon:!1,token:r,name:r.name,showExtra:!1,description:m.formatMessage({id:"content__balance_str"},{0:u})}),(0,T.jsx)(b.default,{name:"ChevronRightMini",color:"icon-subdued",size:20})]},r.tokenIdOnNetwork)};var R=(0,t(324665).default)(),O=[{name:g.BulkSenderRoutes.TokenSelector,component:function(){var e=(0,x.default)(),n=(0,_.useRoute)().params,t=n.accountId,a=n.networkId,o=n.tokens,u=n.onTokenSelected,m=(0,h.useNetwork)({networkId:a}).network,l=(0,f.useState)(""),s=(0,d.default)(l,2),c=s[0],p=s[1],y=(0,h.useDebounce)(c.trim().toLowerCase(),300),v=(0,f.useMemo)((function(){return{dataSources:y.length>0?o.filter((function(e){return e.symbol.toLowerCase().includes(y)||e.name.toLowerCase().includes(y)||e.tokenIdOnNetwork.toLowerCase().includes(y)})):o,renderItem:function(e){var n=e.item;return(0,T.jsx)(S,{accountId:t,networkId:a,token:n,onSelect:u})}}}),[y,o,t,a,u]),g=v.dataSources,I=v.renderItem;return(0,T.jsx)(r.default,{header:e.formatMessage({id:"title__select_a_token"}),headerDescription:(0,T.jsx)(i.default,{typography:"Caption",color:"text-subdued",children:(null==m?void 0:m.name)||(null==m?void 0:m.shortName)||void 0}),height:"587px",footer:null,hidePrimaryAction:!0,flatListProps:{data:g,renderItem:I,keyExtractor:function(e){return`${null==e?void 0:e.tokenIdOnNetwork}:${null==e?void 0:e.networkId}`},showsVerticalScrollIndicator:!1,ListEmptyComponent:(0,T.jsx)(B,{}),ListHeaderComponent:(0,T.jsx)(C,{keyword:c,onChange:p})}})}},{name:g.BulkSenderRoutes.AmountEditor,component:function(){var e=(0,_.useRoute)().params,n=e.onAmountChanged,t=e.amount,a=e.amountType,c=e.bulkType,I=e.token,k=e.networkId,M=e.accountAddress,b=v.amountEditorTypeMap[c].indexOf(a),A=(0,f.useState)(b>-1?b:0),w=(0,d.default)(A,2),E=w[0],j=w[1],C=(0,x.default)(),B=(0,h.useNetworkSimple)(k),S=(0,s.default)({mode:"onChange",reValidateMode:"onBlur"}),R=S.control,O=S.formState,N=S.getValues,V=S.trigger,F=S.watch,P=(0,f.useMemo)((function(){var e=v.amountEditorTypeMap[c][E];return e===g.AmountTypeEnum.Fixed?!!O.errors.amount:e===g.AmountTypeEnum.Random&&(!!O.errors.minAmount||!!O.errors.maxAmount)}),[E,c,O.errors.amount,O.errors.maxAmount,O.errors.minAmount]),q=(0,f.useCallback)((function(){var e=v.amountEditorTypeMap[c][E],t=N(),a=t.minAmount,r=t.maxAmount,o=t.amount;e===g.AmountTypeEnum.Random?n({amount:[a||"0",r||"1"],amountType:e}):n({amount:[o||"0"],amountType:e})}),[E,c,N,n]),L=(0,f.useCallback)((function(e,n){var t=new(p())(e);if(t.isNegative())return C.formatMessage({id:"msg__enter_a_number"});if(!t.shiftedBy(I.decimals).isInteger())return C.formatMessage({id:"msg__please_limit_the_amount_of_tokens_to_str_decimal_places_or_less"},{0:I.decimals});if(null!=B&&B.settings.minTransferAmount){var a=new(p())(B.settings.minTransferAmount);if(t.lt(a))return C.formatMessage({id:"form__str_minimum_transfer"},{0:a.toFixed(),1:null==I?void 0:I.symbol})}if("min"===n){var r=N("maxAmount");if(new(p())(r).isLessThanOrEqualTo(e))return C.formatMessage({id:"msg__maximum_amount_must_be_greater_than_minimum_amount"});O.errors.maxAmount&&setTimeout((function(){return V("maxAmount")}),100)}else if("max"===n){var o=N("minAmount");if(new(p())(o).isGreaterThanOrEqualTo(e))return C.formatMessage({id:"msg__maximum_amount_must_be_greater_than_minimum_amount"});O.errors.minAmount&&setTimeout((function(){return V("minAmount")}),100)}}),[O.errors.maxAmount,O.errors.minAmount,N,C,null==B?void 0:B.settings.minTransferAmount,I.decimals,null==I?void 0:I.symbol,V]),$=(0,f.useMemo)((function(){return[C.formatMessage({id:"form__fixed"})].concat((0,l.default)(c===y.BulkTypeEnum.OneToMany?[]:[C.formatMessage({id:"form__random"}),C.formatMessage({id:"form__max"})]),[C.formatMessage({id:"form__custom"})]).filter(Boolean)}),[c,C]),z=(0,f.useMemo)((function(){return(0,T.jsx)(i.default,{children:`${C.formatMessage({id:"content__customise_transfer_amount_by_adding_the_amount_after_the_address"})} ${M}, 0.1`})}),[M,C]),D=F(["minAmount","maxAmount"]),G=(0,f.useMemo)((function(){return C.formatMessage({id:"content__the_amount_for_all_addresses_will_be_randomized_from_str_to_str"},{min_amount:D[0],max_amount:D[1]})}),[C,D]),H=(0,f.useCallback)((function(){return 0===E?(0,T.jsx)(m.default.Item,{name:"amount",control:R,defaultValue:t[0]||"0",label:C.formatMessage({id:"form__amount"}),rules:{required:!0,validate:function(e){return L(e)}},children:(0,T.jsx)(m.default.NumberInput,{placeholder:C.formatMessage({id:"form__amount"}),rightCustomElement:(0,T.jsx)(i.default,{paddingRight:2,typography:"Body1",children:null==I?void 0:I.symbol})})}):1===E&&c===y.BulkTypeEnum.OneToMany?z:1!==E||c!==y.BulkTypeEnum.ManyToMany&&c!==y.BulkTypeEnum.ManyToOne?2===E?(0,T.jsx)(i.default,{children:C.formatMessage({id:"content__send_maximum_amount_of_str_from_the_addresses"},{token_symbol:null==I?void 0:I.symbol})}):3===E?z:void 0:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(m.default.Item,{name:"minAmount",control:R,defaultValue:t[0]||"0",label:C.formatMessage({id:"form__minimum_amount"}),rules:{required:!0,validate:function(e){return L(e,"min")}},children:(0,T.jsx)(m.default.NumberInput,{rightCustomElement:(0,T.jsx)(i.default,{paddingRight:2,typography:"Body1",children:null==I?void 0:I.symbol})})}),(0,T.jsx)(m.default.Item,{name:"maxAmount",control:R,defaultValue:t[1]||"1",label:C.formatMessage({id:"form__maximum_amount"}),rules:{required:!0,validate:function(e){return L(e,"max")}},helpText:G,children:(0,T.jsx)(m.default.NumberInput,{rightCustomElement:(0,T.jsx)(i.default,{paddingRight:2,typography:"Body1",children:null==I?void 0:I.symbol})})})]})}),[t,E,c,R,z,C,G,null==I?void 0:I.symbol,L]);return(0,T.jsx)(r.default,{header:C.formatMessage({id:"action__edit_amount"}),hideSecondaryAction:!0,primaryActionTranslationId:"action__confirm",primaryActionProps:{isDisabled:P},onPrimaryActionPress:function(e){var n=e.close;q(),n()},children:(0,T.jsxs)(o.default,{flex:1,children:[(0,T.jsx)(u.default,{selectedIndex:E,onChange:function(e){V(),j(e)},values:$,tabStyle:{width:120}}),(0,T.jsx)(m.default,{mt:5,children:H()})]})})}},{name:g.BulkSenderRoutes.IntervalEditor,component:function(){var e=(0,_.useRoute)().params,n=e.txInterval,t=e.intervalType,a=e.onIntervalChanged,u=(0,x.default)(),l=(0,f.useState)(t!==g.IntervalTypeEnum.Off),c=(0,d.default)(l,2),y=c[0],h=c[1],v=(0,s.default)({mode:"onChange",reValidateMode:"onBlur"}),M=v.control,b=v.formState,A=v.watch,w=v.trigger,E=v.getValues,j=v.setValue,C=(0,f.useCallback)((function(){var e,n=E(),t=n.minInterval,r=n.maxInterval;e=y?t===r?g.IntervalTypeEnum.Fixed:g.IntervalTypeEnum.Random:g.IntervalTypeEnum.Off,null==a||a({intervalType:e,txInterval:[t,r]})}),[E,y,a]),B=(0,f.useCallback)((function(e,n){if(new(p())(e).gt(300))return`${u.formatMessage({id:"form__maximum_interval"})}: 300s`;if("min"===n){var t=new(p())(e),a=E("maxInterval");if(t.decimalPlaces()>1&&j("minInterval",new(p())(e).toFixed(1)),t.isGreaterThan(a))return u.formatMessage({id:"msg__the_maximum_interval_must_be_greater_than_or_equal_to_the_minimum_interval"});b.errors.maxInterval&&setTimeout((function(){return w("maxInterval")}),100)}else if("max"===n){var r=new(p())(e),o=E("minInterval");if(r.decimalPlaces()>1&&j("maxInterval",new(p())(e).toFixed(1)),r.isLessThan(o))return u.formatMessage({id:"msg__the_maximum_interval_must_be_greater_than_or_equal_to_the_minimum_interval"});b.errors.minInterval&&setTimeout((function(){return w("minInterval")}),100)}}),[b.errors.maxInterval,b.errors.minInterval,E,u,j,w]),S=(0,f.useMemo)((function(){return!!y&&!b.isValid}),[b.isValid,y]),R=A(["minInterval","maxInterval"]),O=(0,f.useMemo)((function(){var e,n;return u.formatMessage({id:"msg__sending_interval_for_all_addresses_will_be_randomized_from_str_to_str"},{min_s:`${null!=(e=R[0])?e:"1"}s`,max_s:`${null!=(n=R[1])?n:"5"}s`})}),[u,R]);return(0,T.jsx)(r.default,{header:u.formatMessage({id:"form__time_interval"}),hideSecondaryAction:!0,primaryActionTranslationId:"action__confirm",primaryActionProps:{isDisabled:S},onPrimaryActionPress:function(e){var n=e.close;C(),n()},children:(0,T.jsxs)(o.default,{flex:1,children:[(0,T.jsxs)(I.default,{alignItems:"center",justifyContent:"space-between",children:[(0,T.jsx)(i.default,{typography:"Body2Strong",children:u.formatMessage({id:"form__random_interval"})}),(0,T.jsx)(k.default,{labelType:"false",isChecked:y,onToggle:function(){h(!y),w()},size:"mini"})]}),y?(0,T.jsxs)(m.default,{mt:5,children:[(0,T.jsx)(m.default.Item,{name:"minInterval",control:M,defaultValue:n[0]||"1",label:u.formatMessage({id:"form__minimum_interval"}),rules:{required:!0,validate:function(e){return B(e,"min")}},children:(0,T.jsx)(m.default.NumberInput,{})}),(0,T.jsx)(m.default.Item,{name:"maxInterval",control:M,defaultValue:n[1]||"5",label:u.formatMessage({id:"form__maximum_interval"}),rules:{required:!0,validate:function(e){return B(e,"max")}},helpText:O,children:(0,T.jsx)(m.default.NumberInput,{})})]}):null]})})}}];const N=function(){var e=(0,a.default)();return(0,T.jsx)(R.Navigator,{screenOptions:{headerShown:!1,animationEnabled:!!e},children:O.map((function(e){return(0,T.jsx)(R.Screen,{name:e.name,component:e.component},e.name)}))})}},870686:(e,n,t)=>{t.r(n),t.d(n,{amountDefaultTypeMap:()=>m,amountEditorTypeMap:()=>i});var a,r,o=t(655697),u=t(371905),m=((a={})[o.BulkTypeEnum.OneToMany]=u.AmountTypeEnum.Fixed,a[o.BulkTypeEnum.ManyToMany]=u.AmountTypeEnum.Random,a[o.BulkTypeEnum.ManyToOne]=u.AmountTypeEnum.All,a),i=((r={})[o.BulkTypeEnum.OneToMany]=[u.AmountTypeEnum.Fixed,u.AmountTypeEnum.Custom],r[o.BulkTypeEnum.ManyToOne]=[u.AmountTypeEnum.Fixed,u.AmountTypeEnum.Random,u.AmountTypeEnum.All,u.AmountTypeEnum.Custom],r[o.BulkTypeEnum.ManyToMany]=[u.AmountTypeEnum.Fixed,u.AmountTypeEnum.Random,u.AmountTypeEnum.All,u.AmountTypeEnum.Custom],r)}}]);