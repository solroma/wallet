(self.webpackChunkweb=self.webpackChunkweb||[]).push([[87972],{786141:(e,t,r)=>{"use strict";r.r(t),r.d(t,{VaultBase:()=>k,VaultBaseChainOnly:()=>C});var n=r(72579),o=r.n(n),i=r(256666),a=r(301842),u=r.n(a),c=r(634795),d=r(887371),s=r(545754),l=r(411987),f=r(695058),p=r(206391),y=r.n(p),h=r(636393),v=r(613549),w=r(292147),g=r(213208),m=r(992431),T=r(940915),I=r(278489),x=r(969618),E=r(398514),A=r(114540),b=r(348834).Buffer;function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}if(g.default.isExtensionUi)throw new Error("engine/VaultBase is not allowed imported from ui");var C=function(e){(0,s.default)(r,e);var t=N(r);function r(){return t.apply(this,arguments)}var n=r.prototype;return n.initProvider=function(){var e=(0,c.default)((function*(){var e=(yield this.getNetwork()).impl;u()(x.IMPL_MAPPINGS[e])||(this.engineProvider=yield this.engine.providerManager.getProvider(this.networkId))}));return function(){return e.apply(this,arguments)}}(),n.proxyJsonRPCCall=function(){var e=(0,c.default)((function*(e){throw new T.NotImplemented}));return function(t){return e.apply(this,arguments)}}(),n.createClientFromURL=function(e){throw new T.NotImplemented},n.getEthersProvider=function(){var e=(0,c.default)((function*(){throw new T.NotImplemented}));return function(){return e.apply(this,arguments)}}(),n.getClientEndpointStatus=function(){var e=(0,c.default)((function*(e){var t=this.createClientFromURL(e),r=performance.now(),n=(yield t.getInfo()).bestBlockNumber;return{responseTime:Math.floor(performance.now()-r),latestBlock:n}}));return function(t){return e.apply(this,arguments)}}(),n.checkRpcBatchSupport=function(){var e=(0,c.default)((function*(e){throw new T.NotImplemented}));return function(t){return e.apply(this,arguments)}}(),n.getDisplayAddress=function(){var e=(0,c.default)((function*(e){return Promise.resolve(e)}));return function(t){return e.apply(this,arguments)}}(),n.validateAddress=function(){var e=(0,c.default)((function*(e){var t=yield this.engineProvider.verifyAddress(e),r=t.normalizedAddress;if(!t.isValid||!r)throw new T.InvalidAddress;return Promise.resolve(r)}));return function(t){return e.apply(this,arguments)}}(),n.validateImportedCredential=function(e){return Promise.resolve(this.settings.importedAccountEnabled&&/^(0x)?[0-9a-zA-Z]{64}$/.test(e))},n.validateWatchingCredential=function(){var e=(0,c.default)((function*(e){return Promise.resolve(this.settings.watchingAccountEnabled&&(yield this.engineProvider.verifyAddress(e)).isValid)}));return function(t){return e.apply(this,arguments)}}(),n.validateTokenAddress=function(){var e=(0,c.default)((function*(e){var t=yield this.engineProvider.verifyTokenAddress(e),r=t.normalizedAddress;if(!t.isValid||"undefined"===typeof r)throw new T.InvalidTokenAddress;return Promise.resolve(r)}));return function(t){return e.apply(this,arguments)}}(),n.validateCanCreateNextAccount=function(){var e=(0,c.default)((function*(e,t){return Promise.resolve(!0)}));return function(t,r){return e.apply(this,arguments)}}(),n.checkAccountExistence=function(){var e=(0,c.default)((function*(e,t){return Promise.resolve(!0)}));return function(t,r){return e.apply(this,arguments)}}(),n.getBalances=function(){var e=(0,c.default)((function*(e,t,r){return(yield this.engine.providerManager.getClient(this.networkId)).getBalances(e.map((function(e){var t=e.address,r=e.tokenAddress;return{address:t,coin:O({},"string"===typeof r?{tokenAddress:r}:{})}})))}));return function(t,r,n){return e.apply(this,arguments)}}(),n.getFrozenBalance=function(){var e=(0,c.default)((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.password,e.useRecycleBalance,e.ignoreInscriptions,e.useCustomAddressesBalance;return 0}));return function(){return e.apply(this,arguments)}}(),n.fetchBalanceDetails=function(){var e=(0,c.default)((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.password,e.useRecycleBalance,e.ignoreInscriptions,e.useCustomAddressesBalance;return Promise.resolve(void 0)}));return function(){return e.apply(this,arguments)}}(),n.getTransactionStatuses=function(e){return this.engine.providerManager.getTransactionStatuses(this.networkId,e)},n.getTransactionFeeInNative=function(e){return Promise.resolve("")},n.isContractAddress=function(){var e=(0,c.default)((function*(e){return!1}));return function(t){return e.apply(this,arguments)}}(),n.getAccountNameInfoMap=function(){var e=(0,c.default)((function*(){var e=yield this.getNetwork();return(0,I.getAccountNameInfoByImpl)(e.impl)}));return function(){return e.apply(this,arguments)}}(),n.canAutoCreateNextAccount=function(){var e=(0,c.default)((function*(e){return Promise.resolve(!1)}));return function(t){return e.apply(this,arguments)}}(),n.filterAccounts=function(){var e=(0,c.default)((function*(e){var t=e.accounts;e.networkId;return Promise.resolve(t)}));return function(t){return e.apply(this,arguments)}}(),n.shouldChangeAccountWhenNetworkChanged=function(){var e=(0,c.default)((function*(e){e.previousNetwork,e.newNetwork,e.activeAccountId;return Promise.resolve({shouldReloadAccountList:!1,shouldChangeActiveAccount:!1})}));return function(t){return e.apply(this,arguments)}}(),n.getAccountNameInfosByImportedOrWatchingCredential=function(){var e=(0,c.default)((function*(e){return Promise.resolve([])}));return function(t){return e.apply(this,arguments)}}(),n.checkIsUnlimitedAllowance=function(){var e=(0,c.default)((function*(e){throw new T.NotImplemented}));return function(t){return e.apply(this,arguments)}}(),n.checkIsApprovedForAll=function(){var e=(0,c.default)((function*(e){throw new T.NotImplemented}));return function(t){return e.apply(this,arguments)}}(),n.checkIsBatchTransfer=function(){var e=(0,c.default)((function*(e){throw new T.NotImplemented}));return function(t){return e.apply(this,arguments)}}(),n.getFeePricePerUnit=function(){var e=(0,c.default)((function*(){throw new T.NotImplemented}));return function(){return e.apply(this,arguments)}}(),n.fetchRpcChainId=function(){var e=(0,c.default)((function*(e){return null}));return function(t){return e.apply(this,arguments)}}(),n.getTxWaitingSeconds=function(){var e=(0,c.default)((function*(){return[]}));return function(){return e.apply(this,arguments)}}(),n.getUserNFTAssets=function(){var e=(0,c.default)((function*(e){e.serviceData;return Promise.resolve(void 0)}));return function(t){return e.apply(this,arguments)}}(),n.getTransactionDetail=function(){var e=(0,c.default)((function*(e){return Promise.resolve(void 0)}));return function(t){return e.apply(this,arguments)}}(),(0,d.default)(r)}(A.VaultContext),k=function(e){(0,s.default)(r,e);var t=N(r);function r(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).uuid=h.default.v4().toString(),e}var n=r.prototype;return n.init=function(){var e=(0,c.default)((function*(e){yield this.initProvider(),yield this.initKeyring(e)}));return function(t){return e.apply(this,arguments)}}(),n.initKeyring=function(){var e=(0,c.default)((function*(e){this.keyring=yield e.keyringCreator(this)}));return function(t){return e.apply(this,arguments)}}(),n.signTransaction=function(){var e=(0,c.default)((function*(e,t){return this.keyring.signTransaction(e,t)}));return function(t,r){return e.apply(this,arguments)}}(),n.signAndSendTransaction=function(){var e=(0,c.default)((function*(e,t,r){var n=yield this.signTransaction(e,t);return r?O(O({},n),{},{encodedTx:e.encodedTx}):this.broadcastTransaction(O(O({},n),{},{encodedTx:e.encodedTx}))}));return function(t,r,n){return e.apply(this,arguments)}}(),n.broadcastTransaction=function(){var e=(0,c.default)((function*(e,t){w.default.engine.info("broadcastTransaction START:",{rawTx:e.rawTx});var r=yield this.engine.providerManager.broadcastTransaction(this.networkId,e.rawTx,t);return w.default.engine.info("broadcastTransaction END:",{txid:r,rawTx:e.rawTx}),O(O({},e),{},{txid:r,encodedTx:e.encodedTx})}));return function(t,r){return e.apply(this,arguments)}}(),n.buildEncodedTxFromBatchTransfer=function(){var e=(0,c.default)((function*(e){throw new T.NotImplemented}));return function(t){return e.apply(this,arguments)}}(),n.buildEncodedTxsFromSetApproveForAll=function(){var e=(0,c.default)((function*(e,t){throw new T.NotImplemented}));return function(t,r){return e.apply(this,arguments)}}(),n.activateAccount=function(){var e=(0,c.default)((function*(){throw new T.NotImplemented}));return function(){return e.apply(this,arguments)}}(),n.activateToken=function(){var e=(0,c.default)((function*(e,t){throw new T.NotImplemented}));return function(t,r){return e.apply(this,arguments)}}(),n.getTokenAllowance=function(){var e=(0,c.default)((function*(e,t){throw new T.NotImplemented}));return function(t,r){return e.apply(this,arguments)}}(),n.batchTokensAllowance=function(){var e=(0,c.default)((function*(e,t){throw new T.NotImplemented}));return function(t,r){return e.apply(this,arguments)}}(),n.getOutputAccount=function(){var e=(0,c.default)((function*(){var e=yield this.getDbAccount({noCache:!0});return{id:e.id,name:e.name,type:e.type,path:e.path,coinType:e.coinType,tokens:[],address:e.address,template:e.template,pubKey:o()(e,"pub","")}}));return function(){return e.apply(this,arguments)}}(),n.getAccountBalance=function(){var e=(0,c.default)((function*(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=(yield this.getDbAccount()).address;return this.getBalances((t?[{address:o}]:[]).concat(e.map((function(e){return{address:o,tokenAddress:e}}))),r,n)}));return function(t){return e.apply(this,arguments)}}(),n.updatePendingTxs=function(){var e=(0,c.default)((function*(e){throw new T.NotImplemented}));return function(t){return e.apply(this,arguments)}}(),n.getAccountNonce=function(){var e=(0,c.default)((function*(){return Promise.resolve(null)}));return function(){return e.apply(this,arguments)}}(),n.fixActionDirection=function(){var e=(0,c.default)((function*(e){var t,r,n,o,i=e.action,a=e.accountAddress;(i.direction=E.IDecodedTxDirection.OTHER,i.type===E.IDecodedTxActionType.NATIVE_TRANSFER)&&(i.direction=yield this.buildTxActionDirection({from:(null==(t=i.nativeTransfer)?void 0:t.from)||"",to:(null==(r=i.nativeTransfer)?void 0:r.to)||"",address:a}));i.type===E.IDecodedTxActionType.TOKEN_TRANSFER&&(i.direction=yield this.buildTxActionDirection({from:(null==(n=i.tokenTransfer)?void 0:n.from)||"",to:(null==(o=i.tokenTransfer)?void 0:o.to)||"",address:a}));return i}));return function(t){return e.apply(this,arguments)}}(),n.fixDecodedTx=function(){var e=(0,c.default)((function*(e){var t,r;e.createdAt=null!=(t=e.createdAt)?t:Date.now();var n=null==(r=e.encodedTx)?void 0:r.nonce;e.nonce=u()(n)?e.nonce:new(y())(n).toNumber();for(var o=e.owner,i=0;i<e.actions.length;i+=1){var a=e.actions[i];yield this.fixActionDirection({action:a,accountAddress:o})}if(e.outputActions)for(var c=0;c<e.outputActions.length;c+=1){var d=e.outputActions[c];yield this.fixActionDirection({action:d,accountAddress:o})}return Promise.resolve(e)}));return function(t){return e.apply(this,arguments)}}(),n.fixHistoryTx=function(){var e=(0,c.default)((function*(e){return e.decodedTx=yield this.fixDecodedTx(e.decodedTx),Promise.resolve(e)}));return function(t){return e.apply(this,arguments)}}(),n.buildHistoryTx=function(){var e=(0,c.default)((function*(e){var t=e.historyTxToMerge,r=(e.encodedTx,e.decodedTx),n=e.signedTx,o=e.isSigner,i=e.isLocalCreated,a=(null==n?void 0:n.txid)||(null==r?void 0:r.txid)||"";if(!a)throw new Error("buildHistoryTx txid not found");var u=yield this.getAccountAddress();r.txid=a||r.txid,r.owner=u,o&&(r.signer=u),null!=n&&n.txKey&&(r.extraInfo?r.extraInfo.txKey=n.txKey:r.extraInfo={txKey:n.txKey});var c=O(O({id:`${this.networkId}_${a}_${this.accountId}`,isLocalCreated:Boolean(i)},t),{},{decodedTx:r});return c=yield this.fixHistoryTx(c),Promise.resolve(c)}));return function(t){return e.apply(this,arguments)}}(),n.checkIsScamHistoryTx=function(){var e=(0,c.default)((function*(e){return!1}));return function(t){return e.apply(this,arguments)}}(),n.fetchOnChainHistory=function(){var e=(0,c.default)((function*(e){throw new T.NotImplemented}));return function(t){return e.apply(this,arguments)}}(),n.fixAddressCase=function(e){return Promise.resolve(e)},n.buildTxActionDirection=function(){var e=(0,c.default)((function*(e){var t=e.from,r=e.to,n=e.address;return t=yield this.fixAddressCase(t||""),r=yield this.fixAddressCase(r),n=yield this.fixAddressCase(n),t===r&&t===n?E.IDecodedTxDirection.SELF:t&&t===n?E.IDecodedTxDirection.OUT:r&&r===n?E.IDecodedTxDirection.IN:E.IDecodedTxDirection.OTHER}));return function(t){return e.apply(this,arguments)}}(),n.getNextNonce=function(){var e=(0,c.default)((function*(e,t){var r,n=null==(r=(yield this.engine.providerManager.getAddresses(e,[t.address]))[0])?void 0:r.nonce;if(u()(n))throw new T.OneKeyError("Get on-chain nonce failed.");yield this.engine.getHistory(e,t.id,void 0,!1);var o=yield m.default.history.getMaxPendingNonce({accountId:this.accountId,networkId:e}),i=yield m.default.history.getPendingNonceList({accountId:this.accountId,networkId:e}),a=Math.max(u()(o)?0:o+1,n);if(Number.isNaN(a)&&(a=n),a>n)for(var c=n;c<a;c+=1)if(!i.includes(c)){a=c;break}if(a<n&&(a=n),a-n>=v.HISTORY_CONSTS.PENDING_QUEUE_MAX_LENGTH)throw new T.PendingQueueTooLong(v.HISTORY_CONSTS.PENDING_QUEUE_MAX_LENGTH);return a}));return function(t,r){return e.apply(this,arguments)}}(),n.validateSendAmount=function(e,t,r){return Promise.resolve(!0)},n.notifyChainChanged=function(e,t){},n.getFetchBalanceAddress=function(e){return Promise.resolve(e.address)},n.getPrivateKeyByCredential=function(e){return Promise.resolve(b.from(e.startsWith("0x")?e.slice(2):e,"hex"))},n.getMinDepositAmount=function(){var e=(0,c.default)((function*(){return"0"}));return function(){return e.apply(this,arguments)}}(),n.specialCheckEncodedTx=function(){var e=(0,c.default)((function*(e){return{success:!0}}));return function(t){return e.apply(this,arguments)}}(),n.getAllUsedAddress=function(){var e=(0,c.default)((function*(){return Promise.resolve([])}));return function(){return e.apply(this,arguments)}}(),(0,d.default)(r)}(C)},133051:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Pe});var n=r(459740),o=r(301842),i=r.n(o),a=r(196234),u=r(256666),c=r(634795),d=r(887371),s=r(545754),l=r(411987),f=r(695058),p=r(206391),y=r.n(p),h=r(437488),v=r(901187),w=r(776553),g=r(613549),m=r(292147),T=r(396564),I=r(992431),x=r(940915),E=r(794292),A=r(398514),b=r(392853),P=r(786141),O=r(631368),N=r(967640),C=r(153546),k=r(398145),S=r(82406),D=r(881393),B=r(764550),R=r(85397),_=r(740727);function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var K,H=function(e){(0,s.default)(r,e);var t=F(r);function r(e){var r;return(r=t.call(this)).rpc=new R.JsonRPCRequest(e),r}var n=r.prototype;return n.getInfo=function(){var e=(0,c.default)((function*(){var e=yield this.rpc.call("chain.info",[]),t=parseInt(e.head.number);return{bestBlockNumber:t,isReady:!isNaN(t)&&t>0}}));return function(){return e.apply(this,arguments)}}(),n.getAddresses=function(){var e=(0,c.default)((function*(e){for(var t=e.reduce((function(e,t){return e.push(["state.get_resource",[t,"0x1::Account::Account",{decode:!0}]]),e.push(["txpool.next_sequence_number",[t]]),e.push(["state.get_resource",[t,"0x1::Account::Balance<0x1::STC::STC>",{decode:!0}]]),e}),[]),r=yield this.rpc.batchCall(t),n=[],o=0,i=r.length;o<i;o+=3){var u=r.slice(o,o+3),c=(0,a.default)(u,3),d=c[0],s=c[1],l=c[2],f=void 0;if("undefined"!==typeof d&&"undefined"!==typeof s&&"undefined"!==typeof l){var p,h,v=null!==d;f={balance:new(y())(null!=(p=null==l?void 0:l.json.token.value)?p:0),nonce:Math.max(null!=(h=null==d?void 0:d.json.sequence_number)?h:0,null!=s?s:0),existing:v}}n.push(f)}return n}));return function(t){return e.apply(this,arguments)}}(),n.getBalances=function(){var e=(0,c.default)((function*(e){var t=e.map((function(e){var t;return["state.get_resource",[e.address,`0x1::Account::Balance<${null!=(t=e.coin.tokenAddress)?t:"0x1::STC::STC"}>`,{decode:!0}]]}));return(yield this.rpc.batchCall(t)).map((function(e){var t,r;"undefined"!==typeof e&&(t=new(y())(null!=(r=null==e?void 0:e.json.token.value)?r:0));return t}))}));return function(t){return e.apply(this,arguments)}}(),n.getTransactionStatuses=function(){var e=(0,c.default)((function*(e){for(var t=e.reduce((function(e,t){return e.push(["txpool.pending_txn",[t]]),e.push(["chain.get_transaction_info",[t]]),e}),[]),r=yield this.rpc.batchCall(t),n=[],o=0,i=r.length;o<i;o+=2){var u=r.slice(o,o+2),c=(0,a.default)(u,2),d=c[0],s=c[1],l=void 0;"undefined"!==typeof s&&"undefined"!==typeof d&&(l=null===d&&null===s?_.TransactionStatus.NOT_FOUND:d?_.TransactionStatus.PENDING:"Executed"===(null==s?void 0:s.status)?_.TransactionStatus.CONFIRM_AND_SUCCESS:_.TransactionStatus.CONFIRM_BUT_FAILED),n.push(l)}return n}));return function(t){return e.apply(this,arguments)}}(),n.getFeePricePerUnit=function(){var e=(0,c.default)((function*(){var e=yield this.rpc.call("txpool.gas_price",[]),t=parseInt(null!=e?e:"1");return{normal:{price:new(y())(t)}}}));return function(){return e.apply(this,arguments)}}(),n.broadcastTransaction=function(){var e=(0,c.default)((function*(e){return this.rpc.call("txpool.submit_hex_transaction",[e])}));return function(t){return e.apply(this,arguments)}}(),n.estimateGasLimitAndTokensChangedTo=function(){var e=(0,c.default)((function*(e,t){var r,n,o=D.encoding.publicKeyToAddress(t),i=yield this.rpc.call("contract.dry_run_raw",[e,t]);return"Executed"===(null==i?void 0:i.status)?(r=new(y())(parseInt(i.gas_used)),n=this.getTokensChangedTo(i,o)):(r=isNaN(parseInt(null==i?void 0:i.gas_used))?new(y())(127845):new(y())(parseInt(null==i?void 0:i.gas_used)),n={}),{feeLimit:r,tokensChangedTo:n}}));return function(t,r){return e.apply(this,arguments)}}(),n.getTokensChangedTo=function(e,t){return e.write_set.reduce((function(e,r){var n,o=r.access_path.match(/^(0x[a-zA-Z0-9]{32})\/[01]\/0x00000000000000000000000000000001::Account::Balance<(.*)>$/i);o&&3===o.length&&t===o[1]&&(e[o[2]]=new(y())(null!=(n=r.value.Resource.json.token.value)?n:0).toFixed());return e}),{})},(0,d.default)(r)}(B.BaseClient),U=r(968079),M=r(789644),j=r.n(M),L=r(942013),V=r(490628),$=r(348834).Buffer,W=((K={})[L.OnekeyNetwork.stc]="https://api.stcscan.io/v2/transaction/main/byAddress",K[L.OnekeyNetwork.tstc]="https://api.stcscan.io/v2/transaction/barnard/byAddress",K);function G(){return(G=(0,c.default)((function*(e,t){var r=W[e];if("undefined"===typeof r)return Promise.resolve([]);var n=`${r}/${t}`;try{return(yield j().get(n)).data.contents}catch(o){return m.default.common.error(o),Promise.resolve([])}}))).apply(this,arguments)}function z(e){var t={to:"",tokenAddress:"",amountValue:""};try{var r,n=D.encoding.decodeTransactionPayload(e),o=n.ScriptFunction,i=o.func,u=i.address,c=i.module,d=i.functionName,s=o.args;if("0x00000000000000000000000000000001"===u||"TransferScripts"===c)if("peer_to_peer_v2"===d)r=(0,a.default)(s,2)[1];else if("peer_to_peer"===d){r=(0,a.default)(s,3)[2]}if(r){t.amountValue=new(y())(new D.bcs.BcsDeserializer((0,N.arrayify)(r)).deserializeU128().toString()).toFixed();var l=n,f=(0,a.default)(l.ScriptFunction.ty_args,1)[0].Struct,p=f.name,h=f.module,v=f.address;t.tokenAddress=`${v}::${h}::${p}`;var w=(0,a.default)(s,1);t.to=w[0]}}catch(g){m.default.common.error(g)}return t}function J(e,t,r){return D.encoding.bcsEncode(D.utils.tx.encodeScriptFunction("0x00000000000000000000000000000001::TransferScripts::peer_to_peer_v2",D.utils.tx.encodeStructTypeTags([t.tokenIdOnNetwork]),D.utils.tx.encodeScriptFunctionArgs([{type_tag:"Address"},{type_tag:"U128"}],[e,`0x${new(y())(r).shiftedBy(t.decimals).toString(16)}`])))}var Y=function(e,t,r){var n=new D.starcoin_types.Ed25519PublicKey($.from(e,"hex")),o=new D.starcoin_types.Ed25519Signature(t),i=new D.starcoin_types.TransactionAuthenticatorVariantEd25519(n,o),a=new D.starcoin_types.SignedUserTransaction(r,i),u=new D.bcs.BcsSerializer;return a.serialize(u),{txid:D.crypto_hash.createUserTransactionHasher().crypto_hash(u.getBytes()),rawTx:(0,N.hexlify)(u.getBytes()),signature:t}},q=function(e,t){var r,n=e.inputs[0].address,o=e.payload,i=o.scriptFn,a=o.data,u=e.feeLimit,c=e.feePricePerUnit,d=e.nonce,s=e.payload.expirationTime;if(!n||!i&&!a||!u||!c||"undefined"===typeof d)throw new Error("invalid unsignedTx");r=i||D.encoding.bcsDecode(D.starcoin_types.TransactionPayload,a);var l=D.utils.tx.generateRawUserTransaction(n,r,u.toNumber(),c.toNumber(),d,s,Number(t)),f=new D.bcs.BcsSerializer;return l.serialize(f),[l,f.getBytes()]},Q=function(){var e=(0,c.default)((function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hex",r=new E.Verifier(e,"ed25519"),n="",o=yield r.getPubkey();if("hex"===t)n=D.encoding.publicKeyToAddress(o.toString("hex"));else{if("bech32"!==t)throw new Error("invalid encoding");n=D.encoding.publicKeyToReceiptIdentifier(o.toString("hex"))}return n}));return function(t){return e.apply(this,arguments)}}(),X=function(e){if(e.startsWith("stc"))try{return{normalizedAddress:`0x${D.encoding.decodeReceiptIdentifier(e).accountAddress}`,displayAddress:e,isValid:!0,encoding:"bech32"}}catch(n){}else try{var t=e.startsWith("0x")?e.toLowerCase():`0x${e.toLowerCase()}`,r=D.encoding.addressToSCS(t);if(D.encoding.addressFromSCS(r)===t)return{normalizedAddress:t,displayAddress:t,isValid:!0,encoding:"hex"}}catch(n){}return{isValid:!1}},Z=function(e){var t=D.crypto_hash.createRawUserTransactionHasher().get_salt();return Uint8Array.of.apply(Uint8Array,(0,U.default)(t).concat((0,U.default)(e)))},ee=function(){var e=(0,c.default)((function*(e,t,r){var n,o=e.feePricePerUnit?e.feePricePerUnit:(yield t.getFeePricePerUnit()).normal.price,i=e.inputs[0],a=e.outputs[0],u=e.payload||{},c=e.nonce,d=e.feeLimit,s=i.address;if(i&&a){var l,f=a.address,p=a.value,y=a.tokenAddress;if(f.startsWith("stc")){var h=D.encoding.decodeReceiptIdentifier(f);f=h.accountAddress.startsWith("0x")?h.accountAddress:`0x${h.accountAddress}`}var v=[null!=y?y:"0x1::STC::STC"],w=[f,BigInt(p.toNumber())],g=null==(l=t.rpc)?void 0:l.url,m=yield D.utils.tx.encodeScriptFunctionByResolve("0x1::TransferScripts::peer_to_peer_v2",v,w,g);u.scriptFn=m,n=m}else{if(!u.data)throw new Error("invalid unsignedTx payload");n=D.encoding.bcsDecode(D.starcoin_types.TransactionPayload,u.data)}var T=i.publicKey||"";if(d||(0,V.check)(T,"senderPublicKey is required"),"undefined"===typeof c)throw new Error("nonce is not available");u.expirationTime=u.expirationTime||Math.floor(Date.now()/1e3)+3600;var I,x=o.toNumber(),E=u.expirationTime||Math.floor(Date.now()/1e3)+3600,A=D.utils.tx.generateRawUserTransaction(s,n,1e7,x,c,E,Number(r)),b=D.encoding.bcsEncode(A);if(!d){var P=yield t.estimateGasLimitAndTokensChangedTo(b,T);d=P.feeLimit,I=P.tokensChangedTo}return{inputs:i?[i]:[],outputs:a?[a]:[],feeLimit:d,tokensChangedTo:I,feePricePerUnit:o,nonce:c,payload:u}}));return function(t,r,n){return e.apply(this,arguments)}}(),te=r(348834).Buffer;function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var ie=`m/44'/${g.COINTYPE_STC}'/0'/0'`,ae=function(e){(0,s.default)(r,e);var t=oe(r);function r(){return t.apply(this,arguments)}var n=r.prototype;return n.signTransaction=function(){var e=(0,c.default)((function*(e,t){var r=yield this.getDbAccount(),n=yield this.getNetworkChainId(),o=q(e,n),i=(0,a.default)(o,2),u=i[0],c=i[1],d=(0,a.default)(e.inputs,1)[0].publicKey;if(!d)throw new x.OneKeyHardwareError(Error("senderPublicKey is required"));var s=yield this.getHardwareInfo(),l=s.connectId,f=s.deviceId,p=yield this.getWalletPassphraseState(),y=yield this.getHardwareSDKInstance(),h=yield y.starcoinSignTransaction(l,f,ne({path:r.path,rawTx:te.from(c).toString("hex")},p));if(h.success){var v=h.payload.signature;return Y(d,te.from(v,"hex"),u)}throw(0,C.convertDeviceError)(h.payload)}));return function(t,r){return e.apply(this,arguments)}}(),n.signMessage=function(){var e=(0,c.default)((function*(e,t){var r=yield this.getDbAccount(),n=yield this.getNetworkChainId(),o=yield this.getHardwareInfo(),i=o.connectId,a=o.deviceId,u=yield this.getWalletPassphraseState(),d=yield this.getHardwareSDKInstance();return Promise.all(e.map(function(){var e=(0,c.default)((function*(e){var t,o=e.type,c=e.message;try{t=yield d.starcoinSignMessage(i,a,ne({path:r.path,messageHex:c},u))}catch(h){throw m.default.common.error(h),new x.OneKeyHardwareError(h)}if(!t.success)throw m.default.common.error(t.payload),(0,C.convertDeviceError)(t.payload);var s=t.payload,l=s.public_key,f=s.signature;if(1===o){var p=(0,N.arrayify)(c),y=new D.starcoin_types.SigningMessage(p);return yield D.utils.signedMessage.generateSignedMessage(y,parseInt(n),l,f)}return f}));return function(t){return e.apply(this,arguments)}}()))}));return function(t,r){return e.apply(this,arguments)}}(),n.prepareAccounts=function(){var e=(0,c.default)((function*(e){var t,r=e.type,n=e.indexes,o=e.names,i=n.map((function(e){return`${ie}/${e}'`})),a="SEARCH_ACCOUNTS"===r,u=yield this.getHardwareSDKInstance(),c=yield this.getHardwareInfo(),d=c.connectId,s=c.deviceId,l=yield this.getWalletPassphraseState(),f=[];if(!a){var p;try{p=yield u.starcoinGetPublicKey(d,s,ne({bundle:i.map((function(e){return{path:e,showOnOneKey:false}}))},l))}catch(E){throw m.default.common.error(E),new x.OneKeyHardwareError(E)}if(!p.success)throw m.default.common.error(p.payload),(0,C.convertDeviceError)(p.payload);f=p.payload.map((function(e){return e.public_key})).filter((function(e){return!!e}))}try{t=yield u.starcoinGetAddress(d,s,ne({bundle:i.map((function(e){return{path:e,showOnOneKey:false}}))},l))}catch(E){throw m.default.common.error(E),new x.OneKeyHardwareError(E)}if(!t.success)throw m.default.common.error(t.payload),(0,C.convertDeviceError)(t.payload);var y=[],h=0;for(var v of t.payload){var w=v.address,T=v.path;if(w){var I=(o||[])[h]||`STC #${n[h]+1}`;y.push({id:`${this.walletId}--${T}`,name:I,type:k.AccountType.SIMPLE,path:T,coinType:g.COINTYPE_STC,pub:f[h]||"",address:w}),h+=1}}return y}));return function(t){return e.apply(this,arguments)}}(),n.getAddress=function(){var e=(0,c.default)((function*(e){var t,r=yield this.getHardwareSDKInstance(),n=yield this.getHardwareInfo(),o=n.connectId,i=n.deviceId,a=yield this.getWalletPassphraseState(),u=yield r.starcoinGetAddress(o,i,ne({path:e.path,showOnOneKey:e.showOnOneKey},a));if(u.success&&null!=(t=u.payload)&&t.address)return u.payload.address;throw(0,C.convertDeviceError)(u.payload)}));return function(t){return e.apply(this,arguments)}}(),n.batchGetAddress=function(){var e=(0,c.default)((function*(e){var t=yield this.getHardwareSDKInstance(),r=yield this.getHardwareInfo(),n=r.connectId,o=r.deviceId,i=yield this.getWalletPassphraseState(),a=yield t.starcoinGetAddress(n,o,ne(ne({},i),{},{bundle:e.map((function(e){return{path:e.path,showOnOneKey:!!e.showOnOneKey}}))}));if(!a.success)throw(0,C.convertDeviceError)(a.payload);return a.payload.map((function(e){var t,r;return{path:null!=(t=e.path)?t:"",address:null!=(r=e.address)?r:""}}))}));return function(t){return e.apply(this,arguments)}}(),(0,d.default)(r)}(S.KeyringHardwareBase),ue=r(605851),ce=r(810887),de=r(348834).Buffer;function se(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var le=`m/44'/${g.COINTYPE_STC}'/0'/0'`,fe=function(e){(0,s.default)(r,e);var t=se(r);function r(){return t.apply(this,arguments)}var n=r.prototype;return n.getSigners=function(){var e=(0,c.default)((function*(e,t){var r,n=yield this.getDbAccount();if(1!==t.length)throw new x.OneKeyInternalError("Starcoin signers number should be 1.");if(t[0]!==n.address)throw new x.OneKeyInternalError("Wrong address required for signing.");var o=(yield this.getPrivateKeys(e))[n.path];if("undefined"===typeof o)throw new x.OneKeyInternalError("Unable to get signer.");return(r={})[n.address]=new E.Signer(o,e,"ed25519"),r}));return function(t,r){return e.apply(this,arguments)}}(),n.signTransaction=function(){var e=(0,c.default)((function*(e,t){var r=yield this.vault.getNetworkChainId(),n=(0,a.default)(e.inputs,1)[0],o=n.address,i=n.publicKey;("number"!==typeof e.nonce||e.nonce<=0)&&(e.nonce=yield this.vault.getNextNonce((yield this.vault.getNetwork()).id,yield this.getDbAccount()));var u=q(e,r),c=(0,a.default)(u,2),d=c[0],s=c[1],l=Z(s);(0,V.check)("undefined"!==typeof i,"senderPublicKey is required");var f=(yield this.getSigners(t.password||"",[o]))[o],p=yield f.sign(de.from(l)),y=(0,a.default)(p,1)[0];return Y(i,y,d)}));return function(t,r){return e.apply(this,arguments)}}(),n.prepareAccounts=function(){var e=(0,c.default)((function*(e){var t=e.password,r=e.indexes,n=e.names,o=(yield this.engine.dbApi.getCredential(this.walletId,t)).seed,i=(0,ue.batchGetPublicKeys)("ed25519",o,t,le,r.map((function(e){return`${e.toString()}'`})));if(i.length!==r.length)throw new x.OneKeyInternalError("Unable to get publick key.");var a=[],u=0;for(var c of i){var d=c.path,s=c.extendedKey.key.toString("hex"),l=yield Q(s),f=(n||[])[u]||`STC #${r[u]+1}`;a.push({id:`${this.walletId}--${d}`,name:f,type:k.AccountType.SIMPLE,path:d,coinType:g.COINTYPE_STC,pub:s,address:l}),u+=1}return a}));return function(t){return e.apply(this,arguments)}}(),(0,d.default)(r)}(ce.KeyringHdBase),pe=r(478557),ye=r(255942),he=r(348834).Buffer;function ve(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var we=function(e){(0,s.default)(r,e);var t=ve(r);function r(){return t.apply(this,arguments)}var n=r.prototype;return n.getSigners=function(){var e=(0,c.default)((function*(e,t){var r,n=yield this.getDbAccount();if(1!==t.length)throw new x.OneKeyInternalError("Starcoin signers number should be 1.");if(t[0]!==n.address)throw new x.OneKeyInternalError("Wrong address required for signing");var o=Object.values(yield this.getPrivateKeys(e)),i=(0,a.default)(o,1)[0];return(r={})[n.address]=new E.Signer(i,e,"ed25519"),r}));return function(t,r){return e.apply(this,arguments)}}(),n.signTransaction=function(){var e=(0,c.default)((function*(e,t){var r=yield this.vault.getNetworkChainId(),n=(0,a.default)(e.inputs,1)[0],o=n.address,i=n.publicKey;("number"!==typeof e.nonce||e.nonce<=0)&&(e.nonce=yield this.vault.getNextNonce((yield this.vault.getNetwork()).id,yield this.getDbAccount()));var u=q(e,r),c=(0,a.default)(u,2),d=c[0],s=c[1],l=Z(s);(0,V.check)("undefined"!==typeof i,"senderPublicKey is required");var f=(yield this.getSigners(t.password||"",[o]))[o],p=yield f.sign(he.from(l)),y=(0,a.default)(p,1)[0];return Y(i,y,d)}));return function(t,r){return e.apply(this,arguments)}}(),n.prepareAccounts=function(){var e=(0,c.default)((function*(e){var t=e.privateKey,r=e.name;if(32!==t.length)throw new x.OneKeyInternalError("Invalid private key.");var n=pe.ed25519.publicFromPrivate(t).toString("hex"),o=yield Q(n);return Promise.resolve([{id:`imported--${g.COINTYPE_STC}--${n}`,name:r||"",type:k.AccountType.SIMPLE,path:"",coinType:g.COINTYPE_STC,pub:n,address:o}])}));return function(t){return e.apply(this,arguments)}}(),(0,d.default)(r)}(ye.KeyringImportedBase);function ge(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var me=function(e){(0,s.default)(r,e);var t=ge(r);function r(){return t.apply(this,arguments)}return r.prototype.prepareAccounts=function(){var e=(0,c.default)((function*(e){var t=e.name,r=e.target,n=e.accountIdPrefix,o=X(r),i=o.normalizedAddress;if(!o.isValid||"undefined"===typeof i)throw new x.InvalidAddress;return Promise.resolve([{id:`${n}--${g.COINTYPE_STC}--${r}`,name:t||"",type:k.AccountType.SIMPLE,path:"",coinType:g.COINTYPE_STC,pub:"",address:i}])}));return function(t){return e.apply(this,arguments)}}(),(0,d.default)(r)}(r(701625).KeyringWatchingBase),Te=r(770797),Ie=["gasLimit"];function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ae(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var be="0x00000000000000000000000000000001::STC::STC",Pe=function(e){(0,s.default)(r,e);var t=Ae(r);function r(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).settings=Te.default,e.keyringMap={hd:fe,hw:ae,imported:we,watching:me,external:me},e.createClientFromURL=(0,T.memoizee)((function(e){return new H(e)}),{max:1,maxAge:(0,w.getTimeDurationMs)({minute:3})}),e}var o=r.prototype;return o.decodedTxToLegacy=function(e){var t,r=e.actions[0],n=r.type,o=r.nativeTransfer,i=r.tokenTransfer;if(n===A.IDecodedTxActionType.NATIVE_TRANSFER)t={txType:O.EVMDecodedTxType.NATIVE_TRANSFER,symbol:"UNKNOWN",amount:null==o?void 0:o.amount,value:null==o?void 0:o.amountValue,fromAddress:null==o?void 0:o.from,toAddress:null==o?void 0:o.to,data:"",total:"0"};else if(n===A.IDecodedTxActionType.UNKNOWN){var a;t={txType:O.EVMDecodedTxType.NATIVE_TRANSFER,symbol:"UNKNOWN",fromAddress:e.owner,data:null==(a=e.payload)?void 0:a.data,total:"0"}}else{if(n!==A.IDecodedTxActionType.TOKEN_TRANSFER)throw new x.OneKeyInternalError("Incorrect decodedTx.");var u;t={txType:O.EVMDecodedTxType.TOKEN_TRANSFER,symbol:null==i?void 0:i.tokenInfo.symbol,amount:null==i?void 0:i.amount,value:null==i?void 0:i.amountValue,fromAddress:null==i?void 0:i.from,toAddress:null==i?void 0:i.to,data:null==(u=e.payload)?void 0:u.data,total:"0"}}return Promise.resolve(t)},o.decodeTx=function(){var e=(0,c.default)((function*(e,t){var r,n=yield this.engine.getNetwork(this.networkId),o=yield this.getDbAccount(),i=yield this.engine.getNativeTokenInfo(this.networkId),u=e.data,c=null;if(e.to){var d={tokenInfo:i,from:e.from,to:e.to,amount:new(y())(e.value).shiftedBy(-i.decimals).toFixed(),amountValue:e.value,extraInfo:null};c={type:A.IDecodedTxActionType.NATIVE_TRANSFER,nativeTransfer:d}}else if(u){var s=function(e){var t=z(e);if(t.tokenAddress)return{type:"tokenTransfer",payload:t};var r,n="";try{var o=D.encoding.decodeTransactionPayload(e),i=Object.keys(o);r=o[n=(0,a.default)(i,1)[0]]}catch(u){m.default.common.error("Failed to decode transaction data.",u,e)}return{type:"other",payload:{name:n,params:r}}}(u);if("tokenTransfer"===s.type){var l,f=s.payload,p=f.tokenAddress,h=f.to,v=f.amountValue,w="nativeTransfer",g=A.IDecodedTxActionType.NATIVE_TRANSFER;if(p!==be){if("undefined"===typeof(i=yield this.engine.ensureTokenInDB(this.networkId,p)))throw new x.OneKeyInternalError("Failed to get token info.");w="tokenTransfer",g=A.IDecodedTxActionType.TOKEN_TRANSFER}var T=new(y())(v).shiftedBy(-i.decimals).toFixed();(l={type:g})[w]={tokenInfo:i,from:e.from,to:h,amount:T,amountValue:v,extraInfo:null},c=l}else c={type:A.IDecodedTxActionType.UNKNOWN,direction:A.IDecodedTxDirection.SELF,unknownAction:{extraInfo:{}}}}else c={type:A.IDecodedTxActionType.UNKNOWN,direction:A.IDecodedTxDirection.OTHER,unknownAction:{extraInfo:{}}};var I={txid:"",owner:o.address,signer:o.address,nonce:0,actions:[c],status:A.IDecodedTxStatus.Pending,networkId:this.networkId,accountId:this.accountId,feeInfo:{price:(0,b.convertFeeValueToGwei)({value:null!=(r=e.gasPrice)?r:"1",network:n}),limit:e.gasLimit},extraInfo:null,encodedTx:e,payload:{data:e.data}};return Promise.resolve(I)}));return function(t,r){return e.apply(this,arguments)}}(),o.buildEncodedTxFromTransfer=function(){var e=(0,c.default)((function*(e){if(!e.to)throw new Error("Invalid transferInfo.to params");var t=e.from,r=e.to,n=e.amount,o=e.token;if("undefined"!==typeof o&&o.length>0){var i=yield this.engine.ensureTokenInDB(this.networkId,o);if("undefined"===typeof i)throw new x.OneKeyInternalError("Failed to get token info.");return Promise.resolve({from:t,to:"",value:"",data:J(r,i,n)})}var a=yield this.getNetwork();return Promise.resolve({from:t,to:r,value:new(y())(n).shiftedBy(a.decimals).toFixed()})}));return function(t){return e.apply(this,arguments)}}(),o.buildEncodedTxFromApprove=function(){var e=(0,c.default)((function*(e){throw new x.NotImplemented}));return function(t){return e.apply(this,arguments)}}(),o.getJsonRPCClient=function(){var e=(0,c.default)((function*(){var e=yield this.getRpcUrl();return this.createClientFromURL(e)}));return function(){return e.apply(this,arguments)}}(),o.getTransactionStatuses=function(){var e=(0,c.default)((function*(e){return(yield this.getJsonRPCClient()).getTransactionStatuses(e)}));return function(t){return e.apply(this,arguments)}}(),o.getBalances=function(){var e=(0,c.default)((function*(e){var t=e.map((function(e){var t=e.address,r=e.tokenAddress;return{address:t,coin:Ee({},"string"===typeof r?{tokenAddress:r}:{})}}));return(yield this.getJsonRPCClient()).getBalances(t)}));return function(t){return e.apply(this,arguments)}}(),o.updateEncodedTxTokenApprove=function(e,t){throw new x.NotImplemented},o.updateEncodedTx=function(){var e=(0,c.default)((function*(e,t,r){if(r.type===A.IEncodedTxUpdateType.transfer){var n=yield this.getNetwork();e.value=new(y())(t.amount).shiftedBy(n.decimals).toFixed()}return Promise.resolve(e)}));return function(t,r,n){return e.apply(this,arguments)}}(),o.getNextNonce=function(){var e=(0,c.default)((function*(e,t){var r,n=yield this.getJsonRPCClient(),o=yield n.getAddresses([t.address]),u=(0,a.default)(o,1)[0],c=null!=(r=null==u?void 0:u.nonce)?r:0,d=yield I.default.history.getMaxPendingNonce({accountId:this.accountId,networkId:e}),s=yield I.default.history.getPendingNonceList({accountId:this.accountId,networkId:e}),l=Math.max(i()(d)?0:d+1,c);if(Number.isNaN(l)&&(l=c),l>c)for(var f=c;f<l;f+=1)if(!s.includes(f)){l=f;break}if(l<c&&(l=c),l-c>=g.HISTORY_CONSTS.PENDING_QUEUE_MAX_LENGTH)throw new x.PendingQueueTooLong(g.HISTORY_CONSTS.PENDING_QUEUE_MAX_LENGTH);return l}));return function(t,r){return e.apply(this,arguments)}}(),o.addressFromBase=function(){var e=(0,c.default)((function*(e){return this.validateAddress(e.address)}));return function(t){return e.apply(this,arguments)}}(),o.buildUnsignedTxFromEncodedTx=function(){var e=(0,c.default)((function*(e){var t=yield this.getDbAccount(),r=yield this.getNetwork(),n=yield this.getNetworkChainId(),o=new(y())(e.value),i=yield this.getJsonRPCClient(),a=e.nonce,u=new(y())(null!=a?a:"NaN"),c=u.isNaN()?yield this.getNextNonce(r.id,t):u.toNumber(),d=yield ee(Ee({inputs:[{address:t.address,value:o,publicKey:t.pub}],outputs:e.to?[{address:e.to,value:o}]:[],nonce:c,feePricePerUnit:new(y())(e.gasPrice||"1"),payload:Ee({},e.data?{data:e.data}:{})},"undefined"!==typeof e.gasLimit?{feeLimit:new(y())(e.gasLimit)}:{}),i,n);return m.default.sendTx.info("buildUnsignedTxFromEncodedTx >>>> buildUnsignedTx",d),Ee(Ee({},d),{},{encodedTx:e})}));return function(t){return e.apply(this,arguments)}}(),o.getFeePricePerUnit=function(){var e=(0,c.default)((function*(){return(yield this.getJsonRPCClient()).getFeePricePerUnit()}));return function(){return e.apply(this,arguments)}}(),o.fetchFeeInfo=function(){var e=(0,c.default)((function*(e){var t,r=Ee(Ee({},e),{},{gasPrice:"1"}),o=r.gasLimit,i=(0,n.default)(r,Ie),u=yield Promise.all([this.getNetwork(),this.engine.getGasInfo(this.networkId),this.buildUnsignedTxFromEncodedTx(i)]),c=(0,a.default)(u,3),d=c[0],s=c[1].prices,l=c[2],f=y().max(null!=(t=l.feeLimit)?t:"0",null!=o?o:"0").toFixed();if("0"===f){if(e.data)throw new x.OneKeyInternalError("","msg__broadcast_tx_Insufficient_fee");f="105547"}return{nativeSymbol:d.symbol,nativeDecimals:d.decimals,feeSymbol:d.feeSymbol,feeDecimals:d.feeDecimals,limit:f,prices:s,defaultPresetIndex:"0",extraInfo:Ee({},Object.keys(l.tokensChangedTo||{}).length?{tokensChangedTo:l.tokensChangedTo}:{})}}));return function(t){return e.apply(this,arguments)}}(),o.attachFeeInfoToEncodedTx=function(){var e=(0,c.default)((function*(e){var t=e.feeInfoValue,r=t.price,n=t.limit;if("undefined"!==typeof r&&"string"!==typeof r)throw new x.OneKeyInternalError("Invalid gas price.");if("string"!==typeof n)throw new x.OneKeyInternalError("Invalid fee limit");var o=yield this.getNetwork(),i=Ee(Ee({},e.encodedTx),{},{gasPrice:(0,b.convertFeeGweiToValue)({value:r||"0.000000001",network:o}),gasLimit:n});return Promise.resolve(i)}));return function(t){return e.apply(this,arguments)}}(),o.getExportedCredential=function(){var e=(0,c.default)((function*(e){var t=yield this.getDbAccount();if(t.id.startsWith("hd-")||t.id.startsWith("imported")){var r=this.keyring,n=Object.values(yield r.getPrivateKeys(e)),o=(0,a.default)(n,1)[0];return`0x${(0,v.decrypt)(e,o).toString("hex")}`}throw new x.OneKeyInternalError("Only credential of HD or imported accounts can be exported")}));return function(t){return e.apply(this,arguments)}}(),o.fetchOnChainHistory=function(){var e=(0,c.default)((function*(e){var t=this,r=e.localHistory,n=void 0===r?[]:r;if(e.tokenIdOnNetwork)return Promise.resolve([]);var o=yield this.getDbAccount(),i=(yield this.engine.getNetwork(this.networkId)).decimals,a=yield function(e,t){return G.apply(this,arguments)}(this.networkId,o.address),u=a.map(function(){var e=(0,c.default)((function*(e){var r=n.find((function(t){return t.decodedTx.txid===e.transaction_hash}));if(r&&r.decodedTx.isFinal)return Promise.resolve(null);try{var a=function(e){try{var t=z(e.user_transaction.raw_txn.payload),r=t.to,n=t.tokenAddress,o=t.amountValue;return{from:e.user_transaction.raw_txn.sender,to:r,tokenAddress:n,amountValue:o,feeValue:new(y())(e.user_transaction.raw_txn.gas_unit_price).times(e.gas_used).toFixed()}}catch(i){return m.default.common.error(i),null}}(e);if(a){var u,c=a.from,d=a.to,s=a.tokenAddress,l=a.amountValue,f=a.feeValue,p={from:c,to:"",value:"",data:e.user_transaction.raw_txn.payload},h={type:A.IDecodedTxActionType.UNKNOWN};if(l&&s){var v,w=A.IDecodedTxDirection.IN;c===o.address&&(w=d===o.address?A.IDecodedTxDirection.SELF:A.IDecodedTxDirection.OUT);var g=A.IDecodedTxActionType.NATIVE_TRANSFER,T=yield t.engine.getNativeTokenInfo(t.networkId),I="nativeTransfer";if(s===be)p.to=d,p.value=l;else if(g=A.IDecodedTxActionType.TOKEN_TRANSFER,I="tokenTransfer","undefined"===typeof(T=yield t.engine.ensureTokenInDB(t.networkId,s)))throw new x.OneKeyInternalError("Failed to get token info.");(v={type:g,direction:w})[I]={tokenInfo:T,from:c,to:d,amount:new(y())(l).shiftedBy(-T.decimals).toFixed(),amountValue:l,extraInfo:null},h=v}var E={txid:e.transaction_hash,owner:o.address,signer:c,nonce:0,actions:[h],status:"Executed"===e.status?A.IDecodedTxStatus.Confirmed:A.IDecodedTxStatus.Pending,networkId:t.networkId,accountId:t.accountId,encodedTx:p,extraInfo:null,totalFeeInNative:new(y())(f).shiftedBy(-i).toFixed()};return E.updatedAt=e.timestamp,E.createdAt=null!=(u=null==r?void 0:r.decodedTx.createdAt)?u:E.updatedAt,E.isFinal=E.status===A.IDecodedTxStatus.Confirmed,yield t.buildHistoryTx({decodedTx:E,historyTxToMerge:r})}}catch(b){m.default.common.error(b)}return Promise.resolve(null)}));return function(t){return e.apply(this,arguments)}}());return(yield Promise.all(u)).filter(Boolean)}));return function(t){return e.apply(this,arguments)}}(),o.proxyJsonRPCCall=function(){var e=(0,c.default)((function*(e){var t=yield this.getJsonRPCClient();try{return yield t.rpc.call(e.method,e.params)}catch(r){throw(0,E.extractResponseError)(r)}}));return function(t){return e.apply(this,arguments)}}(),o.fetchTokenInfos=function(){var e=(0,c.default)((function*(e){var t=yield this.getJsonRPCClient();try{return(yield t.rpc.batchCall(e.map((function(e){var t=e.split("::");return["state.get_resource",[(0,a.default)(t,1)[0],`0x1::Token::TokenInfo<${e}>`,{decode:!0}]]})))).map((function(t,r){var n=t.json.scaling_factor;try{var o=e[r].split("::"),i=(0,a.default)(o,3)[2];return{name:i,symbol:i,decimals:h.default.log10(n).toDP(0).toNumber()}}catch(u){return void m.default.common.error(u)}}))}catch(r){throw(0,E.extractResponseError)(r)}}));return function(t){return e.apply(this,arguments)}}(),o.validateTokenAddress=function(){var e=(0,c.default)((function*(e){var t=e.split("::"),r=(0,a.default)(t,3),n=r[0],o=r[1],i=r[2];if(o&&i)try{return`${yield this.validateAddress(n)}::${o}::${i}`}catch(u){}throw new x.InvalidTokenAddress}));return function(t){return e.apply(this,arguments)}}(),o.validateAddress=function(){var e=(0,c.default)((function*(e){var t=X(e),r=t.normalizedAddress;if(!t.isValid||!r)throw new x.InvalidAddress;return Promise.resolve(r)}));return function(t){return e.apply(this,arguments)}}(),o.validateWatchingCredential=function(){var e=(0,c.default)((function*(e){return Promise.resolve(this.settings.watchingAccountEnabled&&X(e).isValid)}));return function(t){return e.apply(this,arguments)}}(),o.broadcastTransaction=function(){var e=(0,c.default)((function*(e,t){m.default.engine.info("broadcastTransaction START:",{rawTx:e.rawTx});var r=yield this.getJsonRPCClient(),n=yield r.broadcastTransaction(e.rawTx);return m.default.engine.info("broadcastTransaction END:",{txid:n,rawTx:e.rawTx}),Ee(Ee({},e),{},{txid:n,encodedTx:e.encodedTx})}));return function(t,r){return e.apply(this,arguments)}}(),(0,d.default)(r)}(P.VaultBase)},565147:(e,t,r)=>{"use strict";r.r(t),r.d(t,{KeyringBase:()=>d,KeyringBaseMock:()=>s});var n=r(634795),o=r(887371),i=r(545754),a=r(411987),u=r(695058);function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,a.default)(this,r)}}var d=function(e){(0,i.default)(r,e);var t=c(r);function r(e){var r;return(r=t.call(this,e.options)).vault=e,r}return r.prototype.addressFromBase=function(){var e=(0,n.default)((function*(e){return this.vault.addressFromBase(e)}));return function(t){return e.apply(this,arguments)}}(),(0,o.default)(r)}(r(114540).VaultContext),s=function(e){(0,i.default)(r,e);var t=c(r);function r(){return t.apply(this,arguments)}return(0,o.default)(r)}(d)},82406:(e,t,r)=>{"use strict";r.r(t),r.d(t,{KeyringHardwareBase:()=>l});var n=r(634795),o=r(887371),i=r(545754),a=r(411987),u=r(695058),c=r(799075),d=r(814817);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,a.default)(this,r)}}var l=function(e){(0,i.default)(a,e);var t=s(a);function a(){return t.apply(this,arguments)}var u=a.prototype;return u.getHardwareInfo=function(){var e=(0,n.default)((function*(){var e,t,r,n=yield this.engine.getHWDeviceByWalletId(this.vault.walletId);return{connectId:null!=(e=null==n?void 0:n.mac)?e:"",deviceId:null!=(t=null==n?void 0:n.deviceId)?t:"",deviceType:null!=(r=null==n?void 0:n.deviceType)?r:""}}));return function(){return e.apply(this,arguments)}}(),u.getWalletPassphraseState=function(){var e=(0,n.default)((function*(){var e=yield this.engine.getWallet(this.vault.walletId);return{passphraseState:null==e?void 0:e.passphraseState,useEmptyPassphrase:!(0,d.isPassphraseWallet)(e)}}));return function(){return e.apply(this,arguments)}}(),u.getHardwareSDKInstance=function(){var e=(0,n.default)((function*(){var e,t,n,o,i;return null!=(i=yield null==(e=r.g)||null==(t=e.$backgroundApiProxy)||null==(n=t.backgroundApi)||null==(o=n.serviceHardware)||null==o.getSDKInstance?void 0:o.getSDKInstance())?i:c.HardwareSDK}));return function(){return e.apply(this,arguments)}}(),u.prepareAccountByAddressIndex=function(e){throw new Error("Method not implemented.")},(0,o.default)(a)}(r(565147).KeyringBase)},810887:(e,t,r)=>{"use strict";r.r(t),r.d(t,{KeyringHdBase:()=>y});var n=r(256666),o=r(634795),i=r(887371),a=r(545754),u=r(411987),c=r(695058),d=r(605851),s=r(940915);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}var y=function(e){(0,a.default)(r,e);var t=p(r);function r(){return t.apply(this,arguments)}var n=r.prototype;return n.getPrivateKeys=function(){var e=(0,o.default)((function*(e,t){var r=(yield this.getDbAccount()).path.split("/"),n=t||[r.pop()],o=r.join("/"),i=(yield this.engine.dbApi.getCredential(this.walletId,e)).seed;if("undefined"===typeof i)throw new s.OneKeyInternalError("Unable to get credential.");var a=(yield this.engine.providerManager.getChainInfoByNetworkId(this.networkId)).curve;return(0,d.batchGetPrivateKeys)(a,i,e,o,n).reduce((function(e,t){var r;return f(f({},e),{},((r={})[t.path]=t.extendedKey.key,r))}),{})}));return function(t,r){return e.apply(this,arguments)}}(),n.getAddress=function(){throw new Error("Method not implemented.")},n.batchGetAddress=function(){throw new Error("Method not implemented.")},n.prepareAccountByAddressIndex=function(e){throw new Error("Method not implemented.")},(0,i.default)(r)}(r(280306).KeyringSoftwareBase)},255942:(e,t,r)=>{"use strict";r.r(t),r.d(t,{KeyringImportedBase:()=>s});var n=r(634795),o=r(887371),i=r(545754),a=r(411987),u=r(695058),c=r(940915);function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,a.default)(this,r)}}var s=function(e){(0,i.default)(r,e);var t=d(r);function r(){return t.apply(this,arguments)}var a=r.prototype;return a.getPrivateKeys=function(){var e=(0,n.default)((function*(e,t){if("undefined"!==typeof t)throw new c.NotImplemented("Getting private keys from extended private key");var r=(yield this.engine.dbApi.getCredential(this.accountId,e)).privateKey;if("undefined"===typeof r)throw new c.OneKeyInternalError("Unable to get credential.");return{"":r}}));return function(t,r){return e.apply(this,arguments)}}(),a.getAddress=function(){throw new Error("Method not implemented.")},a.batchGetAddress=function(){throw new Error("Method not implemented.")},a.prepareAccountByAddressIndex=function(){throw new Error("Method not implemented.")},(0,o.default)(r)}(r(280306).KeyringSoftwareBase)},280306:(e,t,r)=>{"use strict";r.r(t),r.d(t,{KeyringSoftwareBase:()=>h});var n=r(196234),o=r(256666),i=r(634795),a=r(887371),u=r(545754),c=r(411987),d=r(695058),s=r(292147),l=r(940915);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var h=function(e){(0,u.default)(r,e);var t=y(r);function r(){return t.apply(this,arguments)}var o=r.prototype;return o.signTransaction=function(){var e=(0,i.default)((function*(e,t){var r=t.password;if("undefined"===typeof r)throw new l.OneKeyInternalError("Software signing requires a password.");var n=yield this.getSigners(r,e.inputs.map((function(e){return e.address})));return s.default.engine.info("signTransaction",this.networkId,e),p(p({},yield this.engine.providerManager.signTransaction(this.networkId,e,n)),{},{encodedTx:e.encodedTx})}));return function(t,r){return e.apply(this,arguments)}}(),o.signMessage=function(){var e=(0,i.default)((function*(e,t){var r=this,o=t.password;if("undefined"===typeof o)throw new l.OneKeyInternalError("Software signing requires a password.");var i=yield this.getDbAccount(),a=Object.values(yield this.getSigners(o,[i.address])),u=(0,n.default)(a,1)[0];return s.default.engine.info("signMessage",this.networkId,e),Promise.all(e.map((function(e){return r.engine.providerManager.signMessage(r.networkId,e,u)})))}));return function(t,r){return e.apply(this,arguments)}}(),o.getAddress=function(){throw new Error("Method not implemented.")},o.batchGetAddress=function(){throw new Error("Method not implemented.")},o.prepareAccountByAddressIndex=function(e){throw new Error("Method not implemented.")},(0,a.default)(r)}(r(565147).KeyringBase)},701625:(e,t,r)=>{"use strict";r.r(t),r.d(t,{KeyringWatchingBase:()=>s});var n=r(634795),o=r(887371),i=r(545754),a=r(411987),u=r(695058),c=r(940915);function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,a.default)(this,r)}}var s=function(e){(0,i.default)(r,e);var t=d(r);function r(){return t.apply(this,arguments)}var a=r.prototype;return a.signTransaction=function(){var e=(0,n.default)((function*(e,t){throw new c.OneKeyInternalError("signTransaction is not supported for watching accounts")}));return function(t,r){return e.apply(this,arguments)}}(),a.signMessage=function(){var e=(0,n.default)((function*(e,t){throw new c.OneKeyInternalError("signMessage is not supported for watching accounts")}));return function(t,r){return e.apply(this,arguments)}}(),a.getAddress=function(){throw new Error("Method not implemented.")},a.batchGetAddress=function(){throw new Error("Method not implemented.")},a.prepareAccountByAddressIndex=function(){throw new Error("Method not implemented.")},(0,o.default)(r)}(r(565147).KeyringBase)},153546:(e,t,r)=>{"use strict";r.r(t),r.d(t,{convertDeviceError:()=>u});var n=r(703599),o=r(302478),i=r(292147);r(213208);function a(e,t){return"string"!==typeof t?null:e===n.HardwareErrorCode.DeviceInitializeFailed&&t.includes("ECONNABORTED")?new o.ConnectTimeoutError({message:t}):t.includes("Bridge network error")?new o.BridgeNetworkError({message:t}):null}function u(e){var t,r=e||{},u=r.code,c=r.error,d=r.message,s=null!=(t=null!=c?c:d)?t:"Unknown error";if(a(u,s))return a(u,s);switch(i.default.hardwareSDK.info("Device Utils Convert Device Error:",u,s),u){case n.HardwareErrorCode.UnknownError:return new o.UnknownHardwareError(e);case n.HardwareErrorCode.DeviceFwException:return new o.FirmwareVersionTooLow(e);case n.HardwareErrorCode.DeviceUnexpectedMode:return"string"===typeof s&&-1!==s.indexOf("ui-device_bootloader_mode")?new o.NotInBootLoaderMode(e):new o.UnknownHardwareError(e);case n.HardwareErrorCode.DeviceCheckDeviceIdError:return new o.DeviceNotSame(e);case n.HardwareErrorCode.DeviceNotFound:return new o.DeviceNotFind(e);case n.HardwareErrorCode.DeviceUnexpectedBootloaderMode:return new o.NotInBootLoaderMode(e);case n.HardwareErrorCode.DeviceInterruptedFromOutside:case n.HardwareErrorCode.DeviceInterruptedFromUser:return new o.UserCancelFromOutside(e);case n.HardwareErrorCode.DeviceNotSupportPassphrase:return new o.NotSupportPassphraseError(e);case n.HardwareErrorCode.IFrameLoadFail:return new o.InitIframeLoadFail(e);case n.HardwareErrorCode.IframeTimeout:return new o.InitIframeTimeout(e);case n.HardwareErrorCode.FirmwareUpdateDownloadFailed:return new o.FirmwareDownloadFailed(e);case n.HardwareErrorCode.FirmwareUpdateManuallyEnterBoot:return new o.FirmwareUpdateManuallyEnterBoot(e);case n.HardwareErrorCode.FirmwareUpdateAutoEnterBootFailure:return new o.FirmwareUpdateAutoEnterBootFailure(e);case n.HardwareErrorCode.FirmwareUpdateLimitOneDevice:return new o.FirmwareUpdateLimitOneDevice(e);case n.HardwareErrorCode.CallMethodNeedUpgradeFirmware:return new o.FirmwareVersionTooLow(e);case n.HardwareErrorCode.NewFirmwareUnRelease:return new o.NewFirmwareUnRelease(e);case n.HardwareErrorCode.NewFirmwareForceUpdate:return new o.NewFirmwareForceUpdate(e);case n.HardwareErrorCode.NetworkError:return new o.NetworkError(e);case n.HardwareErrorCode.BlePermissionError:return new o.NeedBluetoothTurnedOn(e);case n.HardwareErrorCode.BleLocationError:return new o.NeedBluetoothPermissions({message:s});case n.HardwareErrorCode.BleLocationServicesDisabled:return new o.BleLocationServiceError({message:s});case n.HardwareErrorCode.BleDeviceNotBonded:return new o.DeviceNotBonded(e);case n.HardwareErrorCode.BleDeviceBondError:return new o.DeviceBondError(e);case n.HardwareErrorCode.BleWriteCharacteristicError:return new o.BleWriteCharacteristicError(e);case n.HardwareErrorCode.BleScanError:return new o.BleScanError({message:s});case n.HardwareErrorCode.BleAlreadyConnected:return new o.BleAlreadyConnectedError(e);case n.HardwareErrorCode.RuntimeError:return-1!==s.indexOf("EIP712 blind sign is disabled")?new o.OpenBlindSign(e):-1!==s.indexOf("Unknown message")||-1!==s.indexOf("Failure_UnexpectedMessage")?new o.UnknownMethod(e):new o.UnknownHardwareError(e);case n.HardwareErrorCode.PinInvalid:return new o.InvalidPIN(e);case n.HardwareErrorCode.DeviceCheckPassphraseStateError:return new o.InvalidPassphrase(e);case n.HardwareErrorCode.DeviceOpenedPassphrase:return new o.DeviceOpenedPassphrase(e);case n.HardwareErrorCode.DeviceNotOpenedPassphrase:return new o.DeviceNotOpenedPassphrase(e);case n.HardwareErrorCode.PinCancelled:case n.HardwareErrorCode.ActionCancelled:return new o.UserCancel(e);case n.HardwareErrorCode.BridgeNotInstalled:case o.CustomOneKeyHardwareError.NeedOneKeyBridge:return new o.NeedOneKeyBridge(e);case n.HardwareErrorCode.BridgeNetworkError:return new o.BridgeNetworkError(e);case n.HardwareErrorCode.BridgeTimeoutError:return new o.BridgeTimeoutError(e);case n.HardwareErrorCode.PollingTimeout:return new o.ConnectTimeoutError(e);case n.HardwareErrorCode.PollingStop:return new o.ConnectPollingStopError(e);case n.HardwareErrorCode.BlindSignDisabled:return new o.OpenBlindSign(e);case n.HardwareErrorCode.FileAlreadyExists:return new o.FileAlreadyExistError(e);case n.HardwareErrorCode.CheckDownloadFileError:return new o.IncompleteFileError(e);case n.HardwareErrorCode.NotInSigningMode:return new o.NotInSigningModeError(e);case n.HardwareErrorCode.DataOverload:return new o.DeviceDataOverload(e);default:return new o.UnknownHardwareError(e)}}},314851:()=>{}}]);