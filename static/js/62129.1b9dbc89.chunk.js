/*! For license information please see 62129.1b9dbc89.chunk.js.LICENSE.txt */
(self.webpackChunkweb=self.webpackChunkweb||[]).push([[62129],{628505:(t,e,r)=>{var i=r(344075),n=r(249857),s=r(348834).Buffer,o={Legacy:"legacy",Bitpay:"bitpay",Cashaddr:"cashaddr"},u={Mainnet:"mainnet",Testnet:"testnet"},a={};function h(t){return l(t).format}function p(t){return l(t).network}function c(t){return l(t).type}a.P2PKH="p2pkh",a.P2SH="p2sh";var f={};function l(t){try{return function(t){try{var e=i.decode(t);if(e.length!==d)throw new w;var r=e[0],n=Array.prototype.slice.call(e,1);switch(r){case f[o.Legacy][u.Mainnet][a.P2PKH]:return{hash:n,format:o.Legacy,network:u.Mainnet,type:a.P2PKH};case f[o.Legacy][u.Mainnet][a.P2SH]:return{hash:n,format:o.Legacy,network:u.Mainnet,type:a.P2SH};case f[o.Legacy][u.Testnet][a.P2PKH]:return{hash:n,format:o.Legacy,network:u.Testnet,type:a.P2PKH};case f[o.Legacy][u.Testnet][a.P2SH]:return{hash:n,format:o.Legacy,network:u.Testnet,type:a.P2SH};case f[o.Bitpay][u.Mainnet][a.P2PKH]:return{hash:n,format:o.Bitpay,network:u.Mainnet,type:a.P2PKH};case f[o.Bitpay][u.Mainnet][a.P2SH]:return{hash:n,format:o.Bitpay,network:u.Mainnet,type:a.P2SH}}}catch(s){}throw new w}(t)}catch(e){}try{return function(t){if(-1!==t.indexOf(":"))try{return m(t)}catch(e){}else for(var r=["bitcoincash","bchtest","bchreg"],i=0;i<r.length;++i)try{return m(r[i]+":"+t)}catch(e){}throw new w}(t)}catch(e){}throw new w}f[o.Legacy]={},f[o.Legacy][u.Mainnet]={},f[o.Legacy][u.Mainnet][a.P2PKH]=0,f[o.Legacy][u.Mainnet][a.P2SH]=5,f[o.Legacy][u.Testnet]={},f[o.Legacy][u.Testnet][a.P2PKH]=111,f[o.Legacy][u.Testnet][a.P2SH]=196,f[o.Bitpay]={},f[o.Bitpay][u.Mainnet]={},f[o.Bitpay][u.Mainnet][a.P2PKH]=28,f[o.Bitpay][u.Mainnet][a.P2SH]=40,f[o.Bitpay][u.Testnet]={},f[o.Bitpay][u.Testnet][a.P2PKH]=111,f[o.Bitpay][u.Testnet][a.P2SH]=196;var d=21;function m(t){try{var e=n.decode(t),r=Array.prototype.slice.call(e.hash,0),i="P2PKH"===e.type?a.P2PKH:a.P2SH;switch(e.prefix){case"bitcoincash":return{hash:r,format:o.Cashaddr,network:u.Mainnet,type:i};case"bchtest":case"bchreg":return{hash:r,format:o.Cashaddr,network:u.Testnet,type:i}}}catch(s){}throw new w}function w(){var t=new Error;this.name=t.name="InvalidAddressError",this.message=t.message="Received an invalid Bitcoin Cash address as input.",this.stack=t.stack}w.prototype=Object.create(Error.prototype),t.exports={Format:o,Network:u,Type:a,isValidAddress:function(t){try{return l(t),!0}catch(e){return!1}},detectAddressFormat:h,detectAddressNetwork:p,detectAddressType:c,toLegacyAddress:function(t){var e=l(t);return e.format===o.Legacy?t:function(t){var e=f[o.Legacy][t.network][t.type],r=s.alloc(1+t.hash.length);return r[0]=e,r.set(t.hash,1),i.encode(r)}(e)},toBitpayAddress:function(t){var e=l(t);return e.format===o.Bitpay?t:function(t){var e=f[o.Bitpay][t.network][t.type],r=s.alloc(1+t.hash.length);return r[0]=e,r.set(t.hash,1),i.encode(r)}(e)},toCashAddress:function(t){return function(t){var e=t.network===u.Mainnet?"bitcoincash":"bchtest",r=t.type===a.P2PKH?"P2PKH":"P2SH",i=new Uint8Array(t.hash);return n.encode(e,r,i)}(l(t))},isLegacyAddress:function(t){return h(t)===o.Legacy},isBitpayAddress:function(t){return h(t)===o.Bitpay},isCashAddress:function(t){return h(t)===o.Cashaddr},isMainnetAddress:function(t){return p(t)===u.Mainnet},isTestnetAddress:function(t){return p(t)===u.Testnet},isP2PKHAddress:function(t){return c(t)===a.P2PKH},isP2SHAddress:function(t){return c(t)===a.P2SH},InvalidAddressError:w}},927401:(t,e,r)=>{var i=r(80196),n={};for(var s in i){n[i[s]]=s}t.exports=n},987967:t=>{"use strict";for(var e="qpzry9x8gf2tvdw0s3jn54khce6mua7l",r={},i=0;i<32;i++){var n=e.charAt(i);if(void 0!==r[n])throw new TypeError(n+" is ambiguous");r[n]=i}function s(t){var e=t>>25;return(33554431&t)<<5^996825010&-(e>>0&1)^642813549&-(e>>1&1)^513874426&-(e>>2&1)^1027748829&-(e>>3&1)^705979059&-(e>>4&1)}function o(t){for(var e=1,r=0;r<t.length;++r){var i=t.charCodeAt(r);if(i<33||i>126)return"Invalid prefix ("+t+")";e=s(e)^i>>5}for(e=s(e),r=0;r<t.length;++r){var n=t.charCodeAt(r);e=s(e)^31&n}return e}function u(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var i=t.toLowerCase(),n=t.toUpperCase();if(t!==i&&t!==n)return"Mixed-case string "+t;var u=(t=i).lastIndexOf("1");if(-1===u)return"No separator character for "+t;if(0===u)return"Missing prefix for "+t;var a=t.slice(0,u),h=t.slice(u+1);if(h.length<6)return"Data too short";var p=o(a);if("string"===typeof p)return p;for(var c=[],f=0;f<h.length;++f){var l=h.charAt(f),d=r[l];if(void 0===d)return"Unknown character "+l;p=s(p)^d,f+6>=h.length||c.push(d)}return 1!==p?"Invalid checksum for "+t:{prefix:a,words:c}}function a(t,e,r,i){for(var n=0,s=0,o=(1<<r)-1,u=[],a=0;a<t.length;++a)for(n=n<<e|t[a],s+=e;s>=r;)s-=r,u.push(n>>s&o);if(i)s>0&&u.push(n<<r-s&o);else{if(s>=e)return"Excess padding";if(n<<r-s&o)return"Non-zero padding"}return u}t.exports={decodeUnsafe:function(){var t=u.apply(null,arguments);if("object"===typeof t)return t},decode:function(t){var e=u.apply(null,arguments);if("object"===typeof e)return e;throw new Error(e)},encode:function(t,r,i){if(i=i||90,t.length+7+r.length>i)throw new TypeError("Exceeds length limit");var n=o(t=t.toLowerCase());if("string"===typeof n)throw new Error(n);for(var u=t+"1",a=0;a<r.length;++a){var h=r[a];if(h>>5!==0)throw new Error("Non 5-bit word");n=s(n)^h,u+=e.charAt(h)}for(a=0;a<6;++a)n=s(n);for(n^=1,a=0;a<6;++a){u+=e.charAt(n>>5*(5-a)&31)}return u},toWordsUnsafe:function(t){var e=a(t,8,5,!0);if(Array.isArray(e))return e},toWords:function(t){var e=a(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)},fromWordsUnsafe:function(t){var e=a(t,5,8,!1);if(Array.isArray(e))return e},fromWords:function(t){var e=a(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}}},508445:(t,e,r)=>{"use strict";var i=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(204442),s=r(344075),o=r(490701),u=r(619031),a=r(621384),h=u.BufferN(32),p=u.compile({wif:u.UInt8,bip32:{public:u.UInt32,private:u.UInt32}}),c={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},f=2147483648,l=Math.pow(2,31)-1;function d(t){return u.String(t)&&null!==t.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}function m(t){return u.UInt32(t)&&t<=l}class w{constructor(t,e,r,i,n=0,s=0,o=0){this.__D=t,this.__Q=e,this.chainCode=r,this.network=i,this.__DEPTH=n,this.__INDEX=s,this.__PARENT_FINGERPRINT=o,u(p,i),this.lowR=!1}get depth(){return this.__DEPTH}get index(){return this.__INDEX}get parentFingerprint(){return this.__PARENT_FINGERPRINT}get publicKey(){return void 0===this.__Q&&(this.__Q=o.pointFromScalar(this.__D,!0)),this.__Q}get privateKey(){return this.__D}get identifier(){return n.hash160(this.publicKey)}get fingerprint(){return this.identifier.slice(0,4)}get compressed(){return!0}isNeutered(){return void 0===this.__D}neutered(){return v(this.publicKey,this.chainCode,this.network,this.depth,this.index,this.parentFingerprint)}toBase58(){const t=this.network,e=this.isNeutered()?t.bip32.public:t.bip32.private,r=i.allocUnsafe(78);return r.writeUInt32BE(e,0),r.writeUInt8(this.depth,4),r.writeUInt32BE(this.parentFingerprint,5),r.writeUInt32BE(this.index,9),this.chainCode.copy(r,13),this.isNeutered()?this.publicKey.copy(r,45):(r.writeUInt8(0,45),this.privateKey.copy(r,46)),s.encode(r)}toWIF(){if(!this.privateKey)throw new TypeError("Missing private key");return a.encode(this.network.wif,this.privateKey,!0)}derive(t){u(u.UInt32,t);const e=t>=f,r=i.allocUnsafe(37);if(e){if(this.isNeutered())throw new TypeError("Missing private key for hardened child key");r[0]=0,this.privateKey.copy(r,1),r.writeUInt32BE(t,33)}else this.publicKey.copy(r,0),r.writeUInt32BE(t,33);const s=n.hmacSHA512(this.chainCode,r),a=s.slice(0,32),h=s.slice(32);if(!o.isPrivate(a))return this.derive(t+1);let p;if(this.isNeutered()){const e=o.pointAddScalar(this.publicKey,a,!0);if(null===e)return this.derive(t+1);p=v(e,h,this.network,this.depth+1,t,this.fingerprint.readUInt32BE(0))}else{const e=o.privateAdd(this.privateKey,a);if(null==e)return this.derive(t+1);p=y(e,h,this.network,this.depth+1,t,this.fingerprint.readUInt32BE(0))}return p}deriveHardened(t){return u(m,t),this.derive(t+f)}derivePath(t){u(d,t);let e=t.split("/");if("m"===e[0]){if(this.parentFingerprint)throw new TypeError("Expected master, got child");e=e.slice(1)}return e.reduce(((t,e)=>{let r;return"'"===e.slice(-1)?(r=parseInt(e.slice(0,-1),10),t.deriveHardened(r)):(r=parseInt(e,10),t.derive(r))}),this)}sign(t,e){if(!this.privateKey)throw new Error("Missing private key");if(void 0===e&&(e=this.lowR),!1===e)return o.sign(t,this.privateKey);{let e=o.sign(t,this.privateKey);const r=i.alloc(32,0);let n=0;for(;e[0]>127;)n++,r.writeUIntLE(n,0,6),e=o.signWithEntropy(t,this.privateKey,r);return e}}verify(t,e){return o.verify(t,this.publicKey,e)}}function g(t,e,r){return y(t,e,r)}function y(t,e,r,i,n,s){if(u({privateKey:h,chainCode:h},{privateKey:t,chainCode:e}),r=r||c,!o.isPrivate(t))throw new TypeError("Private key not in range [1, n)");return new w(t,void 0,e,r,i,n,s)}function v(t,e,r,i,n,s){if(u({publicKey:u.BufferN(33),chainCode:h},{publicKey:t,chainCode:e}),r=r||c,!o.isPoint(t))throw new TypeError("Point is not on the curve");return new w(void 0,t,e,r,i,n,s)}e.fromBase58=function(t,e){const r=s.decode(t);if(78!==r.length)throw new TypeError("Invalid buffer length");e=e||c;const i=r.readUInt32BE(0);if(i!==e.bip32.private&&i!==e.bip32.public)throw new TypeError("Invalid network version");const n=r[4],o=r.readUInt32BE(5);if(0===n&&0!==o)throw new TypeError("Invalid parent fingerprint");const u=r.readUInt32BE(9);if(0===n&&0!==u)throw new TypeError("Invalid index");const a=r.slice(13,45);let h;if(i===e.bip32.private){if(0!==r.readUInt8(45))throw new TypeError("Invalid private key");h=y(r.slice(46,78),a,e,n,u,o)}else{h=v(r.slice(45,78),a,e,n,u,o)}return h},e.fromPrivateKey=g,e.fromPublicKey=function(t,e,r){return v(t,e,r)},e.fromSeed=function(t,e){if(u(u.Buffer,t),t.length<16)throw new TypeError("Seed should be at least 128 bits");if(t.length>64)throw new TypeError("Seed should be at most 512 bits");e=e||c;const r=n.hmacSHA512(i.from("Bitcoin seed","utf8"),t);return g(r.slice(0,32),r.slice(32),e)}},204442:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(616162),n=r(550011);e.hash160=function(t){const e=i("sha256").update(t).digest();try{return i("rmd160").update(e).digest()}catch(r){return i("ripemd160").update(e).digest()}},e.hmacSHA512=function(t,e){return n("sha512",t).update(e).digest()}},696058:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(508445);e.fromSeed=i.fromSeed,e.fromBase58=i.fromBase58,e.fromPublicKey=i.fromPublicKey,e.fromPrivateKey=i.fromPrivateKey},828976:(t,e,r)=>{"use strict";var i=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(48078),s=r(983018),o=r(356377),u=r(251469),a=r(54911),h=r(987967),p=r(344075),c=r(619031);function f(t){if(n.VALID_PREFIXES.indexOf(t.split(":")[0])>-1){const e=n.decode(t);let r,o;switch(e.prefix){case"bitcoincash":r=s.bitcoin;break;case"bchtest":r=s.testnet;break;case"bchreg":r=s.regtest}switch(e.type){case"P2PKH":o=r.pubKeyHash;break;case"P2SH":o=r.scriptHash}if(e.hash.length<20)throw new TypeError(t+" is too short");if(e.hash.length>20)throw new TypeError(t+" is too long");return{version:o,hash:i.from(e.hash)}}{const e=p.decode(t);if(e.length<21)throw new TypeError(t+" is too short");if(e.length>21)throw new TypeError(t+" is too long");return{version:e.readUInt8(0),hash:e.slice(1)}}}function l(t){const e=h.decode(t),r=h.fromWords(e.words.slice(1));return{version:e.words[0],prefix:e.prefix,data:i.from(r)}}e.fromBase58Check=f,e.fromBech32=l,e.toBase58Check=function(t,e){c(a.tuple(a.Hash160bit,a.UInt8),arguments);const r=i.allocUnsafe(21);return r.writeUInt8(e,0),t.copy(r,1),p.encode(r)},e.toBech32=function(t,e,r){const i=h.toWords(t);return i.unshift(e),h.encode(r,i)},e.fromOutputScript=function(t,e){e=e||s.bitcoin;try{return o.p2pkh({output:t,network:e}).address}catch(r){}try{return o.p2sh({output:t,network:e}).address}catch(r){}try{return o.p2wpkh({output:t,network:e}).address}catch(r){}try{return o.p2wsh({output:t,network:e}).address}catch(r){}throw new Error(u.toASM(t)+" has no matching Address")},e.toOutputScript=function(t,e){let r,i;e=e||s.bitcoin;try{r=f(t)}catch(n){}if(r){if(r.version===e.pubKeyHash)return o.p2pkh({hash:r.hash}).output;if(r.version===e.scriptHash)return o.p2sh({hash:r.hash}).output}else{try{i=l(t)}catch(n){}if(i){if(i.prefix!==e.bech32)throw new Error(t+" has an invalid prefix");if(0===i.version){if(20===i.data.length)return o.p2wpkh({hash:i.data}).output;if(32===i.data.length)return o.p2wsh({hash:i.data}).output}}}throw new Error(t+" has no matching Script")}},319783:(t,e,r)=>{"use strict";var i=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(209068),s=r(502590),o=r(197934),u=r(54911),a=r(207332),h=r(619031),p=r(208595),c=new TypeError("Cannot compute merkle root for zero transactions"),f=new TypeError("Cannot compute witness commit for non-segwit block");class l{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(t){if(t.length<80)throw new Error("Buffer too small (< 80 bytes)");const e=new n.BufferReader(t),r=new l;if(r.version=e.readInt32(),r.prevHash=e.readSlice(32),r.merkleRoot=e.readSlice(32),r.timestamp=e.readUInt32(),r.bits=e.readUInt32(),r.nonce=e.readUInt32(),80===t.length)return r;const i=()=>{const t=o.Transaction.fromBuffer(e.buffer.slice(e.offset),!0);return e.offset+=t.byteLength(),t},s=e.readVarInt();r.transactions=[];for(let n=0;n<s;++n){const t=i();r.transactions.push(t)}const u=r.getWitnessCommit();return u&&(r.witnessCommit=u),r}static fromHex(t){return l.fromBuffer(i.from(t,"hex"))}static calculateTarget(t){const e=((4278190080&t)>>24)-3,r=8388607&t,n=i.alloc(32,0);return n.writeUIntBE(r,29-e,3),n}static calculateMerkleRoot(t,e){if(h([{getHash:u.Function}],t),0===t.length)throw c;if(e&&!d(t))throw f;const r=t.map((t=>t.getHash(e))),n=a(r,s.hash256);return e?s.hash256(i.concat([n,t[0].ins[0].witness[0]])):n}getWitnessCommit(){if(!d(this.transactions))return null;const t=this.transactions[0].outs.filter((t=>t.script.slice(0,6).equals(i.from("6a24aa21a9ed","hex")))).map((t=>t.script.slice(6,38)));if(0===t.length)return null;const e=t[t.length-1];return e instanceof i&&32===e.length?e:null}hasWitnessCommit(){return this.witnessCommit instanceof i&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}hasWitness(){return(t=this.transactions)instanceof Array&&t.some((t=>"object"===typeof t&&t.ins instanceof Array&&t.ins.some((t=>"object"===typeof t&&t.witness instanceof Array&&t.witness.length>0))));var t}weight(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}byteLength(t,e=!0){return t||!this.transactions?80:80+p.encodingLength(this.transactions.length)+this.transactions.reduce(((t,r)=>t+r.byteLength(e)),0)}getHash(){return s.hash256(this.toBuffer(!0))}getId(){return n.reverseBuffer(this.getHash()).toString("hex")}getUTCDate(){const t=new Date(0);return t.setUTCSeconds(this.timestamp),t}toBuffer(t){const e=i.allocUnsafe(this.byteLength(t)),r=new n.BufferWriter(e);return r.writeInt32(this.version),r.writeSlice(this.prevHash),r.writeSlice(this.merkleRoot),r.writeUInt32(this.timestamp),r.writeUInt32(this.bits),r.writeUInt32(this.nonce),t||!this.transactions||(p.encode(this.transactions.length,e,r.offset),r.offset+=p.encode.bytes,this.transactions.forEach((t=>{const i=t.byteLength();t.toBuffer(e,r.offset),r.offset+=i}))),e}toHex(t){return this.toBuffer(t).toString("hex")}checkTxRoots(){const t=this.hasWitnessCommit();return!(!t&&this.hasWitness())&&(this.__checkMerkleRoot()&&(!t||this.__checkWitnessCommit()))}checkProofOfWork(){const t=n.reverseBuffer(this.getHash()),e=l.calculateTarget(this.bits);return t.compare(e)<=0}__checkMerkleRoot(){if(!this.transactions)throw c;const t=l.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(t)}__checkWitnessCommit(){if(!this.transactions)throw c;if(!this.hasWitnessCommit())throw f;const t=l.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(t)}}function d(t){return t instanceof Array&&t[0]&&t[0].ins&&t[0].ins instanceof Array&&t[0].ins[0]&&t[0].ins[0].witness&&t[0].ins[0].witness instanceof Array&&t[0].ins[0].witness.length>0}e.Block=l},209068:(t,e,r)=>{"use strict";var i=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(54911),s=r(619031),o=r(208595);function u(t,e){if("number"!==typeof t)throw new Error("cannot write a non-number as a number");if(t<0)throw new Error("specified a negative value for writing an unsigned value");if(t>e)throw new Error("RangeError: value out of range");if(Math.floor(t)!==t)throw new Error("value has a fractional component")}function a(t,e){const r=t.readUInt32LE(e);let i=t.readUInt32LE(e+4);return i*=4294967296,u(i+r,9007199254740991),i+r}function h(t,e,r){return u(e,9007199254740991),t.writeInt32LE(-1&e,r),t.writeUInt32LE(Math.floor(e/4294967296),r+4),r+8}e.readUInt64LE=a,e.writeUInt64LE=h,e.reverseBuffer=function(t){if(t.length<1)return t;let e=t.length-1,r=0;for(let i=0;i<t.length/2;i++)r=t[i],t[i]=t[e],t[e]=r,e--;return t},e.cloneBuffer=function(t){const e=i.allocUnsafe(t.length);return t.copy(e),e};e.BufferWriter=class{constructor(t,e=0){this.buffer=t,this.offset=e,s(n.tuple(n.Buffer,n.UInt32),[t,e])}writeUInt8(t){this.offset=this.buffer.writeUInt8(t,this.offset)}writeInt32(t){this.offset=this.buffer.writeInt32LE(t,this.offset)}writeUInt32(t){this.offset=this.buffer.writeUInt32LE(t,this.offset)}writeUInt64(t){this.offset=h(this.buffer,t,this.offset)}writeVarInt(t){o.encode(t,this.buffer,this.offset),this.offset+=o.encode.bytes}writeSlice(t){if(this.buffer.length<this.offset+t.length)throw new Error("Cannot write slice out of bounds");this.offset+=t.copy(this.buffer,this.offset)}writeVarSlice(t){this.writeVarInt(t.length),this.writeSlice(t)}writeVector(t){this.writeVarInt(t.length),t.forEach((t=>this.writeVarSlice(t)))}};e.BufferReader=class{constructor(t,e=0){this.buffer=t,this.offset=e,s(n.tuple(n.Buffer,n.UInt32),[t,e])}readUInt8(){const t=this.buffer.readUInt8(this.offset);return this.offset++,t}readInt32(){const t=this.buffer.readInt32LE(this.offset);return this.offset+=4,t}readUInt32(){const t=this.buffer.readUInt32LE(this.offset);return this.offset+=4,t}readUInt64(){const t=a(this.buffer,this.offset);return this.offset+=8,t}readVarInt(){const t=o.decode(this.buffer,this.offset);return this.offset+=o.decode.bytes,t}readSlice(t){if(this.buffer.length<this.offset+t)throw new Error("Cannot read slice out of bounds");const e=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){const t=this.readVarInt(),e=[];for(let r=0;r<t;r++)e.push(this.readVarSlice());return e}}},535158:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(92219),n={q:0,p:1,z:2,r:3,y:4,9:5,x:6,8:7,g:8,f:9,2:10,t:11,v:12,d:13,w:14,0:15,s:16,3:17,j:18,n:19,5:20,4:21,k:22,h:23,c:24,e:25,6:26,m:27,u:28,a:29,7:30,l:31};e.encode=function(t){i.validate(t instanceof Uint8Array,"Invalid data: "+t+".");let e="";for(const r of t)i.validate(0<=r&&r<32,"Invalid value: "+r+"."),e+="qpzry9x8gf2tvdw0s3jn54khce6mua7l"[r];return e},e.decode=function(t){i.validate("string"===typeof t,"Invalid base32-encoded string: "+t+".");const e=new Uint8Array(t.length);for(let r=0;r<t.length;++r){const s=t[r];i.validate(s in n,"Invalid value: "+s+"."),e[r]=n[s]}return e}},479404:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(92219);e.convertBits=function(t,e,r,n){const s=n?Math.floor(t.length*e/r):Math.ceil(t.length*e/r),o=(1<<r)-1,u=new Uint8Array(s);let a=0,h=0,p=0;for(const c of t)for(i.validate(0<=c&&c>>e===0,"Invalid value: "+c+"."),h=h<<e|c,p+=e;p>=r;)p-=r,u[a]=h>>p&o,++a;return n?i.validate(p<e&&0===(h<<r-p&o),"Input cannot be converted to "+r+" bits without padding, but strict mode was used."):p>0&&(u[a]=h<<r-p&o,++a),u}},48078:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(548166),n=r(535158),s=r(479404),o=r(92219),u=o.validate;function a(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=31&t[r].charCodeAt(0);return e}function h(t,e){const r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function p(t){const e=[656907472481,522768456162,0xf33e5fb3c4,748107326120,130178868336];let r=i(1);for(const i of t){const t=r.shiftRight(35);r=r.and(34359738367).shiftLeft(5).xor(i);for(let i=0;i<e.length;++i)t.shiftRight(i).and(1).equals(1)&&(r=r.xor(e[i]))}return r.xor(1)}function c(t){return t===t.toLowerCase()||t===t.toUpperCase()}e.encode=function(t,r,i){u("string"===typeof t&&function(t){return c(t)&&-1!==e.VALID_PREFIXES.indexOf(t.toLowerCase())}(t),"Invalid prefix: "+t+"."),u("string"===typeof r,"Invalid type: "+r+"."),u(i instanceof Uint8Array,"Invalid hash: "+i+".");const o=h(a(t),new Uint8Array(1)),f=function(t){switch(t){case"P2PKH":return 0;case"P2SH":return 8;default:throw new e.ValidationError("Invalid type: "+t+".")}}(r)+function(t){switch(8*t.length){case 160:return 0;case 192:return 1;case 224:return 2;case 256:return 3;case 320:return 4;case 384:return 5;case 448:return 6;case 512:return 7;default:throw new e.ValidationError("Invalid hash size: "+t.length+".")}}(i),l=(d=h(new Uint8Array([f]),i),s.convertBits(d,8,5));var d;const m=h(h(o,l),new Uint8Array(8)),w=h(l,function(t){const e=new Uint8Array(8);for(let r=0;r<8;++r)e[7-r]=t.and(31).toJSNumber(),t=t.shiftRight(5);return e}(p(m)));return t+":"+n.encode(w)},e.decode=function(t){u("string"===typeof t&&c(t),"Invalid address: "+t+".");const r=t.toLowerCase().split(":");u(2===r.length,"Missing prefix: "+t+".");const i=r[0],o=n.decode(r[1]);u(function(t,e){const r=h(a(t),new Uint8Array(1)),i=h(r,e);return p(i).equals(0)}(i,o),"Invalid checksum: "+t+".");const f=(l=o.subarray(0,-8),s.convertBits(l,5,8,!0));var l;const d=f[0],m=f.subarray(1);u(function(t){switch(7&t){case 0:return 160;case 1:return 192;case 2:return 224;case 3:return 256;case 4:return 320;case 5:return 384;case 6:return 448;case 7:return 512;default:throw new e.ValidationError("Invalid versionByte: "+(7&t)+".")}}(d)===8*m.length,"Invalid hash size: "+t+".");const w=function(t){switch(120&t){case 0:return"P2PKH";case 8:return"P2SH";default:throw new e.ValidationError("Invalid address type in version byte: "+t+".")}}(d);return{prefix:i,type:w,hash:m}},e.ValidationError=o.ValidationError,e.VALID_PREFIXES=["bitcoincash","bchtest","bchreg"]},92219:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r extends Error{constructor(t){super(t),this.name="ValidationError",Object.setPrototypeOf(this,r.prototype)}}e.ValidationError=r,e.validate=function(t,e){if(!t)throw new r(e)}},381442:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(251469),n=r(929566),s=r(851145),o=r(272330),u=r(3156),a=r(613449),h=r(574776),p=r(141499),c=r(555959),f={P2MS:"multisig",NONSTANDARD:"nonstandard",NULLDATA:"nulldata",P2PK:"pubkey",P2PKH:"pubkeyhash",P2SH:"scripthash",P2WPKH:"witnesspubkeyhash",P2WSH:"witnessscripthash",WITNESS_COMMITMENT:"witnesscommitment"};e.types=f,e.output=function(t){if(p.output.check(t))return f.P2WPKH;if(c.output.check(t))return f.P2WSH;if(u.output.check(t))return f.P2PKH;if(a.output.check(t))return f.P2SH;const e=i.decompile(t);if(!e)throw new TypeError("Invalid script");return n.output.check(e)?f.P2MS:o.output.check(e)?f.P2PK:h.output.check(e)?f.WITNESS_COMMITMENT:s.output.check(e)?f.NULLDATA:f.NONSTANDARD},e.input=function(t,e){const r=i.decompile(t);if(!r)throw new TypeError("Invalid script");return u.input.check(r)?f.P2PKH:a.input.check(r,e)?f.P2SH:n.input.check(r,e)?f.P2MS:o.input.check(r)?f.P2PK:f.NONSTANDARD},e.witness=function(t,e){const r=i.decompile(t);if(!r)throw new TypeError("Invalid script");return p.input.check(r)?f.P2WPKH:c.input.check(r,e)?f.P2WSH:f.NONSTANDARD}},502590:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(616162);function n(t){try{return i("rmd160").update(t).digest()}catch(e){return i("ripemd160").update(t).digest()}}function s(t){return i("sha256").update(t).digest()}e.ripemd160=n,e.sha1=function(t){return i("sha1").update(t).digest()},e.sha256=s,e.hash160=function(t){return n(s(t))},e.hash256=function(t){return s(s(t))}},312960:(t,e,r)=>{"use strict";var i=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(983018),s=r(54911),o=r(490701),u=r(695003),a=r(619031),h=r(621384),p=a.maybe(a.compile({compressed:s.maybe(s.Boolean),network:s.maybe(s.Network)}));class c{constructor(t,e,r){this.__D=t,this.__Q=e,this.lowR=!1,void 0===r&&(r={}),this.compressed=void 0===r.compressed||r.compressed,this.network=r.network||n.bitcoin,void 0!==e&&(this.__Q=o.pointCompress(e,this.compressed))}get privateKey(){return this.__D}get publicKey(){return this.__Q||(this.__Q=o.pointFromScalar(this.__D,this.compressed)),this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return h.encode(this.network.wif,this.__D,this.compressed)}sign(t,e){if(!this.__D)throw new Error("Missing private key");if(void 0===e&&(e=this.lowR),!1===e)return o.sign(t,this.__D);{let e=o.sign(t,this.__D);const r=i.alloc(32,0);let n=0;for(;e[0]>127;)n++,r.writeUIntLE(n,0,6),e=o.signWithEntropy(t,this.__D,r);return e}}verify(t,e){return o.verify(t,this.publicKey,e)}}function f(t,e){if(a(s.Buffer256bit,t),!o.isPrivate(t))throw new TypeError("Private key not in range [1, n)");return a(p,e),new c(t,void 0,e)}e.fromPrivateKey=f,e.fromPublicKey=function(t,e){return a(o.isPoint,t),a(p,e),new c(void 0,t,e)},e.fromWIF=function(t,e){const r=h.decode(t),i=r.version;if(s.Array(e)){if(!(e=e.filter((t=>i===t.wif)).pop()))throw new Error("Unknown network version")}else if(e=e||n.bitcoin,i!==e.wif)throw new Error("Invalid network version");return f(r.privateKey,{compressed:r.compressed,network:e})},e.makeRandom=function(t){a(p,t),void 0===t&&(t={});const e=t.rng||u;let r;do{r=e(32),a(s.Buffer256bit,r)}while(!o.isPrivate(r));return f(r,t)}},814205:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(696058);e.bip32=i;const n=r(828976);e.address=n;const s=r(502590);e.crypto=s;const o=r(312960);e.ECPair=o;const u=r(983018);e.networks=u;const a=r(356377);e.payments=a;const h=r(251469);e.script=h;var p=r(319783);e.Block=p.Block;var c=r(183728);e.Psbt=c.Psbt;var f=r(251469);e.opcodes=f.OPS;var l=r(197934);e.Transaction=l.Transaction;var d=r(204147);e.TransactionBuilder=d.TransactionBuilder},983018:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bitcoingold={messagePrefix:"\x18Bitcoin Gold Signed Message:\n",bech32:"btg",bip32:{public:76067358,private:76066276},pubKeyHash:38,scriptHash:23,wif:128},e.bitcoin={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},e.regtest={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},e.testnet={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}},859658:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(983018),n=r(251469),s=r(960644),o=r(619031),u=n.OPS;e.p2data=function(t,e){if(!t.data&&!t.output)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),o({network:o.maybe(o.Object),output:o.maybe(o.Buffer),data:o.maybe(o.arrayOf(o.Buffer))},t);const r={name:"embed",network:t.network||i.bitcoin};if(s.prop(r,"output",(()=>{if(t.data)return n.compile([u.OP_RETURN].concat(t.data))})),s.prop(r,"data",(()=>{if(t.output)return n.decompile(t.output).slice(1)})),e.validate&&t.output){const e=n.decompile(t.output);if(e[0]!==u.OP_RETURN)throw new TypeError("Output is invalid");if(!e.slice(1).every(o.Buffer))throw new TypeError("Output is invalid");if(t.data&&!function(t,e){return t.length===e.length&&t.every(((t,r)=>t.equals(e[r])))}(t.data,r.data))throw new TypeError("Data mismatch")}return Object.assign(r,t)}},356377:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(859658);e.embed=i.p2data;const n=r(553052);e.p2ms=n.p2ms;const s=r(979769);e.p2pk=s.p2pk;const o=r(373703);e.p2pkh=o.p2pkh;const u=r(47603);e.p2sh=u.p2sh;const a=r(155136);e.p2wpkh=a.p2wpkh;const h=r(919890);e.p2wsh=h.p2wsh},960644:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prop=function(t,e,r){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){const t=r.call(this);return this[e]=t,t},set(t){Object.defineProperty(this,e,{configurable:!0,enumerable:!0,value:t,writable:!0})}})},e.value=function(t){let e;return()=>(void 0!==e||(e=t()),e)}},553052:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(983018),n=r(251469),s=r(960644),o=n.OPS,u=r(619031),a=r(490701),h=o.OP_RESERVED;function p(t,e){return t.length===e.length&&t.every(((t,r)=>t.equals(e[r])))}e.p2ms=function(t,e){if(!t.input&&!t.output&&(!t.pubkeys||void 0===t.m)&&!t.signatures)throw new TypeError("Not enough data");function r(t){return n.isCanonicalScriptSignature(t)||void 0!==(e.allowIncomplete&&t===o.OP_0)}e=Object.assign({validate:!0},e||{}),u({network:u.maybe(u.Object),m:u.maybe(u.Number),n:u.maybe(u.Number),output:u.maybe(u.Buffer),pubkeys:u.maybe(u.arrayOf(a.isPoint)),signatures:u.maybe(u.arrayOf(r)),input:u.maybe(u.Buffer)},t);const c={network:t.network||i.bitcoin};let f=[],l=!1;function d(t){l||(l=!0,f=n.decompile(t),c.m=f[0]-h,c.n=f[f.length-2]-h,c.pubkeys=f.slice(1,-2))}if(s.prop(c,"output",(()=>{if(t.m&&c.n&&t.pubkeys)return n.compile([].concat(h+t.m,t.pubkeys,h+c.n,o.OP_CHECKMULTISIG))})),s.prop(c,"m",(()=>{if(c.output)return d(c.output),c.m})),s.prop(c,"n",(()=>{if(c.pubkeys)return c.pubkeys.length})),s.prop(c,"pubkeys",(()=>{if(t.output)return d(t.output),c.pubkeys})),s.prop(c,"signatures",(()=>{if(t.input)return n.decompile(t.input).slice(1)})),s.prop(c,"input",(()=>{if(t.signatures)return n.compile([o.OP_0].concat(t.signatures))})),s.prop(c,"witness",(()=>{if(c.input)return[]})),s.prop(c,"name",(()=>{if(c.m&&c.n)return`p2ms(${c.m} of ${c.n})`})),e.validate){if(t.output){if(d(t.output),!u.Number(f[0]))throw new TypeError("Output is invalid");if(!u.Number(f[f.length-2]))throw new TypeError("Output is invalid");if(f[f.length-1]!==o.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(c.m<=0||c.n>16||c.m>c.n||c.n!==f.length-3)throw new TypeError("Output is invalid");if(!c.pubkeys.every((t=>a.isPoint(t))))throw new TypeError("Output is invalid");if(void 0!==t.m&&t.m!==c.m)throw new TypeError("m mismatch");if(void 0!==t.n&&t.n!==c.n)throw new TypeError("n mismatch");if(t.pubkeys&&!p(t.pubkeys,c.pubkeys))throw new TypeError("Pubkeys mismatch")}if(t.pubkeys){if(void 0!==t.n&&t.n!==t.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(c.n=t.pubkeys.length,c.n<c.m)throw new TypeError("Pubkey count cannot be less than m")}if(t.signatures){if(t.signatures.length<c.m)throw new TypeError("Not enough signatures provided");if(t.signatures.length>c.m)throw new TypeError("Too many signatures provided")}if(t.input){if(t.input[0]!==o.OP_0)throw new TypeError("Input is invalid");if(0===c.signatures.length||!c.signatures.every(r))throw new TypeError("Input has invalid signature(s)");if(t.signatures&&!p(t.signatures,c.signatures))throw new TypeError("Signature mismatch");if(void 0!==t.m&&t.m!==t.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(c,t)}},979769:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(983018),n=r(251469),s=r(960644),o=r(619031),u=n.OPS,a=r(490701);e.p2pk=function(t,e){if(!t.input&&!t.output&&!t.pubkey&&!t.input&&!t.signature)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),o({network:o.maybe(o.Object),output:o.maybe(o.Buffer),pubkey:o.maybe(a.isPoint),signature:o.maybe(n.isCanonicalScriptSignature),input:o.maybe(o.Buffer)},t);const r=s.value((()=>n.decompile(t.input))),h={name:"p2pk",network:t.network||i.bitcoin};if(s.prop(h,"output",(()=>{if(t.pubkey)return n.compile([t.pubkey,u.OP_CHECKSIG])})),s.prop(h,"pubkey",(()=>{if(t.output)return t.output.slice(1,-1)})),s.prop(h,"signature",(()=>{if(t.input)return r()[0]})),s.prop(h,"input",(()=>{if(t.signature)return n.compile([t.signature])})),s.prop(h,"witness",(()=>{if(h.input)return[]})),e.validate){if(t.output){if(t.output[t.output.length-1]!==u.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!a.isPoint(h.pubkey))throw new TypeError("Output pubkey is invalid");if(t.pubkey&&!t.pubkey.equals(h.pubkey))throw new TypeError("Pubkey mismatch")}if(t.signature&&t.input&&!t.input.equals(h.input))throw new TypeError("Signature mismatch");if(t.input){if(1!==r().length)throw new TypeError("Input is invalid");if(!n.isCanonicalScriptSignature(h.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(h,t)}},373703:(t,e,r)=>{"use strict";var i=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(502590),s=r(983018),o=r(251469),u=r(960644),a=r(619031),h=o.OPS,p=r(490701),c=r(344075);e.p2pkh=function(t,e){if(!t.address&&!t.hash&&!t.output&&!t.pubkey&&!t.input)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),a({network:a.maybe(a.Object),address:a.maybe(a.String),hash:a.maybe(a.BufferN(20)),output:a.maybe(a.BufferN(25)),pubkey:a.maybe(p.isPoint),signature:a.maybe(o.isCanonicalScriptSignature),input:a.maybe(a.Buffer)},t);const r=u.value((()=>{const e=c.decode(t.address);return{version:e.readUInt8(0),hash:e.slice(1)}})),f=u.value((()=>o.decompile(t.input))),l=t.network||s.bitcoin,d={name:"p2pkh",network:l};if(u.prop(d,"address",(()=>{if(!d.hash)return;const t=i.allocUnsafe(21);return t.writeUInt8(l.pubKeyHash,0),d.hash.copy(t,1),c.encode(t)})),u.prop(d,"hash",(()=>t.output?t.output.slice(3,23):t.address?r().hash:t.pubkey||d.pubkey?n.hash160(t.pubkey||d.pubkey):void 0)),u.prop(d,"output",(()=>{if(d.hash)return o.compile([h.OP_DUP,h.OP_HASH160,d.hash,h.OP_EQUALVERIFY,h.OP_CHECKSIG])})),u.prop(d,"pubkey",(()=>{if(t.input)return f()[1]})),u.prop(d,"signature",(()=>{if(t.input)return f()[0]})),u.prop(d,"input",(()=>{if(t.pubkey&&t.signature)return o.compile([t.signature,t.pubkey])})),u.prop(d,"witness",(()=>{if(d.input)return[]})),e.validate){let e=i.from([]);if(t.address){if(r().version!==l.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==r().hash.length)throw new TypeError("Invalid address");e=r().hash}if(t.hash){if(e.length>0&&!e.equals(t.hash))throw new TypeError("Hash mismatch");e=t.hash}if(t.output){if(25!==t.output.length||t.output[0]!==h.OP_DUP||t.output[1]!==h.OP_HASH160||20!==t.output[2]||t.output[23]!==h.OP_EQUALVERIFY||t.output[24]!==h.OP_CHECKSIG)throw new TypeError("Output is invalid");const r=t.output.slice(3,23);if(e.length>0&&!e.equals(r))throw new TypeError("Hash mismatch");e=r}if(t.pubkey){const r=n.hash160(t.pubkey);if(e.length>0&&!e.equals(r))throw new TypeError("Hash mismatch");e=r}if(t.input){const r=f();if(2!==r.length)throw new TypeError("Input is invalid");if(!o.isCanonicalScriptSignature(r[0]))throw new TypeError("Input has invalid signature");if(!p.isPoint(r[1]))throw new TypeError("Input has invalid pubkey");if(t.signature&&!t.signature.equals(r[0]))throw new TypeError("Signature mismatch");if(t.pubkey&&!t.pubkey.equals(r[1]))throw new TypeError("Pubkey mismatch");const i=n.hash160(r[1]);if(e.length>0&&!e.equals(i))throw new TypeError("Hash mismatch")}}return Object.assign(d,t)}},47603:(t,e,r)=>{"use strict";var i=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(502590),s=r(983018),o=r(251469),u=r(960644),a=r(619031),h=o.OPS,p=r(344075);e.p2sh=function(t,e){if(!t.address&&!t.hash&&!t.output&&!t.redeem&&!t.input)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),a({network:a.maybe(a.Object),address:a.maybe(a.String),hash:a.maybe(a.BufferN(20)),output:a.maybe(a.BufferN(23)),redeem:a.maybe({network:a.maybe(a.Object),output:a.maybe(a.Buffer),input:a.maybe(a.Buffer),witness:a.maybe(a.arrayOf(a.Buffer))}),input:a.maybe(a.Buffer),witness:a.maybe(a.arrayOf(a.Buffer))},t);let r=t.network;r||(r=t.redeem&&t.redeem.network||s.bitcoin);const c={network:r},f=u.value((()=>{const e=p.decode(t.address);return{version:e.readUInt8(0),hash:e.slice(1)}})),l=u.value((()=>o.decompile(t.input))),d=u.value((()=>{const e=l();return{network:r,output:e[e.length-1],input:o.compile(e.slice(0,-1)),witness:t.witness||[]}}));if(u.prop(c,"address",(()=>{if(!c.hash)return;const t=i.allocUnsafe(21);return t.writeUInt8(c.network.scriptHash,0),c.hash.copy(t,1),p.encode(t)})),u.prop(c,"hash",(()=>t.output?t.output.slice(2,22):t.address?f().hash:c.redeem&&c.redeem.output?n.hash160(c.redeem.output):void 0)),u.prop(c,"output",(()=>{if(c.hash)return o.compile([h.OP_HASH160,c.hash,h.OP_EQUAL])})),u.prop(c,"redeem",(()=>{if(t.input)return d()})),u.prop(c,"input",(()=>{if(t.redeem&&t.redeem.input&&t.redeem.output)return o.compile([].concat(o.decompile(t.redeem.input),t.redeem.output))})),u.prop(c,"witness",(()=>c.redeem&&c.redeem.witness?c.redeem.witness:c.input?[]:void 0)),u.prop(c,"name",(()=>{const t=["p2sh"];return void 0!==c.redeem&&t.push(c.redeem.name),t.join("-")})),e.validate){let e=i.from([]);if(t.address){if(f().version!==r.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==f().hash.length)throw new TypeError("Invalid address");e=f().hash}if(t.hash){if(e.length>0&&!e.equals(t.hash))throw new TypeError("Hash mismatch");e=t.hash}if(t.output){if(23!==t.output.length||t.output[0]!==h.OP_HASH160||20!==t.output[1]||t.output[22]!==h.OP_EQUAL)throw new TypeError("Output is invalid");const r=t.output.slice(2,22);if(e.length>0&&!e.equals(r))throw new TypeError("Hash mismatch");e=r}const s=t=>{if(t.output){const r=o.decompile(t.output);if(!r||r.length<1)throw new TypeError("Redeem.output too short");const i=n.hash160(t.output);if(e.length>0&&!e.equals(i))throw new TypeError("Hash mismatch");e=i}if(t.input){const e=t.input.length>0,r=t.witness&&t.witness.length>0;if(!e&&!r)throw new TypeError("Empty input");if(e&&r)throw new TypeError("Input and witness provided");if(e){const e=o.decompile(t.input);if(!o.isPushOnly(e))throw new TypeError("Non push-only scriptSig")}}};if(t.input){const t=l();if(!t||t.length<1)throw new TypeError("Input too short");if(!i.isBuffer(d().output))throw new TypeError("Input is invalid");s(d())}if(t.redeem){if(t.redeem.network&&t.redeem.network!==r)throw new TypeError("Network mismatch");if(t.input){const e=d();if(t.redeem.output&&!t.redeem.output.equals(e.output))throw new TypeError("Redeem.output mismatch");if(t.redeem.input&&!t.redeem.input.equals(e.input))throw new TypeError("Redeem.input mismatch")}s(t.redeem)}if(t.witness&&t.redeem&&t.redeem.witness&&!function(t,e){return t.length===e.length&&t.every(((t,r)=>t.equals(e[r])))}(t.redeem.witness,t.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(c,t)}},155136:(t,e,r)=>{"use strict";var i=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(502590),s=r(983018),o=r(251469),u=r(960644),a=r(619031),h=o.OPS,p=r(490701),c=r(987967),f=i.alloc(0);e.p2wpkh=function(t,e){if(!t.address&&!t.hash&&!t.output&&!t.pubkey&&!t.witness)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),a({address:a.maybe(a.String),hash:a.maybe(a.BufferN(20)),input:a.maybe(a.BufferN(0)),network:a.maybe(a.Object),output:a.maybe(a.BufferN(22)),pubkey:a.maybe(p.isPoint),signature:a.maybe(o.isCanonicalScriptSignature),witness:a.maybe(a.arrayOf(a.Buffer))},t);const r=u.value((()=>{const e=c.decode(t.address),r=e.words.shift(),n=c.fromWords(e.words);return{version:r,prefix:e.prefix,data:i.from(n)}})),l=t.network||s.bitcoin,d={name:"p2wpkh",network:l};if(u.prop(d,"address",(()=>{if(!d.hash)return;const t=c.toWords(d.hash);return t.unshift(0),c.encode(l.bech32,t)})),u.prop(d,"hash",(()=>t.output?t.output.slice(2,22):t.address?r().data:t.pubkey||d.pubkey?n.hash160(t.pubkey||d.pubkey):void 0)),u.prop(d,"output",(()=>{if(d.hash)return o.compile([h.OP_0,d.hash])})),u.prop(d,"pubkey",(()=>t.pubkey?t.pubkey:t.witness?t.witness[1]:void 0)),u.prop(d,"signature",(()=>{if(t.witness)return t.witness[0]})),u.prop(d,"input",(()=>{if(d.witness)return f})),u.prop(d,"witness",(()=>{if(t.pubkey&&t.signature)return[t.signature,t.pubkey]})),e.validate){let e=i.from([]);if(t.address){if(l&&l.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw new TypeError("Invalid address version");if(20!==r().data.length)throw new TypeError("Invalid address data");e=r().data}if(t.hash){if(e.length>0&&!e.equals(t.hash))throw new TypeError("Hash mismatch");e=t.hash}if(t.output){if(22!==t.output.length||t.output[0]!==h.OP_0||20!==t.output[1])throw new TypeError("Output is invalid");if(e.length>0&&!e.equals(t.output.slice(2)))throw new TypeError("Hash mismatch");e=t.output.slice(2)}if(t.pubkey){const r=n.hash160(t.pubkey);if(e.length>0&&!e.equals(r))throw new TypeError("Hash mismatch");if(e=r,!p.isPoint(t.pubkey)||33!==t.pubkey.length)throw new TypeError("Invalid pubkey for p2wpkh")}if(t.witness){if(2!==t.witness.length)throw new TypeError("Witness is invalid");if(!o.isCanonicalScriptSignature(t.witness[0]))throw new TypeError("Witness has invalid signature");if(!p.isPoint(t.witness[1])||33!==t.witness[1].length)throw new TypeError("Witness has invalid pubkey");if(t.signature&&!t.signature.equals(t.witness[0]))throw new TypeError("Signature mismatch");if(t.pubkey&&!t.pubkey.equals(t.witness[1]))throw new TypeError("Pubkey mismatch");const r=n.hash160(t.witness[1]);if(e.length>0&&!e.equals(r))throw new TypeError("Hash mismatch")}}return Object.assign(d,t)}},919890:(t,e,r)=>{"use strict";var i=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(502590),s=r(983018),o=r(251469),u=r(960644),a=r(619031),h=o.OPS,p=r(490701),c=r(987967),f=i.alloc(0);function l(t){return!(!i.isBuffer(t)||65!==t.length||4!==t[0]||!p.isPoint(t))}e.p2wsh=function(t,e){if(!t.address&&!t.hash&&!t.output&&!t.redeem&&!t.witness)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),a({network:a.maybe(a.Object),address:a.maybe(a.String),hash:a.maybe(a.BufferN(32)),output:a.maybe(a.BufferN(34)),redeem:a.maybe({input:a.maybe(a.Buffer),network:a.maybe(a.Object),output:a.maybe(a.Buffer),witness:a.maybe(a.arrayOf(a.Buffer))}),input:a.maybe(a.BufferN(0)),witness:a.maybe(a.arrayOf(a.Buffer))},t);const r=u.value((()=>{const e=c.decode(t.address),r=e.words.shift(),n=c.fromWords(e.words);return{version:r,prefix:e.prefix,data:i.from(n)}})),p=u.value((()=>o.decompile(t.redeem.input)));let d=t.network;d||(d=t.redeem&&t.redeem.network||s.bitcoin);const m={network:d};if(u.prop(m,"address",(()=>{if(!m.hash)return;const t=c.toWords(m.hash);return t.unshift(0),c.encode(d.bech32,t)})),u.prop(m,"hash",(()=>t.output?t.output.slice(2):t.address?r().data:m.redeem&&m.redeem.output?n.sha256(m.redeem.output):void 0)),u.prop(m,"output",(()=>{if(m.hash)return o.compile([h.OP_0,m.hash])})),u.prop(m,"redeem",(()=>{if(t.witness)return{output:t.witness[t.witness.length-1],input:f,witness:t.witness.slice(0,-1)}})),u.prop(m,"input",(()=>{if(m.witness)return f})),u.prop(m,"witness",(()=>{if(t.redeem&&t.redeem.input&&t.redeem.input.length>0&&t.redeem.output&&t.redeem.output.length>0){const e=o.toStack(p());return m.redeem=Object.assign({witness:e},t.redeem),m.redeem.input=f,[].concat(e,t.redeem.output)}if(t.redeem&&t.redeem.output&&t.redeem.witness)return[].concat(t.redeem.witness,t.redeem.output)})),u.prop(m,"name",(()=>{const t=["p2wsh"];return void 0!==m.redeem&&t.push(m.redeem.name),t.join("-")})),e.validate){let e=i.from([]);if(t.address){if(r().prefix!==d.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw new TypeError("Invalid address version");if(32!==r().data.length)throw new TypeError("Invalid address data");e=r().data}if(t.hash){if(e.length>0&&!e.equals(t.hash))throw new TypeError("Hash mismatch");e=t.hash}if(t.output){if(34!==t.output.length||t.output[0]!==h.OP_0||32!==t.output[1])throw new TypeError("Output is invalid");const r=t.output.slice(2);if(e.length>0&&!e.equals(r))throw new TypeError("Hash mismatch");e=r}if(t.redeem){if(t.redeem.network&&t.redeem.network!==d)throw new TypeError("Network mismatch");if(t.redeem.input&&t.redeem.input.length>0&&t.redeem.witness&&t.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(t.redeem.output){if(0===o.decompile(t.redeem.output).length)throw new TypeError("Redeem.output is invalid");const r=n.sha256(t.redeem.output);if(e.length>0&&!e.equals(r))throw new TypeError("Hash mismatch");e=r}if(t.redeem.input&&!o.isPushOnly(p()))throw new TypeError("Non push-only scriptSig");if(t.witness&&t.redeem.witness&&!function(t,e){return t.length===e.length&&t.every(((t,r)=>t.equals(e[r])))}(t.witness,t.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(t.redeem.input&&p().some(l)||t.redeem.output&&(o.decompile(t.redeem.output)||[]).some(l))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(t.witness&&t.witness.length>0){const e=t.witness[t.witness.length-1];if(t.redeem&&t.redeem.output&&!t.redeem.output.equals(e))throw new TypeError("Witness and redeem.output mismatch");if(t.witness.some(l)||(o.decompile(e)||[]).some(l))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(m,t)}},183728:(t,e,r)=>{"use strict";var i=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(658174),s=r(79214),o=r(885639),u=r(828976),a=r(209068),h=r(502590),p=r(312960),c=r(983018),f=r(356377),l=r(251469),d=r(197934),m=d.Transaction.SIGHASH_ALL|d.Transaction.SIGHASH_BITCOINCASHBIP143,w=d.Transaction.SIGHASH_ALL|d.Transaction.SIGHASH_BITCOINCASHBIP143|d.Transaction.FORKID_BTG<<8,g=[d.Transaction.SIGHASH_ALL,m,w],y={network:c.bitcoin,maximumFeeRate:5e3,forkCoin:"none"};class v{constructor(t={},e=new n.Psbt(new b)){this.data=e,this.opts=Object.assign({},y,t),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},0===this.data.inputs.length&&this.setVersion(2);const r=(t,e,r,i)=>Object.defineProperty(t,e,{enumerable:r,writable:i});r(this,"__CACHE",!1,!0),r(this,"opts",!1,!0)}static fromBase64(t,e={}){const r=i.from(t,"base64");return this.fromBuffer(r,e)}static fromHex(t,e={}){const r=i.from(t,"hex");return this.fromBuffer(r,e)}static fromBuffer(t,e={}){const r=n.Psbt.fromBuffer(t,_),i=new v(e,r);var s,o;return s=i.__CACHE.__TX,o=i.__CACHE,s.ins.forEach((t=>{x(o,t)})),i}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(t){this.setVersion(t)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(t){this.setLocktime(t)}get txInputs(){return this.__CACHE.__TX.ins.map((t=>({hash:a.cloneBuffer(t.hash),index:t.index,sequence:t.sequence})))}get txOutputs(){return this.__CACHE.__TX.outs.map((t=>{let e;try{e=u.fromOutputScript(t.script,this.opts.network)}catch(r){}return{script:a.cloneBuffer(t.script),value:t.value,address:e}}))}combine(...t){return this.data.combine(...t.map((t=>t.data))),this}clone(){const t=v.fromBuffer(this.data.toBuffer());return t.opts=JSON.parse(JSON.stringify(this.opts)),t}setMaximumFeeRate(t){U(t),this.opts.maximumFeeRate=t}setVersion(t){U(t),B(this.data.inputs,"setVersion");const e=this.__CACHE;return e.__TX.version=t,e.__EXTRACTED_TX=void 0,this}setLocktime(t){U(t),B(this.data.inputs,"setLocktime");const e=this.__CACHE;return e.__TX.locktime=t,e.__EXTRACTED_TX=void 0,this}setInputSequence(t,e){U(e),B(this.data.inputs,"setInputSequence");const r=this.__CACHE;if(r.__TX.ins.length<=t)throw new Error("Input index too high");return r.__TX.ins[t].sequence=e,r.__EXTRACTED_TX=void 0,this}addInputs(t){return t.forEach((t=>this.addInput(t))),this}addInput(t){if(arguments.length>1||!t||void 0===t.hash||void 0===t.index)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");B(this.data.inputs,"addInput"),t.witnessScript&&J(t.witnessScript);const e=this.__CACHE;this.data.addInput(t);x(e,e.__TX.ins[e.__TX.ins.length-1]);const r=this.data.inputs.length-1,i=this.data.inputs[r];return i.nonWitnessUtxo&&X(this.__CACHE,i,r),e.__FEE=void 0,e.__FEE_RATE=void 0,e.__EXTRACTED_TX=void 0,this}addOutputs(t){return t.forEach((t=>this.addOutput(t))),this}addOutput(t){if(arguments.length>1||!t||void 0===t.value||void 0===t.address&&void 0===t.script)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");B(this.data.inputs,"addOutput");const{address:e}=t;if("string"===typeof e){const{network:r}=this.opts,i=u.toOutputScript(e,r);t=Object.assign(t,{script:i})}const r=this.__CACHE;return this.data.addOutput(t),r.__FEE=void 0,r.__FEE_RATE=void 0,r.__EXTRACTED_TX=void 0,this}extractTransaction(t){if(!this.data.inputs.every(P))throw new Error("Not finalized");const e=this.__CACHE;if(t||function(t,e,r){const i=e.__FEE_RATE||t.getFeeRate(),n=e.__EXTRACTED_TX.virtualSize(),s=i*n;if(i>=r.maximumFeeRate)throw new Error(`Warning: You are paying around ${(s/1e8).toFixed(8)} in fees, which is ${i} satoshi per byte for a transaction with a VSize of ${n} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}(this,e,this.opts),e.__EXTRACTED_TX)return e.__EXTRACTED_TX;const r=e.__TX.clone();return $(this.data.inputs,r,e,!0),r}getFeeRate(){return D("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return D("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return o.checkForInput(this.data.inputs,0),rt(this.data.inputs.length).forEach((t=>this.finalizeInput(t))),this}finalizeInput(t,e=W){const r=o.checkForInput(this.data.inputs,t),{script:i,isP2SH:n,isP2WSH:s,isSegwit:u}=function(t,e,r){const i=r.__TX,n={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(n.isP2SH=!!e.redeemScript,n.isP2WSH=!!e.witnessScript,e.witnessScript)n.script=e.witnessScript;else if(e.redeemScript)n.script=e.redeemScript;else if(e.nonWitnessUtxo){const s=z(r,e,t),o=i.ins[t].index;n.script=s.outs[o].script}else e.witnessUtxo&&(n.script=e.witnessUtxo.script);(e.witnessScript||k(n.script))&&(n.isSegwit=!0);return n}(t,r,this.__CACHE);if(!i)throw new Error(`No script found for input #${t}`);!function(t){if(!t.sighashType||!t.partialSig)return;const{partialSig:e,sighashType:r}=t;e.forEach((t=>{const{hashType:e}=l.signature.decode(t.signature);if((255&r)!==e)throw new Error("Signature sighash does not match input sighash type")}))}(r);const{finalScriptSig:a,finalScriptWitness:h}=e(t,r,i,u,n,s);if(a&&this.data.updateInput(t,{finalScriptSig:a}),h&&this.data.updateInput(t,{finalScriptWitness:h}),!a&&!h)throw new Error(`Unknown error finalizing input #${t}`);return this.data.clearFinalizedInput(t),this}getInputType(t){const e=o.checkForInput(this.data.inputs,t),r=Q(Y(t,e,this.__CACHE),t,"input",e.redeemScript||function(t){if(!t)return;const e=l.decompile(t);if(!e)return;const r=e[e.length-1];if(!i.isBuffer(r)||Z(r)||(n=r,l.isCanonicalScriptSignature(n)))return;var n;if(!l.decompile(r))return;return r}(e.finalScriptSig),e.witnessScript||function(t){if(!t)return;const e=j(t),r=e[e.length-1];if(Z(r))return;if(!l.decompile(r))return;return r}(e.finalScriptWitness));return("raw"===r.type?"":r.type+"-")+et(r.meaningfulScript)}inputHasPubkey(t,e){return function(t,e,r,i){const n=Y(r,e,i),{meaningfulScript:s}=Q(n,r,"input",e.redeemScript,e.witnessScript);return tt(t,s)}(e,o.checkForInput(this.data.inputs,t),t,this.__CACHE)}inputHasHDKey(t,e){const r=o.checkForInput(this.data.inputs,t),i=N(e);return!!r.bip32Derivation&&r.bip32Derivation.some(i)}outputHasPubkey(t,e){return function(t,e,r,i){const n=i.__TX.outs[r].script,{meaningfulScript:s}=Q(n,r,"output",e.redeemScript,e.witnessScript);return tt(t,s)}(e,o.checkForOutput(this.data.outputs,t),t,this.__CACHE)}outputHasHDKey(t,e){const r=o.checkForOutput(this.data.outputs,t),i=N(e);return!!r.bip32Derivation&&r.bip32Derivation.some(i)}validateSignaturesOfAllInputs(){o.checkForInput(this.data.inputs,0);return rt(this.data.inputs.length).map((t=>this.validateSignaturesOfInput(t))).reduce(((t,e)=>!0===e&&t),!0)}validateSignaturesOfInput(t,e){const r=this.data.inputs[t],i=(r||{}).partialSig;if(!r||!i||i.length<1)throw new Error("No signatures to validate");const n=e?i.filter((t=>t.pubkey.equals(e))):i;if(n.length<1)throw new Error("No signatures for this pubkey");const s=[];let o,u,a;for(const h of n){const e=l.signature.decode(h.signature),{hash:i,script:n}=a!==e.hashType?q(t,Object.assign({},r,{sighashType:e.hashType}),this.__CACHE,!0,this.opts.forkCoin):{hash:o,script:u};a=e.hashType,o=i,u=n,C(h.pubkey,n,"verify");const c=p.fromPublicKey(h.pubkey);s.push(c.verify(i,e.signature))}return s.every((t=>!0===t))}signAllInputsHD(t,e=g){if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");const r=[];for(const n of rt(this.data.inputs.length))try{this.signInputHD(n,t,e),r.push(!0)}catch(i){r.push(!1)}if(r.every((t=>!1===t)))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(t,e=g){return new Promise(((r,i)=>{if(!t||!t.publicKey||!t.fingerprint)return i(new Error("Need HDSigner to sign input"));const n=[],s=[];for(const o of rt(this.data.inputs.length))s.push(this.signInputHDAsync(o,t,e).then((()=>{n.push(!0)}),(()=>{n.push(!1)})));return Promise.all(s).then((()=>{if(n.every((t=>!1===t)))return i(new Error("No inputs were signed"));r()}))}))}signInputHD(t,e,r=g){if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");return V(t,this.data.inputs,e).forEach((e=>this.signInput(t,e,r))),this}signInputHDAsync(t,e,r=g){return new Promise(((i,n)=>{if(!e||!e.publicKey||!e.fingerprint)return n(new Error("Need HDSigner to sign input"));const s=V(t,this.data.inputs,e).map((e=>this.signInputAsync(t,e,r)));return Promise.all(s).then((()=>{i()})).catch(n)}))}signAllInputs(t,e=g){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const r=[];for(const n of rt(this.data.inputs.length))try{this.signInput(n,t,e),r.push(!0)}catch(i){r.push(!1)}if(r.every((t=>!1===t)))throw new Error("No inputs were signed");return this}signAllInputsAsync(t,e=g){return new Promise(((r,i)=>{if(!t||!t.publicKey)return i(new Error("Need Signer to sign input"));const n=[],s=[];for(const[o]of this.data.inputs.entries())s.push(this.signInputAsync(o,t,e).then((()=>{n.push(!0)}),(()=>{n.push(!1)})));return Promise.all(s).then((()=>{if(n.every((t=>!1===t)))return i(new Error("No inputs were signed"));r()}))}))}signInput(t,e,r=g){if(!e||!e.publicKey)throw new Error("Need Signer to sign input");const{hash:i,sighashType:n}=F(this.data.inputs,t,e.publicKey,this.__CACHE,r,this.opts.forkCoin),s=[{pubkey:e.publicKey,signature:l.signature.encode(e.sign(i),255&n)}];return this.data.updateInput(t,{partialSig:s}),this}signInputAsync(t,e,r=g){return Promise.resolve().then((()=>{if(!e||!e.publicKey)throw new Error("Need Signer to sign input");const{hash:i,sighashType:n}=F(this.data.inputs,t,e.publicKey,this.__CACHE,r,this.opts.forkCoin);return Promise.resolve(e.sign(i)).then((r=>{const i=[{pubkey:e.publicKey,signature:l.signature.encode(r,255&n)}];this.data.updateInput(t,{partialSig:i})}))}))}toBuffer(){return S(this.__CACHE),this.data.toBuffer()}toHex(){return S(this.__CACHE),this.data.toHex()}toBase64(){return S(this.__CACHE),this.data.toBase64()}updateGlobal(t){return this.data.updateGlobal(t),this}updateInput(t,e){return e.witnessScript&&J(e.witnessScript),this.data.updateInput(t,e),e.nonWitnessUtxo&&X(this.__CACHE,this.data.inputs[t],t),this}updateOutput(t,e){return this.data.updateOutput(t,e),this}addUnknownKeyValToGlobal(t){return this.data.addUnknownKeyValToGlobal(t),this}addUnknownKeyValToInput(t,e){return this.data.addUnknownKeyValToInput(t,e),this}addUnknownKeyValToOutput(t,e){return this.data.addUnknownKeyValToOutput(t,e),this}clearFinalizedInput(t){return this.data.clearFinalizedInput(t),this}}e.Psbt=v;const _=t=>new b(t);class b{constructor(t=i.from([2,0,0,0,0,0,0,0,0,0])){this.tx=d.Transaction.fromBuffer(t),function(t){if(!t.ins.every((t=>t.script&&0===t.script.length&&t.witness&&0===t.witness.length)))throw new Error("Format Error: Transaction ScriptSigs are not empty")}(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(t){if(void 0===t.hash||void 0===t.index||!i.isBuffer(t.hash)&&"string"!==typeof t.hash||"number"!==typeof t.index)throw new Error("Error adding input.");const e="string"===typeof t.hash?a.reverseBuffer(i.from(t.hash,"hex")):t.hash;this.tx.addInput(e,t.index,t.sequence)}addOutput(t){if(void 0===t.script||void 0===t.value||!i.isBuffer(t.script)||"number"!==typeof t.value)throw new Error("Error adding output.");this.tx.addOutput(t.script,t.value)}toBuffer(){return this.tx.toBuffer()}}function S(t){if(!1!==t.__UNSAFE_SIGN_NONSEGWIT)throw new Error("Not BIP174 compliant, can not export")}function E(t,e,r){if(!e)return!1;let i;if(i=r?r.map((t=>{const r=p.fromPublicKey(t,{compressed:!0}).publicKey;return e.find((t=>t.pubkey.equals(r)))})).filter((t=>!!t)):e,i.length>t)throw new Error("Too many signatures");return i.length===t}function P(t){return!!t.finalScriptSig||!!t.finalScriptWitness}function O(t){return e=>{try{return t({output:e}),!0}catch(r){return!1}}}const M=O(f.p2ms),T=O(f.p2pk),I=O(f.p2pkh),k=O(f.p2wpkh),A=O(f.p2wsh),H=O(f.p2sh);function N(t){return e=>!!e.masterFingerprint.equals(t.fingerprint)&&!!t.derivePath(e.path).publicKey.equals(e.pubkey)}function U(t){if("number"!==typeof t||t!==Math.floor(t)||t>4294967295||t<0)throw new Error("Invalid 32 bit integer")}function B(t,e){t.forEach((t=>{let r=!1,n=[];if(0===(t.partialSig||[]).length){if(!t.finalScriptSig&&!t.finalScriptWitness)return;n=function(t){const e=t.finalScriptSig&&l.decompile(t.finalScriptSig)||[],r=t.finalScriptWitness&&l.decompile(t.finalScriptWitness)||[];return e.concat(r).filter((t=>i.isBuffer(t)&&l.isCanonicalScriptSignature(t))).map((t=>({signature:t})))}(t)}else n=t.partialSig;if(n.forEach((t=>{const{hashType:i}=l.signature.decode(t.signature),n=[];i&d.Transaction.SIGHASH_ANYONECANPAY&&n.push("addInput");switch(31&i){case d.Transaction.SIGHASH_ALL:break;case d.Transaction.SIGHASH_SINGLE:case d.Transaction.SIGHASH_NONE:n.push("addOutput"),n.push("setInputSequence")}-1===n.indexOf(e)&&(r=!0)})),r)throw new Error("Can not modify transaction, signatures exist.")}))}function C(t,e,r){if(!tt(t,e))throw new Error(`Can not ${r} for this input with the key ${t.toString("hex")}`)}function x(t,e){const r=a.reverseBuffer(i.from(e.hash)).toString("hex")+":"+e.index;if(t.__TX_IN_CACHE[r])throw new Error("Duplicate input detected.");t.__TX_IN_CACHE[r]=1}function R(t,e){return(r,i,n,s)=>{const o=t({redeem:{output:n}}).output;if(!i.equals(o))throw new Error(`${e} for ${s} #${r} doesn't match the scriptPubKey in the prevout`)}}const K=R(f.p2sh,"Redeem script"),L=R(f.p2wsh,"Witness script");function D(t,e,r,i){if(!r.every(P))throw new Error(`PSBT must be finalized to calculate ${e}`);if("__FEE_RATE"===t&&i.__FEE_RATE)return i.__FEE_RATE;if("__FEE"===t&&i.__FEE)return i.__FEE;let n,s=!0;return i.__EXTRACTED_TX?(n=i.__EXTRACTED_TX,s=!1):n=i.__TX.clone(),$(r,n,i,s),"__FEE_RATE"===t?i.__FEE_RATE:"__FEE"===t?i.__FEE:void 0}function W(t,e,r,i,n,s){const o=et(r);if(!function(t,e,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return E(1,t.partialSig);case"multisig":const r=f.p2ms({output:e});return E(r.m,t.partialSig,r.pubkeys);default:return!1}}(e,r,o))throw new Error(`Can not finalize input #${t}`);return function(t,e,r,i,n,s){let o,u;const a=function(t,e,r){let i;switch(e){case"multisig":const e=function(t,e){const r=f.p2ms({output:t});return r.pubkeys.map((t=>(e.filter((e=>e.pubkey.equals(t)))[0]||{}).signature)).filter((t=>!!t))}(t,r);i=f.p2ms({output:t,signatures:e});break;case"pubkey":i=f.p2pk({output:t,signature:r[0].signature});break;case"pubkeyhash":i=f.p2pkh({output:t,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":i=f.p2wpkh({output:t,pubkey:r[0].pubkey,signature:r[0].signature})}return i}(t,e,r),h=s?f.p2wsh({redeem:a}):null,p=n?f.p2sh({redeem:h||a}):null;i?(u=G(h?h.witness:a.witness),p&&(o=p.input)):o=p?p.input:a.input;return{finalScriptSig:o,finalScriptWitness:u}}(r,o,e.partialSig,i,n,s)}function F(t,e,r,i,n,s){const u=o.checkForInput(t,e),{hash:a,sighashType:h,script:p}=q(e,u,i,!1,s,n);return C(r,p,"sign"),{hash:a,sighashType:h}}function q(t,e,r,i,n,s){const o=r.__TX,u=e.sighashType||function(t){switch(t){case"bch":return m;case"btg":return w;case"none":return d.Transaction.SIGHASH_ALL}}(n);if(s&&s.indexOf(u)<0){const t=function(t){let e=t&d.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";t&d.Transaction.SIGHASH_BITCOINCASHBIP143&&(e+="SIGHASH_BITCOINCASHBIP143 | ");t&d.Transaction.FORKID_BTG<<8?e+="FORKID_BTG | ":e+="FORKID_BCH | ";switch(31&t){case d.Transaction.SIGHASH_ALL:e+="SIGHASH_ALL";break;case d.Transaction.SIGHASH_SINGLE:e+="SIGHASH_SINGLE";break;case d.Transaction.SIGHASH_NONE:e+="SIGHASH_NONE"}return e}(u);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${t}`)}let a,h;const p=(u&d.Transaction.SIGHASH_BITCOINCASHBIP143)>0,c=(u&d.Transaction.FORKID_BTG<<8)>0;if(e.nonWitnessUtxo){const i=z(r,e,t),n=o.ins[t].hash,s=i.getHash();if(!n.equals(s))throw new Error(`Non-witness UTXO hash for input #${t} doesn't match the hash specified in the prevout`);const u=o.ins[t].index;h=i.outs[u]}else{if(!e.witnessUtxo)throw new Error("Need a Utxo input item for signing");h=e.witnessUtxo}const{meaningfulScript:l,type:g}=Q(h.script,t,"input",e.redeemScript,e.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(g)>=0)a=p&&c?o.hashForGoldSignature(t,l,h.value,u,!0):o.hashForWitnessV0(t,l,h.value,u);else if(k(l)){const e=f.p2pkh({hash:l.slice(2)}).output;a=p&&c?o.hashForGoldSignature(t,e,h.value,u,!0):o.hashForWitnessV0(t,e,h.value,u)}else{if(!p&&void 0===e.nonWitnessUtxo&&!1===r.__UNSAFE_SIGN_NONSEGWIT)throw new Error(`Input #${t} has witnessUtxo but non-segwit script: ${l.toString("hex")}`);i||!1===r.__UNSAFE_SIGN_NONSEGWIT||console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as the old TransactionBuilder class when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************"),a=p&&c?o.hashForGoldSignature(t,l,h.value,u,!0):p?o.hashForCashSignature(t,l,h.value,u):o.hashForSignature(t,l,u)}return{script:l,sighashType:u,hash:a}}function V(t,e,r){const i=o.checkForInput(e,t);if(!i.bip32Derivation||0===i.bip32Derivation.length)throw new Error("Need bip32Derivation to sign with HD");const n=i.bip32Derivation.map((t=>t.masterFingerprint.equals(r.fingerprint)?t:void 0)).filter((t=>!!t));if(0===n.length)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return n.map((t=>{const e=r.derivePath(t.path);if(!t.pubkey.equals(e.publicKey))throw new Error("pubkey did not match bip32Derivation");return e}))}function j(t){let e=0;function r(){const r=s.decode(t,e);return e+=s.decode.bytes,r}function i(){return i=r(),e+=i,t.slice(e-i,e);var i}return function(){const t=r(),e=[];for(let r=0;r<t;r++)e.push(i());return e}()}function G(t){let e=i.allocUnsafe(0);function r(t){const r=e.length,n=s.encodingLength(t);e=i.concat([e,i.allocUnsafe(n)]),s.encode(t,e,r)}function n(t){r(t.length),function(t){e=i.concat([e,i.from(t)])}(t)}var o;return r((o=t).length),o.forEach(n),e}function X(t,e,r){t.__NON_WITNESS_UTXO_BUF_CACHE[r]=e.nonWitnessUtxo;const i=d.Transaction.fromBuffer(e.nonWitnessUtxo);t.__NON_WITNESS_UTXO_TX_CACHE[r]=i;const n=t,s=r;delete e.nonWitnessUtxo,Object.defineProperty(e,"nonWitnessUtxo",{enumerable:!0,get(){const t=n.__NON_WITNESS_UTXO_BUF_CACHE[s],e=n.__NON_WITNESS_UTXO_TX_CACHE[s];if(void 0!==t)return t;{const t=e.toBuffer();return n.__NON_WITNESS_UTXO_BUF_CACHE[s]=t,t}},set(t){n.__NON_WITNESS_UTXO_BUF_CACHE[s]=t}})}function $(t,e,r,i){let n=0;t.forEach(((t,s)=>{if(i&&t.finalScriptSig&&(e.ins[s].script=t.finalScriptSig),i&&t.finalScriptWitness&&(e.ins[s].witness=j(t.finalScriptWitness)),t.witnessUtxo)n+=t.witnessUtxo.value;else if(t.nonWitnessUtxo){const i=z(r,t,s),o=e.ins[s].index,u=i.outs[o];n+=u.value}}));const s=e.outs.reduce(((t,e)=>t+e.value),0),o=n-s;if(o<0)throw new Error("Outputs are spending more than Inputs");const u=e.virtualSize();r.__FEE=o,r.__EXTRACTED_TX=e,r.__FEE_RATE=Math.floor(o/u)}function z(t,e,r){const i=t.__NON_WITNESS_UTXO_TX_CACHE;return i[r]||X(t,e,r),i[r]}function Y(t,e,r){if(void 0!==e.witnessUtxo)return e.witnessUtxo.script;if(void 0!==e.nonWitnessUtxo){return z(r,e,t).outs[r.__TX.ins[t].index].script}throw new Error("Can't find pubkey in input without Utxo data")}function Z(t){return 33===t.length&&l.isCanonicalPubKey(t)}function Q(t,e,r,i,n){const s=H(t),o=s&&i&&A(i),u=A(t);if(s&&void 0===i)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((u||o)&&void 0===n)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let a;return o?(a=n,K(e,t,i,r),L(e,i,n,r),J(a)):u?(a=n,L(e,t,n,r),J(a)):s?(a=i,K(e,t,i,r)):a=t,{meaningfulScript:a,type:o?"p2sh-p2wsh":s?"p2sh":u?"p2wsh":"raw"}}function J(t){if(k(t)||H(t))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function tt(t,e){const r=h.hash160(t),i=l.decompile(e);if(null===i)throw new Error("Unknown script error");return i.some((e=>"number"!==typeof e&&(e.equals(t)||e.equals(r))))}function et(t){return k(t)?"witnesspubkeyhash":I(t)?"pubkeyhash":M(t)?"multisig":T(t)?"pubkey":"nonstandard"}function rt(t){return[...Array(t).keys()]}},251469:(t,e,r)=>{"use strict";var i=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(741405),s=r(26244),o=r(54911),u=r(839875),a=r(490701),h=r(577131),p=r(619031);e.OPS=r(80196);const c=r(927401),f=e.OPS.OP_RESERVED;function l(t){return o.Buffer(t)||function(t){return o.Number(t)&&(t===e.OPS.OP_0||t>=e.OPS.OP_1&&t<=e.OPS.OP_16||t===e.OPS.OP_1NEGATE)}(t)}function d(t){return o.Array(t)&&t.every(l)}function m(t){return 0===t.length?e.OPS.OP_0:1===t.length?t[0]>=1&&t[0]<=16?f+t[0]:129===t[0]?e.OPS.OP_1NEGATE:void 0:void 0}function w(t){return i.isBuffer(t)}function g(t){return i.isBuffer(t)}function y(t){if(w(t))return t;p(o.Array,t);const e=t.reduce(((t,e)=>g(e)?1===e.length&&void 0!==m(e)?t+1:t+h.encodingLength(e.length)+e.length:t+1),0),r=i.allocUnsafe(e);let n=0;if(t.forEach((t=>{if(g(t)){const e=m(t);if(void 0!==e)return r.writeUInt8(e,n),void(n+=1);n+=h.encode(r,t.length,n),t.copy(r,n),n+=t.length}else r.writeUInt8(t,n),n+=1})),n!==r.length)throw new Error("Could not decode chunks");return r}function v(t){if(r=t,o.Array(r))return t;var r;p(o.Buffer,t);const i=[];let n=0;for(;n<t.length;){const r=t[n];if(r>e.OPS.OP_0&&r<=e.OPS.OP_PUSHDATA4){const e=h.decode(t,n);if(null===e)return null;if(n+=e.size,n+e.number>t.length)return null;const r=t.slice(n,n+e.number);n+=e.number;const s=m(r);void 0!==s?i.push(s):i.push(r)}else i.push(r),n+=1}return i}function _(t){const e=-193&t;return e>0&&e<4}e.isPushOnly=d,e.compile=y,e.decompile=v,e.toASM=function(t){return w(t)&&(t=v(t)),t.map((t=>{if(g(t)){const e=m(t);if(void 0===e)return t.toString("hex");t=e}return c[t]})).join(" ")},e.fromASM=function(t){return p(o.String,t),y(t.split(" ").map((t=>void 0!==e.OPS[t]?e.OPS[t]:(p(o.Hex,t),i.from(t,"hex")))))},e.toStack=function(t){return t=v(t),p(d,t),t.map((t=>g(t)?t:t===e.OPS.OP_0?i.allocUnsafe(0):n.encode(t-f)))},e.isCanonicalPubKey=function(t){return a.isPoint(t)},e.isDefinedHashType=_,e.isCanonicalScriptSignature=function(t){return!!i.isBuffer(t)&&(!!_(t[t.length-1])&&u.check(t.slice(0,-1)))},e.number=n,e.signature=s},741405:(t,e,r)=>{"use strict";var i=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.decode=function(t,e,r){e=e||4,r=void 0===r||r;const i=t.length;if(0===i)return 0;if(i>e)throw new TypeError("Script number overflow");if(r&&0===(127&t[i-1])&&(i<=1||0===(128&t[i-2])))throw new Error("Non-minimally encoded script number");if(5===i){const e=t.readUInt32LE(0),r=t.readUInt8(4);return 128&r?-(4294967296*(-129&r)+e):4294967296*r+e}let n=0;for(let s=0;s<i;++s)n|=t[s]<<8*s;return 128&t[i-1]?-(n&~(128<<8*(i-1))):n},e.encode=function(t){let e=Math.abs(t);const r=(n=e)>2147483647?5:n>8388607?4:n>32767?3:n>127?2:n>0?1:0;var n;const s=i.allocUnsafe(r),o=t<0;for(let i=0;i<r;++i)s.writeUInt8(255&e,i),e>>=8;return 128&s[r-1]?s.writeUInt8(o?128:0,r-1):o&&(s[r-1]|=128),s}},26244:(t,e,r)=>{"use strict";var i=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(54911),s=r(839875),o=r(619031),u=i.alloc(1,0);function a(t){let e=0;for(;0===t[e];)++e;return e===t.length?u:128&(t=t.slice(e))[0]?i.concat([u,t],1+t.length):t}function h(t){0===t[0]&&(t=t.slice(1));const e=i.alloc(32,0),r=Math.max(0,32-t.length);return t.copy(e,r),e}e.decode=function(t){const e=t.readUInt8(t.length-1),r=-193&e;if(r<=0||r>=4)throw new Error("Invalid hashType "+e);const n=s.decode(t.slice(0,-1)),o=h(n.r),u=h(n.s);return{signature:i.concat([o,u],64),hashType:e}},e.encode=function(t,e){o({signature:n.BufferN(64),hashType:n.UInt8},{signature:t,hashType:e});const r=-193&e;if(r<=0||r>=4)throw new Error("Invalid hashType "+e);const u=i.allocUnsafe(1);u.writeUInt8(e,0);const h=a(t.slice(0,32)),p=a(t.slice(32,64));return i.concat([s.encode(h,p),u])}},929566:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(219175);e.input=i;const n=r(463103);e.output=n},219175:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(251469),n=r(251469);function s(t){return t===n.OPS.OP_0||i.isCanonicalScriptSignature(t)}function o(t,e){const r=i.decompile(t);return!(r.length<2)&&(r[0]===n.OPS.OP_0&&(e?r.slice(1).every(s):r.slice(1).every(i.isCanonicalScriptSignature)))}e.check=o,o.toJSON=()=>"multisig input"},463103:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(251469),n=r(251469),s=r(54911),o=n.OPS.OP_RESERVED;function u(t,e){const r=i.decompile(t);if(r.length<4)return!1;if(r[r.length-1]!==n.OPS.OP_CHECKMULTISIG)return!1;if(!s.Number(r[0]))return!1;if(!s.Number(r[r.length-2]))return!1;const u=r[0]-o,a=r[r.length-2]-o;if(u<=0)return!1;if(a>16)return!1;if(u>a)return!1;if(a!==r.length-3)return!1;if(e)return!0;return r.slice(1,-2).every(i.isCanonicalPubKey)}e.check=u,u.toJSON=()=>"multi-sig output"},851145:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(251469),n=i.OPS;function s(t){const e=i.compile(t);return e.length>1&&e[0]===n.OP_RETURN}e.check=s,s.toJSON=()=>"null data output";const o={check:s};e.output=o},272330:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(676424);e.input=i;const n=r(757158);e.output=n},676424:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(251469);function n(t){const e=i.decompile(t);return 1===e.length&&i.isCanonicalScriptSignature(e[0])}e.check=n,n.toJSON=()=>"pubKey input"},757158:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(251469),n=r(251469);function s(t){const e=i.decompile(t);return 2===e.length&&i.isCanonicalPubKey(e[0])&&e[1]===n.OPS.OP_CHECKSIG}e.check=s,s.toJSON=()=>"pubKey output"},3156:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(419259);e.input=i;const n=r(858962);e.output=n},419259:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(251469);function n(t){const e=i.decompile(t);return 2===e.length&&i.isCanonicalScriptSignature(e[0])&&i.isCanonicalPubKey(e[1])}e.check=n,n.toJSON=()=>"pubKeyHash input"},858962:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(251469),n=r(251469);function s(t){const e=i.compile(t);return 25===e.length&&e[0]===n.OPS.OP_DUP&&e[1]===n.OPS.OP_HASH160&&20===e[2]&&e[23]===n.OPS.OP_EQUALVERIFY&&e[24]===n.OPS.OP_CHECKSIG}e.check=s,s.toJSON=()=>"pubKeyHash output"},613449:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(654439);e.input=i;const n=r(317847);e.output=n},654439:(t,e,r)=>{"use strict";var i=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(251469),s=r(929566),o=r(272330),u=r(3156),a=r(736460),h=r(649824);function p(t,e){const r=n.decompile(t);if(r.length<1)return!1;const p=r[r.length-1];if(!i.isBuffer(p))return!1;const c=n.decompile(n.compile(r.slice(0,-1))),f=n.decompile(p);return!!f&&(!!n.isPushOnly(c)&&(1===r.length?h.check(f)||a.check(f):!(!u.input.check(c)||!u.output.check(f))||(!(!s.input.check(c,e)||!s.output.check(f))||!(!o.input.check(c)||!o.output.check(f)))))}e.check=p,p.toJSON=()=>"scriptHash input"},317847:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(251469),n=r(251469);function s(t){const e=i.compile(t);return 23===e.length&&e[0]===n.OPS.OP_HASH160&&20===e[1]&&e[22]===n.OPS.OP_EQUAL}e.check=s,s.toJSON=()=>"scriptHash output"},574776:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(367755);e.output=i},367755:(t,e,r)=>{"use strict";var i=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(251469),s=r(251469),o=r(54911),u=r(619031),a=i.from("aa21a9ed","hex");function h(t){const e=n.compile(t);return e.length>37&&e[0]===s.OPS.OP_RETURN&&36===e[1]&&e.slice(2,6).equals(a)}e.check=h,h.toJSON=()=>"Witness commitment output",e.encode=function(t){u(o.Hash256bit,t);const e=i.allocUnsafe(36);return a.copy(e,0),t.copy(e,4),n.compile([s.OPS.OP_RETURN,e])},e.decode=function(t){return u(h,t),n.decompile(t)[1].slice(4,36)}},141499:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(746926);e.input=i;const n=r(736460);e.output=n},746926:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(251469);function n(t){const e=i.decompile(t);return 2===e.length&&i.isCanonicalScriptSignature(e[0])&&(r=e[1],i.isCanonicalPubKey(r)&&33===r.length);var r}e.check=n,n.toJSON=()=>"witnessPubKeyHash input"},736460:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(251469),n=r(251469);function s(t){const e=i.compile(t);return 22===e.length&&e[0]===n.OPS.OP_0&&20===e[1]}e.check=s,s.toJSON=()=>"Witness pubKeyHash output"},555959:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(870717);e.input=i;const n=r(649824);e.output=n},870717:(t,e,r)=>{"use strict";var i=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(251469),s=r(619031),o=r(929566),u=r(272330),a=r(3156);function h(t,e){if(s(s.Array,t),t.length<1)return!1;const r=t[t.length-1];if(!i.isBuffer(r))return!1;const h=n.decompile(r);if(!h||0===h.length)return!1;const p=n.compile(t.slice(0,-1));return!(!a.input.check(p)||!a.output.check(h))||(!(!o.input.check(p,e)||!o.output.check(h))||!(!u.input.check(p)||!u.output.check(h)))}e.check=h,h.toJSON=()=>"witnessScriptHash input"},649824:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(251469),n=r(251469);function s(t){const e=i.compile(t);return 34===e.length&&e[0]===n.OPS.OP_0&&32===e[1]}e.check=s,s.toJSON=()=>"Witness scriptHash output"},197934:(t,e,r)=>{"use strict";var i=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(209068),s=r(502590),o=r(251469),u=r(251469),a=r(54911),h=r(619031),p=r(208595);function c(t){const e=t.length;return p.encodingLength(e)+e}const f=i.allocUnsafe(0),l=[],d=i.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),m=i.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),w=i.from("ffffffffffffffff","hex"),g={script:f,valueBuffer:w};class y{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(t,e){const r=new n.BufferReader(t),i=new y;i.version=r.readInt32();const s=r.readUInt8(),o=r.readUInt8();let u=!1;s===y.ADVANCED_TRANSACTION_MARKER&&o===y.ADVANCED_TRANSACTION_FLAG?u=!0:r.offset-=2;const a=r.readVarInt();for(let n=0;n<a;++n)i.ins.push({hash:r.readSlice(32),index:r.readUInt32(),script:r.readVarSlice(),sequence:r.readUInt32(),witness:l});const h=r.readVarInt();for(let n=0;n<h;++n)i.outs.push({value:r.readUInt64(),script:r.readVarSlice()});if(u){for(let t=0;t<a;++t)i.ins[t].witness=r.readVector();if(!i.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(i.locktime=r.readUInt32(),e)return i;if(r.offset!==t.length)throw new Error("Transaction has unexpected data");return i}static fromHex(t){return y.fromBuffer(i.from(t,"hex"),!1)}static isCoinbaseHash(t){h(a.Hash256bit,t);for(let e=0;e<32;++e)if(0!==t[e])return!1;return!0}isCoinbase(){return 1===this.ins.length&&y.isCoinbaseHash(this.ins[0].hash)}addInput(t,e,r,i){return h(a.tuple(a.Hash256bit,a.UInt32,a.maybe(a.UInt32),a.maybe(a.Buffer)),arguments),a.Null(r)&&(r=y.DEFAULT_SEQUENCE),this.ins.push({hash:t,index:e,script:i||f,sequence:r,witness:l})-1}addOutput(t,e){return h(a.tuple(a.Buffer,a.Satoshi),arguments),this.outs.push({script:t,value:e})-1}hasWitnesses(){return this.ins.some((t=>0!==t.witness.length))}weight(){return 3*this.byteLength(!1)+this.byteLength(!0)}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(t=!0){const e=t&&this.hasWitnesses();return(e?10:8)+p.encodingLength(this.ins.length)+p.encodingLength(this.outs.length)+this.ins.reduce(((t,e)=>t+40+c(e.script)),0)+this.outs.reduce(((t,e)=>t+8+c(e.script)),0)+(e?this.ins.reduce(((t,e)=>t+function(t){const e=t.length;return p.encodingLength(e)+t.reduce(((t,e)=>t+c(e)),0)}(e.witness)),0):0)}clone(){const t=new y;return t.version=this.version,t.locktime=this.locktime,t.ins=this.ins.map((t=>({hash:t.hash,index:t.index,script:t.script,sequence:t.sequence,witness:t.witness}))),t.outs=this.outs.map((t=>({script:t.script,value:t.value}))),t}hashForSignature(t,e,r){if(h(a.tuple(a.UInt32,a.Buffer,a.Number),arguments),t>=this.ins.length)return m;const n=o.compile(o.decompile(e).filter((t=>t!==u.OPS.OP_CODESEPARATOR))),p=this.clone();if((31&r)===y.SIGHASH_NONE)p.outs=[],p.ins.forEach(((e,r)=>{r!==t&&(e.sequence=0)}));else if((31&r)===y.SIGHASH_SINGLE){if(t>=this.outs.length)return m;p.outs.length=t+1;for(let e=0;e<t;e++)p.outs[e]=g;p.ins.forEach(((e,r)=>{r!==t&&(e.sequence=0)}))}r&y.SIGHASH_ANYONECANPAY?(p.ins=[p.ins[t]],p.ins[0].script=n):(p.ins.forEach((t=>{t.script=f})),p.ins[t].script=n);const c=i.allocUnsafe(p.byteLength(!1)+4);return c.writeInt32LE(r,c.length-4),p.__toBuffer(c,0,!1),s.hash256(c)}hashForWitnessV0(t,e,r,o){h(a.tuple(a.UInt32,a.Buffer,a.Satoshi,a.UInt32),arguments);let u,p=i.from([]),f=d,l=d,m=d;if(o&y.SIGHASH_ANYONECANPAY||(p=i.allocUnsafe(36*this.ins.length),u=new n.BufferWriter(p,0),this.ins.forEach((t=>{u.writeSlice(t.hash),u.writeUInt32(t.index)})),l=s.hash256(p)),o&y.SIGHASH_ANYONECANPAY||(31&o)===y.SIGHASH_SINGLE||(31&o)===y.SIGHASH_NONE||(p=i.allocUnsafe(4*this.ins.length),u=new n.BufferWriter(p,0),this.ins.forEach((t=>{u.writeUInt32(t.sequence)})),m=s.hash256(p)),(31&o)!==y.SIGHASH_SINGLE&&(31&o)!==y.SIGHASH_NONE){const t=this.outs.reduce(((t,e)=>t+8+c(e.script)),0);p=i.allocUnsafe(t),u=new n.BufferWriter(p,0),this.outs.forEach((t=>{u.writeUInt64(t.value),u.writeVarSlice(t.script)})),f=s.hash256(p)}else if((31&o)===y.SIGHASH_SINGLE&&t<this.outs.length){const e=this.outs[t];p=i.allocUnsafe(8+c(e.script)),u=new n.BufferWriter(p,0),u.writeUInt64(e.value),u.writeVarSlice(e.script),f=s.hash256(p)}p=i.allocUnsafe(156+c(e)),u=new n.BufferWriter(p,0);const w=this.ins[t];return u.writeUInt32(this.version),u.writeSlice(l),u.writeSlice(m),u.writeSlice(w.hash),u.writeUInt32(w.index),u.writeVarSlice(e),u.writeUInt64(r),u.writeUInt32(w.sequence),u.writeSlice(f),u.writeUInt32(this.locktime),u.writeUInt32(o),s.hash256(p)}hashForCashSignature(t,e,r,i){if(h(a.tuple(a.UInt32,a.Buffer,a.Number,a.maybe(a.UInt53)),arguments),i&y.SIGHASH_BITCOINCASHBIP143){if(a.Null(r))throw new Error("Bitcoin Cash sighash requires value of input to be signed.");return this.hashForWitnessV0(t,e,r,i)}return this.hashForSignature(t,e,i)}hashForGoldSignature(t,e,r,i,n){h(a.tuple(a.UInt32,a.Buffer,a.Number,a.maybe(a.UInt53)),arguments);let s=i;const o=(i&y.SIGHASH_BITCOINCASHBIP143)>0;if(o&&(s|=y.FORKID_BTG<<8),n||o){if(a.Null(r))throw new Error("Bitcoin Cash sighash requires value of input to be signed.");return this.hashForWitnessV0(t,e,r,s)}return this.hashForSignature(t,e,s)}getHash(t){return t&&this.isCoinbase()?i.alloc(32,0):s.hash256(this.__toBuffer(void 0,void 0,t))}getId(){return n.reverseBuffer(this.getHash(!1)).toString("hex")}toBuffer(t,e){return this.__toBuffer(t,e,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(t,e){h(a.tuple(a.Number,a.Buffer),arguments),this.ins[t].script=e}setWitness(t,e){h(a.tuple(a.Number,[a.Buffer]),arguments),this.ins[t].witness=e}__toBuffer(t,e,r=!1){t||(t=i.allocUnsafe(this.byteLength(r)));const s=new n.BufferWriter(t,e||0);s.writeInt32(this.version);const o=r&&this.hasWitnesses();return o&&(s.writeUInt8(y.ADVANCED_TRANSACTION_MARKER),s.writeUInt8(y.ADVANCED_TRANSACTION_FLAG)),s.writeVarInt(this.ins.length),this.ins.forEach((t=>{s.writeSlice(t.hash),s.writeUInt32(t.index),s.writeVarSlice(t.script),s.writeUInt32(t.sequence)})),s.writeVarInt(this.outs.length),this.outs.forEach((t=>{void 0!==t.value?s.writeUInt64(t.value):s.writeSlice(t.valueBuffer),s.writeVarSlice(t.script)})),o&&this.ins.forEach((t=>{s.writeVector(t.witness)})),s.writeUInt32(this.locktime),void 0!==e?t.slice(e,s.offset):t}}y.DEFAULT_SEQUENCE=4294967295,y.SIGHASH_ALL=1,y.SIGHASH_NONE=2,y.SIGHASH_SINGLE=3,y.SIGHASH_ANYONECANPAY=128,y.SIGHASH_BITCOINCASHBIP143=64,y.ADVANCED_TRANSACTION_MARKER=0,y.ADVANCED_TRANSACTION_FLAG=1,y.FORKID_BTG=79,y.FORKID_BCH=0,e.Transaction=y},204147:(t,e,r)=>{"use strict";var i=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const n=r(828976),s=r(209068),o=r(381442),u=r(502590),a=r(312960),h=r(983018),p=r(356377),c=r(251469),f=r(251469),l=r(197934),d=r(54911),m=r(619031),w=o.types,g=new Set(["p2pkh","p2pk","p2wpkh","p2ms","p2sh-p2pkh","p2sh-p2pk","p2sh-p2wpkh","p2sh-p2ms","p2wsh-p2pkh","p2wsh-p2pk","p2wsh-p2ms","p2sh-p2wsh-p2pkh","p2sh-p2wsh-p2pk","p2sh-p2wsh-p2ms"]);function y(t,e,r){try{m(t,e)}catch(i){throw new Error(r)}}class v{constructor(t=h.bitcoin,e=2500){this.network=t,this.maximumFeeRate=e,this.__PREV_TX_SET={},this.__INPUTS=[],this.__BITCOINCASH=!1,this.__BITCOINGOLD=!1,this.__TX=new l.Transaction,this.__TX.version=2,this.__USE_LOW_R=!1,console.warn("Deprecation Warning: TransactionBuilder will be removed in the future. (v6.x.x or later) Please use the Psbt class instead. Examples of usage are available in the transactions-psbt.js integration test file on our Github. A high level explanation is available in the psbt.ts and psbt.js files as well.")}static fromTransaction(t,e,r){const i=new v(e);return"number"===typeof r&&(r===l.Transaction.FORKID_BTG?i.enableBitcoinGold(!0):r===l.Transaction.FORKID_BCH&&i.enableBitcoinCash(!0)),i.setVersion(t.version),i.setLockTime(t.locktime),t.outs.forEach((t=>{i.addOutput(t.script,t.value)})),t.ins.forEach((t=>{i.__addInputUnsafe(t.hash,t.index,{sequence:t.sequence,script:t.script,witness:t.witness,value:t.value})})),i.__INPUTS.forEach(((e,i)=>{!function(t,e,r,i,n){if(t.redeemScriptType!==w.P2MS||!t.redeemScript)return;if(t.pubkeys.length===t.signatures.length)return;const s=t.signatures.concat();t.signatures=t.pubkeys.map((o=>{const u=a.fromPublicKey(o);let h;return s.some(((o,a)=>{if(!o)return!1;const p=c.signature.decode(o);let f;switch(n){case l.Transaction.FORKID_BCH:f=e.hashForCashSignature(r,t.redeemScript,i,p.hashType);break;case l.Transaction.FORKID_BTG:f=e.hashForGoldSignature(r,t.redeemScript,i,p.hashType);break;default:f=t.witness?e.hashForWitnessV0(r,t.redeemScript,i,p.hashType):e.hashForSignature(r,t.redeemScript,p.hashType)}return!!u.verify(f,p.signature)&&(s[a]=void 0,h=o,!0)})),h}))}(e,t,i,e.value,r)})),i}enableBitcoinCash(t){"undefined"===typeof t&&(t=!0),this.__BITCOINCASH=t}enableBitcoinGold(t){"undefined"===typeof t&&(t=!0),this.__BITCOINGOLD=t}setLowR(t){return m(m.maybe(m.Boolean),t),void 0===t&&(t=!0),this.__USE_LOW_R=t,t}setLockTime(t){if(m(d.UInt32,t),this.__INPUTS.some((t=>!!t.signatures&&t.signatures.some((t=>void 0!==t)))))throw new Error("No, this would invalidate signatures");this.__TX.locktime=t}setVersion(t){m(d.UInt32,t),this.__TX.version=t}addInput(t,e,r,n){if(!this.__canModifyInputs())throw new Error("No, this would invalidate signatures");let o;if("string"===typeof(u=t)||u instanceof String)t=s.reverseBuffer(i.from(t,"hex"));else if(function(t){return t instanceof l.Transaction}(t)){const r=t.outs[e];n=r.script,o=r.value,t=t.getHash(!1)}var u;return this.__addInputUnsafe(t,e,{sequence:r,prevOutScript:n,value:o})}addOutput(t,e){if(!this.__canModifyOutputs())throw new Error("No, this would invalidate signatures");return"string"===typeof t&&(t=n.toOutputScript(t,this.network)),this.__TX.addOutput(t,e)}build(){return this.__build(!1)}buildIncomplete(){return this.__build(!0)}sign(t,e,r,i,n,s){!function({input:t,ourPubKey:e,keyPair:r,signatureHash:i,hashType:n,useLowR:s}){let o=!1;for(const[u,a]of t.pubkeys.entries()){if(!e.equals(a))continue;if(t.signatures[u])throw new Error("Signature already exists");if(33!==e.length&&t.hasWitness)throw new Error("BIP143 rejects uncompressed public keys in P2WPKH or P2WSH");const h=r.sign(i,s);t.signatures[u]=c.signature.encode(h,n),o=!0}if(!o)throw new Error("Key pair cannot sign for this input")}(function(t,e,r,i,n,s,o,u,a,h,f,v){let _;if("number"===typeof n)console.warn("DEPRECATED: TransactionBuilder sign method arguments will change in v6, please use the TxbSignArg interface"),_=n;else{if("object"!==typeof n)throw new TypeError("TransactionBuilder sign first arg must be TxbSignArg or number");!function(t,e){if(!g.has(e.prevOutScriptType))throw new TypeError(`Unknown prevOutScriptType "${e.prevOutScriptType}"`);y(m.Number,e.vin,"sign must include vin parameter as Number (input index)"),y(d.Signer,e.keyPair,"sign must include keyPair parameter as Signer interface"),y(m.maybe(m.Number),e.hashType,"sign hashType parameter must be a number");const r=(t[e.vin]||[]).prevOutType,i=e.prevOutScriptType;switch(i){case"p2pkh":if(r&&"pubkeyhash"!==r)throw new TypeError(`input #${e.vin} is not of type p2pkh: ${r}`);y(m.value(void 0),e.witnessScript,`${i} requires NO witnessScript`),y(m.value(void 0),e.redeemScript,`${i} requires NO redeemScript`),y(m.value(void 0),e.witnessValue,`${i} requires NO witnessValue`);break;case"p2pk":if(r&&"pubkey"!==r)throw new TypeError(`input #${e.vin} is not of type p2pk: ${r}`);y(m.value(void 0),e.witnessScript,`${i} requires NO witnessScript`),y(m.value(void 0),e.redeemScript,`${i} requires NO redeemScript`),y(m.value(void 0),e.witnessValue,`${i} requires NO witnessValue`);break;case"p2wpkh":if(r&&"witnesspubkeyhash"!==r)throw new TypeError(`input #${e.vin} is not of type p2wpkh: ${r}`);y(m.value(void 0),e.witnessScript,`${i} requires NO witnessScript`),y(m.value(void 0),e.redeemScript,`${i} requires NO redeemScript`),y(d.Satoshi,e.witnessValue,`${i} requires witnessValue`);break;case"p2ms":if(r&&"multisig"!==r)throw new TypeError(`input #${e.vin} is not of type p2ms: ${r}`);y(m.value(void 0),e.witnessScript,`${i} requires NO witnessScript`),y(m.value(void 0),e.redeemScript,`${i} requires NO redeemScript`),y(m.value(void 0),e.witnessValue,`${i} requires NO witnessValue`);break;case"p2sh-p2wpkh":if(r&&"scripthash"!==r)throw new TypeError(`input #${e.vin} is not of type p2sh-p2wpkh: ${r}`);y(m.value(void 0),e.witnessScript,`${i} requires NO witnessScript`),y(m.Buffer,e.redeemScript,`${i} requires redeemScript`),y(d.Satoshi,e.witnessValue,`${i} requires witnessValue`);break;case"p2sh-p2ms":case"p2sh-p2pk":case"p2sh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError(`input #${e.vin} is not of type ${i}: ${r}`);y(m.value(void 0),e.witnessScript,`${i} requires NO witnessScript`),y(m.Buffer,e.redeemScript,`${i} requires redeemScript`),y(m.value(void 0),e.witnessValue,`${i} requires NO witnessValue`);break;case"p2wsh-p2ms":case"p2wsh-p2pk":case"p2wsh-p2pkh":if(r&&"witnessscripthash"!==r)throw new TypeError(`input #${e.vin} is not of type ${i}: ${r}`);y(m.Buffer,e.witnessScript,`${i} requires witnessScript`),y(m.value(void 0),e.redeemScript,`${i} requires NO redeemScript`),y(d.Satoshi,e.witnessValue,`${i} requires witnessValue`);break;case"p2sh-p2wsh-p2ms":case"p2sh-p2wsh-p2pk":case"p2sh-p2wsh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError(`input #${e.vin} is not of type ${i}: ${r}`);y(m.Buffer,e.witnessScript,`${i} requires witnessScript`),y(m.Buffer,e.redeemScript,`${i} requires witnessScript`),y(d.Satoshi,e.witnessValue,`${i} requires witnessScript`)}}(e,n),({vin:_,keyPair:o,redeemScript:u,hashType:a,witnessValue:h,witnessScript:f}=n)}if(void 0===o)throw new Error("sign requires keypair");if(o.network&&o.network!==t)throw new TypeError("Inconsistent network");if(!e[_])throw new Error("No input at index: "+_);if(a=a||l.Transaction.SIGHASH_ALL,r(a))throw new Error("Transaction needs outputs");const S=e[_];if(void 0!==S.redeemScript&&u&&!S.redeemScript.equals(u))throw new Error("Inconsistent redeemScript");const P=o.publicKey||o.getPublicKey&&o.getPublicKey();if(!E(S)){if(void 0!==h){if(void 0!==S.value&&S.value!==h)throw new Error("Input did not match witnessValue");m(d.Satoshi,h),S.value=h}if(!E(S)){const t=function(t,e,r,i){if(r&&i){const n=p.p2wsh({redeem:{output:i}}),s=p.p2wsh({output:r}),o=p.p2sh({redeem:{output:r}}),u=p.p2sh({redeem:n});if(!n.hash.equals(s.hash))throw new Error("Witness script inconsistent with prevOutScript");if(!o.hash.equals(u.hash))throw new Error("Redeem script inconsistent with prevOutScript");const a=b(n.redeem.output,e);if(!a.pubkeys)throw new Error(a.type+" not supported as witnessScript ("+c.toASM(i)+")");t.signatures&&t.signatures.some((t=>void 0!==t))&&(a.signatures=t.signatures);const h=i;if(a.type===w.P2WPKH)throw new Error("P2SH(P2WSH(P2WPKH)) is a consensus failure");return{redeemScript:r,redeemScriptType:w.P2WSH,witnessScript:i,witnessScriptType:a.type,prevOutType:w.P2SH,prevOutScript:o.output,hasWitness:!0,signScript:h,signType:a.type,pubkeys:a.pubkeys,signatures:a.signatures,maxSignatures:a.maxSignatures}}if(r){const i=p.p2sh({redeem:{output:r}});if(t.prevOutScript){let e;try{e=p.p2sh({output:t.prevOutScript})}catch(s){throw new Error("PrevOutScript must be P2SH")}if(!i.hash.equals(e.hash))throw new Error("Redeem script inconsistent with prevOutScript")}const n=b(i.redeem.output,e);if(!n.pubkeys)throw new Error(n.type+" not supported as redeemScript ("+c.toASM(r)+")");t.signatures&&t.signatures.some((t=>void 0!==t))&&(n.signatures=t.signatures);let o=r;return n.type===w.P2WPKH&&(o=p.p2pkh({pubkey:n.pubkeys[0]}).output),{redeemScript:r,redeemScriptType:n.type,prevOutType:w.P2SH,prevOutScript:i.output,hasWitness:n.type===w.P2WPKH,signScript:o,signType:n.type,pubkeys:n.pubkeys,signatures:n.signatures,maxSignatures:n.maxSignatures}}if(i){const r=p.p2wsh({redeem:{output:i}});if(t.prevOutScript){const e=p.p2wsh({output:t.prevOutScript});if(!r.hash.equals(e.hash))throw new Error("Witness script inconsistent with prevOutScript")}const n=b(r.redeem.output,e);if(!n.pubkeys)throw new Error(n.type+" not supported as witnessScript ("+c.toASM(i)+")");t.signatures&&t.signatures.some((t=>void 0!==t))&&(n.signatures=t.signatures);const s=i;if(n.type===w.P2WPKH)throw new Error("P2WSH(P2WPKH) is a consensus failure");return{witnessScript:i,witnessScriptType:n.type,prevOutType:w.P2WSH,prevOutScript:r.output,hasWitness:!0,signScript:s,signType:n.type,pubkeys:n.pubkeys,signatures:n.signatures,maxSignatures:n.maxSignatures}}if(t.prevOutType&&t.prevOutScript){if(t.prevOutType===w.P2SH)throw new Error("PrevOutScript is "+t.prevOutType+", requires redeemScript");if(t.prevOutType===w.P2WSH)throw new Error("PrevOutScript is "+t.prevOutType+", requires witnessScript");if(!t.prevOutScript)throw new Error("PrevOutScript is missing");const r=b(t.prevOutScript,e);if(!r.pubkeys)throw new Error(r.type+" not supported ("+c.toASM(t.prevOutScript)+")");t.signatures&&t.signatures.some((t=>void 0!==t))&&(r.signatures=t.signatures);let i=t.prevOutScript;return r.type===w.P2WPKH&&(i=p.p2pkh({pubkey:r.pubkeys[0]}).output),{prevOutType:r.type,prevOutScript:t.prevOutScript,hasWitness:r.type===w.P2WPKH,signScript:i,signType:r.type,pubkeys:r.pubkeys,signatures:r.signatures,maxSignatures:r.maxSignatures}}const n=p.p2pkh({pubkey:e}).output;return{prevOutType:w.P2PKH,prevOutScript:n,hasWitness:!1,signScript:n,signType:w.P2PKH,pubkeys:[e],signatures:[void 0]}}(S,P,u,f);Object.assign(S,t)}if(!E(S))throw Error(S.prevOutType+" not supported")}let O;O=s.btg?i.hashForGoldSignature(_,S.signScript,S.value,a,!!S.witness):s.bch?i.hashForCashSignature(_,S.signScript,S.value,a):S.hasWitness?i.hashForWitnessV0(_,S.signScript,S.value,a):i.hashForSignature(_,S.signScript,a);return{input:S,ourPubKey:P,keyPair:o,signatureHash:O,hashType:a,useLowR:!!v}}(this.network,this.__INPUTS,this.__needsOutputs.bind(this),this.__TX,t,{btg:this.__BITCOINGOLD,bch:this.__BITCOINCASH},e,r,i,n,s,this.__USE_LOW_R))}__addInputUnsafe(t,e,r){if(l.Transaction.isCoinbaseHash(t))throw new Error("coinbase inputs not supported");const i=t.toString("hex")+":"+e;if(void 0!==this.__PREV_TX_SET[i])throw new Error("Duplicate TxOut: "+i);let n={};if(void 0!==r.script&&(n=_(r.script,r.witness||[])),void 0!==r.value&&(n.value=r.value),!n.prevOutScript&&r.prevOutScript){let t;if(!n.pubkeys&&!n.signatures){const e=b(r.prevOutScript);e.pubkeys&&(n.pubkeys=e.pubkeys,n.signatures=e.signatures),t=e.type}n.prevOutScript=r.prevOutScript,n.prevOutType=t||o.output(r.prevOutScript)}const s=this.__TX.addInput(t,e,r.sequence,r.scriptSig);return this.__INPUTS[s]=n,this.__PREV_TX_SET[i]=!0,s}__build(t){if(!t){if(!this.__TX.ins.length)throw new Error("Transaction has no inputs");if(!this.__TX.outs.length)throw new Error("Transaction has no outputs")}const e=this.__TX.clone();if(this.__INPUTS.forEach(((r,i)=>{if(!r.prevOutType&&!t)throw new Error("Transaction is not complete");const n=S(r.prevOutType,r,t);if(n)e.setInputScript(i,n.input),e.setWitness(i,n.witness);else{if(!t&&r.prevOutType===w.NONSTANDARD)throw new Error("Unknown input type");if(!t)throw new Error("Not enough information")}})),!t&&this.__overMaximumFees(e.virtualSize()))throw new Error("Transaction has absurd fees");return e}__canModifyInputs(){return this.__INPUTS.every((t=>!t.signatures||t.signatures.every((t=>{if(!t)return!0;return 0!==(P(t)&l.Transaction.SIGHASH_ANYONECANPAY)}))))}__needsOutputs(t){return t===l.Transaction.SIGHASH_ALL?0===this.__TX.outs.length:0===this.__TX.outs.length&&this.__INPUTS.some((t=>!!t.signatures&&t.signatures.some((t=>{if(!t)return!1;return!(P(t)&l.Transaction.SIGHASH_NONE)}))))}__canModifyOutputs(){const t=this.__TX.ins.length,e=this.__TX.outs.length;return this.__INPUTS.every((r=>void 0===r.signatures||r.signatures.every((r=>{if(!r)return!0;const i=31&P(r);return i===l.Transaction.SIGHASH_NONE||i===l.Transaction.SIGHASH_SINGLE&&t<=e}))))}__overMaximumFees(t){return(this.__INPUTS.reduce(((t,e)=>t+(e.value>>>0)),0)-this.__TX.outs.reduce(((t,e)=>t+e.value),0))/t>this.maximumFeeRate}}function _(t,e,r,i){if(0===t.length&&0===e.length)return{};if(!r){let i=o.input(t,!0),n=o.witness(e,!0);i===w.NONSTANDARD&&(i=void 0),n===w.NONSTANDARD&&(n=void 0),r=i||n}switch(r){case w.P2WPKH:{const{output:t,pubkey:r,signature:i}=p.p2wpkh({witness:e});return{prevOutScript:t,prevOutType:w.P2WPKH,pubkeys:[r],signatures:[i]}}case w.P2PKH:{const{output:e,pubkey:r,signature:i}=p.p2pkh({input:t});return{prevOutScript:e,prevOutType:w.P2PKH,pubkeys:[r],signatures:[i]}}case w.P2PK:{const{signature:e}=p.p2pk({input:t});return{prevOutType:w.P2PK,pubkeys:[void 0],signatures:[e]}}case w.P2MS:{const{m:e,pubkeys:r,signatures:n}=p.p2ms({input:t,output:i},{allowIncomplete:!0});return{prevOutType:w.P2MS,pubkeys:r,signatures:n,maxSignatures:e}}}if(r===w.P2SH){const{output:r,redeem:i}=p.p2sh({input:t,witness:e}),n=o.output(i.output),s=_(i.input,i.witness,n,i.output);return s.prevOutType?{prevOutScript:r,prevOutType:w.P2SH,redeemScript:i.output,redeemScriptType:s.prevOutType,witnessScript:s.witnessScript,witnessScriptType:s.witnessScriptType,pubkeys:s.pubkeys,signatures:s.signatures}:{}}if(r===w.P2WSH){const{output:r,redeem:i}=p.p2wsh({input:t,witness:e}),n=o.output(i.output);let s;return s=n===w.P2WPKH?_(i.input,i.witness,n):_(c.compile(i.witness),[],n,i.output),s.prevOutType?{prevOutScript:r,prevOutType:w.P2WSH,witnessScript:i.output,witnessScriptType:s.prevOutType,pubkeys:s.pubkeys,signatures:s.signatures}:{}}return{prevOutType:w.NONSTANDARD,prevOutScript:t}}function b(t,e){m(d.Buffer,t);const r=o.output(t);switch(r){case w.P2PKH:{if(!e)return{type:r};const i=p.p2pkh({output:t}).hash,n=u.hash160(e);return i.equals(n)?{type:r,pubkeys:[e],signatures:[void 0]}:{type:r}}case w.P2WPKH:{if(!e)return{type:r};const i=p.p2wpkh({output:t}).hash,n=u.hash160(e);return i.equals(n)?{type:r,pubkeys:[e],signatures:[void 0]}:{type:r}}case w.P2PK:return{type:r,pubkeys:[p.p2pk({output:t}).pubkey],signatures:[void 0]};case w.P2MS:{const e=p.p2ms({output:t});return{type:r,pubkeys:e.pubkeys,signatures:e.pubkeys.map((()=>{})),maxSignatures:e.m}}}return{type:r}}function S(t,e,r){const i=e.pubkeys||[];let n=e.signatures||[];switch(t){case w.P2PKH:if(0===i.length)break;if(0===n.length)break;return p.p2pkh({pubkey:i[0],signature:n[0]});case w.P2WPKH:if(0===i.length)break;if(0===n.length)break;return p.p2wpkh({pubkey:i[0],signature:n[0]});case w.P2PK:if(0===i.length)break;if(0===n.length)break;return p.p2pk({signature:n[0]});case w.P2MS:{const t=e.maxSignatures;n=r?n.map((t=>t||f.OPS.OP_0)):n.filter((t=>t));const s=!r||t===n.length;return p.p2ms({m:t,pubkeys:i,signatures:n},{allowIncomplete:r,validate:s})}case w.P2SH:{const t=S(e.redeemScriptType,e,r);if(!t)return;return p.p2sh({redeem:{output:t.output||e.redeemScript,input:t.input,witness:t.witness}})}case w.P2WSH:{const t=S(e.witnessScriptType,e,r);if(!t)return;return p.p2wsh({redeem:{output:e.witnessScript,input:t.input,witness:t.witness}})}}}function E(t){return void 0!==t.signScript&&void 0!==t.signType&&void 0!==t.pubkeys&&void 0!==t.signatures&&t.signatures.length===t.pubkeys.length&&t.pubkeys.length>0&&(!1===t.hasWitness||void 0!==t.value)}function P(t){return t.readUInt8(t.length-1)}e.TransactionBuilder=v},54911:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=r(619031),n=Math.pow(2,31)-1;function s(t){return i.String(t)&&!!t.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}e.UInt31=function(t){return i.UInt32(t)&&t<=n},e.BIP32Path=s,s.toJSON=()=>"BIP32 derivation path",e.Signer=function(t){return(i.Buffer(t.publicKey)||"function"===typeof t.getPublicKey)&&"function"===typeof t.sign};e.Satoshi=function(t){return i.UInt53(t)&&t<=21e14},e.ECPoint=i.quacksLike("Point"),e.Network=i.compile({messagePrefix:i.oneOf(i.Buffer,i.String),bip32:{public:i.UInt32,private:i.UInt32},pubKeyHash:i.UInt8,scriptHash:i.UInt8,wif:i.UInt8}),e.Buffer256bit=i.BufferN(32),e.Hash160bit=i.BufferN(20),e.Hash256bit=i.BufferN(32),e.Number=i.Number,e.Array=i.Array,e.Boolean=i.Boolean,e.String=i.String,e.Buffer=i.Buffer,e.Hex=i.Hex,e.maybe=i.maybe,e.tuple=i.tuple,e.UInt8=i.UInt8,e.UInt32=i.UInt32,e.UInt53=i.UInt53,e.Function=i.Function,e.BufferN=i.BufferN,e.Null=i.Null,e.oneOf=i.oneOf},323126:(t,e,r)=>{"use strict";var i=r(489565).validate,n={q:0,p:1,z:2,r:3,y:4,9:5,x:6,8:7,g:8,f:9,2:10,t:11,v:12,d:13,w:14,0:15,s:16,3:17,j:18,n:19,5:20,4:21,k:22,h:23,c:24,e:25,6:26,m:27,u:28,a:29,7:30,l:31};t.exports={encode:function(t){i(t instanceof Uint8Array,"Invalid data: "+t+".");for(var e="",r=0;r<t.length;++r){var n=t[r];i(0<=n&&n<32,"Invalid value: "+n+"."),e+="qpzry9x8gf2tvdw0s3jn54khce6mua7l"[n]}return e},decode:function(t){i("string"===typeof t,"Invalid base32-encoded string: "+t+".");for(var e=new Uint8Array(t.length),r=0;r<t.length;++r){var s=t[r];i(s in n,"Invalid value: "+s+"."),e[r]=n[s]}return e}}},249857:(t,e,r)=>{"use strict";var i=r(323126),n=r(548166),s=r(613855),o=r(489565),u=o.validate;var a=o.ValidationError,h=["bitcoincash","bchtest","bchreg"];function p(t){for(var e=new Uint8Array(t.length),r=0;r<t.length;++r)e[r]=31&t[r].charCodeAt(0);return e}function c(t,e){var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function f(t){for(var e=[656907472481,522768456162,0xf33e5fb3c4,748107326120,130178868336],r=n(1),i=0;i<t.length;++i){var s=t[i],o=r.shiftRight(35);r=r.and(34359738367).shiftLeft(5).xor(s);for(var u=0;u<e.length;++u)o.shiftRight(u).and(1).equals(1)&&(r=r.xor(e[u]))}return r.xor(1)}function l(t){return t===t.toLowerCase()||t===t.toUpperCase()}t.exports={encode:function(t,e,r){u("string"===typeof t&&function(t){return l(t)&&-1!==h.indexOf(t.toLowerCase())}(t),"Invalid prefix: "+t+"."),u("string"===typeof e,"Invalid type: "+e+"."),u(r instanceof Uint8Array,"Invalid hash: "+r+".");var n,o=c(p(t),new Uint8Array(1)),d=function(t){switch(t){case"P2PKH":return 0;case"P2SH":return 8;default:throw new a("Invalid type: "+t+".")}}(e)+function(t){switch(8*t.length){case 160:return 0;case 192:return 1;case 224:return 2;case 256:return 3;case 320:return 4;case 384:return 5;case 448:return 6;case 512:return 7;default:throw new a("Invalid hash size: "+t.length+".")}}(r),m=(n=c(new Uint8Array([d]),r),s(n,8,5)),w=c(c(o,m),new Uint8Array(8)),g=c(m,function(t){for(var e=new Uint8Array(8),r=0;r<8;++r)e[7-r]=t.and(31).toJSNumber(),t=t.shiftRight(5);return e}(f(w)));return t+":"+i.encode(g)},decode:function(t){u("string"===typeof t&&l(t),"Invalid address: "+t+".");var e=t.toLowerCase().split(":");u(2===e.length,"Missing prefix: "+t+".");var r=e[0],n=i.decode(e[1]);u(function(t,e){var r=c(p(t),new Uint8Array(1)),i=c(r,e);return f(i).equals(0)}(r,n),"Invalid checksum: "+t+".");var o,h=(o=n.subarray(0,-8),s(o,5,8,!0)),d=h[0],m=h.subarray(1);u(function(t){switch(7&t){case 0:return 160;case 1:return 192;case 2:return 224;case 3:return 256;case 4:return 320;case 5:return 384;case 6:return 448;case 7:return 512}}(d)===8*m.length,"Invalid hash size: "+t+".");var w=function(t){switch(120&t){case 0:return"P2PKH";case 8:return"P2SH";default:throw new a("Invalid address type in version byte: "+t+".")}}(d);return{prefix:r,type:w,hash:m}},ValidationError:a}},613855:(t,e,r)=>{"use strict";var i=r(489565).validate;t.exports=function(t,e,r,n){for(var s=n?Math.floor(t.length*e/r):Math.ceil(t.length*e/r),o=(1<<r)-1,u=new Uint8Array(s),a=0,h=0,p=0,c=0;c<t.length;++c){var f=t[c];for(i(0<=f&&f>>e===0,"Invalid value: "+f+"."),h=h<<e|f,p+=e;p>=r;)p-=r,u[a]=h>>p&o,++a}return n?i(p<e&&0===(h<<r-p&o),"Input cannot be converted to "+r+" bits without padding, but strict mode was used."):p>0&&(u[a]=h<<r-p&o,++a),u}},489565:t=>{"use strict";function e(t){var e=new Error;this.name=e.name="ValidationError",this.message=e.message=t,this.stack=e.stack}e.prototype=Object.create(Error.prototype),t.exports={ValidationError:e,validate:function(t,r){if(!t)throw new e(r)}}},207332:(t,e,r)=>{var i=r(348834).Buffer;t.exports=function(t,e){if(!Array.isArray(t))throw TypeError("Expected values Array");if("function"!==typeof e)throw TypeError("Expected digest Function");for(var r=t.length,n=t.concat();r>1;){for(var s=0,o=0;o<r;o+=2,++s){var u=n[o],a=o+1===r?u:n[o+1],h=i.concat([u,a]);n[s]=e(h)}r=s}return n[0]}},577131:(t,e,r)=>{var i=r(80196);function n(t){return t<i.OP_PUSHDATA1?1:t<=255?2:t<=65535?3:5}t.exports={encodingLength:n,encode:function(t,e,r){var s=n(e);return 1===s?t.writeUInt8(e,r):2===s?(t.writeUInt8(i.OP_PUSHDATA1,r),t.writeUInt8(e,r+1)):3===s?(t.writeUInt8(i.OP_PUSHDATA2,r),t.writeUInt16LE(e,r+1)):(t.writeUInt8(i.OP_PUSHDATA4,r),t.writeUInt32LE(e,r+1)),s},decode:function(t,e){var r,n,s=t.readUInt8(e);if(s<i.OP_PUSHDATA1)r=s,n=1;else if(s===i.OP_PUSHDATA1){if(e+2>t.length)return null;r=t.readUInt8(e+1),n=2}else if(s===i.OP_PUSHDATA2){if(e+3>t.length)return null;r=t.readUInt16LE(e+1),n=3}else{if(e+5>t.length)return null;if(s!==i.OP_PUSHDATA4)throw new Error("Unexpected opcode");r=t.readUInt32LE(e+1),n=5}return{opcode:s,number:r,size:n}}}},490701:(t,e,r)=>{var i=r(348834).Buffer;const n=r(811095),s=new(0,r(887554).ec)("secp256k1"),o=r(699624),u=i.alloc(32,0),a=i.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),h=i.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex"),p=s.curve.n,c=p.shrn(1),f=s.curve.g,l="Expected Private",d="Expected Point",m="Expected Tweak",w="Expected Hash",g="Expected Extra Data (32 bytes)";function y(t){return i.isBuffer(t)&&32===t.length}function v(t){return!!y(t)&&t.compare(a)<0}function _(t){if(!i.isBuffer(t))return!1;if(t.length<33)return!1;const e=t[0],r=t.slice(1,33);if(0===r.compare(u))return!1;if(r.compare(h)>=0)return!1;if((2===e||3===e)&&33===t.length){try{M(t)}catch(s){return!1}return!0}const n=t.slice(33);return 0!==n.compare(u)&&(!(n.compare(h)>=0)&&(4===e&&65===t.length))}function b(t){return 4!==t[0]}function S(t){return!!y(t)&&(t.compare(u)>0&&t.compare(a)<0)}function E(t,e){return void 0===t&&void 0!==e?b(e):void 0===t||t}function P(t){return new n(t)}function O(t){return t.toArrayLike(i,"be",32)}function M(t){return s.curve.decodePoint(t)}function T(t,e){return i.from(t._encode(e))}function I(t,e,r){if(!y(t))throw new TypeError(w);if(!S(e))throw new TypeError(l);if(void 0!==r&&!y(r))throw new TypeError(g);const n=P(e),s=P(t);let u,a;o(t,e,(function(t){const e=P(t),r=f.mul(e);return!r.isInfinity()&&(u=r.x.umod(p),0!==u.isZero()&&(a=e.invm(p).mul(s.add(n.mul(u))).umod(p),0!==a.isZero()))}),S,r),a.cmp(c)>0&&(a=p.sub(a));const h=i.allocUnsafe(64);return O(u).copy(h,0),O(a).copy(h,32),h}t.exports={isPoint:_,isPointCompressed:function(t){return!!_(t)&&b(t)},isPrivate:S,pointAdd:function(t,e,r){if(!_(t))throw new TypeError(d);if(!_(e))throw new TypeError(d);const i=M(t),n=M(e),s=i.add(n);return s.isInfinity()?null:T(s,E(r,t))},pointAddScalar:function(t,e,r){if(!_(t))throw new TypeError(d);if(!v(e))throw new TypeError(m);const i=E(r,t),n=M(t);if(0===e.compare(u))return T(n,i);const s=P(e),o=f.mul(s),a=n.add(o);return a.isInfinity()?null:T(a,i)},pointCompress:function(t,e){if(!_(t))throw new TypeError(d);const r=M(t);if(r.isInfinity())throw new TypeError(d);return T(r,E(e,t))},pointFromScalar:function(t,e){if(!S(t))throw new TypeError(l);const r=P(t),i=f.mul(r);return i.isInfinity()?null:T(i,E(e))},pointMultiply:function(t,e,r){if(!_(t))throw new TypeError(d);if(!v(e))throw new TypeError(m);const i=E(r,t),n=M(t),s=P(e),o=n.mul(s);return o.isInfinity()?null:T(o,i)},privateAdd:function(t,e){if(!S(t))throw new TypeError(l);if(!v(e))throw new TypeError(m);const r=P(t),i=P(e),n=O(r.add(i).umod(p));return S(n)?n:null},privateSub:function(t,e){if(!S(t))throw new TypeError(l);if(!v(e))throw new TypeError(m);const r=P(t),i=P(e),n=O(r.sub(i).umod(p));return S(n)?n:null},sign:function(t,e){return I(t,e)},signWithEntropy:function(t,e,r){return I(t,e,r)},verify:function(t,e,r,n){if(!y(t))throw new TypeError(w);if(!_(e))throw new TypeError(d);if(!function(t){const e=t.slice(0,32),r=t.slice(32,64);return i.isBuffer(t)&&64===t.length&&e.compare(a)<0&&r.compare(a)<0}(r))throw new TypeError("Expected Signature");const s=M(e),o=P(r.slice(0,32)),u=P(r.slice(32,64));if(n&&u.cmp(c)>0)return!1;if(o.gtn(0)<=0)return!1;if(u.gtn(0)<=0)return!1;const h=P(t),l=u.invm(p),m=h.mul(l).umod(p),g=o.mul(l).umod(p),v=f.mulAdd(m,s,g);return!v.isInfinity()&&v.x.umod(p).eq(o)}}},811095:function(t,e,r){!function(t,e){"use strict";function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function s(t,e,r){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var o;"object"===typeof t?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(542728).Buffer}catch(O){}function u(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function a(t,e,r){var i=u(t,r);return r-1>=e&&(i|=u(t,r-1)<<4),i}function h(t,e,r,i){for(var n=0,s=Math.min(t.length,r),o=e;o<s;o++){var u=t.charCodeAt(o)-48;n*=i,n+=u>=49?u-49+10:u>=17?u-17+10:u}return n}s.isBN=function(t){return t instanceof s||null!==t&&"object"===typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,r):(this._parseBase(t,e,n),"le"===r&&this._initArray(this.toArray(),e,r)))},s.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},s.prototype._initArray=function(t,e,r){if(i("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var s,o,u=0;if("be"===r)for(n=t.length-1,s=0;n>=0;n-=3)o=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[s]|=o<<u&67108863,this.words[s+1]=o>>>26-u&67108863,(u+=24)>=26&&(u-=26,s++);else if("le"===r)for(n=0,s=0;n<t.length;n+=3)o=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[s]|=o<<u&67108863,this.words[s+1]=o>>>26-u&67108863,(u+=24)>=26&&(u-=26,s++);return this.strip()},s.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,s=0,o=0;if("be"===r)for(i=t.length-1;i>=e;i-=2)n=a(t,e,i)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;else for(i=(t.length-e)%2===0?e+1:e;i<t.length;i+=2)n=a(t,e,i)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;this.strip()},s.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=e)i++;i--,n=n/e|0;for(var s=t.length-r,o=s%i,u=Math.min(s,s-o)+r,a=0,p=r;p<u;p+=i)a=h(t,p,p+i,e),this.imuln(n),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(0!==o){var c=1;for(a=h(t,p,t.length,e),p=0;p<o;p++)c*=e;this.imuln(c),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this.strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function l(t,e,r){r.negative=e.negative^t.negative;var i=t.length+e.length|0;r.length=i,i=i-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,u=67108863&o,a=o/67108864|0;r.words[0]=u;for(var h=1;h<i;h++){for(var p=a>>>26,c=67108863&a,f=Math.min(h,e.length-1),l=Math.max(0,h-t.length+1);l<=f;l++){var d=h-l|0;p+=(o=(n=0|t.words[d])*(s=0|e.words[l])+c)/67108864|0,c=67108863&o}r.words[h]=0|c,a=0|p}return 0!==a?r.words[h]=0|a:r.length--,r.strip()}s.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var n=0,s=0,o=0;o<this.length;o++){var u=this.words[o],a=(16777215&(u<<n|s)).toString(16);r=0!==(s=u>>>24-n&16777215)||o!==this.length-1?p[6-a.length]+a+r:a+r,(n+=2)>=26&&(n-=26,o--)}for(0!==s&&(r=s.toString(16)+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var h=c[t],l=f[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(l).toString(t);r=(d=d.idivn(l)).isZero()?m+r:p[h-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(t,e){return i("undefined"!==typeof o),this.toArrayLike(o,t,e)},s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},s.prototype.toArrayLike=function(t,e,r){var n=this.byteLength(),s=r||Math.max(1,n);i(n<=s,"byte array longer than desired length"),i(s>0,"Requested array length <= 0"),this.strip();var o,u,a="le"===e,h=new t(s),p=this.clone();if(a){for(u=0;!p.isZero();u++)o=p.andln(255),p.iushrn(8),h[u]=o;for(;u<s;u++)h[u]=0}else{for(u=0;u<s-n;u++)h[u]=0;for(u=0;!p.isZero();u++)o=p.andln(255),p.iushrn(8),h[s-u-1]=o}return h},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},s.prototype.ior=function(t){return i(0===(this.negative|t.negative)),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},s.prototype.iand=function(t){return i(0===(this.negative|t.negative)),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var i=0;i<r.length;i++)this.words[i]=e.words[i]^r.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this.strip()},s.prototype.ixor=function(t){return i(0===(this.negative|t.negative)),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){i("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){i("number"===typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<n:this.words[r]&~(1<<n),this.strip()},s.prototype.iadd=function(t){var e,r,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,i=t):(r=t,i=this);for(var n=0,s=0;s<i.length;s++)e=(0|r.words[s])+(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<r.length;s++)e=(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,i,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=t):(r=t,i=this);for(var s=0,o=0;o<i.length;o++)s=(e=(0|r.words[o])-(0|i.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<r.length;o++)s=(e=(0|r.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,r){var i,n,s,o=t.words,u=e.words,a=r.words,h=0,p=0|o[0],c=8191&p,f=p>>>13,l=0|o[1],d=8191&l,m=l>>>13,w=0|o[2],g=8191&w,y=w>>>13,v=0|o[3],_=8191&v,b=v>>>13,S=0|o[4],E=8191&S,P=S>>>13,O=0|o[5],M=8191&O,T=O>>>13,I=0|o[6],k=8191&I,A=I>>>13,H=0|o[7],N=8191&H,U=H>>>13,B=0|o[8],C=8191&B,x=B>>>13,R=0|o[9],K=8191&R,L=R>>>13,D=0|u[0],W=8191&D,F=D>>>13,q=0|u[1],V=8191&q,j=q>>>13,G=0|u[2],X=8191&G,$=G>>>13,z=0|u[3],Y=8191&z,Z=z>>>13,Q=0|u[4],J=8191&Q,tt=Q>>>13,et=0|u[5],rt=8191&et,it=et>>>13,nt=0|u[6],st=8191&nt,ot=nt>>>13,ut=0|u[7],at=8191&ut,ht=ut>>>13,pt=0|u[8],ct=8191&pt,ft=pt>>>13,lt=0|u[9],dt=8191&lt,mt=lt>>>13;r.negative=t.negative^e.negative,r.length=19;var wt=(h+(i=Math.imul(c,W))|0)+((8191&(n=(n=Math.imul(c,F))+Math.imul(f,W)|0))<<13)|0;h=((s=Math.imul(f,F))+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,i=Math.imul(d,W),n=(n=Math.imul(d,F))+Math.imul(m,W)|0,s=Math.imul(m,F);var gt=(h+(i=i+Math.imul(c,V)|0)|0)+((8191&(n=(n=n+Math.imul(c,j)|0)+Math.imul(f,V)|0))<<13)|0;h=((s=s+Math.imul(f,j)|0)+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,i=Math.imul(g,W),n=(n=Math.imul(g,F))+Math.imul(y,W)|0,s=Math.imul(y,F),i=i+Math.imul(d,V)|0,n=(n=n+Math.imul(d,j)|0)+Math.imul(m,V)|0,s=s+Math.imul(m,j)|0;var yt=(h+(i=i+Math.imul(c,X)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(f,X)|0))<<13)|0;h=((s=s+Math.imul(f,$)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,i=Math.imul(_,W),n=(n=Math.imul(_,F))+Math.imul(b,W)|0,s=Math.imul(b,F),i=i+Math.imul(g,V)|0,n=(n=n+Math.imul(g,j)|0)+Math.imul(y,V)|0,s=s+Math.imul(y,j)|0,i=i+Math.imul(d,X)|0,n=(n=n+Math.imul(d,$)|0)+Math.imul(m,X)|0,s=s+Math.imul(m,$)|0;var vt=(h+(i=i+Math.imul(c,Y)|0)|0)+((8191&(n=(n=n+Math.imul(c,Z)|0)+Math.imul(f,Y)|0))<<13)|0;h=((s=s+Math.imul(f,Z)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,i=Math.imul(E,W),n=(n=Math.imul(E,F))+Math.imul(P,W)|0,s=Math.imul(P,F),i=i+Math.imul(_,V)|0,n=(n=n+Math.imul(_,j)|0)+Math.imul(b,V)|0,s=s+Math.imul(b,j)|0,i=i+Math.imul(g,X)|0,n=(n=n+Math.imul(g,$)|0)+Math.imul(y,X)|0,s=s+Math.imul(y,$)|0,i=i+Math.imul(d,Y)|0,n=(n=n+Math.imul(d,Z)|0)+Math.imul(m,Y)|0,s=s+Math.imul(m,Z)|0;var _t=(h+(i=i+Math.imul(c,J)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,J)|0))<<13)|0;h=((s=s+Math.imul(f,tt)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,i=Math.imul(M,W),n=(n=Math.imul(M,F))+Math.imul(T,W)|0,s=Math.imul(T,F),i=i+Math.imul(E,V)|0,n=(n=n+Math.imul(E,j)|0)+Math.imul(P,V)|0,s=s+Math.imul(P,j)|0,i=i+Math.imul(_,X)|0,n=(n=n+Math.imul(_,$)|0)+Math.imul(b,X)|0,s=s+Math.imul(b,$)|0,i=i+Math.imul(g,Y)|0,n=(n=n+Math.imul(g,Z)|0)+Math.imul(y,Y)|0,s=s+Math.imul(y,Z)|0,i=i+Math.imul(d,J)|0,n=(n=n+Math.imul(d,tt)|0)+Math.imul(m,J)|0,s=s+Math.imul(m,tt)|0;var bt=(h+(i=i+Math.imul(c,rt)|0)|0)+((8191&(n=(n=n+Math.imul(c,it)|0)+Math.imul(f,rt)|0))<<13)|0;h=((s=s+Math.imul(f,it)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,i=Math.imul(k,W),n=(n=Math.imul(k,F))+Math.imul(A,W)|0,s=Math.imul(A,F),i=i+Math.imul(M,V)|0,n=(n=n+Math.imul(M,j)|0)+Math.imul(T,V)|0,s=s+Math.imul(T,j)|0,i=i+Math.imul(E,X)|0,n=(n=n+Math.imul(E,$)|0)+Math.imul(P,X)|0,s=s+Math.imul(P,$)|0,i=i+Math.imul(_,Y)|0,n=(n=n+Math.imul(_,Z)|0)+Math.imul(b,Y)|0,s=s+Math.imul(b,Z)|0,i=i+Math.imul(g,J)|0,n=(n=n+Math.imul(g,tt)|0)+Math.imul(y,J)|0,s=s+Math.imul(y,tt)|0,i=i+Math.imul(d,rt)|0,n=(n=n+Math.imul(d,it)|0)+Math.imul(m,rt)|0,s=s+Math.imul(m,it)|0;var St=(h+(i=i+Math.imul(c,st)|0)|0)+((8191&(n=(n=n+Math.imul(c,ot)|0)+Math.imul(f,st)|0))<<13)|0;h=((s=s+Math.imul(f,ot)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,i=Math.imul(N,W),n=(n=Math.imul(N,F))+Math.imul(U,W)|0,s=Math.imul(U,F),i=i+Math.imul(k,V)|0,n=(n=n+Math.imul(k,j)|0)+Math.imul(A,V)|0,s=s+Math.imul(A,j)|0,i=i+Math.imul(M,X)|0,n=(n=n+Math.imul(M,$)|0)+Math.imul(T,X)|0,s=s+Math.imul(T,$)|0,i=i+Math.imul(E,Y)|0,n=(n=n+Math.imul(E,Z)|0)+Math.imul(P,Y)|0,s=s+Math.imul(P,Z)|0,i=i+Math.imul(_,J)|0,n=(n=n+Math.imul(_,tt)|0)+Math.imul(b,J)|0,s=s+Math.imul(b,tt)|0,i=i+Math.imul(g,rt)|0,n=(n=n+Math.imul(g,it)|0)+Math.imul(y,rt)|0,s=s+Math.imul(y,it)|0,i=i+Math.imul(d,st)|0,n=(n=n+Math.imul(d,ot)|0)+Math.imul(m,st)|0,s=s+Math.imul(m,ot)|0;var Et=(h+(i=i+Math.imul(c,at)|0)|0)+((8191&(n=(n=n+Math.imul(c,ht)|0)+Math.imul(f,at)|0))<<13)|0;h=((s=s+Math.imul(f,ht)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,i=Math.imul(C,W),n=(n=Math.imul(C,F))+Math.imul(x,W)|0,s=Math.imul(x,F),i=i+Math.imul(N,V)|0,n=(n=n+Math.imul(N,j)|0)+Math.imul(U,V)|0,s=s+Math.imul(U,j)|0,i=i+Math.imul(k,X)|0,n=(n=n+Math.imul(k,$)|0)+Math.imul(A,X)|0,s=s+Math.imul(A,$)|0,i=i+Math.imul(M,Y)|0,n=(n=n+Math.imul(M,Z)|0)+Math.imul(T,Y)|0,s=s+Math.imul(T,Z)|0,i=i+Math.imul(E,J)|0,n=(n=n+Math.imul(E,tt)|0)+Math.imul(P,J)|0,s=s+Math.imul(P,tt)|0,i=i+Math.imul(_,rt)|0,n=(n=n+Math.imul(_,it)|0)+Math.imul(b,rt)|0,s=s+Math.imul(b,it)|0,i=i+Math.imul(g,st)|0,n=(n=n+Math.imul(g,ot)|0)+Math.imul(y,st)|0,s=s+Math.imul(y,ot)|0,i=i+Math.imul(d,at)|0,n=(n=n+Math.imul(d,ht)|0)+Math.imul(m,at)|0,s=s+Math.imul(m,ht)|0;var Pt=(h+(i=i+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;h=((s=s+Math.imul(f,ft)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,i=Math.imul(K,W),n=(n=Math.imul(K,F))+Math.imul(L,W)|0,s=Math.imul(L,F),i=i+Math.imul(C,V)|0,n=(n=n+Math.imul(C,j)|0)+Math.imul(x,V)|0,s=s+Math.imul(x,j)|0,i=i+Math.imul(N,X)|0,n=(n=n+Math.imul(N,$)|0)+Math.imul(U,X)|0,s=s+Math.imul(U,$)|0,i=i+Math.imul(k,Y)|0,n=(n=n+Math.imul(k,Z)|0)+Math.imul(A,Y)|0,s=s+Math.imul(A,Z)|0,i=i+Math.imul(M,J)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(T,J)|0,s=s+Math.imul(T,tt)|0,i=i+Math.imul(E,rt)|0,n=(n=n+Math.imul(E,it)|0)+Math.imul(P,rt)|0,s=s+Math.imul(P,it)|0,i=i+Math.imul(_,st)|0,n=(n=n+Math.imul(_,ot)|0)+Math.imul(b,st)|0,s=s+Math.imul(b,ot)|0,i=i+Math.imul(g,at)|0,n=(n=n+Math.imul(g,ht)|0)+Math.imul(y,at)|0,s=s+Math.imul(y,ht)|0,i=i+Math.imul(d,ct)|0,n=(n=n+Math.imul(d,ft)|0)+Math.imul(m,ct)|0,s=s+Math.imul(m,ft)|0;var Ot=(h+(i=i+Math.imul(c,dt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(f,dt)|0))<<13)|0;h=((s=s+Math.imul(f,mt)|0)+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,i=Math.imul(K,V),n=(n=Math.imul(K,j))+Math.imul(L,V)|0,s=Math.imul(L,j),i=i+Math.imul(C,X)|0,n=(n=n+Math.imul(C,$)|0)+Math.imul(x,X)|0,s=s+Math.imul(x,$)|0,i=i+Math.imul(N,Y)|0,n=(n=n+Math.imul(N,Z)|0)+Math.imul(U,Y)|0,s=s+Math.imul(U,Z)|0,i=i+Math.imul(k,J)|0,n=(n=n+Math.imul(k,tt)|0)+Math.imul(A,J)|0,s=s+Math.imul(A,tt)|0,i=i+Math.imul(M,rt)|0,n=(n=n+Math.imul(M,it)|0)+Math.imul(T,rt)|0,s=s+Math.imul(T,it)|0,i=i+Math.imul(E,st)|0,n=(n=n+Math.imul(E,ot)|0)+Math.imul(P,st)|0,s=s+Math.imul(P,ot)|0,i=i+Math.imul(_,at)|0,n=(n=n+Math.imul(_,ht)|0)+Math.imul(b,at)|0,s=s+Math.imul(b,ht)|0,i=i+Math.imul(g,ct)|0,n=(n=n+Math.imul(g,ft)|0)+Math.imul(y,ct)|0,s=s+Math.imul(y,ft)|0;var Mt=(h+(i=i+Math.imul(d,dt)|0)|0)+((8191&(n=(n=n+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;h=((s=s+Math.imul(m,mt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,i=Math.imul(K,X),n=(n=Math.imul(K,$))+Math.imul(L,X)|0,s=Math.imul(L,$),i=i+Math.imul(C,Y)|0,n=(n=n+Math.imul(C,Z)|0)+Math.imul(x,Y)|0,s=s+Math.imul(x,Z)|0,i=i+Math.imul(N,J)|0,n=(n=n+Math.imul(N,tt)|0)+Math.imul(U,J)|0,s=s+Math.imul(U,tt)|0,i=i+Math.imul(k,rt)|0,n=(n=n+Math.imul(k,it)|0)+Math.imul(A,rt)|0,s=s+Math.imul(A,it)|0,i=i+Math.imul(M,st)|0,n=(n=n+Math.imul(M,ot)|0)+Math.imul(T,st)|0,s=s+Math.imul(T,ot)|0,i=i+Math.imul(E,at)|0,n=(n=n+Math.imul(E,ht)|0)+Math.imul(P,at)|0,s=s+Math.imul(P,ht)|0,i=i+Math.imul(_,ct)|0,n=(n=n+Math.imul(_,ft)|0)+Math.imul(b,ct)|0,s=s+Math.imul(b,ft)|0;var Tt=(h+(i=i+Math.imul(g,dt)|0)|0)+((8191&(n=(n=n+Math.imul(g,mt)|0)+Math.imul(y,dt)|0))<<13)|0;h=((s=s+Math.imul(y,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,i=Math.imul(K,Y),n=(n=Math.imul(K,Z))+Math.imul(L,Y)|0,s=Math.imul(L,Z),i=i+Math.imul(C,J)|0,n=(n=n+Math.imul(C,tt)|0)+Math.imul(x,J)|0,s=s+Math.imul(x,tt)|0,i=i+Math.imul(N,rt)|0,n=(n=n+Math.imul(N,it)|0)+Math.imul(U,rt)|0,s=s+Math.imul(U,it)|0,i=i+Math.imul(k,st)|0,n=(n=n+Math.imul(k,ot)|0)+Math.imul(A,st)|0,s=s+Math.imul(A,ot)|0,i=i+Math.imul(M,at)|0,n=(n=n+Math.imul(M,ht)|0)+Math.imul(T,at)|0,s=s+Math.imul(T,ht)|0,i=i+Math.imul(E,ct)|0,n=(n=n+Math.imul(E,ft)|0)+Math.imul(P,ct)|0,s=s+Math.imul(P,ft)|0;var It=(h+(i=i+Math.imul(_,dt)|0)|0)+((8191&(n=(n=n+Math.imul(_,mt)|0)+Math.imul(b,dt)|0))<<13)|0;h=((s=s+Math.imul(b,mt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,i=Math.imul(K,J),n=(n=Math.imul(K,tt))+Math.imul(L,J)|0,s=Math.imul(L,tt),i=i+Math.imul(C,rt)|0,n=(n=n+Math.imul(C,it)|0)+Math.imul(x,rt)|0,s=s+Math.imul(x,it)|0,i=i+Math.imul(N,st)|0,n=(n=n+Math.imul(N,ot)|0)+Math.imul(U,st)|0,s=s+Math.imul(U,ot)|0,i=i+Math.imul(k,at)|0,n=(n=n+Math.imul(k,ht)|0)+Math.imul(A,at)|0,s=s+Math.imul(A,ht)|0,i=i+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,ft)|0)+Math.imul(T,ct)|0,s=s+Math.imul(T,ft)|0;var kt=(h+(i=i+Math.imul(E,dt)|0)|0)+((8191&(n=(n=n+Math.imul(E,mt)|0)+Math.imul(P,dt)|0))<<13)|0;h=((s=s+Math.imul(P,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,i=Math.imul(K,rt),n=(n=Math.imul(K,it))+Math.imul(L,rt)|0,s=Math.imul(L,it),i=i+Math.imul(C,st)|0,n=(n=n+Math.imul(C,ot)|0)+Math.imul(x,st)|0,s=s+Math.imul(x,ot)|0,i=i+Math.imul(N,at)|0,n=(n=n+Math.imul(N,ht)|0)+Math.imul(U,at)|0,s=s+Math.imul(U,ht)|0,i=i+Math.imul(k,ct)|0,n=(n=n+Math.imul(k,ft)|0)+Math.imul(A,ct)|0,s=s+Math.imul(A,ft)|0;var At=(h+(i=i+Math.imul(M,dt)|0)|0)+((8191&(n=(n=n+Math.imul(M,mt)|0)+Math.imul(T,dt)|0))<<13)|0;h=((s=s+Math.imul(T,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,i=Math.imul(K,st),n=(n=Math.imul(K,ot))+Math.imul(L,st)|0,s=Math.imul(L,ot),i=i+Math.imul(C,at)|0,n=(n=n+Math.imul(C,ht)|0)+Math.imul(x,at)|0,s=s+Math.imul(x,ht)|0,i=i+Math.imul(N,ct)|0,n=(n=n+Math.imul(N,ft)|0)+Math.imul(U,ct)|0,s=s+Math.imul(U,ft)|0;var Ht=(h+(i=i+Math.imul(k,dt)|0)|0)+((8191&(n=(n=n+Math.imul(k,mt)|0)+Math.imul(A,dt)|0))<<13)|0;h=((s=s+Math.imul(A,mt)|0)+(n>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,i=Math.imul(K,at),n=(n=Math.imul(K,ht))+Math.imul(L,at)|0,s=Math.imul(L,ht),i=i+Math.imul(C,ct)|0,n=(n=n+Math.imul(C,ft)|0)+Math.imul(x,ct)|0,s=s+Math.imul(x,ft)|0;var Nt=(h+(i=i+Math.imul(N,dt)|0)|0)+((8191&(n=(n=n+Math.imul(N,mt)|0)+Math.imul(U,dt)|0))<<13)|0;h=((s=s+Math.imul(U,mt)|0)+(n>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,i=Math.imul(K,ct),n=(n=Math.imul(K,ft))+Math.imul(L,ct)|0,s=Math.imul(L,ft);var Ut=(h+(i=i+Math.imul(C,dt)|0)|0)+((8191&(n=(n=n+Math.imul(C,mt)|0)+Math.imul(x,dt)|0))<<13)|0;h=((s=s+Math.imul(x,mt)|0)+(n>>>13)|0)+(Ut>>>26)|0,Ut&=67108863;var Bt=(h+(i=Math.imul(K,dt))|0)+((8191&(n=(n=Math.imul(K,mt))+Math.imul(L,dt)|0))<<13)|0;return h=((s=Math.imul(L,mt))+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,a[0]=wt,a[1]=gt,a[2]=yt,a[3]=vt,a[4]=_t,a[5]=bt,a[6]=St,a[7]=Et,a[8]=Pt,a[9]=Ot,a[10]=Mt,a[11]=Tt,a[12]=It,a[13]=kt,a[14]=At,a[15]=Ht,a[16]=Nt,a[17]=Ut,a[18]=Bt,0!==h&&(a[19]=h,r.length++),r};function m(t,e,r){return(new w).mulp(t,e,r)}function w(t,e){this.x=t,this.y=e}Math.imul||(d=l),s.prototype.mulTo=function(t,e){var r,i=this.length+t.length;return r=10===this.length&&10===t.length?d(this,t,e):i<63?l(this,t,e):i<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var i=0,n=0,s=0;s<r.length-1;s++){var o=n;n=0;for(var u=67108863&i,a=Math.min(s,e.length-1),h=Math.max(0,s-t.length+1);h<=a;h++){var p=s-h,c=(0|t.words[p])*(0|e.words[h]),f=67108863&c;u=67108863&(f=f+u|0),n+=(o=(o=o+(c/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}r.words[s]=u,i=o,o=n}return 0!==i?r.words[s]=i:r.length--,r.strip()}(this,t,e):m(this,t,e),r},w.prototype.makeRBT=function(t){for(var e=new Array(t),r=s.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},w.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var i=0,n=0;n<e;n++)i|=(1&t)<<e-n-1,t>>=1;return i},w.prototype.permute=function(t,e,r,i,n,s){for(var o=0;o<s;o++)i[o]=e[t[o]],n[o]=r[t[o]]},w.prototype.transform=function(t,e,r,i,n,s){this.permute(s,t,e,r,i,n);for(var o=1;o<n;o<<=1)for(var u=o<<1,a=Math.cos(2*Math.PI/u),h=Math.sin(2*Math.PI/u),p=0;p<n;p+=u)for(var c=a,f=h,l=0;l<o;l++){var d=r[p+l],m=i[p+l],w=r[p+l+o],g=i[p+l+o],y=c*w-f*g;g=c*g+f*w,w=y,r[p+l]=d+w,i[p+l]=m+g,r[p+l+o]=d-w,i[p+l+o]=m-g,l!==u&&(y=a*c-h*f,f=a*f+h*c,c=y)}},w.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},w.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},w.prototype.normalize13b=function(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=67108863&n,r=n<67108864?0:n/67108864|0}return t},w.prototype.convert13b=function(t,e,r,n){for(var s=0,o=0;o<e;o++)s+=0|t[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*e;o<n;++o)r[o]=0;i(0===s),i(0===(-8192&s))},w.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},w.prototype.mulp=function(t,e,r){var i=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(i),s=this.stub(i),o=new Array(i),u=new Array(i),a=new Array(i),h=new Array(i),p=new Array(i),c=new Array(i),f=r.words;f.length=i,this.convert13b(t.words,t.length,o,i),this.convert13b(e.words,e.length,h,i),this.transform(o,s,u,a,i,n),this.transform(h,s,p,c,i,n);for(var l=0;l<i;l++){var d=u[l]*p[l]-a[l]*c[l];a[l]=u[l]*c[l]+a[l]*p[l],u[l]=d}return this.conjugate(u,a,i),this.transform(u,a,f,s,i,n),this.conjugate(f,s,i),this.normalize13b(f,i),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),m(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){i("number"===typeof t),i(t<67108864);for(var e=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,s=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=s>>>26,this.words[r]=67108863&s}return 0!==e&&(this.words[r]=e,this.length++),this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var i=r/26|0,n=r%26;e[r]=(t.words[i]&1<<n)>>>n}return e}(t);if(0===e.length)return new s(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var n=r.sqr();i<e.length;i++,n=n.sqr())0!==e[i]&&(r=r.mul(n));return r},s.prototype.iushln=function(t){i("number"===typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(e=0;e<this.length;e++){var u=this.words[e]&s,a=(0|this.words[e])-u<<r;this.words[e]=a|o,o=u>>>26-r}o&&(this.words[e]=o,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},s.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},s.prototype.iushrn=function(t,e,r){var n;i("number"===typeof t&&t>=0),n=e?(e-e%26)/26:0;var s=t%26,o=Math.min((t-s)/26,this.length),u=67108863^67108863>>>s<<s,a=r;if(n-=o,n=Math.max(0,n),a){for(var h=0;h<o;h++)a.words[h]=this.words[h];a.length=o}if(0===o);else if(this.length>o)for(this.length-=o,h=0;h<this.length;h++)this.words[h]=this.words[h+o];else this.words[0]=0,this.length=1;var p=0;for(h=this.length-1;h>=0&&(0!==p||h>=n);h--){var c=0|this.words[h];this.words[h]=p<<26-s|c>>>s,p=c&u}return a&&0!==p&&(a.words[a.length++]=p),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(t,e,r){return i(0===this.negative),this.iushrn(t,e,r)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){i("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,n=1<<e;return!(this.length<=r)&&!!(this.words[r]&n)},s.prototype.imaskn=function(t){i("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return i("number"===typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(i("number"===typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,r){var n,s,o=t.length+r;this._expand(o);var u=0;for(n=0;n<t.length;n++){s=(0|this.words[n+r])+u;var a=(0|t.words[n])*e;u=((s-=67108863&a)>>26)-(a/67108864|0),this.words[n+r]=67108863&s}for(;n<this.length-r;n++)u=(s=(0|this.words[n+r])+u)>>26,this.words[n+r]=67108863&s;if(0===u)return this.strip();for(i(-1===u),u=0,n=0;n<this.length;n++)u=(s=-(0|this.words[n])+u)>>26,this.words[n]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(t,e){var r=(this.length,t.length),i=this.clone(),n=t,o=0|n.words[n.length-1];0!==(r=26-this._countBits(o))&&(n=n.ushln(r),i.iushln(r),o=0|n.words[n.length-1]);var u,a=i.length-n.length;if("mod"!==e){(u=new s(null)).length=a+1,u.words=new Array(u.length);for(var h=0;h<u.length;h++)u.words[h]=0}var p=i.clone()._ishlnsubmul(n,1,a);0===p.negative&&(i=p,u&&(u.words[a]=1));for(var c=a-1;c>=0;c--){var f=67108864*(0|i.words[n.length+c])+(0|i.words[n.length+c-1]);for(f=Math.min(f/o|0,67108863),i._ishlnsubmul(n,f,c);0!==i.negative;)f--,i.negative=0,i._ishlnsubmul(n,1,c),i.isZero()||(i.negative^=1);u&&(u.words[c]=f)}return u&&u.strip(),i.strip(),"div"!==e&&0!==r&&i.iushrn(r),{div:u||null,mod:i}},s.prototype.divmod=function(t,e,r){return i(!t.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(u=this.neg().divmod(t,e),"mod"!==e&&(n=u.div.neg()),"div"!==e&&(o=u.mod.neg(),r&&0!==o.negative&&o.iadd(t)),{div:n,mod:o}):0===this.negative&&0!==t.negative?(u=this.divmod(t.neg(),e),"mod"!==e&&(n=u.div.neg()),{div:n,mod:u.mod}):0!==(this.negative&t.negative)?(u=this.neg().divmod(t.neg(),e),"div"!==e&&(o=u.mod.neg(),r&&0!==o.negative&&o.isub(t)),{div:u.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,o,u},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),n=t.andln(1),s=r.cmp(i);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modn=function(t){i(t<=67108863);for(var e=(1<<26)%t,r=0,n=this.length-1;n>=0;n--)r=(e*r+(0|this.words[n]))%t;return r},s.prototype.idivn=function(t){i(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*e;this.words[r]=n/t|0,e=n%t}return this.strip()},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new s(1),o=new s(0),u=new s(0),a=new s(1),h=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++h;for(var p=r.clone(),c=e.clone();!e.isZero();){for(var f=0,l=1;0===(e.words[0]&l)&&f<26;++f,l<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(p),o.isub(c)),n.iushrn(1),o.iushrn(1);for(var d=0,m=1;0===(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(u.isOdd()||a.isOdd())&&(u.iadd(p),a.isub(c)),u.iushrn(1),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),n.isub(u),o.isub(a)):(r.isub(e),u.isub(n),a.isub(o))}return{a:u,b:a,gcd:r.iushln(h)}},s.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,o=new s(1),u=new s(0),a=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var h=0,p=1;0===(e.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(e.iushrn(h);h-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);for(var c=0,f=1;0===(r.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(r.iushrn(c);c-- >0;)u.isOdd()&&u.iadd(a),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),o.isub(u)):(r.isub(e),u.isub(o))}return(n=0===e.cmpn(1)?o:u).cmpn(0)<0&&n.iadd(t),n},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var i=0;e.isEven()&&r.isEven();i++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=e.cmp(r);if(n<0){var s=e;e=r,r=s}else if(0===n||0===r.cmpn(1))break;e.isub(r)}return r.iushln(i)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return 0===(1&this.words[0])},s.prototype.isOdd=function(){return 1===(1&this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){i("number"===typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var s=n,o=r;0!==s&&o<this.length;o++){var u=0|this.words[o];s=(u+=s)>>>26,u&=67108863,this.words[o]=u}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|t.words[r];if(i!==n){i<n?e=-1:i>n&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new E(t)},s.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"===typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function P(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var i=e<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},n(v,y),v.prototype.split=function(t,e){for(var r=4194303,i=Math.min(t.length,9),n=0;n<i;n++)e.words[n]=t.words[n];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&r,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,t.words[n-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var i=0|t.words[r];e+=977*i,t.words[r]=67108863&e,e=64*i+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(_,y),n(b,y),n(S,y),S.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var i=19*(0|t.words[r])+e,n=67108863&i;i>>>=26,t.words[r]=n,e=i}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new _;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return g[t]=e,e},E.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){i(0===(t.negative|e.negative),"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2===1),3===e){var r=this.m.add(new s(1)).iushrn(2);return this.pow(t,r)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);i(!n.isZero());var u=new s(1).toRed(this),a=u.redNeg(),h=this.m.subn(1).iushrn(1),p=this.m.bitLength();for(p=new s(2*p*p).toRed(this);0!==this.pow(p,h).cmp(a);)p.redIAdd(a);for(var c=this.pow(p,n),f=this.pow(t,n.addn(1).iushrn(1)),l=this.pow(t,n),d=o;0!==l.cmp(u);){for(var m=l,w=0;0!==m.cmp(u);w++)m=m.redSqr();i(w<d);var g=this.pow(c,new s(1).iushln(d-w-1));f=f.redMul(g),c=g.redSqr(),l=l.redMul(c),d=w}return f},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new s(1).toRed(this),r[1]=t;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],t);var n=r[0],o=0,u=0,a=e.bitLength()%26;for(0===a&&(a=26),i=e.length-1;i>=0;i--){for(var h=e.words[i],p=a-1;p>=0;p--){var c=h>>p&1;n!==r[0]&&(n=this.sqr(n)),0!==c||0!==o?(o<<=1,o|=c,(4===++u||0===i&&0===p)&&(n=this.mul(n,r[o]),u=0,o=0)):u=0}a=26}return n},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new P(t)},n(P,E),P.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},P.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},P.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},P.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var r=t.mul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},P.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=r.nmd(t),this)},699624:(t,e,r)=>{var i=r(348834).Buffer;const n=r(550011),s=i.alloc(1,1),o=i.alloc(1,0);t.exports=function(t,e,r,u,a){let h=i.alloc(32,0),p=i.alloc(32,1);h=n("sha256",h).update(p).update(o).update(e).update(t).update(a||"").digest(),p=n("sha256",h).update(p).digest(),h=n("sha256",h).update(p).update(s).update(e).update(t).update(a||"").digest(),p=n("sha256",h).update(p).digest(),p=n("sha256",h).update(p).digest();let c=p;for(;!u(c)||!r(c);)h=n("sha256",h).update(p).update(o).digest(),p=n("sha256",h).update(p).digest(),p=n("sha256",h).update(p).digest(),c=p;return c}},80196:t=>{"use strict";t.exports=JSON.parse('{"OP_FALSE":0,"OP_0":0,"OP_PUSHDATA1":76,"OP_PUSHDATA2":77,"OP_PUSHDATA4":78,"OP_1NEGATE":79,"OP_RESERVED":80,"OP_TRUE":81,"OP_1":81,"OP_2":82,"OP_3":83,"OP_4":84,"OP_5":85,"OP_6":86,"OP_7":87,"OP_8":88,"OP_9":89,"OP_10":90,"OP_11":91,"OP_12":92,"OP_13":93,"OP_14":94,"OP_15":95,"OP_16":96,"OP_NOP":97,"OP_VER":98,"OP_IF":99,"OP_NOTIF":100,"OP_VERIF":101,"OP_VERNOTIF":102,"OP_ELSE":103,"OP_ENDIF":104,"OP_VERIFY":105,"OP_RETURN":106,"OP_TOALTSTACK":107,"OP_FROMALTSTACK":108,"OP_2DROP":109,"OP_2DUP":110,"OP_3DUP":111,"OP_2OVER":112,"OP_2ROT":113,"OP_2SWAP":114,"OP_IFDUP":115,"OP_DEPTH":116,"OP_DROP":117,"OP_DUP":118,"OP_NIP":119,"OP_OVER":120,"OP_PICK":121,"OP_ROLL":122,"OP_ROT":123,"OP_SWAP":124,"OP_TUCK":125,"OP_CAT":126,"OP_SUBSTR":127,"OP_LEFT":128,"OP_RIGHT":129,"OP_SIZE":130,"OP_INVERT":131,"OP_AND":132,"OP_OR":133,"OP_XOR":134,"OP_EQUAL":135,"OP_EQUALVERIFY":136,"OP_RESERVED1":137,"OP_RESERVED2":138,"OP_1ADD":139,"OP_1SUB":140,"OP_2MUL":141,"OP_2DIV":142,"OP_NEGATE":143,"OP_ABS":144,"OP_NOT":145,"OP_0NOTEQUAL":146,"OP_ADD":147,"OP_SUB":148,"OP_MUL":149,"OP_DIV":150,"OP_MOD":151,"OP_LSHIFT":152,"OP_RSHIFT":153,"OP_BOOLAND":154,"OP_BOOLOR":155,"OP_NUMEQUAL":156,"OP_NUMEQUALVERIFY":157,"OP_NUMNOTEQUAL":158,"OP_LESSTHAN":159,"OP_GREATERTHAN":160,"OP_LESSTHANOREQUAL":161,"OP_GREATERTHANOREQUAL":162,"OP_MIN":163,"OP_MAX":164,"OP_WITHIN":165,"OP_RIPEMD160":166,"OP_SHA1":167,"OP_SHA256":168,"OP_HASH160":169,"OP_HASH256":170,"OP_CODESEPARATOR":171,"OP_CHECKSIG":172,"OP_CHECKSIGVERIFY":173,"OP_CHECKMULTISIG":174,"OP_CHECKMULTISIGVERIFY":175,"OP_NOP1":176,"OP_NOP2":177,"OP_CHECKLOCKTIMEVERIFY":177,"OP_NOP3":178,"OP_CHECKSEQUENCEVERIFY":178,"OP_NOP4":179,"OP_NOP5":180,"OP_NOP6":181,"OP_NOP7":182,"OP_NOP8":183,"OP_NOP9":184,"OP_NOP10":185,"OP_PUBKEYHASH":253,"OP_PUBKEY":254,"OP_INVALIDOPCODE":255}')}}]);