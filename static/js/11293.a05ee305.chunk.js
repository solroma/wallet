(self.webpackChunkweb=self.webpackChunkweb||[]).push([[11293],{99817:(t,e,r)=>{"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==r)return;var n,o,s=[],i=!0,a=!1;try{for(r=r.call(t);!(i=(n=r.next()).done)&&(s.push(n.value),!e||s.length!==e);i=!0);}catch(c){a=!0,o=c}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s=r(561381),i=r(565251),a=i.isHexString,c=i.isString;function u(t){if(!c(t))return!1;var e=t.toLowerCase().split(":");if(2!==e.length&&3!==e.length)return!1;var r=e[0];return r===s.PREFIX_CFX||r===s.PREFIX_CFXTEST||r.startsWith(s.PREFIX_NET)&&/^([1-9]\d*)$/.test(r.slice(3))}function l(t){if(!u(t))throw new Error("invalid base32 address");var e=t.toLocaleLowerCase().split(":");return 3!==e.length?t:"".concat(e[0],":").concat(e[2])}function d(t){if(!a(t))throw new Error("Only hex is allowed");return t===s.ZERO_ADDRESS_HEX}function h(t){if(!a(t))throw new Error("Only hex is allowed");return t===s.ADMIN_CONTROL||t===s.SPONSOR_CONTROL||t===s.STAKING||t===s.CONFLUX_CONTEXT||t===s.POS_REGISTER||t===s.CROSS_SPACE_CALL||t===s.PARAMS_CONTROL}t.exports={hasNetworkPrefix:u,simplifyCfxAddress:l,shortenCfxAddress:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=n((t=l(t)).split(":"),2),o=r[0],s=r[1],i="cfx"!==o||e?4:8,a=s.slice(0,3),c=s.slice(s.length-i);return"".concat(o,":").concat(a,"...").concat(c)},isZeroAddress:d,isInternalContractAddress:h,isValidHexAddress:function(t){return a(t)&&42===t.length},isValidCfxHexAddress:function(t){return 42===t.length&&(!(!d(t)&&!h(t))||(t.startsWith("0x1")||t.startsWith("0x8")))}}},510760:(t,e,r)=>{"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(){return s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s.apply(this,arguments)}var i=r(692605),a=i.encode,c=i.decode,u=s({},r(99817)),l=r(565251).isString;t.exports=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({encode:a,decode:c,isValidCfxAddress:function(t){if(!l(t))return!1;try{return c(t),!0}catch(e){return!1}},verifyCfxAddress:function(t){return c(t),!0}},u)},660411:(t,e,r)=>{"use strict";function n(t,e){var r="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"===typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}for(var s=r(191484),i="ABCDEFGHJKMNPRSTUVWXYZ0123456789",a={},c=0;c<32;c++){var u=i.charAt(c);if(void 0!==a[u])throw new TypeError(u+" is ambiguous");a[u]=c}var l=s.BigInt(0),d=s.BigInt(1),h=s.BigInt(5),f=s.BigInt(35),g=s.BigInt(1),p=s.BigInt(2),m=s.BigInt(4),_=s.BigInt(8),y=s.BigInt(16),b=s.BigInt(34359738367),x=s.BigInt(656907472481),w=s.BigInt(522768456162),v=s.BigInt(0xf33e5fb3c4),I=s.BigInt(748107326120),E=s.BigInt(130178868336);t.exports={convertBit:function(t,e,r,o){var s,i=(1<<r)-1,a=[],c=0,u=0,l=n(t);try{for(l.s();!(s=l.n()).done;){var d=s.value;for(c+=e,u=u<<e|d;c>=r;)c-=r,a.push(u>>>c&i)}}catch(h){l.e(h)}finally{l.f()}if(u=u<<r-c&i,c&&o)a.push(u);else{if(u&&!o)throw new Error("Excess padding");if(c>=e&&!o)throw new Error("Non-zero padding")}return a},polyMod:function(t){var e,r=d,o=n(t);try{for(o.s();!(e=o.n()).done;){var i=e.value,a=s.signedRightShift(r,f);r=s.bitwiseAnd(r,b),r=s.leftShift(r,h),r=i?s.bitwiseXor(r,s.BigInt(i)):r,s.notEqual(s.bitwiseAnd(a,g),l)&&(r=s.bitwiseXor(r,x)),s.notEqual(s.bitwiseAnd(a,p),l)&&(r=s.bitwiseXor(r,w)),s.notEqual(s.bitwiseAnd(a,m),l)&&(r=s.bitwiseXor(r,v)),s.notEqual(s.bitwiseAnd(a,_),l)&&(r=s.bitwiseXor(r,I)),s.notEqual(s.bitwiseAnd(a,y),l)&&(r=s.bitwiseXor(r,E))}}catch(c){o.e(c)}finally{o.f()}return s.bitwiseXor(r,d)},ALPHABET:i,ALPHABET_MAP:a}},692605:(t,e,r)=>{"use strict";var n=r(348834).Buffer;function o(t,e){return i(t)||function(t,e){var r=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==r)return;var n,o,s=[],i=!0,a=!1;try{for(r=r.call(t);!(i=(n=r.next()).done)&&(s.push(n.value),!e||s.length!==e);i=!0);}catch(c){a=!0,o=c}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}(t,e)||l(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t){if(Array.isArray(t))return t}function a(t){return function(t){if(Array.isArray(t))return d(t)}(t)||c(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function u(t,e){var r="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=l(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){a=!0,s=t},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw s}}}}function l(t,e){if(t){if("string"===typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var h=r(660411),f=h.ALPHABET,g=h.ALPHABET_MAP,p=h.polyMod,m=h.convertBit,_=r(561381),y=r(565251).isHexString,b=0,x=4294967295;function w(t){switch(t){case _.PREFIX_CFXTEST:return _.NETID_TEST;case _.PREFIX_CFX:return _.NETID_MAIN;default:var e=t.slice(0,3),r=t.slice(3);if(e!==_.PREFIX_NET||!function(t){return/^([1-9]\d*)$/.test(t)&&Number(t)<=x}(r))throw new Error("netId prefix should be passed by 'cfx', 'cfxtest' or 'net[n]' ");if(Number(r)===_.NETID_TEST||Number(r)===_.NETID_MAIN)throw new Error("net1 or net1029 are invalid");return Number(r)}}function v(t){if(t.length<1)throw new Error("Empty payload in address");switch(240&t[0]){case 16:return _.TYPE_USER;case 128:return _.TYPE_CONTRACT;case 0:var e,r=u(t);try{for(r.s();!(e=r.n()).done;){if(0!==e.value)return _.TYPE_BUILTIN}}catch(n){r.e(n)}finally{r.f()}return _.TYPE_NULL;default:return _.TYPE_UNKNOWN}}t.exports={encode:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(y(t)&&(t=n.from(t.slice(2),"hex")),!(t instanceof n))throw new Error("hexAddress should be passed as a Buffer");if(t.length<20)throw new Error("hexAddress should be at least 20 bytes");var o=v(t).toUpperCase(),s=function(t){if(!Number.isInteger(t))throw new Error("netId should be passed as an integer");if(t<0||t>x)throw new Error("netId should be passed as in range [0, 0xFFFFFFFF]");switch(t){case _.NETID_TEST:return _.PREFIX_CFXTEST;case _.NETID_MAIN:return _.PREFIX_CFX;default:return"".concat(_.PREFIX_NET).concat(t)}}(e).toUpperCase(),i=n.from(s).map((function(t){return 31&t})),c=m([b].concat(a(t)),8,5,!0),u=p([].concat(a(i),[0],a(c),[0,0,0,0,0,0,0,0])),l=n.from(u.toString(16).padStart(10,"0"),"hex"),d=m(l,8,5,!0),h=c.map((function(t){return f[t]})).join(""),g=d.map((function(t){return f[t]})).join("");return r?"".concat(s,":TYPE.").concat(o,":").concat(h).concat(g):"".concat(s,":").concat(h).concat(g).toLowerCase()},decode:function(t){var e=t.toLowerCase(),r=t.toUpperCase();if(t!==e&&t!==r)throw new Error("Mixed-case address "+t);var d,h=o(t.toUpperCase().match(/^([^:]+):(.+:)?(.{34})(.{8})$/),5),f=h[1],_=h[2],y=h[3],x=h[4],I=n.from(f).map((function(t){return 31&t})),E=[],T=u(y);try{for(T.s();!(d=T.n()).done;){var A=d.value;E.push(g[A])}}catch(L){T.e(L)}finally{T.f()}var S,B=[],N=u(x);try{for(N.s();!(S=N.n()).done;){var C=S.value;B.push(g[C])}}catch(L){N.e(L)}finally{N.f()}var P,k=m(E,5,8),O=i(P=k)||c(P)||l(P)||s(),F=O[0],R=O.slice(1);if(F!==b)throw new Error("Can not recognize version byte");var D=n.from(R),$=w(f.toLowerCase()),j=v(D);if(_&&"type.".concat(j,":")!==_.toLowerCase())throw new Error("Type of address doesn't match");var U=p([].concat(a(I),[0],E,B));if(Number(U))throw new Error("Invalid checksum for ".concat(t));return{hexAddress:D,netId:$,type:j}}}},561381:t=>{"use strict";t.exports={TYPE_USER:"user",TYPE_CONTRACT:"contract",TYPE_BUILTIN:"builtin",TYPE_NULL:"null",TYPE_UNKNOWN:"unknown",PREFIX_CFX:"cfx",PREFIX_CFXTEST:"cfxtest",PREFIX_NET:"net",NETID_MAIN:1029,NETID_TEST:1,ZERO_ADDRESS_HEX:"0x0000000000000000000000000000000000000000",ADMIN_CONTROL:"0x0888000000000000000000000000000000000000",SPONSOR_CONTROL:"0x0888000000000000000000000000000000000001",STAKING:"0x0888000000000000000000000000000000000002",CONFLUX_CONTEXT:"0x0888000000000000000000000000000000000004",POS_REGISTER:"0x0888000000000000000000000000000000000005",CROSS_SPACE_CALL:"0x0888000000000000000000000000000000000006",PARAMS_CONTROL:"0x0888000000000000000000000000000000000007"}},565251:(t,e)=>{"use strict";e.isHexString=function(t){return"string"===typeof t&&t.match(/^0x[0-9A-Fa-f]*$/)},e.isString=function(t){return"string"===typeof t}},797358:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verifyState=e.verifyIdentifier=e.verifyType=e.checkModifier=void 0;var n=r(298154),o={calldata:!0,memory:!0,storage:!0},s={calldata:!0,memory:!0};e.checkModifier=function(t,e){if("bytes"===t||"string"===t){if(o[e])return!0}else if("address"===t){if("payable"===e)return!0}else if((t.indexOf("[")>=0||"tuple"===t)&&s[e])return!0;return(o[e]||"payable"===e)&&n.logger.throwArgumentError("invalid modifier","name",e),!1},e.verifyType=function(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t};var i=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");e.verifyIdentifier=function(t){return t&&t.match(i)||n.logger.throwArgumentError('invalid identifier "'+t+'"',"value",t),t},e.verifyState=function(t){var e={constant:!1,payable:!0,stateMutability:"payable"};return null!=t.stateMutability?(e.stateMutability=t.stateMutability,e.constant="view"===e.stateMutability||"pure"===e.stateMutability,null!=t.constant&&!!t.constant!==e.constant&&n.logger.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable="payable"===e.stateMutability,null!=t.payable&&!!t.payable!==e.payable&&n.logger.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):null!=t.payable?(e.payable=!!t.payable,null!=t.constant||e.payable||"constructor"===t.type||n.logger.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&n.logger.throwArgumentError("cannot have constant payable function","value",t)):null!=t.constant?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):"constructor"!==t.type&&n.logger.throwArgumentError("unable to determine stateMutability","value",t),e}},6659:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContractABI=e.parseABIFromString=void 0;var n=r(93060),o=r(581864),s=r(298154),i=r(925011);e.parseABIFromString=function(t){var e=new a(t);return JSON.parse(e.format("json"))};var a=function(){function t(e){var r=this.constructor,n=this;s.logger.checkNew(r,t);var a=[];a="string"===typeof e?JSON.parse(e):e,(0,i.defineReadOnly)(this,"fragments",a.map((function(t){return(0,o.parseFragment)(t)})).filter((function(t){return null!=t}))),(0,i.defineReadOnly)(this,"functions",{}),(0,i.defineReadOnly)(this,"errors",{}),(0,i.defineReadOnly)(this,"events",{}),(0,i.defineReadOnly)(this,"structs",{}),this.fragments.forEach((function(t){var e=null;switch(t.type){case"constructor":default:return;case"function":e=n.functions;break;case"event":e=n.events;break;case"error":e=n.errors}var r=t.format();e[r]?s.logger.warn("duplicate definition - "+r):e[r]=t}))}return t.prototype.format=function(t){t||(t=n.FormatTypes.full),t===n.FormatTypes.sighash&&s.logger.throwArgumentError("interface does not support formatting sighash","format",t);var e=this.fragments.map((function(e){return e.format(t)}));return t===n.FormatTypes.json?JSON.stringify(e.map((function(t){return JSON.parse(t)}))):e},t}();e.ContractABI=a},93060:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FormatTypes=void 0,e.FormatTypes=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"})},553534:function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.ConstructorFragment=void 0;var o=r(298154),s=r(703671),i=r(455585),a=r(797358),c=r(925011),u=r(93060),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.format=function(t){if(t||(t=u.FormatTypes.sighash),u.FormatTypes[t]||o.logger.throwArgumentError("invalid format type","format",t),t===u.FormatTypes.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability,inputs:this.inputs.map((function(e){return JSON.parse(e.format(t))}))});t===u.FormatTypes.sighash&&o.logger.throwError("cannot format a constructor for sighash",o.Logger.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});var e="constructor("+this.inputs.map((function(e){return e.format(t)})).join(t===u.FormatTypes.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "),e.trim()},e.from=function(t){return"string"===typeof t?e.fromString(t):e.fromObject(t)},e.fromObject=function(t){if(e.isConstructorFragment(t))return t;"constructor"!==t.type&&o.logger.throwArgumentError("invalid constructor object","value",t);var r=(0,a.verifyState)(t);r.constant&&o.logger.throwArgumentError("constructor cannot be constant","value",t);var n={name:null,type:t.type,inputs:t.inputs?t.inputs.map(s.ParamType.fromObject):[],payable:r.payable,stateMutability:r.stateMutability};return new e(c._constructorGuard,n)},e.fromString=function(t){var r={type:"constructor"},n=t.match(i.regexParen);return n&&"constructor"===n[1].trim()||o.logger.throwArgumentError("invalid constructor string","value",t),r.inputs=(0,s.parseParams)(n[2].trim(),!1),(0,i.parseModifiers)(n[3].trim(),r),e.fromObject(r)},e.isConstructorFragment=function(t){return t&&t._isFragment&&"constructor"===t.type},e}(i.Fragment);e.ConstructorFragment=l},820102:function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorFragment=void 0;var o=r(298154),s=r(703671),i=r(455585),a=r(797358),c=r(925011),u=r(93060),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.format=function(t){if(t||(t=u.FormatTypes.sighash),u.FormatTypes[t]||o.logger.throwArgumentError("invalid format type","format",t),t===u.FormatTypes.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((function(e){return JSON.parse(e.format(t))}))});var e="";return t!==u.FormatTypes.sighash&&(e+="error "),(e+=this.name+"("+this.inputs.map((function(e){return e.format(t)})).join(t===u.FormatTypes.full?", ":",")+") ").trim()},e.from=function(t){return"string"===typeof t?e.fromString(t):e.fromObject(t)},e.fromObject=function(t){if(e.isErrorFragment(t))return t;"error"!==t.type&&o.logger.throwArgumentError("invalid error object","value",t);var r={type:t.type,name:(0,a.verifyIdentifier)(t.name),inputs:t.inputs?t.inputs.map(s.ParamType.fromObject):[]};return new e(c._constructorGuard,r)},e.fromString=function(t){var r={type:"error"},n=t.match(i.regexParen);return n||o.logger.throwArgumentError("invalid error signature","value",t),r.name=n[1].trim(),r.name&&(0,a.verifyIdentifier)(r.name),r.inputs=(0,s.parseParams)(n[2],!1),e.fromObject(r)},e.isErrorFragment=function(t){return t&&t._isFragment&&"error"===t.type},e}(i.Fragment);e.ErrorFragment=l},817523:function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.EventFragment=void 0;var o=r(298154),s=r(703671),i=r(455585),a=r(797358),c=r(925011),u=r(93060),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.format=function(t){if(t||(t=u.FormatTypes.sighash),u.FormatTypes[t]||o.logger.throwArgumentError("invalid format type","format",t),t===u.FormatTypes.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((function(e){return JSON.parse(e.format(t))}))});var e="";return t!==u.FormatTypes.sighash&&(e+="event "),e+=this.name+"("+this.inputs.map((function(e){return e.format(t)})).join(t===u.FormatTypes.full?", ":",")+") ",t!==u.FormatTypes.sighash&&this.anonymous&&(e+="anonymous "),e.trim()},e.from=function(t){return"string"===typeof t?e.fromString(t):e.fromObject(t)},e.fromObject=function(t){if(e.isEventFragment(t))return t;"event"!==t.type&&o.logger.throwArgumentError("invalid event object","value",t);var r={name:(0,a.verifyIdentifier)(t.name),anonymous:t.anonymous,inputs:t.inputs?t.inputs.map(s.ParamType.fromObject):[],type:"event"};return new e(c._constructorGuard,r)},e.fromString=function(t){var r=t.match(i.regexParen);r||o.logger.throwArgumentError("invalid event string","value",t);var n=!1;return r[3].split(" ").forEach((function(t){switch(t.trim()){case"anonymous":n=!0;break;case"":break;default:o.logger.warn("unknown modifier: "+t)}})),e.fromObject({name:r[1].trim(),anonymous:n,inputs:(0,s.parseParams)(r[2],!0),type:"event"})},e.isEventFragment=function(t){return t&&t._isFragment&&"event"===t.type},e}(i.Fragment);e.EventFragment=l},455585:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseModifiers=e.Fragment=e.regexParen=void 0;var n=r(298154),o=r(925011);e.regexParen=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");var s=function(){function t(t,e){t!==o._constructorGuard&&n.logger.throwError("use a static from method",n.Logger.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),(0,o.populate)(this,e),this._isFragment=!0,Object.freeze(this)}return t.isFragment=function(t){return!(!t||!t._isFragment)},t}();e.Fragment=s,e.parseModifiers=function(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach((function(t){switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}}))}},173001:function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionFragment=void 0;var o=r(298154),s=r(703671),i=r(455585),a=r(553534),c=r(797358),u=r(925011),l=r(93060),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.from=function(t){return"string"===typeof t?e.fromString(t):e.fromObject(t)},e.prototype.format=function(t){if(t||(t=l.FormatTypes.sighash),l.FormatTypes[t]||o.logger.throwArgumentError("invalid format type","format",t),t===l.FormatTypes.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability,payable:this.payable,inputs:this.inputs.map((function(e){return JSON.parse(e.format(t))})),outputs:this.outputs.map((function(e){return JSON.parse(e.format(t))}))});var e="";return t!==l.FormatTypes.sighash&&(e+="function "),e+=this.name+"("+this.inputs.map((function(e){return e.format(t)})).join(t===l.FormatTypes.full?", ":",")+") ",t!==l.FormatTypes.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "):this.constant&&(e+="view "),this.outputs&&this.outputs.length&&(e+="returns ("+this.outputs.map((function(e){return e.format(t)})).join(", ")+") ")),e.trim()},e.fromObject=function(t){if(e.isFunctionFragment(t))return t;"function"!==t.type&&o.logger.throwArgumentError("invalid function object","value",t);var r=(0,c.verifyState)(t),n={type:t.type,name:(0,c.verifyIdentifier)(t.name),constant:r.constant,inputs:t.inputs?t.inputs.map(s.ParamType.fromObject):[],outputs:t.outputs?t.outputs.map(s.ParamType.fromObject):[],payable:r.payable,stateMutability:r.stateMutability};return new e(u._constructorGuard,n)},e.fromString=function(t){var r={type:"function"},n=t.split(" returns ");n.length>2&&o.logger.throwArgumentError("invalid function string","value",t);var a=n[0].match(i.regexParen);if(a||o.logger.throwArgumentError("invalid function signature","value",t),r.name=a[1].trim(),r.name&&(0,c.verifyIdentifier)(r.name),r.inputs=(0,s.parseParams)(a[2],!1),(0,i.parseModifiers)(a[3].trim(),r),n.length>1){var u=n[1].match(i.regexParen);""==u[1].trim()&&""==u[3].trim()||o.logger.throwArgumentError("unexpected tokens","value",t),r.outputs=(0,s.parseParams)(u[2],!1)}else r.outputs=[];return e.fromObject(r)},e.isFunctionFragment=function(t){return t&&t._isFragment&&"function"===t.type},e}(a.ConstructorFragment);e.FunctionFragment=d},581864:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseFragment=e.Fragment=e.EventFragment=e.FunctionFragment=e.ErrorFragment=e.ConstructorFragment=void 0;var n=r(553534);Object.defineProperty(e,"ConstructorFragment",{enumerable:!0,get:function(){return n.ConstructorFragment}});var o=r(820102);Object.defineProperty(e,"ErrorFragment",{enumerable:!0,get:function(){return o.ErrorFragment}});var s=r(173001);Object.defineProperty(e,"FunctionFragment",{enumerable:!0,get:function(){return s.FunctionFragment}});var i=r(817523);Object.defineProperty(e,"EventFragment",{enumerable:!0,get:function(){return i.EventFragment}});var a=r(455585);Object.defineProperty(e,"Fragment",{enumerable:!0,get:function(){return a.Fragment}});var c=r(298154);e.parseFragment=function(t){return a.Fragment.isFragment(t)?t:"string"===typeof t?function(t){return"event"===(t=(t=(t=t.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?i.EventFragment.fromString(t.substring(5).trim()):"function"===t.split(" ")[0]?s.FunctionFragment.fromString(t.substring(8).trim()):"constructor"===t.split("(")[0].trim()?n.ConstructorFragment.fromString(t.trim()):"error"===t.split(" ")[0]?o.ErrorFragment.fromString(t.substring(5).trim()):c.logger.throwArgumentError("unsupported fragment","value",t)}(t):function(t){if(a.Fragment.isFragment(t))return t;switch(t.type){case"function":return s.FunctionFragment.fromObject(t);case"event":return i.EventFragment.fromObject(t);case"constructor":return n.ConstructorFragment.fromObject(t);case"error":return o.ErrorFragment.fromObject(t);case"fallback":case"receive":return null}return c.logger.throwArgumentError("invalid fragment object","value",t)}(t)}},298154:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.logger=void 0;var n=r(78011);Object.defineProperty(e,"Logger",{enumerable:!0,get:function(){return n.Logger}});var o=r(497972),s=new n.Logger(o.version);e.logger=s},703671:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParamType=e.parseParams=void 0;var n=r(797358),o=r(298154),s=r(925011),i=r(93060),a=new RegExp(/^(.*)\[([0-9]*)\]$/);e.parseParams=function(t,e){return(0,s.splitNesting)(t).map((function(t){return c.fromString(t,e)}))};var c=function(){function t(e,r){e!==s._constructorGuard&&o.logger.throwError("use fromString"),(0,s.populate)(this,r);var n=this.type.match(a);n?(0,s.populate)(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:t.fromObject({type:n[1],components:this.components}),baseType:"array"}):(0,s.populate)(this,{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}return t.prototype.format=function(t){if(t||(t=i.FormatTypes.sighash),i.FormatTypes[t]||o.logger.throwArgumentError("invalid format type","format",t),t===i.FormatTypes.json){var e={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"===typeof this.indexed&&(e.indexed=this.indexed),this.components&&(e.components=this.components.map((function(e){return JSON.parse(e.format(t))}))),JSON.stringify(e)}var r="";return"array"===this.baseType?(r+=this.arrayChildren.format(t),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(t!==i.FormatTypes.sighash&&(r+=this.type),r+="("+this.components.map((function(e){return e.format(t)})).join(t===i.FormatTypes.full?", ":",")+")"):r+=this.type,t!==i.FormatTypes.sighash&&(!0===this.indexed&&(r+=" indexed"),t===i.FormatTypes.full&&this.name&&(r+=" "+this.name)),r},t.fromObject=function(e){return t.isParamType(e)?e:new t(s._constructorGuard,{name:e.name||null,type:(0,n.verifyType)(e.type),indexed:null==e.indexed?null:!!e.indexed,components:e.components?e.components.map(t.fromObject):null})},t.fromString=function(e,r){return s=function(t,e){var r=t;function s(e){o.logger.throwArgumentError("unexpected character at position "+e,"param",t)}function i(t){var r={type:"",name:"",parent:t,state:{allowType:!0}};return e&&(r.indexed=!1),r}t=t.replace(/\s/g," ");for(var a={type:"",name:"",state:{allowType:!0}},c=a,u=0;u<t.length;u++){var l=t[u];switch(l){case"(":c.state.allowType&&""===c.type?c.type="tuple":c.state.allowParams||s(u),c.state.allowType=!1,c.type=(0,n.verifyType)(c.type),c.components=[i(c)],c=c.components[0];break;case")":delete c.state,"indexed"===c.name&&(e||s(u),c.indexed=!0,c.name=""),(0,n.checkModifier)(c.type,c.name)&&(c.name=""),c.type=(0,n.verifyType)(c.type);var d=c;(c=c.parent)||s(u),delete d.parent,c.state.allowParams=!1,c.state.allowName=!0,c.state.allowArray=!0;break;case",":delete c.state,"indexed"===c.name&&(e||s(u),c.indexed=!0,c.name=""),(0,n.checkModifier)(c.type,c.name)&&(c.name=""),c.type=(0,n.verifyType)(c.type);var h=i(c.parent);c.parent.components.push(h),delete c.parent,c=h;break;case" ":c.state.allowType&&""!==c.type&&(c.type=(0,n.verifyType)(c.type),delete c.state.allowType,c.state.allowName=!0,c.state.allowParams=!0),c.state.allowName&&""!==c.name&&("indexed"===c.name?(e||s(u),c.indexed&&s(u),c.indexed=!0,c.name=""):(0,n.checkModifier)(c.type,c.name)?c.name="":c.state.allowName=!1);break;case"[":c.state.allowArray||s(u),c.type+=l,c.state.allowArray=!1,c.state.allowName=!1,c.state.readArray=!0;break;case"]":c.state.readArray||s(u),c.type+=l,c.state.readArray=!1,c.state.allowArray=!0,c.state.allowName=!0;break;default:c.state.allowType?(c.type+=l,c.state.allowParams=!0,c.state.allowArray=!0):c.state.allowName?(c.name+=l,delete c.state.allowArray):c.state.readArray?c.type+=l:s(u)}}return c.parent&&o.logger.throwArgumentError("unexpected eof","param",t),delete a.state,"indexed"===c.name?(e||s(r.length-7),c.indexed&&s(r.length-7),c.indexed=!0,c.name=""):(0,n.checkModifier)(c.type,c.name)&&(c.name=""),a.type=(0,n.verifyType)(a.type),a}(e,!!r),t.fromObject({name:s.name,type:s.type,indexed:s.indexed,components:s.components});var s},t.isParamType=function(t){return!(null==t||!t._isParamType)},t}();e.ParamType=c},925011:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.splitNesting=e._constructorGuard=e.populate=e.defineReadOnly=void 0;var n=r(298154);function o(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}e.defineReadOnly=o,e.populate=function(t,e){for(var r in e)o(t,r,e[r])},e._constructorGuard={},e.splitNesting=function(t){t=t.trim();for(var e=[],r="",o=0,s=0;s<t.length;s++){var i=t[s];","===i&&0===o?(e.push(r),r=""):(r+=i,"("===i?o++:")"===i&&-1===--o&&n.logger.throwArgumentError("unbalanced parenthesis","value",t))}return r&&e.push(r),e}},497972:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version=void 0,e.version="abi-util-lite/0.1.0"},335215:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseABIFromString=e.parseFragment=e.FunctionFragment=e.EventFragment=e.ErrorFragment=e.ConstructorFragment=e.Fragment=e.ContractABI=e.ParamType=void 0;var n=r(703671);Object.defineProperty(e,"ParamType",{enumerable:!0,get:function(){return n.ParamType}});var o=r(6659);Object.defineProperty(e,"ContractABI",{enumerable:!0,get:function(){return o.ContractABI}}),Object.defineProperty(e,"parseABIFromString",{enumerable:!0,get:function(){return o.parseABIFromString}});var s=r(581864);Object.defineProperty(e,"ConstructorFragment",{enumerable:!0,get:function(){return s.ConstructorFragment}}),Object.defineProperty(e,"ErrorFragment",{enumerable:!0,get:function(){return s.ErrorFragment}}),Object.defineProperty(e,"EventFragment",{enumerable:!0,get:function(){return s.EventFragment}}),Object.defineProperty(e,"Fragment",{enumerable:!0,get:function(){return s.Fragment}}),Object.defineProperty(e,"FunctionFragment",{enumerable:!0,get:function(){return s.FunctionFragment}}),Object.defineProperty(e,"parseFragment",{enumerable:!0,get:function(){return s.parseFragment}})},734244:function(t,e,r){var n;!function(o){"use strict";var s,i=1e6,a=1e6,c="[big.js] ",u=c+"Invalid ",l=u+"decimal places",d=u+"rounding mode",h=c+"Division by zero",f={},g=void 0,p=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function m(t,e,r,n){var o=t.c,s=t.e+e+1;if(s<o.length){if(1===r)n=o[s]>=5;else if(2===r)n=o[s]>5||5==o[s]&&(n||s<0||o[s+1]!==g||1&o[s-1]);else if(3===r)n=n||!!o[0];else if(n=!1,0!==r)throw Error(d);if(s<1)o.length=1,n?(t.e=-e,o[0]=1):o[0]=t.e=0;else{if(o.length=s--,n)for(;++o[s]>9;)o[s]=0,s--||(++t.e,o.unshift(1));for(s=o.length;!o[--s];)o.pop()}}else if(r<0||r>3||r!==~~r)throw Error(d);return t}function _(t,e,r,n){var o,s,a=t.constructor,c=!t.c[0];if(r!==g){if(r!==~~r||r<(3==e)||r>i)throw Error(3==e?u+"precision":l);for(r=n-(t=new a(t)).e,t.c.length>++n&&m(t,r,a.RM),2==e&&(n=t.e+r+1);t.c.length<n;)t.c.push(0)}if(o=t.e,r=(s=t.c.join("")).length,2!=e&&(1==e||3==e&&n<=o||o<=a.NE||o>=a.PE))s=s.charAt(0)+(r>1?"."+s.slice(1):"")+(o<0?"e":"e+")+o;else if(o<0){for(;++o;)s="0"+s;s="0."+s}else if(o>0)if(++o>r)for(o-=r;o--;)s+="0";else o<r&&(s=s.slice(0,o)+"."+s.slice(o));else r>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&(!c||4==e)?"-"+s:s}f.abs=function(){var t=new this.constructor(this);return t.s=1,t},f.cmp=function(t){var e,r=this,n=r.c,o=(t=new r.constructor(t)).c,s=r.s,i=t.s,a=r.e,c=t.e;if(!n[0]||!o[0])return n[0]?s:o[0]?-i:0;if(s!=i)return s;if(e=s<0,a!=c)return a>c^e?1:-1;for(i=(a=n.length)<(c=o.length)?a:c,s=-1;++s<i;)if(n[s]!=o[s])return n[s]>o[s]^e?1:-1;return a==c?0:a>c^e?1:-1},f.div=function(t){var e=this,r=e.constructor,n=e.c,o=(t=new r(t)).c,s=e.s==t.s?1:-1,a=r.DP;if(a!==~~a||a<0||a>i)throw Error(l);if(!o[0])throw Error(h);if(!n[0])return new r(0*s);var c,u,d,f,p,_=o.slice(),y=c=o.length,b=n.length,x=n.slice(0,c),w=x.length,v=t,I=v.c=[],E=0,T=a+(v.e=e.e-t.e)+1;for(v.s=s,s=T<0?0:T,_.unshift(0);w++<c;)x.push(0);do{for(d=0;d<10;d++){if(c!=(w=x.length))f=c>w?1:-1;else for(p=-1,f=0;++p<c;)if(o[p]!=x[p]){f=o[p]>x[p]?1:-1;break}if(!(f<0))break;for(u=w==c?o:_;w;){if(x[--w]<u[w]){for(p=w;p&&!x[--p];)x[p]=9;--x[p],x[w]+=10}x[w]-=u[w]}for(;!x[0];)x.shift()}I[E++]=f?d:++d,x[0]&&f?x[w]=n[y]||0:x=[n[y]]}while((y++<b||x[0]!==g)&&s--);return I[0]||1==E||(I.shift(),v.e--),E>T&&m(v,a,r.RM,x[0]!==g),v},f.eq=function(t){return!this.cmp(t)},f.gt=function(t){return this.cmp(t)>0},f.gte=function(t){return this.cmp(t)>-1},f.lt=function(t){return this.cmp(t)<0},f.lte=function(t){return this.cmp(t)<1},f.minus=f.sub=function(t){var e,r,n,o,s=this,i=s.constructor,a=s.s,c=(t=new i(t)).s;if(a!=c)return t.s=-c,s.plus(t);var u=s.c.slice(),l=s.e,d=t.c,h=t.e;if(!u[0]||!d[0])return d[0]?(t.s=-c,t):new i(u[0]?s:0);if(a=l-h){for((o=a<0)?(a=-a,n=u):(h=l,n=d),n.reverse(),c=a;c--;)n.push(0);n.reverse()}else for(r=((o=u.length<d.length)?u:d).length,a=c=0;c<r;c++)if(u[c]!=d[c]){o=u[c]<d[c];break}if(o&&(n=u,u=d,d=n,t.s=-t.s),(c=(r=d.length)-(e=u.length))>0)for(;c--;)u[e++]=0;for(c=e;r>a;){if(u[--r]<d[r]){for(e=r;e&&!u[--e];)u[e]=9;--u[e],u[r]+=10}u[r]-=d[r]}for(;0===u[--c];)u.pop();for(;0===u[0];)u.shift(),--h;return u[0]||(t.s=1,u=[h=0]),t.c=u,t.e=h,t},f.mod=function(t){var e,r=this,n=r.constructor,o=r.s,s=(t=new n(t)).s;if(!t.c[0])throw Error(h);return r.s=t.s=1,e=1==t.cmp(r),r.s=o,t.s=s,e?new n(r):(o=n.DP,s=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=o,n.RM=s,this.minus(r.times(t)))},f.plus=f.add=function(t){var e,r=this,n=r.constructor,o=r.s,s=(t=new n(t)).s;if(o!=s)return t.s=-s,r.minus(t);var i=r.e,a=r.c,c=t.e,u=t.c;if(!a[0]||!u[0])return u[0]?t:new n(a[0]?r:0*o);if(a=a.slice(),o=i-c){for(o>0?(c=i,e=u):(o=-o,e=a),e.reverse();o--;)e.push(0);e.reverse()}for(a.length-u.length<0&&(e=u,u=a,a=e),o=u.length,s=0;o;a[o]%=10)s=(a[--o]=a[o]+u[o]+s)/10|0;for(s&&(a.unshift(s),++c),o=a.length;0===a[--o];)a.pop();return t.c=a,t.e=c,t},f.pow=function(t){var e=this,r=new e.constructor(1),n=r,o=t<0;if(t!==~~t||t<-1e6||t>a)throw Error(u+"exponent");for(o&&(t=-t);1&t&&(n=n.times(e)),t>>=1;)e=e.times(e);return o?r.div(n):n},f.round=function(t,e){var r=this.constructor;if(t===g)t=0;else if(t!==~~t||t<-i||t>i)throw Error(l);return m(new r(this),t,e===g?r.RM:e)},f.sqrt=function(){var t,e,r,n=this,o=n.constructor,s=n.s,i=n.e,a=new o(.5);if(!n.c[0])return new o(n);if(s<0)throw Error(c+"No square root");0===(s=Math.sqrt(n+""))||s===1/0?((e=n.c.join("")).length+i&1||(e+="0"),i=((i+1)/2|0)-(i<0||1&i),t=new o(((s=Math.sqrt(e))==1/0?"1e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+i)):t=new o(s),i=t.e+(o.DP+=4);do{r=t,t=a.times(r.plus(n.div(r)))}while(r.c.slice(0,i).join("")!==t.c.slice(0,i).join(""));return m(t,o.DP-=4,o.RM)},f.times=f.mul=function(t){var e,r=this,n=r.constructor,o=r.c,s=(t=new n(t)).c,i=o.length,a=s.length,c=r.e,u=t.e;if(t.s=r.s==t.s?1:-1,!o[0]||!s[0])return new n(0*t.s);for(t.e=c+u,i<a&&(e=o,o=s,s=e,u=i,i=a,a=u),e=new Array(u=i+a);u--;)e[u]=0;for(c=a;c--;){for(a=0,u=i+c;u>c;)a=e[u]+s[c]*o[u-c-1]+a,e[u--]=a%10,a=a/10|0;e[u]=(e[u]+a)%10}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t},f.toExponential=function(t){return _(this,1,t,t)},f.toFixed=function(t){return _(this,2,t,this.e+t)},f.toPrecision=function(t){return _(this,3,t,t-1)},f.toString=function(){return _(this)},f.valueOf=f.toJSON=function(){return _(this,4)},s=function t(){function e(r){var n=this;if(!(n instanceof e))return r===g?t():new e(r);r instanceof e?(n.s=r.s,n.e=r.e,n.c=r.c.slice()):function(t,e){var r,n,o;if(0===e&&1/e<0)e="-0";else if(!p.test(e+=""))throw Error(u+"number");t.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".",""));(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length);for(o=e.length,n=0;n<o&&"0"==e.charAt(n);)++n;if(n==o)t.c=[t.e=0];else{for(;o>0&&"0"==e.charAt(--o););for(t.e=r-n-1,t.c=[],r=0;n<=o;)t.c[r++]=+e.charAt(n++)}}(n,r),n.constructor=e}return e.prototype=f,e.DP=20,e.RM=1,e.NE=-7,e.PE=21,e.version="5.2.2",e}(),s.default=s.Big=s,void 0===(n=function(){return s}.call(e,r,e,t))||(t.exports=n)}()},299742:t=>{var e=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};t.exports=function(){if(this)return this;if("object"===typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(t){return e()}try{return __global__||e()}finally{delete Object.prototype.__global__}}()},146057:(t,e,r)=>{const n=r(331629);n.prototype.toJSON=function(){return this.toString()};const o=n.leftShift(n.BigInt(1),n.BigInt(256)),s=n.subtract(o,n.BigInt(1));t.exports={WORD_BYTES:32,WORD_CHARS:64,UINT_BOUND:o,MAX_UINT:s,EPOCH_NUMBER:{LATEST_MINED:"latest_mined",LATEST_STATE:"latest_state",LATEST_FINALIZED:"latest_finalized",LATEST_CONFIRMED:"latest_confirmed",LATEST_CHECKPOINT:"latest_checkpoint",EARLIEST:"earliest"},MIN_GAS_PRICE:1e9,TRANSACTION_GAS:21e3,TRANSACTION_STORAGE_LIMIT:0,TESTNET_ID:1,MAINNET_ID:1029,ZERO_ADDRESS_HEX:"0x0000000000000000000000000000000000000000",PENDING_TX_STATUS:{FUTURE_NONCE:"futureNonce",NOT_ENOUGH_CASH:"notEnoughCash"},ACTION_TYPES:{CALL:"call",CREATE:"create",CALL_RESULT:"call_result",CREATE_RESULT:"create_result",INTERNAL_TRANSFER_ACTION:"internal_transfer_action"},CALL_TYPES:{NONE:"none",CALL:"call",CALL_CODE:"callcode",DELEGATE_CALL:"delegatecall",STATIC_CALL:"staticcall"},CALL_STATUS:{SUCCESS:"success",REVERTED:"reverted",FAIL:"fail"},POCKET_ENUM:{BALANCE:"balance",STAKING_BALANCE:"staking_balance",STORAGE_COLLATERAL:"storage_collateral",SPONSOR_BALANCE_FOR_GAS:"sponsor_balance_for_gas",SPONSOR_BALANCE_FOR_COLLATERAL:"sponsor_balance_for_collateral",MINT_BURN:"mint_burn",GAS_PAYMENT:"gas_payment"},TX_STATUS:{UNEXECUTE:null,SUCCESS:0,FAIL:1,SKIP:2},CREATE_TYPES:{NONE:"none",CREATE:"create",CREATE2:"create2"},SPACE_ENUM:{NONE:"none",NATIVE:"native",EVM:"evm"},KECCAK_EMPTY:"0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",ZERO_HASH:"0x0000000000000000000000000000000000000000000000000000000000000000",ADDRESS_TYPES:{USER:"user",CONTRACT:"contract",BUILTIN:"builtin",NULL:"null"}}},491665:(t,e,r)=>{const n=r(146057),{assert:o}=r(761069),s=r(652519),i=r(477466),a=r(806632),c=r(897033),u=r(169350),l=r(154433),{CRC20_ABI:d}=r(780446),h=r(654727),f=r(986420),g=r(942156),p=r(767946),m=r(240856),_=r(648562),y=r(947401),b=r(29719),x=r(146789);class w{static async create(t){const e=new w(t);return t.networkId||await e.updateNetworkId(),e}constructor({defaultGasPrice:t,defaultGasRatio:e=1.1,defaultStorageRatio:r=1.1,networkId:n,useHexAddressInParameter:o=!1,useVerboseAddress:s=!1,...i}={}){this.version=g.version,this.provider=a(i),this.wallet=new c,this.defaultGasPrice=t,this.defaultGasRatio=e,this.defaultStorageRatio=r,this.sendRawTransaction=this._decoratePendingTransaction(this.sendRawTransaction),this.sendTransaction=this._decoratePendingTransaction(this.sendTransaction),n&&(this.networkId=n,this.wallet.setNetworkId(n)),this.useHexAddressInParameter=o,this.useVerboseAddress=s,this.pos=new p(this),this.trace=new _(this),this.txpool=new y(this),this.cfx=new m(this),this.advanced=new x(this)}request(t){if(this.provider.request)return this.provider.request(t);if(this.provider.call)return this.provider.call(t.method,...t.params);if(this.provider.send)return this.provider.send(t.method,t.params);throw new Error("Provider does not support request")}_decoratePendingTransaction(t){const e=this;return function(...r){return new h(e,t.bind(this),r)}}_formatAddress(t){return this.networkId||console.warn("Conflux address: networkId is not set properly, please set it"),this.useHexAddressInParameter?s.hexAddress(t):s.address(t,this.networkId,this.useVerboseAddress)}_formatCallTx(t){return i.callTxAdvance(this.networkId,this.useHexAddressInParameter,this.useVerboseAddress)(t)}_formatGetLogs(t){return i.getLogsAdvance(this.networkId,this.useHexAddressInParameter,this.useVerboseAddress)(t)}Contract(t){return new u(t,this)}InternalContract(t){const e=l[t];return o(e,`can not find internal contract named "${t}"`),this.Contract(e)}CRC20(t){return this.Contract({address:t,abi:d})}BatchRequest(){return new b(this)}close(){this.provider.close()}async updateNetworkId(){const{networkId:t}=await this.getStatus();this.networkId=t,this.wallet.setNetworkId(this.networkId)}async getClientVersion(){return this.cfx.clientVersion()}async getSupplyInfo(t){return this.cfx.getSupplyInfo(t)}async getStatus(){return this.cfx.getStatus()}async getGasPrice(){return this.cfx.gasPrice()}async getInterestRate(t){return this.cfx.getInterestRate(t)}async getAccumulateInterestRate(t){return this.cfx.getAccumulateInterestRate(t)}async getAccount(t,e){return this.cfx.getAccount(t,e)}async getBalance(t,e){return this.cfx.getBalance(t,e)}async getStakingBalance(t,e){return this.cfx.getStakingBalance(t,e)}async getNextNonce(t,e){return this.cfx.getNextNonce(t,e)}async getAdmin(t,e){return this.cfx.getAdmin(t,e)}async getVoteList(t,e){return this.cfx.getVoteList(t,e)}async getDepositList(t,e){return this.cfx.getDepositList(t,e)}async getEpochNumber(t){return this.cfx.epochNumber(t)}async getBlockByEpochNumber(t,e=!1){return this.cfx.getBlockByEpochNumber(t,e)}async getBlockByBlockNumber(t,e=!1){return this.cfx.getBlockByBlockNumber(t,e)}async getBlocksByEpochNumber(t){return this.cfx.getBlocksByEpoch(t)}async getBlockRewardInfo(t){return this.cfx.getBlockRewardInfo(t)}async getBestBlockHash(){return this.cfx.getBestBlockHash()}async getBlockByHash(t,e=!1){return this.cfx.getBlockByHash(t,e)}async getBlockByHashWithPivotAssumption(t,e,r){return this.cfx.getBlockByHashWithPivotAssumption(t,e,r)}async getConfirmationRiskByHash(t){return this.cfx.getConfirmationRiskByHash(t)}async getTransactionByHash(t){return this.cfx.getTransactionByHash(t)}async getTransactionReceipt(t){return this.cfx.getTransactionReceipt(t)}async sendRawTransaction(t){return this.request({method:"cfx_sendRawTransaction",params:[s.hex(t)]})}async sendTransaction(t,e){if(this.wallet.has(`${t.from}`)){const e=await this.cfx.populateAndSignTransaction(t);return this.sendRawTransaction(e)}const r=[this._formatCallTx(t)];return e&&r.push(e),this.request({method:"cfx_sendTransaction",params:r})}async getCode(t,e){return this.cfx.getCode(t,e)}async getStorageAt(t,e,r){return this.cfx.getStorageAt(t,e,r)}async getStorageRoot(t,e){return this.cfx.getStorageRoot(t,e)}async getSponsorInfo(t,e){return this.cfx.getSponsorInfo(t,e)}async getAccountPendingInfo(t){return this.cfx.getAccountPendingInfo(t)}async getAccountPendingTransactions(t,e,r){return this.cfx.getAccountPendingTransactions(t,e,r)}async getCollateralForStorage(t,e){return this.cfx.getCollateralForStorage(t,e)}async call(t,e){try{return await this.request({method:"cfx_call",params:[this._formatCallTx(t),s.epochNumber.$or(void 0)(e)]})}catch(r){throw u.decodeError(r)}}async estimateGasAndCollateral(t,e){try{const r=await this.request({method:"cfx_estimateGasAndCollateral",params:[this._formatCallTx(t),s.epochNumber.$or(void 0)(e)]});return i.estimate(r)}catch(r){throw u.decodeError(r)}}async estimateGasAndCollateralAdvance(t,e){return this.cfx.estimateGasAndCollateralAdvance(t,e)}async checkBalanceAgainstTransaction(t,e,r,n,o,s){return this.cfx.checkBalanceAgainstTransaction(t,e,r,n,o,s)}async getLogs(t){if(void 0!==t.blockHashes&&(void 0!==t.fromEpoch||void 0!==t.toEpoch))throw new Error("OverrideError, do not use `blockHashes` with `fromEpoch` or `toEpoch`, cause only `blockHashes` will take effect");const e=await this.request({method:"cfx_getLogs",params:[this._formatGetLogs(t)]});return i.logs(e)}async traceBlock(t){return this.trace.block(s.blockHash(t))}async traceTransaction(t){return this.trace.transaction(s.transactionHash(t))}async traceFilter(t){return this.trace.filter(s.traceFilter(t))}async getEpochReceipts(t){return this.cfx.getEpochReceipts(t)}async getEpochReceiptsByPivotBlockHash(t){return this.cfx.getEpochReceiptsByPivotBlockHash(t)}async getPoSEconomics(){return this.cfx.getPoSEconomics()}async subscribe(t,...e){return this.request({method:"cfx_subscribe",params:[t,...e]})}async subscribeEpochs(t=n.EPOCH_NUMBER.LATEST_MINED){const e=await this.subscribe("epochs",t),r=new f(e);return this.provider.on(e,(t=>{r.emit("data",i.epoch(t))})),r}async subscribeNewHeads(){const t=await this.subscribe("newHeads"),e=new f(t);return this.provider.on(t,(t=>{e.emit("data",i.head(t))})),e}async subscribeLogs({address:t,topics:e}={}){const r=await this.subscribe("logs",this._formatGetLogs({address:t,topics:e})),n=new f(r);return this.provider.on(r,(t=>{t.revertTo?n.emit("revert",i.revert(t)):n.emit("data",i.log(t))})),n}async unsubscribe(t){return this.request({method:"cfx_unsubscribe",params:[`${t}`]})}}t.exports=w},730067:(t,e,r)=>{const n=r(652519);class o extends String{static fromCFX(t){return new this(n.big(t).times(1e18).toFixed())}static fromGDrip(t){return new this(n.big(t).times(1e9).toFixed())}constructor(t){super(n.bigUInt(t).toString(10))}toCFX(){return n.big(this).div(1e18).toFixed()}toGDrip(){return n.big(this).div(1e9).toFixed()}}t.exports=new Proxy(o,{apply:(t,e,r)=>new o(...r)})},395056:t=>{t.exports={PARSER_ERROR:5200}},90282:(t,e,r)=>{var n=r(348834).Buffer;const{keccak256:o,ecdsaSign:s,ecdsaRecover:i,publicKeyToAddress:a}=r(943089),c=r(652519);class u{static sign(t,e){const{r:r,s:o,v:i}=s(c.hexBuffer(e),c.hexBuffer(t)),a=n.concat([r,o,c.hexBuffer(i)]);return c.hex(a)}static recover(t,e){const r=c.hexBuffer(t),n=r.slice(0,32),o=r.slice(32,64),s=r[64],a=i(c.hexBuffer(e),{r:n,s:o,v:s});return c.publicKey(a)}constructor(t){this.message=t}get hash(){return c.hex(o(n.from(this.message)))}get from(){try{const t=u.recover(this.signature,this.hash);return c.address(a(c.hexBuffer(t)),this.networkId)}catch(t){return}}sign(t,e){return this.signature=u.sign(t,this.hash),this.networkId=e,this}get r(){try{return this.signature.slice(0,66)}catch(t){return}}get s(){try{return`0x${this.signature.slice(66,130)}`}catch(t){return}}get v(){try{return parseInt(this.signature.slice(130,132),16)}catch(t){return}}}t.exports=u},885341:(t,e,r)=>{var n=r(348834).Buffer;const o="\x19Conflux Signed Message:\n",s=r(652519),i=r(90282),{keccak256:a}=r(943089),{isHexString:c}=r(761069);class u extends i{static personalMessage(t){const e=c(t)?s.hexBuffer(t):n.from(t);return o+e.length+e.toString()}static personalHash(t){const e=this.personalMessage(t);return s.hex(a(n.from(e)))}static sign(t,e){return super.sign(t,this.personalHash(e))}static recover(t,e){return super.recover(t,this.personalHash(e))}static recoverPortalPersonalSign(t,e){const r=parseInt(t.slice(130),16)-27;t=t.slice(0,130)+s.hex(r).slice(2);const a=c(e)?e:s.hex(n.from(e)),u=new i(o+a.length+a);return i.recover(t,u.hash)}constructor(t){const e=u.personalMessage(t);super(e),this._originMsg=t,this._personalMsg=e,this._prefix=o}}t.exports=u},445550:(t,e,r)=>{const{keccak256:n,ecdsaSign:o,ecdsaRecover:s,privateKeyToAddress:i,publicKeyToAddress:a}=r(943089),c=r(96814),u=r(652519),l=r(477466);class d{static decodeRaw(t){const[[e,r,n,o,s,i,l,h,f],g,p,m]=c.decode(t),_=u.uInt(h),y=new d({nonce:u.bigIntFromBuffer(e),gasPrice:u.bigIntFromBuffer(r),gas:u.bigIntFromBuffer(n),to:0===o.length?null:u.address(o,_),value:u.bigIntFromBuffer(s),storageLimit:u.bigIntFromBuffer(i),epochHeight:u.bigIntFromBuffer(l),chainId:u.uInt(h),data:u.hex(f),v:0===g.length?0:u.uInt(g),r:u.hex(p),s:u.hex(m)}),b=y.recover(),x=a(u.hexBuffer(b));return y.from=u.address(x,_),y}constructor({from:t,nonce:e,gasPrice:r,gas:n,to:o,value:s,storageLimit:i,epochHeight:a,chainId:c,data:u,v:l,r:d,s:h}){this.from=t,this.nonce=e,this.gasPrice=r,this.gas=n,this.to=o,this.value=s,this.storageLimit=i,this.epochHeight=a,this.chainId=c,this.data=u,this.v=l,this.r=d,this.s=h}get hash(){try{return u.hex(n(this.encode(!0)))}catch(t){return}}sign(t,e){const r=u.hexBuffer(t),s=i(r),{r:a,s:c,v:l}=o(n(this.encode(!1)),r);return this.from=u.address(s,e),this.r=u.hex(a),this.s=u.hex(c),this.v=l,this}recover(){const t=s(n(this.encode(!1)),{r:u.hexBuffer(this.r),s:u.hexBuffer(this.s),v:u.uInt(this.v)});return u.publicKey(t)}encode(t){const{nonce:e,gasPrice:r,gas:n,to:o,value:s,storageLimit:i,epochHeight:a,chainId:u,data:d,v:h,r:f,s:g}=l.signTx(this),p=t?[[e,r,n,o,s,i,a,u,d],h,f,g]:[e,r,n,o,s,i,a,u,d];return c.encode(p)}serialize(){return u.hex(this.encode(!0))}}t.exports=d},902283:t=>{t.exports=class{constructor(t){this.contract=t}decodeData(t){const e=this.contract[t.slice(0,10)]||this.contract.constructor,r=e.decodeData(t);if(r)return{name:e.name,fullName:e.fullName,type:e.type,signature:e.signature,array:[...r],object:r.toObject()}}decodeLog(t){const e=this.contract[t.topics[0]];if(!e)return;const r=e.decodeLog(t);return{name:e.name,fullName:e.fullName,type:e.type,signature:e.signature,array:[...r],object:r.toObject()}}}},922954:(t,e,r)=>{const{alignBuffer:n}=r(761069),o=r(652519),s=r(884349);t.exports=class extends s{static from({type:t,...e}){if("address"===t)return new this({...e,type:t})}constructor({type:t,...e}){super({...e,type:t}),this.networkId=e.networkId}encode(t){return n(o.hexBuffer(o.hexAddress(t)))}decode(t){const e=t.read(40);return(e.startsWith("1")||e.startsWith("0")||e.startsWith("8"))&&this.networkId?o.address(`0x${e}`,this.networkId):o.hexAddress(`0x${e}`)}}},334088:(t,e,r)=>{var n=r(348834).Buffer;const o=r(276635),{assert:s}=r(761069),i=r(652519),a=r(884349),{uIntCoder:c}=r(908962),{pack:u,unpack:l}=r(564007);t.exports=class extends a{static from({type:t,components:e,...r},n){const o=t.match(/^(.*)\[([0-9]*)]$/);if(!o)return;const[,s,i]=o;return new this({...r,coder:n({type:s,components:e,...r}),size:i?parseInt(i,10):void 0})}constructor({name:t,coder:e,size:r}){void 0!==r&&s(Number.isInteger(r)&&0<r,{message:"invalid size",expect:"integer && >0",got:r,coder:{name:t}}),super({name:t}),this.type=`${e.type}[${r>0?r:""}]`,this.size=r,this.coder=e,this.dynamic=Boolean(void 0===r)||e.dynamic}encode(t){s(Array.isArray(t),{message:"unexpected type",expect:"array",got:typeof t,coder:this}),void 0!==this.size&&s(t.length===this.size,{message:"length not match",expect:this.size,got:t.length,coder:this});const e=o.range(t.length).map((()=>this.coder));let r=u(e,t);return void 0===this.size&&(r=n.concat([c.encode(t.length),r])),r}decode(t){let e=this.size;void 0===e&&(e=i.uInt(c.decode(t)));const r=o.range(e).map((()=>this.coder));return l(r,t)}encodeTopic(t){try{return i.hex64(t)}catch(e){throw new Error("not supported encode array to index")}}decodeTopic(t){return t}}},884349:(t,e,r)=>{const n=r(792808);t.exports=class{static from(t){}constructor({type:t,name:e}){this.type=t,this.name=e,this.dynamic=!1}encode(t){throw new Error(`${this.constructor.name}.encode not implemented`)}decode(t){throw new Error(`${this.constructor.name}.decode not implemented`)}encodeTopic(t){return this.encode(t)}decodeTopic(t){const e=new n(t);return this.decode(e)}}},423143:(t,e,r)=>{const n=r(276635),{assert:o}=r(761069),s=r(331629),i=r(908962);t.exports=class extends i{static from({type:t,...e}){if("bool"===t)return new this({...e,type:t})}constructor({type:t,name:e}){super({name:e}),this.type=t}encode(t){return o(n.isBoolean(t),{message:"unexpected type",expect:"boolean",got:t,coder:this}),super.encode(t?1:0)}decode(t){return s.notEqual(super.decode(t),s.BigInt(0))}}},798864:(t,e,r)=>{var n=r(348834).Buffer;const{WORD_BYTES:o}=r(146057),{assert:s,alignBuffer:i}=r(761069),a=r(652519),c=r(943089),u=r(884349),{uIntCoder:l}=r(908962);t.exports=class extends u{static from({type:t,...e}){const r=t.match(/^bytes([0-9]*)$/);if(!r)return;const[,n]=r;return new this({...e,size:n?parseInt(n,10):void 0})}constructor({name:t,size:e,_decodeToHex:r}){void 0!==e&&s(Number.isInteger(e)&&e<=o,{message:"invalid size",expect:`integer && <=${o}`,got:e,coder:{name:t}}),super({name:t}),this.type=`bytes${e>0?e:""}`,this.size=e,this.dynamic=Boolean(void 0===e),this._decodeToHex=r}encode(t){t=a.bytes(t),void 0!==this.size&&this.size!==t.length&&(t.length<this.size?t=n.concat([t,n.alloc(this.size-t.length)]):s(!1,{message:"length not match",expect:this.size,got:t.length,coder:this}));let e=i(t,!0);return void 0===this.size&&(e=n.concat([l.encode(t.length),e])),e}decode(t){let e=this.size;return void 0===e&&(e=a.uInt(l.decode(t))),this._decodeToHex?`0x${t.read(2*e,!0)}`:n.from(t.read(2*e,!0),"hex")}encodeTopic(t){return s(n.isBuffer(t),{message:"value type error",expect:n.name,got:t.constructor.name,coder:this}),c.keccak256(t)}decodeTopic(t){return t}}},908962:(t,e,r)=>{const{UINT_BOUND:n}=r(146057),{assert:o,alignBuffer:s}=r(761069),i=r(652519),a=r(331629),c=r(884349);class u extends c{static from({type:t,...e}){const r=t.match(/^(int|uint)([0-9]*)$/);if(!r)return;const[,n,o]=r;return new this({...e,type:n,signed:!n.startsWith("u"),bits:o?parseInt(o,10):void 0})}constructor({name:t,type:e,signed:r=!1,bits:n=256}){o(Number.isInteger(n)&&0<n&&n<=256&&n%8===0,{message:"invalid bits",expect:"integer && 0<bits<=256 && bits%8==0",got:n,coder:{name:t,type:e,signed:r}}),super({name:t}),this.type=`${e}${n}`,this.signed=r,this.size=n/8,this.bound=a.leftShift(a.BigInt(1),a.BigInt(n-(this.signed?1:0)))}encode(t){let e=i.bigInt(t),r=e;return this.signed&&a.LT(e,a.BigInt(0))&&(r=a.add(e,this.bound),e=a.add(e,n)),o(a.LE(a.BigInt(0),r)&&a.LT(r,this.bound),{message:"bound error",expect:`0<= && <${this.bound}`,got:r.toString(),coder:this,value:t}),s(i.hexBuffer(e))}decode(t){let e=a.BigInt(`0x${t.read(2*this.size)}`);if(this.signed&&a.GE(e,this.bound)){const t=a.leftShift(a.BigInt(1),a.BigInt(8*this.size));e=a.subtract(e,t)}return a.BigInt(e)}}t.exports=u,t.exports.uIntCoder=new u({type:"uint"})},34625:(t,e,r)=>{var n=r(348834).Buffer;const{assert:o}=r(761069),s=r(884349);t.exports=class extends s{static from({type:t,...e}){if(""===t)return new this({...e,type:"null"})}encode(t){return o(null===t,{message:"unexpected type",expect:null,got:t,coder:this}),n.from("")}decode(){return null}}},457075:(t,e,r)=>{var n=r(348834).Buffer;const o=r(276635),{assert:s}=r(761069),i=r(798864);t.exports=class extends i{static from({type:t,...e}){if("string"===t)return new this({...e,type:t})}constructor({type:t,name:e}){super({name:e,size:void 0}),this.type=t}encode(t){return s(o.isString(t),{message:"value type error",expect:"string",got:t.constructor.name,coder:this}),super.encode(n.from(t))}decode(t){return super.decode(t).toString()}encodeTopic(t){return s(o.isString(t),{message:"value type error",expect:"string",got:t.constructor.name,coder:this}),super.encodeTopic(n.from(t))}}},564007:(t,e,r)=>{var n=r(348834).Buffer;const o=r(276635),{WORD_BYTES:s}=r(146057),{assert:i}=r(761069),a=r(652519),c=r(175689),u=r(884349),{uIntCoder:l}=r(908962);class d extends Number{}function h(t,e){let r=0;const i=[],a=[];return o.zip(t,e).forEach((([t,e])=>{const n=t.encode(e);t.dynamic?(r+=s,i.push(new d(a.length)),a.push(n)):(r+=n.length,i.push(n))})),i.forEach(((t,e)=>{t instanceof d&&(i[e]=l.encode(r),r+=a[t].length)})),n.concat([...i,...a])}function f(t,e){const r=e.index,n=t.map((t=>{if(t.dynamic){const t=a.uInt(l.decode(e));return new d(r+2*t)}return t.decode(e)}));return o.zip(t,n).forEach((([t,r],o)=>{r instanceof d&&(i(Number(r)===e.index,{message:"stream.index error",expect:r,got:e.index,coder:t,stream:e}),n[o]=t.decode(e))})),n}t.exports=class extends u{static from({type:t,components:e,...r},n){if("tuple"===t)return new this({...r,coders:e.map(n)})}constructor({name:t,coders:e}){super({name:t}),this.type=`(${e.map((t=>t.type)).join(",")})`,this.size=e.length,this.coders=e,this.dynamic=o.some(e,(t=>t.dynamic)),this.names=e.map(((t,e)=>t.name||`${e}`)),this.NamedTuple=c(...this.names)}encode(t){return o.isPlainObject(t)&&(t=this.NamedTuple.fromObject(t)),i(Array.isArray(t),{message:"unexpected type",expect:"array",got:typeof t,coder:this}),i(t.length===this.size,{message:"length not match",expect:this.size,got:t.length,coder:this}),h(this.coders,t)}decode(t){const e=f(this.coders,t);return new this.NamedTuple(...e)}encodeTopic(t){try{return a.hex64(t)}catch(e){throw new Error("not supported encode tuple to index")}}decodeTopic(t){return t}},t.exports.pack=h,t.exports.unpack=f},422110:(t,e,r)=>{const{assert:n}=r(761069),o=r(884349),s=r(34625),i=r(922954),a=r(908962),c=r(423143),u=r(798864),l=r(457075),d=r(564007),h=r(334088);function f(t){const e=h.from(t,f)||d.from(t,f)||i.from(t)||a.from(t)||l.from(t)||u.from(t)||c.from(t)||s.from(t);return n(e instanceof o,{message:"can not found matched coder",component:t}),e}t.exports={valueCoder:f,formatType:function({name:t,inputs:e}){return`${t}(${e.map((t=>f(t).type)).join(",")})`},formatFullName:function({name:t,inputs:e}){return`${t}(${e.map((t=>`${f(t).type} ${t.indexed?"indexed ":""}${t.name}`)).join(", ")})`}}},706262:(t,e,r)=>{const n=r(319066),o=r(994745),s=r(174785);t.exports=class extends o{constructor(t,e,r){return super(t),this.contract=e,this.conflux=r,n(this,this.call.bind(this))}call(...t){const e=this.contract.address,r=[this.signature,...this.encodeTopics(t)];return new s({address:[e],topics:r},this)}}},330005:(t,e,r)=>{const n=r(276635),o=r(319066);t.exports=class{constructor(t,e,r){return this.signatureToEvent=n.keyBy(t,"signature"),this.contract=e,this.conflux=r,o(this,this.call.bind(this))}call(...t){const e=[],r=[];let n;for(const s of Object.values(this.signatureToEvent))try{n=s(...t),e.push(s.type)}catch(o){r.push(s.type)}if(!e.length)throw new Error(`can not match override "${r.join(",")}" with args (${t.join(",")})`);if(e.length>1)throw new Error(`can not determine override "${e.join("|")}" with args (${t.join(",")})`);return n}decodeLog(t){const e=t.topics[0];return this.signatureToEvent[e].decodeLog(t)}}},994745:(t,e,r)=>{const{assert:n}=r(761069),o=r(652519),s=r(792808),i=r(175689),{formatType:a,formatFullName:c,valueCoder:u}=r(422110);t.exports=class{constructor({anonymous:t,name:e,inputs:r=[]}){this.anonymous=t,this.name=e,this.fullName=c({name:e,inputs:r}),this.type=a({name:e,inputs:r}),this.signature=o.keccak256(this.type),this.inputs=r,this.inputCoders=r.map(u),this.dataCoder=u({type:"tuple",components:r.filter((t=>!t.indexed))}),this.NamedTuple=i(...r.map(((t,e)=>t.name||`${e}`)))}encodeTopics(t){n(t.length===this.inputs.length,{message:"length not match",expect:this.inputs.length,got:t.length,coder:this.fullName});const e=[];return this.inputs.forEach(((r,n)=>{if(r.indexed){const r=this.inputCoders[n],s=t[n];e.push(null===s?null:o.hex(r.encodeTopic(s)))}})),e}decodeLog({topics:t,data:e}){n(this.anonymous||t[0]===this.signature,{message:"decodeLog unexpected topic",expect:this.signature,got:t[0],coder:this.fullName});const r=new s(e||"0x"),o=this.dataCoder.decode(r);n(r.eof(),{message:"hex length too large",expect:`${r.string.length}`,got:r.index,coder:this.fullName});let i=this.anonymous?0:1;const a=this.inputs.map(((e,r)=>{if(e.indexed){const e=this.inputCoders[r],n=t[i++];return e.decodeTopic(n)}return o[e.name||r]}));return new this.NamedTuple(...a)}}},174785:t=>{t.exports=class{constructor({address:t,topics:e},r){this.address=t,this.topics=e,Reflect.defineProperty(this,"event",{value:r})}async getLogs(t={}){const e=await this.event.conflux.cfx.getLogs({...this,...t});return e.forEach((t=>{t.arguments=this.event.decodeLog(t)})),e}async subscribeLogs(t={}){const e=await this.event.conflux.subscribeLogs({...this,...t});return e.on("data",(t=>{t.arguments=this.event.decodeLog(t)})),e}}},169350:(t,e,r)=>{const n=r(276635),{parseABIFromString:o}=r(335215),s=r(902283),i=r(720721),a=r(563241),c=r(235854),u=r(706262),l=r(330005),d=r(62326);t.exports=class{constructor({abi:t,address:e,bytecode:r,decodeByteToHex:d},h){t.length>0&&"string"===typeof t[0]&&(t=o(t)),function(t,e){if(!t||!e||!e.networkId)return;for(const n of t)["function","event","constructor"].indexOf(n.type)>=0&&(r(n.inputs),r(n.outputs));function r(t=[]){for(const n of t)"address"===n.type&&(n.networkId=e.networkId),"tuple"===n.type&&r(n.components)}}(t,h),function(t,e=!1){if(!t||!e)return;for(const n of t)["function","event","constructor"].indexOf(n.type)>=0&&(r(n.inputs),r(n.outputs));function r(t=[]){for(const e of t)e.type.startsWith("bytes")&&(e._decodeToHex=!0),"tuple"===e.type&&r(e.components)}}(t,d);const f=n.groupBy(t,"type");this.abi=new s(this),this.address=e,this.constructor=new i(n.first(f.constructor),r,this,h);const g=n.map(f.function,(t=>new a(t,this,h)));n.forEach(n.groupBy(g,"name"),((t,e)=>{this[e]=1===t.length?n.first(t):new c(t,this,h),t.forEach((t=>{this[t.type]=t,this[t.signature]=t}))}));const p=n.map(f.event,(t=>new u(t,this,h)));n.forEach(n.groupBy(p,"name"),((t,e)=>{this[e]=1===t.length?n.first(t):new l(t,this,h),t.forEach((t=>{this[t.type]=t,this[t.signature]=t}))}))}attach(t){this.address=t}};const h=new d;t.exports.decodeError=t=>h.decodeError(t)},154433:t=>{t.exports={AdminControl:{abi:["function getAdmin(address contractAddr) public view returns (address)","function setAdmin(address contractAddr, address newAdmin)","function destroy(address contractAddr)"],address:"0x0888000000000000000000000000000000000000"},SponsorWhitelistControl:{abi:["function getSponsorForGas(address contractAddr) public view returns (address)","function getSponsoredBalanceForGas(address contractAddr) public view returns (uint256)","function getSponsoredGasFeeUpperBound(address contractAddr) public view returns (uint256)","function getSponsorForCollateral(address contractAddr) public view returns (address)","function getSponsoredBalanceForCollateral(address contractAddr) public view returns (uint256)","function isWhitelisted(address contractAddr, address user) public view returns (bool)","function isAllWhitelisted(address contractAddr) public view returns (bool)","function addPrivilegeByAdmin(address contractAddr, address[] memory addresses)","function removePrivilegeByAdmin(address contractAddr, address[] memory addresses)","function setSponsorForGas(address contractAddr, uint upperBound)","function setSponsorForCollateral(address contractAddr)"],address:"0x0888000000000000000000000000000000000001"},Staking:{abi:["function getStakingBalance(address user) public view returns (uint256)","function getLockedStakingBalance(address user, uint256 blockNumber) public view returns (uint256)","function getVotePower(address user, uint256 blockNumber) public view returns (uint256)","function deposit(uint256 amount)","function withdraw(uint256 amount)","function voteLock(uint256 amount, uint256 unlockBlockNumber)"],address:"0x0888000000000000000000000000000000000002"},PoSRegister:{abi:["function register(bytes32 identifier, uint64 votePower, bytes calldata blsPubKey, bytes calldata vrfPubKey, bytes[2] calldata blsPubKeyProof)","function increaseStake(uint64 votePower)","function retire(uint64 votePower)","function getVotes(bytes32 identifier) external view returns (uint256, uint256)","function identifierToAddress(bytes32 identifier) external view returns (address)","function addressToIdentifier(address addr) external view returns (bytes32)","event Register(bytes32 indexed identifier, bytes blsPubKey, bytes vrfPubKey)","event IncreaseStake(bytes32 indexed identifier, uint64 votePower)","event Retire(bytes32 indexed identifier, uint64 votePower)"],address:"0x0888000000000000000000000000000000000005"},CrossSpaceCall:{abi:["event Call(bytes20 indexed sender, bytes20 indexed receiver, uint256 value, uint256 nonce, bytes data)","event Create(bytes20 indexed sender, bytes20 indexed contract_address, uint256 value, uint256 nonce, bytes init)","event Withdraw(bytes20 indexed sender, address indexed receiver, uint256 value, uint256 nonce)","event Outcome(bool success)","function createEVM(bytes calldata init) external payable returns (bytes20)","function transferEVM(bytes20 to) external payable returns (bytes memory output)","function callEVM(bytes20 to, bytes calldata data) external payable returns (bytes memory output)","function staticCallEVM(bytes20 to, bytes calldata data) external view returns (bytes memory output)","function withdrawFromMapped(uint256 value)","function mappedBalance(address addr) external view returns (uint256)","function mappedNonce(address addr) external view returns (uint256)"],address:"0x0888000000000000000000000000000000000006"},ParamsControl:{abi:["function castVote(uint64 vote_round, tuple(uint16 topic_index, uint256[3] votes)[] vote_data)","function readVote(address addr) view returns (tuple(uint16 topic_index, uint256[3] votes)[])","function voteRound() external view returns (uint64)","function totalVotes(uint64 vote_round) external view returns (tuple(uint16 topic_index, uint256[3] votes)[])","event CastVote(uint64 indexed vote_round, address indexed addr, uint16 indexed topic_index, uint256[3] votes)","event RevokeVote(uint64 indexed vote_round, address indexed addr, uint16 indexed topic_index, uint256[3] votes)"],address:"0x0888000000000000000000000000000000000007"}}},720721:(t,e,r)=>{const n=r(276635),o=r(563241),{WORD_CHARS:s}=r(146057);t.exports=class extends o{constructor(t,e,r,o){super(n.defaults(t,{name:"constructor",inputs:[]}),r,o),this.signature="",this.bytecode=e,this.decodeOutputs=t=>t}call(...t){if(!this.bytecode)throw new Error("bytecode is empty");const e=super.call(...t);return e.to=null,e}encodeData(t){return`${this.bytecode}${super.encodeData(t)}`}decodeData(t){for(let r=s;r<=t.length;r+=s)try{return super.decodeData(t.slice(-r))}catch(e){}}}},563241:(t,e,r)=>{const n=r(319066),o=r(217261),s=r(693689);t.exports=class extends s{constructor(t,e,r){return super(t),this.contract=e,this.conflux=r,n(this,this.call.bind(this))}call(...t){const e=this.contract.address,r=this.encodeData(t);return new o({to:e,data:r},this)}}},235854:(t,e,r)=>{const n=r(276635),o=r(319066);t.exports=class{constructor(t,e,r){return this.signatureToMethod=n.keyBy(t,"signature"),this.contract=e,this.conflux=r,o(this,this.call.bind(this))}call(...t){const e=[],r=[];let n;for(const s of Object.values(this.signatureToMethod))try{n=s(...t),e.push(s.type)}catch(o){r.push(s.type)}if(!e.length)throw new Error(`can not match override "${r.join("|")}" with args (${t.join(",")})`);if(e.length>1)throw new Error(`can not determine override "${e.join("|")}" with args (${t.join(",")})`);return n}decodeData(t){const e=t.slice(0,10);return this.signatureToMethod[e].decodeData(t)}}},62326:(t,e,r)=>{const n=r(693689);t.exports=class extends n{constructor(){super({name:"Error",inputs:[{type:"string",name:"message"}]})}decodeError(t){try{const{message:e}=this.decodeData(t.data);return new Error(e)}catch(e){return t}}}},693689:(t,e,r)=>{const{assert:n}=r(761069),o=r(652519),s=r(792808),{formatType:i,formatFullName:a,valueCoder:c}=r(422110);t.exports=class{constructor({name:t,inputs:e=[],outputs:r=[],stateMutability:n="nonpayable"}){this.name=t,this.fullName=a({name:t,inputs:e}),this.type=i({name:t,inputs:e}),this.signature=o.keccak256(this.type).slice(0,10),this.stateMutability=n,this.inputCoder=c({type:"tuple",components:e}),this.outputCoder=c({type:"tuple",components:r})}encodeData(t){const e=o.hex(this.inputCoder.encode(t));return`${this.signature}${e.substring(2)}`}decodeData(t){const e=t.slice(0,this.signature.length);n(e===this.signature,{message:"decodeData unexpected signature",expect:this.signature,got:e,coder:this.fullName});const r=t.slice(this.signature.length),o=new s(r),i=this.inputCoder.decode(o);return n(o.eof(),{message:"hex length too large",expect:`${o.string.length}`,got:o.index,coder:this.fullName}),i}decodeOutputs(t){const e=new s(t),r=this.outputCoder.decode(e);return n(e.eof(),{message:"hex length too large",expect:`${e.string.length}`,got:e.index,coder:this.fullName}),r.length<=1?r[0]:r}}},217261:(t,e,r)=>{const n=r(445550);t.exports=class extends n{constructor(t,e){super(t),Reflect.defineProperty(this,"method",{value:e})}sendTransaction(t,...e){return this.method.conflux.cfx.sendTransaction({...this,...t},...e)}populateTransaction(t){return this.method.conflux.cfx.populateTransaction({...this,...t})}async estimateGasAndCollateral(t,e){return this.method.conflux.cfx.estimateGasAndCollateral({...this,...t},e)}async call(t,e){const r=await this.method.conflux.cfx.call({...this,...t},e);return this.method.decodeOutputs(r)}request(t,e){const r=this.method.conflux.cfx.call.request({...this,...t},e);return r.decoder=this.method.decodeOutputs.bind(this.method),r}async then(t,e){try{return t(await this.call())}catch(r){return e(r)}}async catch(t){return this.then((t=>t),t)}async finally(t){try{return await(this)}finally{await t()}}}},780446:t=>{t.exports={CRC20_ABI:["function name() view returns (string)","function symbol() view returns (string)","function decimals() view returns (uint8)","function totalSupply() view returns (uint256)","function balanceOf(address) view returns (uint256)","function transfer(address to, uint256 amount)","function allowance(address owner, address spender) view returns (uint256)","function approve(address spender, uint256 amount) returns (bool)","function transferFrom(address sender, address recipient, uint256 amount) returns (bool)","function increaseAllowance(address spender, uint256 amount) returns (bool)","function decreaseAllowance(address spender, uint256 amount) returns (bool)","event Transfer(address indexed from, address indexed to, uint256 amount)","event Approval(address indexed owner, address indexed spender, uint256 amount)"],ERROR_ABI:["function Error(string)"]}},811293:(t,e,r)=>{const n=r(146057),o=r(395056),s=r(491665),i=r(169350),a=r(897033),c=r(445550),u=r(90282),l=r(885341),d=r(730067),h=r(806632),f=r(943089),g=r(652519),p=r(698124),m=r(101318);t.exports={CONST:n,ERROR_CODES:o,Conflux:s,Contract:i,Wallet:a,Transaction:c,Message:u,PersonalMessage:l,Drip:d,providerFactory:h,sign:f,format:g,PrivateKeyAccount:p,address:m}},536278:(t,e,r)=>{const n=r(22699),o=r(190886);t.exports=class extends n{constructor({url:t,retry:e=1,timeout:r=3e4,keepAlive:n=!1,logger:o={info:()=>{},error:()=>{}}}){super(),this.url=t,this.retry=e,this.timeout=r,this.logger=o,this.keepAlive=n;const s={};n&&(s.Connection="Keep-Alive"),this.headers=s}requestId(){return`${Date.now().toString(16)}${Math.random().toString(16).slice(2)}`}_request(t){throw new Error(`NotImplementError: ${this.constructor.name}.request not implement.`)}_requestBatch(t){throw new Error(`NotImplementError: ${this.constructor.name}.requestBatch not implement.`)}async request({method:t,params:e=[]}){const r=Date.now(),n={jsonrpc:"2.0",id:this.requestId(),method:t,params:e},{result:s,error:i}=await this._request(n);if(i)throw this.logger.error({data:n,error:i,duration:Date.now()-r}),new o(i,{method:t,params:e});return this.logger.info({data:n,result:s,duration:Date.now()-r}),s}async call(t,...e){return this.request({method:t,params:e})}async send(t,e){return this.request({method:t,params:e})}async batch(t){if(!t.length)return[];const e=Date.now(),r=t.map((t=>({jsonrpc:"2.0",id:this.requestId(),...t}))),n=await this._requestBatch(r);return this.logger.info({dataArray:r,returnArray:n,duration:Date.now()-e}),n.map((({result:e,error:r},n)=>r?new o(r,t[n]):e))}close(){}},t.exports.RPCError=o},703649:(t,e,r)=>{const n=r(100139),o=r(536278);t.exports=class extends o{async _doRequest(t){const{body:e}=await n.post(this.url).retry(this.retry).set(this.headers).send(t).timeout(this.timeout);return e}async _request(t){return await this._doRequest(t)||{}}async _requestBatch(t){return await this._doRequest(t)||[]}}},190886:(t,e,r)=>{const{isHexString:n}=r(761069),o=r(652519);class s extends Error{constructor(t,e={}){!function(t,e){if(t.message.match("0x prefix is missing"))return void(t.data="You should connect a node with version 1.1.1 or pass a valid hex value");"Method not found"===t.message&&"cfx_sendTransaction"===e.method&&(t.message=`${t.message} Can't find 'from' in cfx.wallet, check 'error.data' for detail`,t.data="Please use cfx.wallet.addPrivateKey() to add a account before call cfx.sendTransaction()");n(t.data)&&(t.data=o.hexBuffer(t.data).toString())}(t,e),super(t),Object.assign(this,t),Object.assign(this,e)}}t.exports=s},616601:(t,e,r)=>{const n=r(185731).w3cwebsocket,o=r(536278),{awaitTimeout:s}=r(761069);t.exports=class extends o{constructor(t){super(t),this.websocketOptions=t,this.client=null,this.on("message",(t=>{const e=JSON.parse(t);Array.isArray(e)?e.forEach((t=>this._onData(t))):this._onData(e)}))}_connect({url:t,protocols:e,origin:r,headers:o,requestOptions:s,clientConfig:i}){return new Promise(((a,c)=>{const u=new n(t,e,r,o,s,i);u.onopen=()=>a(u),u.onerror=e=>{this.emit("error",e),c(new Error(`connect to "${t}" failed`))},u.onmessage=({data:t})=>this.emit("message",t),u.onclose=({code:t,reason:e})=>this.emit("close",t,e)}))}_onData(t={}){const{id:e,params:{subscription:r,result:n}={}}=t;e?this.emit(e,t):r&&this.emit(r,n)}_awaitId(t){return new Promise(((e,r)=>{const n=(e,n)=>{this.removeAllListeners(t),r(new Error(n))};this.once("close",n),this.once(t,(t=>{this.removeListener("close",n),e(t)}))}))}async _send(t){if(null===this.client){this.client=!1;try{this.client=await this._connect(this.websocketOptions)}catch(e){throw this.client=null,e}}for(;!1===this.client;)await new Promise((t=>setTimeout(t,1)));return this.client.send(t)}async _request(t){return await this._send(JSON.stringify(t)),await s(this._awaitId(t.id),this.timeout)||{}}async _requestBatch(t){return await this._send(JSON.stringify(t)),Promise.all(t.map((async t=>s(this._awaitId(t.id),this.timeout))))}async close(){if(super.close(),null!==this.client){for(;!1===this.client;)await new Promise((t=>setTimeout(t,1)));this.client.close(),await new Promise((t=>this.once("close",t))),this.client=null}}}},983512:(t,e,r)=>{const n=r(536278);t.exports=class extends n{async _doRequest(t){return new Promise(((e,r)=>{let n=this.retry;const o=()=>{wx.request({method:"POST",url:this.url,header:this.headers,data:t,timeout:this.timeout,success:t=>{e(t.data)},fail:()=>{n>0?(n-=1,o()):r(new Error("SendWechatRequestError"))}})};o()}))}async _request(t){return await this._doRequest(t)||{}}async _requestBatch(t){return await this._doRequest(t)||[]}}},806632:(t,e,r)=>{const n=r(276635),o=r(536278),s=r(703649),i=r(983512),a=r(616601);t.exports=function({url:t,useWechatProvider:e,...r}){if(!t)return new o(r);if(n.startsWith(t,"http"))return e?new i({url:t,...r}):new s({url:t,...r});if(n.startsWith(t,"ws"))return new a({url:t,...r});throw new Error("Invalid provider options")}},146789:(t,e,r)=>{const n=r(734244),o=r(146057),s=r(652519);t.exports=class{constructor(t){this.conflux=t}async getNextUsableNonce(t){let e;t=this.conflux._formatAddress(t);try{e=await this.conflux.txpool.nextNonce(t)}catch(r){e=await this.conflux.cfx.getNextNonce(t)}return e}async getPoSInterestRate(){const t=new n(.04),e=this.conflux.BatchRequest();e.add(this.conflux.cfx.getSupplyInfo.request()),e.add(this.conflux.cfx.getPoSEconomics.request()),e.add(this.conflux.cfx.getBalance.request(o.ZERO_ADDRESS_HEX));const[{totalCirculating:r},{totalPosStakingTokens:s},i]=await e.execute(),a=new n(r-i),c=new n(s);return t.div(c.div(a).sqrt()).toString()}async estimateGasAndCollateralAdvance(t,e){const r=await this.conflux.cfx.estimateGasAndCollateral(t,e);if(!t.from)throw new Error("Can not check balance without `from`");t=this.conflux._formatCallTx(t);const n=s.bigInt(t.gasPrice||BigInt(1)),o=s.bigInt(t.value||BigInt(0)),i=n*r.gasLimit,a=r.storageCollateralized*(BigInt(1e18)/BigInt(1024)),c=await this.conflux.cfx.getBalance(t.from);if(r.balance=c,t.to){const s=await this.conflux.cfx.checkBalanceAgainstTransaction(t.from,t.to,r.gasLimit,n,r.storageCollateralized,e);Object.assign(r,s);let u=o;u+=s.willPayTxFee?i:BigInt(0),u+=s.willPayCollateral?a:BigInt(0),r.isBalanceEnoughForValueAndFee=c>u}else r.willPayCollateral=!0,r.willPayTxFee=!0,r.isBalanceEnough=c>i+a,r.isBalanceEnoughForValueAndFee=c>i+a+o;return r}}},29719:(t,e,r)=>{const n=r(190886),o=r(445550),s="cfx_sendTransaction",i="cfx_sendRawTransaction";t.exports=class{constructor(t){this.conflux=t,this.requests=[],this.decoders=[],this.accountNextNonces={},this.accountUsedNonces={}}add({request:t,decoder:e=(t=>t)}){this.requests.push(t),this.decoders.push(e)}addTransaction(t){this.add({request:{method:s,params:[t]}})}clear(){this.requests=[],this.decoders=[],this.accountNextNonces={},this.accountUsedNonces={}}async execute(){const t=[];await this._prepareTxCommonInfo(),await this._prepareTxNonce(),await this._prepareGasAndStorage();for(let e=0;e<this.requests.length;e++){const r=this.requests[e];if(r.method===s&&r.params[0]&&r.params[0].from&&this.conflux.wallet.has(r.params[0].from)){const t=r.params[0].from,e=await this.conflux.wallet.get(`${t}`),n=await e.signTransaction(r.params[0]);r.method=i,r.params[0]=n.serialize()}t[e]=r}return(await this.conflux.provider.batch(t)).map(((t,e)=>t instanceof n?t:this.decoders[e](t)))}async _prepareTxNonce(){for(let t=0;t<this.requests.length;t++){const e=this.requests[t];if(e.method===i){const t=o.decodeRaw(e.params[0]);this._markNonceUsed(t.from,t.nonce)}if(e.method===s&&e.params[0]&&e.params[0].from&&this.conflux.wallet.has(e.params[0].from)){const t=e.params[0].from;let r=e.params[0].nonce;r&&!this._isNonceUsed(t,r)||(r=await this._getNextNonce(t),e.params[0].nonce=r),this._markNonceUsed(t,r)}}}async _prepareTxCommonInfo(){const t=await this._getTxCommonInfo();for(let e=0;e<this.requests.length;e++){const r=this.requests[e];r.method===s&&r.params[0]&&(r.params[0].gasPrice||(r.params[0].gasPrice=t.gasPrice),r.params[0].chainId||(r.params[0].chainId=t.chainId),r.params[0].epochHeight||(r.params[0].epochHeight=t.epochHeight))}}async _prepareGasAndStorage(){for(let t=0;t<this.requests.length;t++){const e=this.requests[t];if(e.method===s&&e.params[0]&&(!e.params[0].gas||!e.params[0].storageLimit)){const{gasLimit:t,storageCollateralized:r}=await this.conflux.cfx.estimateGasAndCollateral(e.params[0]);e.params[0].gas=t,e.params[0].storageLimit=r}}}_markNonceUsed(t,e){this.accountUsedNonces[t]||(this.accountUsedNonces[t]={}),this.accountUsedNonces[t][e]=!0}_isNonceUsed(t,e){return this.accountUsedNonces[t]&&this.accountUsedNonces[t][e]}async _getTxCommonInfo(){return{epochHeight:await this.conflux.cfx.epochNumber(),gasPrice:await this.conflux.cfx.gasPrice(),chainId:this.conflux.networkId}}async _getNextNonce(t){let e=this.accountNextNonces[t];for(e||(e=await this.conflux.advanced.getNextUsableNonce(t));this.accountUsedNonces[t]&&this.accountUsedNonces[t][e];)e+=BigInt(1);return this.accountNextNonces[t]=e+BigInt(1),e}}},240856:(t,e,r)=>{const n=r(398173),o=r(652519),s=r(477466),i=r(101318),a=r(146057),{assert:c}=r(761069),{decodeCfxAddress:u,ADDRESS_TYPES:l}=r(101318),d=r(654727),h=r(169350),f=r(841043);t.exports=class extends n{constructor(t){super(t),this.conflux=t,this._formatAddress=t._formatAddress.bind(t),super.addMethods(this.methods()),this.sendRawTransaction=this._decoratePendingTransaction(this.sendRawTransaction),this.sendTransaction=this._decoratePendingTransaction(this.sendTransaction),this._addRequestBuilderToCustomMethods()}methods(){const t=this._formatAddress;return[{method:"cfx_clientVersion"},{method:"cfx_getSupplyInfo",requestFormatters:[o.epochNumberOrUndefined],responseFormatter:s.supplyInfo},{method:"cfx_getStatus",responseFormatter:s.status},{method:"cfx_gasPrice",alias:"getGasPrice",responseFormatter:o.bigUInt},{method:"cfx_getInterestRate",requestFormatters:[o.epochNumberOrUndefined],responseFormatter:o.bigUInt},{method:"cfx_getAccumulateInterestRate",requestFormatters:[o.epochNumberOrUndefined],responseFormatter:o.bigUInt},{method:"cfx_getAccount",requestFormatters:[t,o.epochNumberOrUndefined],responseFormatter:t=>new f.Account(t)},{method:"cfx_getBalance",requestFormatters:[t,o.epochNumberOrUndefined],responseFormatter:o.bigUInt},{method:"cfx_getStakingBalance",requestFormatters:[t,o.epochNumberOrUndefined],responseFormatter:o.bigUInt},{method:"cfx_getNextNonce",requestFormatters:[t,o.epochNumberOrUndefined],responseFormatter:o.bigUInt},{method:"cfx_getAdmin",requestFormatters:[t,o.epochNumberOrUndefined]},{method:"cfx_getVoteList",requestFormatters:[t,o.epochNumberOrUndefined],responseFormatter:s.voteList},{method:"cfx_getDepositList",requestFormatters:[t,o.epochNumberOrUndefined],responseFormatter:s.depositList},{method:"cfx_epochNumber",alias:"getEpochNumber",requestFormatters:[o.epochNumberOrUndefined],responseFormatter:o.uInt},{method:"cfx_getBlockByEpochNumber",requestFormatters:[o.epochNumber,o.boolean],responseFormatter:s.block.$or(null)},{method:"cfx_getBlockByBlockNumber",requestFormatters:[o.bigUIntHex,o.boolean],responseFormatter:s.block.$or(null)},{method:"cfx_getBlocksByEpoch",alias:"getBlocksByEpochNumber",requestFormatters:[o.epochNumber]},{method:"cfx_getBlockRewardInfo",requestFormatters:[o.epochNumber],responseFormatter:s.rewardInfo},{method:"cfx_getBestBlockHash"},{method:"cfx_getBlockByHash",requestFormatters:[o.blockHash,o.boolean],responseFormatter:s.block.$or(null)},{method:"cfx_getBlockByHashWithPivotAssumption",requestFormatters:[o.blockHash,o.blockHash,o.epochNumber],responseFormatter:s.block},{method:"cfx_getConfirmationRiskByHash",requestFormatters:[o.blockHash],responseFormatter:o.fixed64.$or(null)},{method:"cfx_getTransactionByHash",requestFormatters:[o.transactionHash],responseFormatter:s.transaction.$or(null)},{method:"cfx_getTransactionReceipt",requestFormatters:[o.transactionHash],responseFormatter:s.receipt.$or(null)},{method:"cfx_sendRawTransaction",requestFormatters:[o.hex]},{method:"cfx_getCode",requestFormatters:[t,o.epochNumber.$or(void 0)],responseFormatter:o.any},{method:"cfx_getStorageAt",requestFormatters:[t,o.hex64,o.epochNumber.$or(void 0)]},{method:"cfx_getStorageRoot",requestFormatters:[t,o.epochNumberOrUndefined]},{method:"cfx_getSponsorInfo",requestFormatters:[t,o.epochNumberOrUndefined],responseFormatter:s.sponsorInfo},{method:"cfx_getAccountPendingInfo",requestFormatters:[t],responseFormatter:s.accountPendingInfo},{method:"cfx_getAccountPendingTransactions",requestFormatters:[t,o.bigUIntHex.$or(void 0),o.bigUIntHex.$or(void 0)],responseFormatter:s.accountPendingTransactions},{method:"cfx_getCollateralForStorage",requestFormatters:[t,o.epochNumberOrUndefined],responseFormatter:o.bigUInt},{method:"cfx_checkBalanceAgainstTransaction",requestFormatters:[t,t,o.bigUIntHex,o.bigUIntHex,o.bigUIntHex,o.epochNumberOrUndefined],responseFormatter:o.any},{method:"cfx_getLogs",beforeHook(t){if(void 0!==t.blockHashes&&(void 0!==t.fromEpoch||void 0!==t.toEpoch))throw new Error("OverrideError, do not use `blockHashes` with `fromEpoch` or `toEpoch`, cause only `blockHashes` will take effect")},requestFormatters:[this.conflux._formatGetLogs.bind(this.conflux)],responseFormatter:s.logs},{method:"cfx_getEpochReceipts",requestFormatters:[o.epochNumber],responseFormatter:s.epochReceipts},{method:"cfx_getPoSEconomics",responseFormatter:s.posEconomics},{method:"cfx_getParamsFromVote",requestFormatters:[o.epochNumberOrUndefined],responseFormatter:s.voteParamsInfo}]}_decoratePendingTransaction(t){const e=this;return function(...r){return new d(e,t.bind(this),r)}}_addRequestBuilderToCustomMethods(){const t=this;this.call.request=function(e,r){return{request:{method:"cfx_call",params:[t.conflux._formatCallTx(e),o.epochNumber.$or(void 0)(r)]}}},this.estimateGasAndCollateral.request=function(e,r){return{request:{method:"cfx_estimateGasAndCollateral",params:[t.conflux._formatCallTx(e),o.epochNumber.$or(void 0)(r)]},decoder:s.estimate}}}async populateTransaction(t){const{defaultGasPrice:e,defaultGasRatio:r,defaultStorageRatio:n}=this.conflux;if(t.from=this._formatAddress(t.from),void 0===t.nonce&&(t.nonce=await this.conflux.advanced.getNextUsableNonce(t.from)),void 0===t.chainId&&(t.chainId=this.conflux.networkId),void 0===t.chainId){const e=await this.getStatus();t.chainId=e.chainId}if(void 0===t.epochHeight&&(t.epochHeight=await this.epochNumber()),void 0===t.gas||void 0===t.storageLimit){let e,s;const i=u(t.from).type===l.CONTRACT;if(t.data||i){const{gasUsed:i,storageCollateralized:a,gasLimit:c}=await this.estimateGasAndCollateral(t);e=r?o.big(i).times(r).toFixed(0):c,s=o.big(a).times(n).toFixed(0)}else e=a.TRANSACTION_GAS,s=a.TRANSACTION_STORAGE_LIMIT;void 0===t.gas&&(t.gas=e),void 0===t.storageLimit&&(t.storageLimit=s)}if(void 0===t.gasPrice)if(void 0===e){const e=await this.gasPrice();t.gasPrice=0===Number(e)?a.MIN_GAS_PRICE:e}else t.gasPrice=e;return t}async populateAndSignTransaction(t){await this.populateTransaction(t);const e=await this.conflux.wallet.get(`${t.from}`);return(await e.signTransaction(t)).serialize()}async sendTransaction(t,...e){if(this.conflux.wallet.has(`${t.from}`)){const e=await this.populateAndSignTransaction(t);return this.sendRawTransaction(e)}return this.conflux.request({method:"cfx_sendTransaction",params:[this.conflux._formatCallTx(t),...e]})}async getEpochReceiptsByPivotBlockHash(t){const e=await this.conflux.request({method:"cfx_getEpochReceipts",params:[`hash:${t}`]});return s.epochReceipts(e)}async call(t,e){try{if(t.to&&i.hasNetworkPrefix(t.to)&&this.conflux.networkId){const{netId:e}=i.decodeCfxAddress(t.to);c(e===this.conflux.networkId,"`to` address's networkId is not match current RPC's networkId")}return await this.conflux.request({method:"cfx_call",params:[this.conflux._formatCallTx(t),o.epochNumber.$or(void 0)(e)]})}catch(r){throw h.decodeError(r)}}async estimateGasAndCollateral(t,e){try{const r=await this.conflux.request({method:"cfx_estimateGasAndCollateral",params:[this.conflux._formatCallTx(t),o.epochNumber.$or(void 0)(e)]});return s.estimate(r)}catch(r){throw h.decodeError(r)}}}},398173:(t,e,r)=>{const n=r(652519);t.exports=class{constructor(t,e=[]){this.conflux=t,this.addMethods(e)}addMethods(t){for(const e of t){const t=e.method.split("_")[1];this[t]=this.createRPCMethod(e),e.alias&&(this[e.alias]=this[t])}}createRPCMethod({method:t,requestFormatters:e=[],responseFormatter:r=n.any,beforeHook:o}){async function s(...n){o&&o(...n);const s=Array.from(n).map(((t,r)=>e[r]?e[r](t):t)),i=await this.conflux.request({method:t,params:s});return r(i)}return s.request=function(...n){const o=Array.from(n).map(((t,r)=>e[r]?e[r](t):t));return{request:{method:t,params:o},decoder:r}},s}}},767946:(t,e,r)=>{const n=r(398173),o=r(652519);o.posBlockNumber=o.bigUIntHex.$or("latest_committed").$or("latest_voted"),o.decision=o({height:o.uInt}),o.posStatus=o({latestCommitted:o.uInt,epoch:o.uInt,pivotDecision:o.decision,latestTxNumber:o.uInt,latestVoted:o.uInt.$or(null)}),o.posVotePowerState=o({endBlockNumber:o.uInt,power:o.uInt}),o.posAccount=o({blockNumber:o.uInt,status:{availableVotes:o.uInt,forfeited:o.uInt,forceRetired:o.uInt.$or(null),inQueue:[o.posVotePowerState],locked:o.uInt,outQueue:[o.posVotePowerState],unlocked:o.uInt}}),o.txPayload=o({targetTerm:o.uInt}).$or({votingPower:o.uInt}).$or({height:o.uInt}),o.posTransaction=o({number:o.uInt,timestamp:o.uInt.$or(null),blockNumber:o.uInt.$or(null),payload:o.txPayload.$or(null)}).$or(null),o.posBlock=o({epoch:o.uInt,height:o.uInt,pivotDecision:o.decision.$or(null),round:o.uInt,timestamp:o.uInt,lastTxNumber:o.uInt,signatures:[o({votes:o.uInt})]}).$or(null),o.committeeNode=o({votingPower:o.uInt}),o.election=o({startBlockNumber:o.uInt,topElectingNodes:[o.committeeNode]}),o.committee=o({currentCommittee:{epochNumber:o.uInt,quorumVotingPower:o.uInt,totalVotingPower:o.uInt,nodes:[o.committeeNode]},elections:[o.election]}),o.rewardsByEpoch=o({accountRewards:[o({reward:o.bigUInt})]}).$or(null);class s extends n{constructor(t){super(t,s.methods()),this.conflux=t}static methods(){return[{method:"pos_getStatus",responseFormatter:o.posStatus},{method:"pos_getAccount",requestFormatters:[o.hex64,o.posBlockNumber.$or(void 0)],responseFormatter:o.posAccount},{method:"pos_getBlockByHash",requestFormatters:[o.hex64],responseFormatter:o.posBlock},{method:"pos_getBlockByNumber",requestFormatters:[o.posBlockNumber],responseFormatter:o.posBlock},{method:"pos_getCommittee",requestFormatters:[o.posBlockNumber.$or(void 0)],responseFormatter:o.committee},{method:"pos_getTransactionByNumber",requestFormatters:[o.bigUIntHex],responseFormatter:o.posTransaction},{method:"pos_getRewardsByEpoch",requestFormatters:[o.bigUIntHex],responseFormatter:o.rewardsByEpoch}]}}t.exports=s},648562:(t,e,r)=>{const n=r(398173),o=r(652519);o.actionCall=o({space:o.any,from:o.any,to:o.any,input:o.any,callType:o.any,value:o.bigUInt,gas:o.bigUInt}),o.actionCallResult=o({outcome:o.any,returnData:o.any,gasLeft:o.bigUInt}),o.actionCreate=o({space:o.any,from:o.any,value:o.bigUInt,gas:o.bigUInt,init:o.any,createType:o.any}),o.actionCreateResult=o({outcome:o.any,addr:o.any,gasLeft:o.bigUInt,returnData:o.any}),o.actionInternalTrace=o({from:o.any,fromPocket:o.any,fromSpace:o.any,to:o.any,toPocket:o.any,toSpace:o.any,value:o.bigUInt}),o.action=o({action:{from:o.any,to:o.any,fromPocket:o.any,toPocket:o.any,space:o.any,fromSpace:o.any,toSpace:o.any,value:o.bigUInt,gas:o.bigUInt,gasLeft:o.bigUInt,input:o.hex,init:o.hex,returnData:o.hex,callType:o.any,createType:o.any,outcome:o.any,addr:o.any},epochNumber:o.uInt,epochHash:o.hex,blockHash:o.hex,transactionHash:o.hex,transactionPosition:o.uInt,type:o.any,valid:o.any},{pick:!0}),o.txTraces=o({traces:[o.action],transactionPosition:o.uInt}),o.blockTraces=o({transactionTraces:[o.txTraces],epochNumber:o.uInt}).$or(null),o.traces=o([o.action]).$or(null),o.traceFilter=o({fromEpoch:o.epochNumber.$or(null),toEpoch:o.epochNumber.$or(null),blockHashes:o([o.blockHash]).$or(null),after:o.bigUIntHex.$or(null),count:o.bigUIntHex.$or(null),actionTypes:o([o.any]).$or(null)});class s extends n{constructor(t){super(t,s.methods()),this.conflux=t}static methods(){return[{method:"trace_block",alias:"traceBlock",requestFormatters:[o.blockHash],responseFormatter:o.blockTraces},{method:"trace_transaction",alias:"traceTransaction",requestFormatters:[o.transactionHash],responseFormatter:o.traces},{method:"trace_filter",alias:"traceFilter",requestFormatters:[o.traceFilter],responseFormatter:o.traces}]}}t.exports=s},947401:(t,e,r)=>{const n=r(398173),o=r(652519);t.exports=class extends n{constructor(t){super(t),this.conflux=t,super.addMethods(this.methods())}methods(){return[{method:"txpool_nextNonce",requestFormatters:[this.conflux._formatAddress.bind(this.conflux)],responseFormatter:o.bigUInt}]}}},387807:(t,e,r)=>{const n=r(652519),o=r(146057),s=n({accumulatedInterestReturn:n.bigUInt,balance:n.bigUInt,collateralForStorage:n.bigUInt,nonce:n.bigUInt,stakingBalance:n.bigUInt},{name:"format.account"});class i{static format(t){return s(t)}constructor(t){const{address:e,balance:r,nonce:n,codeHash:o,stakingBalance:s,collateralForStorage:a,accumulatedInterestReturn:c,admin:u}=i.format(t);return this.address=e,this.balance=r,this.nonce=n,this.codeHash=o,this.stakingBalance=s,this.collateralForStorage=a,this.accumulatedInterestReturn=c,this.admin=u,this}isExternalAccount(){return this.codeHash===o.KECCAK_EMPTY}}t.exports=i},477466:(t,e,r)=>{const n=r(652519),{validAddressPrefix:o}=r(761069),s=r(147150),i=new Proxy((()=>{}),{apply:(t,e,r)=>s(...r)});i.getLogs=n({fromEpoch:n.epochNumber,toEpoch:n.epochNumber,blockHashes:n([n.blockHash]).$or(null),address:n.address.$or([n.address]).$or(null),topics:n([n.hex64.$or([n.hex64]).$or(null)])},{pick:!0,name:"format.getLogs"}),i.getLogsAdvance=function(t,e=!1,r=!1){const o=e?n.hexAddress:n.netAddress(t,r);return n({fromEpoch:n.epochNumber,toEpoch:n.epochNumber,blockHashes:n([n.blockHash]).$or(null),address:n([o]).$or(o).$or(null),topics:n([n.hex64.$or([n.hex64]).$or(null)])},{pick:!0,name:"format.getLogsAdvance"})},i.transactionToAddress=n(n.hexAddress.$or(null).$default(null)).$after(n.hexBuffer).$validate((t=>0===t.length||o(t)),"transactionToAddress"),i.signTx=n({nonce:n.bigUInt.$after(n.hexBuffer),gasPrice:n.bigUInt.$after(n.hexBuffer),gas:n.bigUInt.$after(n.hexBuffer),to:i.transactionToAddress,value:n.bigUInt.$default(0).$after(n.hexBuffer),storageLimit:n.bigUInt.$after(n.hexBuffer),epochHeight:n.bigUInt.$after(n.hexBuffer),chainId:n.uInt.$default(0).$after(n.hexBuffer),data:n.hex.$default("0x").$after(n.hexBuffer),r:n.bigUInt.$after(n.hexBuffer).$or(void 0),s:n.bigUInt.$after(n.hexBuffer).$or(void 0),v:n.uInt.$after(n.hexBuffer).$or(void 0)},{strict:!0,pick:!0,name:"format.signTx"}),i.callTx=n({from:n.address,nonce:n.bigUIntHex,gasPrice:n.bigUIntHex,gas:n.bigUIntHex,to:n.address.$or(null),value:n.bigUIntHex,storageLimit:n.bigUIntHex,epochHeight:n.bigUIntHex,chainId:n.bigUIntHex,data:n.hex},{pick:!0,name:"format.callTx"}),i.callTxAdvance=function(t,e=!1,r=!1){const o=e?n.hexAddress:n.netAddress(t,r);return n({from:o,nonce:n.bigUIntHex,gasPrice:n.bigUIntHex,gas:n.bigUIntHex,to:o.$or(null),value:n.bigUIntHex,storageLimit:n.bigUIntHex,epochHeight:n.bigUIntHex,chainId:n.bigUIntHex,data:n.hex},{pick:!0,name:"format.callTxAdvance"})},i.status=n({networkId:n.uInt,chainId:n.uInt,epochNumber:n.uInt,blockNumber:n.uInt,pendingTxNumber:n.uInt,latestCheckpoint:n.uInt.$or(null),latestConfirmed:n.uInt.$or(null),latestFinalized:n.uInt.$or(null),latestState:n.uInt.$or(null),ethereumSpaceChainId:n.uInt.$or(null)},{name:"format.status"}),i.estimate=n({gasUsed:n.bigUInt,gasLimit:n.bigUInt,storageCollateralized:n.bigUInt},{name:"format.estimate"}),i.transaction=n({nonce:n.bigUInt,gasPrice:n.bigUInt,gas:n.bigUInt,value:n.bigUInt,storageLimit:n.bigUInt,epochHeight:n.bigUInt,chainId:n.uInt,v:n.uInt,status:n.uInt.$or(null),transactionIndex:n.uInt.$or(null)},{name:"format.transaction"}),i.block=n({epochNumber:n.uInt.$or(null),blockNumber:n.uInt.$or(null),blame:n.uInt,height:n.uInt,size:n.uInt,timestamp:n.uInt,gasLimit:n.bigUInt,gasUsed:n.bigUInt.$or(null).$or(void 0),difficulty:n.bigUInt,transactions:[i.transaction.$or(n.transactionHash)]},{name:"format.block"}),i.receipt=n({index:n.uInt,epochNumber:n.uInt,outcomeStatus:n.uInt.$or(null),gasUsed:n.bigUInt,gasFee:n.bigUInt,storageCollateralized:n.bigUInt,storageReleased:[{collaterals:n.bigUInt}]},{name:"format.receipt"}),i.epochReceipts=n([[i.receipt]]).$or(null),i.log=n({epochNumber:n.uInt,logIndex:n.uInt,transactionIndex:n.uInt,transactionLogIndex:n.uInt},{name:"format.log"}),i.logs=n([i.log]),i.supplyInfo=n({totalCirculating:n.bigUInt,totalIssued:n.bigUInt,totalStaking:n.bigUInt,totalCollateral:n.bigUInt,totalEspaceTokens:n.bigUInt.$or(null)},{name:"format.supplyInfo"}),i.sponsorInfo=n({sponsorBalanceForCollateral:n.bigUInt,sponsorBalanceForGas:n.bigUInt,sponsorGasBound:n.bigUInt},{name:"format.sponsorInfo"}),i.rewardInfo=n([{baseReward:n.bigUInt,totalReward:n.bigUInt,txFee:n.bigUInt}]),i.voteList=n([{amount:n.bigUInt}]),i.depositList=n([{amount:n.bigUInt,accumulatedInterestRate:n.bigUInt}]),i.head=n({difficulty:n.bigUInt,epochNumber:n.uInt.$or(null),gasLimit:n.bigUInt,height:n.uInt,timestamp:n.uInt},{name:"format.head"}),i.revert=n({revertTo:n.uInt},{name:"format.revert"}),i.epoch=n({epochNumber:n.uInt},{name:"format.epoch"}),i.accountPendingInfo=n({localNonce:n.uInt,pendingCount:n.uInt,pendingNonce:n.uInt},{name:"format.accountPendingInfo"}),i.accountPendingTransactions=n({pendingCount:n.bigUInt,pendingTransactions:[i.transaction]},{name:"format.accountPendingTransactions"}),i.posEconomics=n({distributablePosInterest:n.bigUInt,lastDistributeBlock:n.bigUInt,totalPosStakingTokens:n.bigUInt},{name:"format.posEconomics"}),i.voteParamsInfo=n({powBaseReward:n.bigUInt,interestRate:n.bigUInt},{name:"format.voteParamsInfo"}),t.exports=i},841043:(t,e,r)=>{e.Account=r(387807),e.formatters=r(477466)},654727:(t,e,r)=>{const{sleep:n}=r(761069);t.exports=class{constructor(t,e,r){this.conflux=t,this.func=e,this.args=r,this.promise=void 0}async then(t,e){this.promise=this.promise||this.func(...this.args);try{return t(await this.promise)}catch(r){return e(r)}}async catch(t){return this.then((t=>t),t)}async finally(t){try{return await(this)}finally{await t()}}async get({delay:t=0}={}){await n(t);const e=await(this);return this.conflux.getTransactionByHash(e)}async mined({delta:t=1e3,timeout:e=6e4}={}){const r=Date.now(),o=await(this);for(let s=r;s<r+e;s=Date.now()){const e=await this.get();if(e&&e.blockHash)return e;await n(s+t-Date.now())}throw new Error(`wait transaction "${o}" mined timeout after ${Date.now()-r} ms`)}async executed({delta:t=1e3,timeout:e=3e5}={}){const r=Date.now(),o=await(this);for(let s=r;s<r+e;s=Date.now()){const e=await this.conflux.getTransactionReceipt(o);if(e){if(0!==e.outcomeStatus)throw new Error(`transaction "${o}" executed failed, outcomeStatus ${e.outcomeStatus}`);return e}await n(s+t-Date.now())}throw new Error(`wait transaction "${o}" executed timeout after ${Date.now()-r} ms`)}async confirmed({delta:t=1e3,timeout:e=18e5,threshold:r=1e-8}={}){const o=Date.now(),s=await(this);for(let i=o;i<o+e;i=Date.now()){const o=await this.executed({delta:t,timeout:e});if(await this.conflux.getConfirmationRiskByHash(o.blockHash)<=r)return o;await n(i+t-Date.now())}throw new Error(`wait transaction "${s}" confirmed timeout after ${Date.now()-o} ms`)}}},986420:(t,e,r)=>{const n=r(22699);t.exports=class extends n{constructor(t){super(),this.id=t}toString(){return this.id}}},792808:(t,e,r)=>{const{assert:n}=r(761069),{WORD_CHARS:o}=r(146057);t.exports=class{constructor(t){this.string=t,this.index=t.startsWith("0x")?2:0}eof(){return this.index>=this.string.length}read(t,e=!1){n(Number.isInteger(t)&&0<=t,{message:"invalid length",expect:"integer && >= 0",got:t,stream:this});const r=Math.ceil(t/o)*o,s=e?this.string.substr(this.index,t):this.string.substr(this.index+(r-t),t);return n(s.length===t,{message:"length not match",expect:t,got:s.length,stream:this}),this.index+=r,s}}},101318:(t,e,r)=>{const{encode:n,decode:o,isValidCfxAddress:s,verifyCfxAddress:i,hasNetworkPrefix:a,simplifyCfxAddress:c,shortenCfxAddress:u,isZeroAddress:l,isInternalContractAddress:d,isValidHexAddress:h,isValidCfxHexAddress:f}=r(510760),{checksumAddress:g,keccak256:p}=r(943089),{ADDRESS_TYPES:m}=r(146057);t.exports={encodeCfxAddress:n,decodeCfxAddress:o,ethChecksumAddress:function(t){return g(t)},ethAddressToCfxAddress:function(t){return`0x1${t.toLowerCase().slice(3)}`},cfxMappedEVMSpaceAddress:function(t){const{hexAddress:e}=o(t),r=p(e).slice(-20);return g(`0x${r.toString("hex")}`)},ADDRESS_TYPES:m,isValidCfxAddress:s,verifyCfxAddress:i,hasNetworkPrefix:a,simplifyCfxAddress:c,shortenCfxAddress:u,isZeroAddress:l,isInternalContractAddress:d,isValidHexAddress:h,isValidCfxHexAddress:f}},319066:(t,e,r)=>{const n=r(276635);t.exports=function(t,e){if(!n.isFunction(e))throw new Error("except to be function");return new Proxy(e,{getPrototypeOf:()=>Object.getPrototypeOf(t),getOwnPropertyDescriptor:(e,r)=>Object.getOwnPropertyDescriptor(t,r),has:(r,n)=>Reflect.has(t,n)||Reflect.has(e,n),get:(r,n)=>Reflect.has(t,n)?Reflect.get(t,n):Reflect.get(e,n),set:(e,r,n)=>Reflect.set(t,r,n),deleteProperty:(e,r)=>Reflect.deleteProperty(t,r),defineProperty:(e,r,n)=>Reflect.defineProperty(t,r,n),ownKeys:()=>Reflect.ownKeys(t)})}},652519:(t,e,r)=>{var n=r(348834).Buffer;const o=r(734244),s=r(276635),i=r(146057),a=r(331629),c=r(147150),u=r(943089),l=r(101318),{isHexString:d,isBytes:h}=r(761069);const f=new Proxy((()=>{}),{apply:(t,e,r)=>c(...r)});function g(t,e,r=!1){if(s.isObject(t)&&l.hasNetworkPrefix(t.toString())&&(t=t.toString()),s.isString(t)&&l.hasNetworkPrefix(t)){const r=l.decodeCfxAddress(t);t=r.hexAddress,e=e||r.netId}if(20!==(t=f.hexBuffer(t)).length)throw new Error('not match "hex40"');if("undefined"===typeof e)throw new Error("expected parameter: networkId");return l.encodeCfxAddress(t,e,r)}f.any=f((t=>t),{name:"format.any"}),f.uInt=f((function(t){if(null===t)throw new Error(`${t} not match "number"`);return n.isBuffer(t)&&(t=`0x${t.toString("hex")}`),Number(t)}),{name:"format.uInt"}).$validate((t=>Number.isSafeInteger(t)&&t>=0),"uint"),f.bigInt=f((function(t){if(Number.isInteger(t)||"bigint"===typeof t||t instanceof a)return a.BigInt(t);if(s.isBoolean(t))throw new Error(`${t} not match "BigInt"`);if(n.isBuffer(t))throw new Error(`${t} not match "BigInt"`);return t=`${t}`.replace(/^(-?\d+)(.0+)?$/,"$1"),a.BigInt(t)}),{name:"format.bigInt"}),f.bigIntFromBuffer=f.bigInt.$before((t=>0===t.length?"0x0":f.hex(t))),f.bigUInt=f.bigInt.$validate((t=>t>=0),"bigUInt"),f.bigUIntHex=f.bigUInt.$after((t=>`0x${t.toString(16)}`)),f.big=f((function(t){return/^0[xob]/i.test(t)&&(t=a.BigInt(t)),new o(t)}),{name:"format.big"}),f.fixed64=f.big.$after((t=>Number(t.div(i.MAX_UINT)))),f.epochNumber=f.bigUIntHex.$or(i.EPOCH_NUMBER.LATEST_MINED).$or(i.EPOCH_NUMBER.LATEST_STATE).$or(i.EPOCH_NUMBER.LATEST_FINALIZED).$or(i.EPOCH_NUMBER.LATEST_CONFIRMED).$or(i.EPOCH_NUMBER.LATEST_CHECKPOINT).$or(i.EPOCH_NUMBER.EARLIEST),f.epochNumberOrUndefined=f.epochNumber.$or(void 0),f.hex=f((function(t){let e;if(e=s.isString(t)?t.toLowerCase():Number.isInteger(t)||"bigint"===typeof t||t instanceof a?`0x${t.toString(16)}`:n.isBuffer(t)?`0x${t.toString("hex")}`:s.isBoolean(t)?t?"0x01":"0x00":null===t?"0x":`${t}`,!/^0x[0-9a-f]*$/.test(e))throw new Error(`${t} not match "hex"`);return e.length%2?`0x0${e.slice(2)}`:e}),{name:"format.hex"}),f.hex40=f.hex.$validate((t=>42===t.length),"hex40"),f.address=f(g,{name:"format.address"}),f.netAddress=(t,e=!1)=>f((r=>g(r,t,e))),f.hexAddress=f.hex40.$before((t=>{if(s.isString(t)&&l.hasNetworkPrefix(t)&&(t=l.decodeCfxAddress(t).hexAddress),d(t)&&42!==t.length)throw new Error('not match "hex40"');if(d(t)&&t!==t.toLowerCase()&&t!==t.toUpperCase()&&t!==u.checksumAddress(t))throw new Error(`address "${t}" checksum error`);return t})),f.checksumAddress=f.hex40.$after(u.checksumAddress),f.hex64=f.hex.$validate((t=>66===t.length),"hex64"),f.blockHash=t=>f.hex64(t),f.transactionHash=t=>f.hex64(t),f.privateKey=t=>f.hex64(t),f.publicKey=f.hex.$validate((t=>130===t.length),"publicKey"),f.hexBuffer=f.hex.$after((t=>n.from(t.substr(2),"hex"))),f.bytes=f((t=>{if(d(t))return f.hexBuffer(t);if(n.isBuffer(t)||h(t))return n.from(t);throw new Error("invalid arrayify value")}),{name:"format.bytes"}),f.boolean=f.any.$validate(s.isBoolean,"boolean"),f.keccak256=f.bytes.$before((t=>s.isString(t)&&!d(t)?n.from(t):t)).$after(u.keccak256).$after(f.hex),t.exports=f},761069:(t,e,r)=>{var n=r(348834).Buffer;const o=r(276635),{WORD_BYTES:s}=r(146057);t.exports={assert:function(t,e){if(!t)throw o.isPlainObject(e)&&(e=JSON.stringify(e)),new Error(e)},alignBuffer:function(t,e=!1){const r=s-t.length%s;return 0<r&&r<s&&(t=e?n.concat([t,n.alloc(r)]):n.concat([n.alloc(r),t])),t},awaitTimeout:function(t,e){return new Promise(((r,n)=>{const o=new Error(`Timeout after ${e} ms`),s=setTimeout((()=>n(o)),e);t.then(r).catch(n).finally((()=>clearTimeout(s)))}))},decodeHexEncodedStr:function(t){return n.from(t.slice(2),"hex").toString()},isHexString:function(t){return o.isString(t)&&t.match(/^0x[0-9A-Fa-f]*$/)},isBytes:function(t){if(null==t)return!1;if(t.constructor===Uint8Array)return!0;if("string"===typeof t)return!1;if(null==t.length)return!1;for(let e=0;e<t.length;e++){const r=t[e];if("number"!==typeof r||r<0||r>=256||r%1)return!1}return!0},validAddressPrefix:function(t){const e=240&t[0];return 16===e||128===e||0===e},sleep:function(t){return new Promise((e=>setTimeout(e,t)))}}},331629:t=>{t.exports=BigInt,t.exports.BigInt=BigInt,t.exports.toNumber=t=>Number(t),t.exports.unaryMinus=t=>-t,t.exports.bitwiseNot=t=>~t,t.exports.exponentiate=(t,e)=>t**e,t.exports.multiply=(t,e)=>t*e,t.exports.divide=(t,e)=>t/e,t.exports.remainder=(t,e)=>t%e,t.exports.add=(t,e)=>t+e,t.exports.subtract=(t,e)=>t-e,t.exports.leftShift=(t,e)=>t<<e,t.exports.signedRightShift=(t,e)=>t>>e,t.exports.lessThan=(t,e)=>t<e,t.exports.lessThanOrEqual=(t,e)=>t<=e,t.exports.greaterThan=(t,e)=>t>e,t.exports.greaterThanOrEqual=(t,e)=>t>=e,t.exports.equal=(t,e)=>t===e,t.exports.notEqual=(t,e)=>t!==e,t.exports.bitwiseAnd=(t,e)=>t&e,t.exports.bitwiseXor=(t,e)=>t^e,t.exports.bitwiseOr=(t,e)=>t|e,t.exports.ADD=(t,e)=>t+e,t.exports.LT=(t,e)=>t<e,t.exports.LE=(t,e)=>t<=e,t.exports.GT=(t,e)=>t>e,t.exports.GE=(t,e)=>t>=e,t.exports.EQ=(t,e)=>t===e,t.exports.NE=(t,e)=>t!==e},175689:t=>{t.exports=function(...t){const e={};return t.forEach(((t,r)=>{e[t]=r})),class extends Array{constructor(...t){return super(t.length),t.forEach(((t,e)=>Reflect.set(this,e,t))),new Proxy(this,{has:(t,r)=>void 0!==e[r]||r in this,get:(t,r)=>{const n=e[r];return void 0===n?this[r]:this[n]},set:()=>{throw new Error("can not change element to a NamedTuple")},deleteProperty:()=>{throw new Error("can not delete element to a NamedTuple")}})}static get name(){return`NamedTuple(${t.join(",")})`}static fromObject(e){return new this(...t.map((t=>e[t])))}toObject(){const e={};return t.forEach((t=>{e[t]=this[t]})),e}}}},147150:(t,e,r)=>{const n=r(276635),{PARSER_ERROR:o}=r(395056);class s extends Error{constructor(t,e={}){super(),this.message=t,this.code=o,Object.assign(this,e)}}class i{constructor(t){this.arguments=t,this.path=[]}child(t){const e=new i(this.arguments);return e.path=[...this.path,t],e}error(t,e={}){return t=`(Invalid input|args) ${t}`,this.path.length>0&&(t=`${t}; path="${this.path.join(".")}"`),new s(t,{...this,...e})}}function a(t){function e(...e){const r=this instanceof i?this:new i(arguments);return t.call(r,...e)}return e.constructor=a,e.$before=c,e.$parse=l,e.$default=u,e.$after=d,e.$validate=h,e.$or=f,e}function c(t){const e=this;return a((function(...r){let n;try{n=t(...r)}catch(o){throw this.error(o.message)}return e.call(this,n)}))}function u(t){return c.call(this,(e=>void 0===e?t:e))}function l(t,e=n.isString){return c.call(this,(r=>e(r)?t(r):r))}function d(t){const e=this;return a((function(...r){const n=e.call(this,...r);try{return t(n)}catch(o){throw this.error(o.message)}}))}function h(t,e){return d.call(this,(r=>{if(!t(r))throw new Error(`${r} do not match "${e||t.name||"$validate"}"`);return r}))}function f(t){const e=[this,a.from(t)];return a((function(t){const r=[];for(const n of e)try{return n.call(this,t)}catch(a){r.push(a)}const o=r.map((t=>t.or?t.or:t)),i=n.flattenDeep(o).map((t=>`(${t.message})`)).join(" or ");throw new s(`not match any ${i}`,{or:o})}))}a.fromArray=function(t,e){const r=a.from(t.length?t[0]:t=>t,e);return a((function(t){if(!Array.isArray(t))throw this.error("expected array, got "+typeof t);return t.map(((t,e)=>r.call(this.child(e),t)))}))},a.fromObject=function(t,e){const{strict:r,pick:o}=e,s=n.mapValues(t,(t=>a.from(t,e)));return a((function(t){if(!n.isObject(t)){const r=`"${e.name?e.name:""}" expected plain object, got "${typeof t}"`;throw this.error(r)}const i=n.mapValues(s,((e,o)=>{const s=n.get(t,o);if(void 0!==s||r)return e.call(this.child(o),s)}));return o?n.pickBy(i,(t=>void 0!==t)):{...t,...i}}))},a.fromFunction=function(t,e){return t.constructor===a?t:a((function(...r){try{return t(...r)}catch(n){const o=`formatter: "${e.name||t.name}"; args: (${function(t){function e(t){return null===t?"null":void 0===t?"undefined":t}return t.map(e).join(",")}(r)}) ; errorMessage: ${n.message}`;throw this.error(o,{stack:n.stack})}}))},a.fromValue=function(t){return a((function(e){if(e!==t)throw this.error(`expected to be ${t}, got ${e}`);return e}))},a.from=function(t,e={}){return Array.isArray(t)?a.fromArray(t,e):n.isPlainObject(t)?a.fromObject(t,e):n.isFunction(t)?a.fromFunction(t,e):a.fromValue(t)},t.exports=a.from},96814:(t,e,r)=>{var n=r(348834).Buffer;const{decode:o}=r(622644),s=55,i=128,a=192;function c(...t){return n.concat(t.map((t=>{if(n.isBuffer(t))return t;if(Number.isSafeInteger(t)&&t>=0){const e=t.toString(16);return n.from(e.length%2?`0${e}`:e,"hex")}throw new Error(`invalid value, expect unsigned integer or buffer, got ${t}`)})))}function u(t){if(n.isBuffer(t))return function(t){1===t.length&&0===t[0]&&(t=n.from(""));return 1===t.length&&t[0]<i?t:c(l(t.length,i),t)}(t);if(Array.isArray(t))return function(t){const e=c(...t.map(u));return c(l(e.length,a),e)}(t);throw new Error(`invalid value, expect buffer or array, got ${t}`)}function l(t,e){if(t<=s)return c(t+e);{const r=c(t);return c(e+s+r.length,r)}}t.exports={encode:u,decode:o}},943089:(t,e,r)=>{var n=r(348834).Buffer;const o=r(897959),s=r(377270),i=r(697637),{syncScrypt:a}=r(114689),{isHexString:c}=r(761069);function u(t){return s("keccak256").update(t).digest()}function l(t){return o.randomBytes(t)}function d(t){return i.publicKeyCreate(t,!1).slice(1)}function h(t){if(c(t)&&(t=n.from(t.slice(2),"hex")),!n.isBuffer(t))throw new Error("publicKey should be a buffer");if(65===t.length&&(t=t.slice(1)),64!==t.length)throw new Error("publicKey length should be 64 or 65");const e=u(t).slice(-20);return e[0]=15&e[0]|16,e}t.exports={keccak256:u,checksumAddress:function(t){const e=t.toLowerCase().replace("0x",""),r=u(n.from(e)).toString("hex");return`0x${Object.entries(e).map((([t,e])=>parseInt(r[t],16)>=8?e.toUpperCase():e)).join("")}`},randomBuffer:l,randomPrivateKey:function(t=l(32)){if(!n.isBuffer(t)||32!==t.length)throw new Error(`entropy must be 32 length Buffer, got "${typeof t}"`);const e=u(n.concat([l(32),t]));return u(n.concat([l(32),e,l(32)]))},privateKeyToPublicKey:d,publicKeyToAddress:h,privateKeyToAddress:function(t){return h(d(t))},ecdsaSign:function(t,e){const r=i.sign(t,e);return{r:r.signature.slice(0,32),s:r.signature.slice(32,64),v:r.recovery}},ecdsaRecover:function(t,{r:e,s:r,v:o}){const s=i.recover(t,n.concat([e,r]),o);return i.publicKeyConvert(s,!1).slice(1)},encrypt:function(t,e){const r="aes-128-ctr",s=l(32),i=l(16);e=n.from(e);const c=a(e,s,8192,8,1,32),h=o.createCipheriv(r,c.slice(0,16),i).update(t),f=u(n.concat([c.slice(16,32),h])),g=u(d(t)).slice(-20);return{version:3,id:[4,2,2,2,6].map(l).map((t=>t.toString("hex"))).join("-"),address:g.toString("hex"),crypto:{ciphertext:h.toString("hex"),cipherparams:{iv:i.toString("hex")},cipher:r,kdf:"scrypt",kdfparams:{dklen:32,salt:s.toString("hex"),n:8192,r:8,p:1},mac:f.toString("hex")}}},decrypt:function({version:t,crypto:{ciphertext:e,cipherparams:{iv:r},cipher:s,kdf:i,kdfparams:{dklen:c,salt:l,n:d,r:h,p:f},mac:g}},p){if(3!==t)throw new Error("Not a valid V3 wallet");if("scrypt"!==i)throw new Error(`Unsupported kdf "${i}", only support "scrypt"`);p=n.from(p),e=n.from(e,"hex"),r=n.from(r,"hex"),l=n.from(l,"hex"),g=n.from(g,"hex");const m=a(p,l,d,h,f,c);if(!u(n.concat([m.slice(16,32),e])).equals(g))throw new Error("Key derivation failed, possibly wrong password!");return o.createDecipheriv(s,m.slice(0,16),r).update(e)}}},843563:(t,e,r)=>{const n=r(445550),o=r(90282);t.exports=class{constructor(t){this.address=t}async signTransaction(t){return new n(t)}async signMessage(t){return new o(t)}toString(){return this.address}toJSON(){return this.address}}},698124:(t,e,r)=>{const{assert:n}=r(761069),o=r(652519),s=r(943089),i=r(843563);t.exports=class extends i{static random(t,e){return new this(s.randomPrivateKey(void 0===t?void 0:o.hexBuffer(t)),e)}static decrypt(t,e,r){return new this(s.decrypt(t,e),r)}constructor(t,e){const r=o.hexBuffer(t),n=s.privateKeyToPublicKey(r),i=s.publicKeyToAddress(n);super(o.address(i,e)),this.publicKey=o.publicKey(n),this.privateKey=o.privateKey(r),this.networkId=e}encrypt(t){return s.encrypt(o.hexBuffer(this.privateKey),t)}async signTransaction(t){const e=await super.signTransaction(t);return e.sign(this.privateKey,this.networkId),n(e.from===this.address,{message:"Invalid sign transaction.from",expected:this.address,got:e.from}),e}async signMessage(t){const e=await super.signMessage(t);return e.sign(this.privateKey,this.networkId),n(e.from===this.address,{message:"Invalid sign message.from",expected:this.address,got:e.from}),e}}},384684:(t,e,r)=>{const{assert:n}=r(761069),o=r(652519),s=r(843563),i=r(698124);class a extends Map{constructor(t){super(),this.networkId=t}setNetworkId(t){this.networkId=t}has(t){try{return t=o.address(t,this.networkId),super.has(t)}catch(e){return!1}}delete(t){try{return t=o.address(t,this.networkId),super.delete(t)}catch(e){return!1}}clear(){return super.clear()}set(t,e){return t=o.address(t,this.networkId),n(!this.has(t),`Wallet already has account "${t}"`),n(e instanceof s,`value not instance of Account, got ${e}`),super.set(t,e)}get(t){t=o.address(t,this.networkId);const e=super.get(t);return n(e instanceof s,`can not found Account by "${t}"`),e}addPrivateKey(t){this.networkId||console.warn("wallet.addPrivateKey: networkId is not set properly, please set it");const e=new i(t,this.networkId);return this.set(e.address,e),e}addRandom(t){const e=i.random(t,this.networkId);return this.set(e.address,e),e}addKeystore(t,e){const r=i.decrypt(t,e,this.networkId);return this.set(r.address,r),r}}t.exports=a},897033:(t,e,r)=>{t.exports=r(384684)},191484:function(t){t.exports=function(){"use strict";var t=Math.imul,e=Math.clz32,r=Math.abs,n=Math.max,o=Math.floor;class s extends Array{constructor(t,e){if(super(t),this.sign=e,t>s.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(t){var e=Number.isFinite;if("number"==typeof t){if(0===t)return s.__zero();if(s.__isOneDigitInt(t))return 0>t?s.__oneDigit(-t,!0):s.__oneDigit(t,!1);if(!e(t)||o(t)!==t)throw new RangeError("The number "+t+" cannot be converted to BigInt because it is not an integer");return s.__fromDouble(t)}if("string"==typeof t){const e=s.__fromString(t);if(null===e)throw new SyntaxError("Cannot convert "+t+" to a BigInt");return e}if("boolean"==typeof t)return!0===t?s.__oneDigit(1,!1):s.__zero();if("object"==typeof t){if(t.constructor===s)return t;const e=s.__toPrimitive(t);return s.BigInt(e)}throw new TypeError("Cannot convert "+t+" to a BigInt")}toDebugString(){const t=["BigInt["];for(const e of this)t.push((e?(e>>>0).toString(16):e)+", ");return t.push("]"),t.join("")}toString(t=10){if(2>t||36<t)throw new RangeError("toString() radix argument must be between 2 and 36");return 0===this.length?"0":0==(t&t-1)?s.__toStringBasePowerOfTwo(this,t):s.__toStringGeneric(this,t,!1)}static toNumber(t){const e=t.length;if(0===e)return 0;if(1===e){const e=t.__unsignedDigit(0);return t.sign?-e:e}const r=t.__digit(e-1),n=s.__clz30(r),o=30*e-n;if(1024<o)return t.sign?-1/0:1/0;let i=o-1,a=r,c=e-1;const u=n+3;let l=32===u?0:a<<u;l>>>=12;const d=u-12;let h=12<=u?0:a<<20+u,f=20+u;for(0<d&&0<c&&(c--,a=t.__digit(c),l|=a>>>30-d,h=a<<d+2,f=d+2);0<f&&0<c;)c--,a=t.__digit(c),h|=30<=f?a<<f-30:a>>>30-f,f-=30;const g=s.__decideRounding(t,f,c,a);if((1===g||0===g&&1==(1&h))&&(h=h+1>>>0,0===h&&(l++,0!=l>>>20&&(l=0,i++,1023<i))))return t.sign?-1/0:1/0;const p=t.sign?-2147483648:0;return i=i+1023<<20,s.__kBitConversionInts[1]=p|i|l,s.__kBitConversionInts[0]=h,s.__kBitConversionDouble[0]}static unaryMinus(t){if(0===t.length)return t;const e=t.__copy();return e.sign=!t.sign,e}static bitwiseNot(t){return t.sign?s.__absoluteSubOne(t).__trim():s.__absoluteAddOne(t,!0)}static exponentiate(t,e){if(e.sign)throw new RangeError("Exponent must be positive");if(0===e.length)return s.__oneDigit(1,!1);if(0===t.length)return t;if(1===t.length&&1===t.__digit(0))return t.sign&&0==(1&e.__digit(0))?s.unaryMinus(t):t;if(1<e.length)throw new RangeError("BigInt too big");let r=e.__unsignedDigit(0);if(1===r)return t;if(r>=s.__kMaxLengthBits)throw new RangeError("BigInt too big");if(1===t.length&&2===t.__digit(0)){const e=1+(0|r/30),n=t.sign&&0!=(1&r),o=new s(e,n);o.__initializeDigits();const i=1<<r%30;return o.__setDigit(e-1,i),o}let n=null,o=t;for(0!=(1&r)&&(n=t),r>>=1;0!==r;r>>=1)o=s.multiply(o,o),0!=(1&r)&&(n=null===n?o:s.multiply(n,o));return n}static multiply(t,e){if(0===t.length)return t;if(0===e.length)return e;let r=t.length+e.length;30<=t.__clzmsd()+e.__clzmsd()&&r--;const n=new s(r,t.sign!==e.sign);n.__initializeDigits();for(let o=0;o<t.length;o++)s.__multiplyAccumulate(e,t.__digit(o),n,o);return n.__trim()}static divide(t,e){if(0===e.length)throw new RangeError("Division by zero");if(0>s.__absoluteCompare(t,e))return s.__zero();const r=t.sign!==e.sign,n=e.__unsignedDigit(0);let o;if(1===e.length&&32767>=n){if(1===n)return r===t.sign?t:s.unaryMinus(t);o=s.__absoluteDivSmall(t,n,null)}else o=s.__absoluteDivLarge(t,e,!0,!1);return o.sign=r,o.__trim()}static remainder(t,e){if(0===e.length)throw new RangeError("Division by zero");if(0>s.__absoluteCompare(t,e))return t;const r=e.__unsignedDigit(0);if(1===e.length&&32767>=r){if(1===r)return s.__zero();const e=s.__absoluteModSmall(t,r);return 0===e?s.__zero():s.__oneDigit(e,t.sign)}const n=s.__absoluteDivLarge(t,e,!1,!0);return n.sign=t.sign,n.__trim()}static add(t,e){const r=t.sign;return r===e.sign?s.__absoluteAdd(t,e,r):0<=s.__absoluteCompare(t,e)?s.__absoluteSub(t,e,r):s.__absoluteSub(e,t,!r)}static subtract(t,e){const r=t.sign;return r===e.sign?0<=s.__absoluteCompare(t,e)?s.__absoluteSub(t,e,r):s.__absoluteSub(e,t,!r):s.__absoluteAdd(t,e,r)}static leftShift(t,e){return 0===e.length||0===t.length?t:e.sign?s.__rightShiftByAbsolute(t,e):s.__leftShiftByAbsolute(t,e)}static signedRightShift(t,e){return 0===e.length||0===t.length?t:e.sign?s.__leftShiftByAbsolute(t,e):s.__rightShiftByAbsolute(t,e)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(t,e){return 0>s.__compareToBigInt(t,e)}static lessThanOrEqual(t,e){return 0>=s.__compareToBigInt(t,e)}static greaterThan(t,e){return 0<s.__compareToBigInt(t,e)}static greaterThanOrEqual(t,e){return 0<=s.__compareToBigInt(t,e)}static equal(t,e){if(t.sign!==e.sign)return!1;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t.__digit(r)!==e.__digit(r))return!1;return!0}static notEqual(t,e){return!s.equal(t,e)}static bitwiseAnd(t,e){if(!t.sign&&!e.sign)return s.__absoluteAnd(t,e).__trim();if(t.sign&&e.sign){const r=n(t.length,e.length)+1;let o=s.__absoluteSubOne(t,r);const i=s.__absoluteSubOne(e);return o=s.__absoluteOr(o,i,o),s.__absoluteAddOne(o,!0,o).__trim()}return t.sign&&([t,e]=[e,t]),s.__absoluteAndNot(t,s.__absoluteSubOne(e)).__trim()}static bitwiseXor(t,e){if(!t.sign&&!e.sign)return s.__absoluteXor(t,e).__trim();if(t.sign&&e.sign){const r=n(t.length,e.length),o=s.__absoluteSubOne(t,r),i=s.__absoluteSubOne(e);return s.__absoluteXor(o,i,o).__trim()}const r=n(t.length,e.length)+1;t.sign&&([t,e]=[e,t]);let o=s.__absoluteSubOne(e,r);return o=s.__absoluteXor(o,t,o),s.__absoluteAddOne(o,!0,o).__trim()}static bitwiseOr(t,e){const r=n(t.length,e.length);if(!t.sign&&!e.sign)return s.__absoluteOr(t,e).__trim();if(t.sign&&e.sign){let n=s.__absoluteSubOne(t,r);const o=s.__absoluteSubOne(e);return n=s.__absoluteAnd(n,o,n),s.__absoluteAddOne(n,!0,n).__trim()}t.sign&&([t,e]=[e,t]);let o=s.__absoluteSubOne(e,r);return o=s.__absoluteAndNot(o,t,o),s.__absoluteAddOne(o,!0,o).__trim()}static asIntN(t,e){if(0===e.length)return e;if(0>(t=o(t)))throw new RangeError("Invalid value: not (convertible to) a safe integer");if(0===t)return s.__zero();if(t>=s.__kMaxLengthBits)return e;const r=0|(t+29)/30;if(e.length<r)return e;const n=e.__unsignedDigit(r-1),i=1<<(t-1)%30;if(e.length===r&&n<i)return e;if((n&i)!==i)return s.__truncateToNBits(t,e);if(!e.sign)return s.__truncateAndSubFromPowerOfTwo(t,e,!0);if(0==(n&i-1)){for(let n=r-2;0<=n;n--)if(0!==e.__digit(n))return s.__truncateAndSubFromPowerOfTwo(t,e,!1);return e.length===r&&n===i?e:s.__truncateToNBits(t,e)}return s.__truncateAndSubFromPowerOfTwo(t,e,!1)}static asUintN(t,e){if(0===e.length)return e;if(0>(t=o(t)))throw new RangeError("Invalid value: not (convertible to) a safe integer");if(0===t)return s.__zero();if(e.sign){if(t>s.__kMaxLengthBits)throw new RangeError("BigInt too big");return s.__truncateAndSubFromPowerOfTwo(t,e,!1)}if(t>=s.__kMaxLengthBits)return e;const r=0|(t+29)/30;if(e.length<r)return e;const n=t%30;if(e.length==r){if(0===n)return e;if(0==e.__digit(r-1)>>>n)return e}return s.__truncateToNBits(t,e)}static ADD(t,e){if(t=s.__toPrimitive(t),e=s.__toPrimitive(e),"string"==typeof t)return"string"!=typeof e&&(e=e.toString()),t+e;if("string"==typeof e)return t.toString()+e;if(t=s.__toNumeric(t),e=s.__toNumeric(e),s.__isBigInt(t)&&s.__isBigInt(e))return s.add(t,e);if("number"==typeof t&&"number"==typeof e)return t+e;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(t,e){return s.__compare(t,e,0)}static LE(t,e){return s.__compare(t,e,1)}static GT(t,e){return s.__compare(t,e,2)}static GE(t,e){return s.__compare(t,e,3)}static EQ(t,e){for(;;){if(s.__isBigInt(t))return s.__isBigInt(e)?s.equal(t,e):s.EQ(e,t);if("number"==typeof t){if(s.__isBigInt(e))return s.__equalToNumber(e,t);if("object"!=typeof e)return t==e;e=s.__toPrimitive(e)}else if("string"==typeof t){if(s.__isBigInt(e))return null!==(t=s.__fromString(t))&&s.equal(t,e);if("object"!=typeof e)return t==e;e=s.__toPrimitive(e)}else if("boolean"==typeof t){if(s.__isBigInt(e))return s.__equalToNumber(e,+t);if("object"!=typeof e)return t==e;e=s.__toPrimitive(e)}else if("symbol"==typeof t){if(s.__isBigInt(e))return!1;if("object"!=typeof e)return t==e;e=s.__toPrimitive(e)}else{if("object"!=typeof t)return t==e;if("object"==typeof e&&e.constructor!==s)return t==e;t=s.__toPrimitive(t)}}}static NE(t,e){return!s.EQ(t,e)}static __zero(){return new s(0,!1)}static __oneDigit(t,e){const r=new s(1,e);return r.__setDigit(0,t),r}__copy(){const t=new s(this.length,this.sign);for(let e=0;e<this.length;e++)t[e]=this[e];return t}__trim(){let t=this.length,e=this[t-1];for(;0===e;)t--,e=this[t-1],this.pop();return 0===t&&(this.sign=!1),this}__initializeDigits(){for(let t=0;t<this.length;t++)this[t]=0}static __decideRounding(t,e,r,n){if(0<e)return-1;let o;if(0>e)o=-e-1;else{if(0===r)return-1;r--,n=t.__digit(r),o=29}let s=1<<o;if(0==(n&s))return-1;if(s-=1,0!=(n&s))return 1;for(;0<r;)if(r--,0!==t.__digit(r))return 1;return 0}static __fromDouble(t){s.__kBitConversionDouble[0]=t;const e=(2047&s.__kBitConversionInts[1]>>>20)-1023,r=1+(0|e/30),n=new s(r,0>t);let o=1048575&s.__kBitConversionInts[1]|1048576,i=s.__kBitConversionInts[0];const a=20,c=e%30;let u,l=0;if(20>c){const t=a-c;l=t+32,u=o>>>t,o=o<<32-t|i>>>t,i<<=32-t}else if(20===c)l=32,u=o,o=i,i=0;else{const t=c-a;l=32-t,u=o<<t|i>>>32-t,o=i<<t,i=0}n.__setDigit(r-1,u);for(let s=r-2;0<=s;s--)0<l?(l-=30,u=o>>>2,o=o<<30|i>>>2,i<<=30):u=0,n.__setDigit(s,u);return n.__trim()}static __isWhitespace(t){return!!(13>=t&&9<=t)||(159>=t?32==t:131071>=t?160==t||5760==t:196607>=t?10>=(t&=131071)||40==t||41==t||47==t||95==t||4096==t:65279==t)}static __fromString(t,e=0){let r=0;const n=t.length;let o=0;if(o===n)return s.__zero();let i=t.charCodeAt(o);for(;s.__isWhitespace(i);){if(++o===n)return s.__zero();i=t.charCodeAt(o)}if(43===i){if(++o===n)return null;i=t.charCodeAt(o),r=1}else if(45===i){if(++o===n)return null;i=t.charCodeAt(o),r=-1}if(0===e){if(e=10,48===i){if(++o===n)return s.__zero();if(i=t.charCodeAt(o),88===i||120===i){if(e=16,++o===n)return null;i=t.charCodeAt(o)}else if(79===i||111===i){if(e=8,++o===n)return null;i=t.charCodeAt(o)}else if(66===i||98===i){if(e=2,++o===n)return null;i=t.charCodeAt(o)}}}else if(16===e&&48===i){if(++o===n)return s.__zero();if(i=t.charCodeAt(o),88===i||120===i){if(++o===n)return null;i=t.charCodeAt(o)}}if(0!=r&&10!==e)return null;for(;48===i;){if(++o===n)return s.__zero();i=t.charCodeAt(o)}const a=n-o;let c=s.__kMaxBitsPerChar[e],u=s.__kBitsPerCharTableMultiplier-1;if(a>1073741824/c)return null;const l=c*a+u>>>s.__kBitsPerCharTableShift,d=new s(0|(l+29)/30,!1),h=10>e?e:10,f=10<e?e-10:0;if(0==(e&e-1)){c>>=s.__kBitsPerCharTableShift;const e=[],r=[];let a=!1;do{let s=0,u=0;for(;;){let e;if(i-48>>>0<h)e=i-48;else{if(!((32|i)-97>>>0<f)){a=!0;break}e=(32|i)-87}if(u+=c,s=s<<c|e,++o===n){a=!0;break}if(i=t.charCodeAt(o),30<u+c)break}e.push(s),r.push(u)}while(!a);s.__fillFromParts(d,e,r)}else{d.__initializeDigits();let r=!1,a=0;do{let l=0,g=1;for(;;){let s;if(i-48>>>0<h)s=i-48;else{if(!((32|i)-97>>>0<f)){r=!0;break}s=(32|i)-87}const c=g*e;if(1073741823<c)break;if(g=c,l=l*e+s,a++,++o===n){r=!0;break}i=t.charCodeAt(o)}u=30*s.__kBitsPerCharTableMultiplier-1;const p=0|(c*a+u>>>s.__kBitsPerCharTableShift)/30;d.__inplaceMultiplyAdd(g,l,p)}while(!r)}if(o!==n){if(!s.__isWhitespace(i))return null;for(o++;o<n;o++)if(i=t.charCodeAt(o),!s.__isWhitespace(i))return null}return d.sign=-1==r,d.__trim()}static __fillFromParts(t,e,r){let n=0,o=0,s=0;for(let i=e.length-1;0<=i;i--){const a=e[i],c=r[i];o|=a<<s,s+=c,30===s?(t.__setDigit(n++,o),s=0,o=0):30<s&&(t.__setDigit(n++,1073741823&o),s-=30,o=a>>>c-s)}if(0!==o){if(n>=t.length)throw new Error("implementation bug");t.__setDigit(n++,o)}for(;n<t.length;n++)t.__setDigit(n,0)}static __toStringBasePowerOfTwo(t,e){const r=t.length;let n=e-1;n=(85&n>>>1)+(85&n),n=(51&n>>>2)+(51&n),n=(15&n>>>4)+(15&n);const o=n,i=e-1,a=t.__digit(r-1);let c=0|(30*r-s.__clz30(a)+o-1)/o;if(t.sign&&c++,268435456<c)throw new Error("string too long");const u=Array(c);let l=c-1,d=0,h=0;for(let g=0;g<r-1;g++){const e=t.__digit(g),r=(d|e<<h)&i;u[l--]=s.__kConversionChars[r];const n=o-h;for(d=e>>>n,h=30-n;h>=o;)u[l--]=s.__kConversionChars[d&i],d>>>=o,h-=o}const f=(d|a<<h)&i;for(u[l--]=s.__kConversionChars[f],d=a>>>o-h;0!==d;)u[l--]=s.__kConversionChars[d&i],d>>>=o;if(t.sign&&(u[l--]="-"),-1!=l)throw new Error("implementation bug");return u.join("")}static __toStringGeneric(t,e,r){const n=t.length;if(0===n)return"";if(1===n){let n=t.__unsignedDigit(0).toString(e);return!1===r&&t.sign&&(n="-"+n),n}const o=30*n-s.__clz30(t.__digit(n-1)),i=s.__kMaxBitsPerChar[e]-1;let a=o*s.__kBitsPerCharTableMultiplier;a+=i-1,a=0|a/i;const c=a+1>>1,u=s.exponentiate(s.__oneDigit(e,!1),s.__oneDigit(c,!1));let l,d;const h=u.__unsignedDigit(0);if(1===u.length&&32767>=h){l=new s(t.length,!1),l.__initializeDigits();let r=0;for(let e=2*t.length-1;0<=e;e--){const n=r<<15|t.__halfDigit(e);l.__setHalfDigit(e,0|n/h),r=0|n%h}d=r.toString(e)}else{const r=s.__absoluteDivLarge(t,u,!0,!0);l=r.quotient;const n=r.remainder.__trim();d=s.__toStringGeneric(n,e,!0)}l.__trim();let f=s.__toStringGeneric(l,e,!0);for(;d.length<c;)d="0"+d;return!1===r&&t.sign&&(f="-"+f),f+d}static __unequalSign(t){return t?-1:1}static __absoluteGreater(t){return t?-1:1}static __absoluteLess(t){return t?1:-1}static __compareToBigInt(t,e){const r=t.sign;if(r!==e.sign)return s.__unequalSign(r);const n=s.__absoluteCompare(t,e);return 0<n?s.__absoluteGreater(r):0>n?s.__absoluteLess(r):0}static __compareToNumber(t,e){if(s.__isOneDigitInt(e)){const n=t.sign,o=0>e;if(n!==o)return s.__unequalSign(n);if(0===t.length){if(o)throw new Error("implementation bug");return 0===e?0:-1}if(1<t.length)return s.__absoluteGreater(n);const i=r(e),a=t.__unsignedDigit(0);return a>i?s.__absoluteGreater(n):a<i?s.__absoluteLess(n):0}return s.__compareToDouble(t,e)}static __compareToDouble(t,e){if(e!==e)return e;if(e===1/0)return-1;if(e===-1/0)return 1;const r=t.sign;if(r!==0>e)return s.__unequalSign(r);if(0===e)throw new Error("implementation bug: should be handled elsewhere");if(0===t.length)return-1;s.__kBitConversionDouble[0]=e;const n=2047&s.__kBitConversionInts[1]>>>20;if(2047==n)throw new Error("implementation bug: handled elsewhere");const o=n-1023;if(0>o)return s.__absoluteGreater(r);const i=t.length;let a=t.__digit(i-1);const c=s.__clz30(a),u=30*i-c,l=o+1;if(u<l)return s.__absoluteLess(r);if(u>l)return s.__absoluteGreater(r);let d=1048576|1048575&s.__kBitConversionInts[1],h=s.__kBitConversionInts[0];const f=20,g=29-c;if(g!==(0|(u-1)%30))throw new Error("implementation bug");let p,m=0;if(20>g){const t=f-g;m=t+32,p=d>>>t,d=d<<32-t|h>>>t,h<<=32-t}else if(20===g)m=32,p=d,d=h,h=0;else{const t=g-f;m=32-t,p=d<<t|h>>>32-t,d=h<<t,h=0}if(a>>>=0,p>>>=0,a>p)return s.__absoluteGreater(r);if(a<p)return s.__absoluteLess(r);for(let _=i-2;0<=_;_--){0<m?(m-=30,p=d>>>2,d=d<<30|h>>>2,h<<=30):p=0;const e=t.__unsignedDigit(_);if(e>p)return s.__absoluteGreater(r);if(e<p)return s.__absoluteLess(r)}if(0!==d||0!==h){if(0===m)throw new Error("implementation bug");return s.__absoluteLess(r)}return 0}static __equalToNumber(t,e){return s.__isOneDigitInt(e)?0===e?0===t.length:1===t.length&&t.sign===0>e&&t.__unsignedDigit(0)===r(e):0===s.__compareToDouble(t,e)}static __comparisonResultToBool(t,e){return 0===e?0>t:1===e?0>=t:2===e?0<t:3===e?0<=t:void 0}static __compare(t,e,r){if(t=s.__toPrimitive(t),e=s.__toPrimitive(e),"string"==typeof t&&"string"==typeof e)switch(r){case 0:return t<e;case 1:return t<=e;case 2:return t>e;case 3:return t>=e}if(s.__isBigInt(t)&&"string"==typeof e)return null!==(e=s.__fromString(e))&&s.__comparisonResultToBool(s.__compareToBigInt(t,e),r);if("string"==typeof t&&s.__isBigInt(e))return null!==(t=s.__fromString(t))&&s.__comparisonResultToBool(s.__compareToBigInt(t,e),r);if(t=s.__toNumeric(t),e=s.__toNumeric(e),s.__isBigInt(t)){if(s.__isBigInt(e))return s.__comparisonResultToBool(s.__compareToBigInt(t,e),r);if("number"!=typeof e)throw new Error("implementation bug");return s.__comparisonResultToBool(s.__compareToNumber(t,e),r)}if("number"!=typeof t)throw new Error("implementation bug");if(s.__isBigInt(e))return s.__comparisonResultToBool(s.__compareToNumber(e,t),2^r);if("number"!=typeof e)throw new Error("implementation bug");return 0===r?t<e:1===r?t<=e:2===r?t>e:3===r?t>=e:void 0}__clzmsd(){return s.__clz30(this.__digit(this.length-1))}static __absoluteAdd(t,e,r){if(t.length<e.length)return s.__absoluteAdd(e,t,r);if(0===t.length)return t;if(0===e.length)return t.sign===r?t:s.unaryMinus(t);let n=t.length;(0===t.__clzmsd()||e.length===t.length&&0===e.__clzmsd())&&n++;const o=new s(n,r);let i=0,a=0;for(;a<e.length;a++){const r=t.__digit(a)+e.__digit(a)+i;i=r>>>30,o.__setDigit(a,1073741823&r)}for(;a<t.length;a++){const e=t.__digit(a)+i;i=e>>>30,o.__setDigit(a,1073741823&e)}return a<o.length&&o.__setDigit(a,i),o.__trim()}static __absoluteSub(t,e,r){if(0===t.length)return t;if(0===e.length)return t.sign===r?t:s.unaryMinus(t);const n=new s(t.length,r);let o=0,i=0;for(;i<e.length;i++){const r=t.__digit(i)-e.__digit(i)-o;o=1&r>>>30,n.__setDigit(i,1073741823&r)}for(;i<t.length;i++){const e=t.__digit(i)-o;o=1&e>>>30,n.__setDigit(i,1073741823&e)}return n.__trim()}static __absoluteAddOne(t,e,r=null){const n=t.length;null===r?r=new s(n,e):r.sign=e;let o=1;for(let s=0;s<n;s++){const e=t.__digit(s)+o;o=e>>>30,r.__setDigit(s,1073741823&e)}return 0!=o&&r.__setDigitGrow(n,1),r}static __absoluteSubOne(t,e){const r=t.length,n=new s(e=e||r,!1);let o=1;for(let s=0;s<r;s++){const e=t.__digit(s)-o;o=1&e>>>30,n.__setDigit(s,1073741823&e)}if(0!=o)throw new Error("implementation bug");for(let s=r;s<e;s++)n.__setDigit(s,0);return n}static __absoluteAnd(t,e,r=null){let n=t.length,o=e.length,i=o;if(n<o){i=n;const r=t,s=n;t=e,n=o,e=r,o=s}let a=i;null===r?r=new s(a,!1):a=r.length;let c=0;for(;c<i;c++)r.__setDigit(c,t.__digit(c)&e.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteAndNot(t,e,r=null){const n=t.length,o=e.length;let i=o;n<o&&(i=n);let a=n;null===r?r=new s(a,!1):a=r.length;let c=0;for(;c<i;c++)r.__setDigit(c,t.__digit(c)&~e.__digit(c));for(;c<n;c++)r.__setDigit(c,t.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteOr(t,e,r=null){let n=t.length,o=e.length,i=o;if(n<o){i=n;const r=t,s=n;t=e,n=o,e=r,o=s}let a=n;null===r?r=new s(a,!1):a=r.length;let c=0;for(;c<i;c++)r.__setDigit(c,t.__digit(c)|e.__digit(c));for(;c<n;c++)r.__setDigit(c,t.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteXor(t,e,r=null){let n=t.length,o=e.length,i=o;if(n<o){i=n;const r=t,s=n;t=e,n=o,e=r,o=s}let a=n;null===r?r=new s(a,!1):a=r.length;let c=0;for(;c<i;c++)r.__setDigit(c,t.__digit(c)^e.__digit(c));for(;c<n;c++)r.__setDigit(c,t.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteCompare(t,e){const r=t.length-e.length;if(0!=r)return r;let n=t.length-1;for(;0<=n&&t.__digit(n)===e.__digit(n);)n--;return 0>n?0:t.__unsignedDigit(n)>e.__unsignedDigit(n)?1:-1}static __multiplyAccumulate(t,e,r,n){if(0===e)return;const o=32767&e,i=e>>>15;let a=0,c=0;for(let u,l=0;l<t.length;l++,n++){u=r.__digit(n);const e=t.__digit(l),d=32767&e,h=e>>>15,f=s.__imul(d,o),g=s.__imul(d,i),p=s.__imul(h,o);u+=c+f+a,a=u>>>30,u&=1073741823,u+=((32767&g)<<15)+((32767&p)<<15),a+=u>>>30,c=s.__imul(h,i)+(g>>>15)+(p>>>15),r.__setDigit(n,1073741823&u)}for(;0!=a||0!==c;n++){let t=r.__digit(n);t+=a+c,c=0,a=t>>>30,r.__setDigit(n,1073741823&t)}}static __internalMultiplyAdd(t,e,r,n,o){let i=r,a=0;for(let c=0;c<n;c++){const r=t.__digit(c),n=s.__imul(32767&r,e),u=s.__imul(r>>>15,e),l=n+((32767&u)<<15)+a+i;i=l>>>30,a=u>>>15,o.__setDigit(c,1073741823&l)}if(o.length>n)for(o.__setDigit(n++,i+a);n<o.length;)o.__setDigit(n++,0);else if(0!==i+a)throw new Error("implementation bug")}__inplaceMultiplyAdd(t,e,r){r>this.length&&(r=this.length);const n=32767&t,o=t>>>15;let i=0,a=e;for(let c=0;c<r;c++){const t=this.__digit(c),e=32767&t,r=t>>>15,u=s.__imul(e,n),l=s.__imul(e,o),d=s.__imul(r,n);let h=a+u+i;i=h>>>30,h&=1073741823,h+=((32767&l)<<15)+((32767&d)<<15),i+=h>>>30,a=s.__imul(r,o)+(l>>>15)+(d>>>15),this.__setDigit(c,1073741823&h)}if(0!=i||0!==a)throw new Error("implementation bug")}static __absoluteDivSmall(t,e,r=null){null===r&&(r=new s(t.length,!1));let n=0;for(let o,s=2*t.length-1;0<=s;s-=2){o=(n<<15|t.__halfDigit(s))>>>0;const i=0|o/e;n=0|o%e,o=(n<<15|t.__halfDigit(s-1))>>>0;const a=0|o/e;n=0|o%e,r.__setDigit(s>>>1,i<<15|a)}return r}static __absoluteModSmall(t,e){let r=0;for(let n=2*t.length-1;0<=n;n--)r=0|((r<<15|t.__halfDigit(n))>>>0)%e;return r}static __absoluteDivLarge(t,e,r,n){const o=e.__halfDigitLength(),i=e.length,a=t.__halfDigitLength()-o;let c=null;r&&(c=new s(a+2>>>1,!1),c.__initializeDigits());const u=new s(o+2>>>1,!1);u.__initializeDigits();const l=s.__clz15(e.__halfDigit(o-1));0<l&&(e=s.__specialLeftShift(e,l,0));const d=s.__specialLeftShift(t,l,1),h=e.__halfDigit(o-1);let f=0;for(let g,p=a;0<=p;p--){g=32767;const t=d.__halfDigit(p+o);if(t!==h){const r=(t<<15|d.__halfDigit(p+o-1))>>>0;g=0|r/h;let n=0|r%h;const i=e.__halfDigit(o-2),a=d.__halfDigit(p+o-2);for(;s.__imul(g,i)>>>0>(n<<16|a)>>>0&&(g--,n+=h,!(32767<n)););}s.__internalMultiplyAdd(e,g,0,i,u);let n=d.__inplaceSub(u,p,o+1);0!==n&&(n=d.__inplaceAdd(e,p,o),d.__setHalfDigit(p+o,32767&d.__halfDigit(p+o)+n),g--),r&&(1&p?f=g<<15:c.__setDigit(p>>>1,f|g))}if(n)return d.__inplaceRightShift(l),r?{quotient:c,remainder:d}:d;if(r)return c;throw new Error("unreachable")}static __clz15(t){return s.__clz30(t)-15}__inplaceAdd(t,e,r){let n=0;for(let o=0;o<r;o++){const r=this.__halfDigit(e+o)+t.__halfDigit(o)+n;n=r>>>15,this.__setHalfDigit(e+o,32767&r)}return n}__inplaceSub(t,e,r){let n=0;if(1&e){e>>=1;let o=this.__digit(e),s=32767&o,i=0;for(;i<r-1>>>1;i++){const r=t.__digit(i),a=(o>>>15)-(32767&r)-n;n=1&a>>>15,this.__setDigit(e+i,(32767&a)<<15|32767&s),o=this.__digit(e+i+1),s=(32767&o)-(r>>>15)-n,n=1&s>>>15}const a=t.__digit(i),c=(o>>>15)-(32767&a)-n;if(n=1&c>>>15,this.__setDigit(e+i,(32767&c)<<15|32767&s),e+i+1>=this.length)throw new RangeError("out of bounds");0==(1&r)&&(o=this.__digit(e+i+1),s=(32767&o)-(a>>>15)-n,n=1&s>>>15,this.__setDigit(e+t.length,1073709056&o|32767&s))}else{e>>=1;let o=0;for(;o<t.length-1;o++){const r=this.__digit(e+o),s=t.__digit(o),i=(32767&r)-(32767&s)-n;n=1&i>>>15;const a=(r>>>15)-(s>>>15)-n;n=1&a>>>15,this.__setDigit(e+o,(32767&a)<<15|32767&i)}const s=this.__digit(e+o),i=t.__digit(o),a=(32767&s)-(32767&i)-n;n=1&a>>>15;let c=0;0==(1&r)&&(c=(s>>>15)-(i>>>15)-n,n=1&c>>>15),this.__setDigit(e+o,(32767&c)<<15|32767&a)}return n}__inplaceRightShift(t){if(0===t)return;let e=this.__digit(0)>>>t;const r=this.length-1;for(let n=0;n<r;n++){const r=this.__digit(n+1);this.__setDigit(n,1073741823&r<<30-t|e),e=r>>>t}this.__setDigit(r,e)}static __specialLeftShift(t,e,r){const n=t.length,o=new s(n+r,!1);if(0===e){for(let e=0;e<n;e++)o.__setDigit(e,t.__digit(e));return 0<r&&o.__setDigit(n,0),o}let i=0;for(let s=0;s<n;s++){const r=t.__digit(s);o.__setDigit(s,1073741823&r<<e|i),i=r>>>30-e}return 0<r&&o.__setDigit(n,i),o}static __leftShiftByAbsolute(t,e){const r=s.__toShiftAmount(e);if(0>r)throw new RangeError("BigInt too big");const n=0|r/30,o=r%30,i=t.length,a=0!==o&&0!=t.__digit(i-1)>>>30-o,c=i+n+(a?1:0),u=new s(c,t.sign);if(0===o){let e=0;for(;e<n;e++)u.__setDigit(e,0);for(;e<c;e++)u.__setDigit(e,t.__digit(e-n))}else{let e=0;for(let t=0;t<n;t++)u.__setDigit(t,0);for(let r=0;r<i;r++){const s=t.__digit(r);u.__setDigit(r+n,1073741823&s<<o|e),e=s>>>30-o}if(a)u.__setDigit(i+n,e);else if(0!==e)throw new Error("implementation bug")}return u.__trim()}static __rightShiftByAbsolute(t,e){const r=t.length,n=t.sign,o=s.__toShiftAmount(e);if(0>o)return s.__rightShiftByMaximum(n);const i=0|o/30,a=o%30;let c=r-i;if(0>=c)return s.__rightShiftByMaximum(n);let u=!1;if(n)if(0!=(t.__digit(i)&(1<<a)-1))u=!0;else for(let s=0;s<i;s++)if(0!==t.__digit(s)){u=!0;break}u&&0===a&&0==~t.__digit(r-1)&&c++;let l=new s(c,n);if(0===a){l.__setDigit(c-1,0);for(let e=i;e<r;e++)l.__setDigit(e-i,t.__digit(e))}else{let e=t.__digit(i)>>>a;const n=r-i-1;for(let r=0;r<n;r++){const n=t.__digit(r+i+1);l.__setDigit(r,1073741823&n<<30-a|e),e=n>>>a}l.__setDigit(n,e)}return u&&(l=s.__absoluteAddOne(l,!0,l)),l.__trim()}static __rightShiftByMaximum(t){return t?s.__oneDigit(1,!0):s.__zero()}static __toShiftAmount(t){if(1<t.length)return-1;const e=t.__unsignedDigit(0);return e>s.__kMaxLengthBits?-1:e}static __toPrimitive(t,e="default"){if("object"!=typeof t)return t;if(t.constructor===s)return t;if("undefined"!=typeof Symbol&&"symbol"==typeof Symbol.toPrimitive){const r=t[Symbol.toPrimitive];if(r){const t=r(e);if("object"!=typeof t)return t;throw new TypeError("Cannot convert object to primitive value")}}const r=t.valueOf;if(r){const e=r.call(t);if("object"!=typeof e)return e}const n=t.toString;if(n){const e=n.call(t);if("object"!=typeof e)return e}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(t){return s.__isBigInt(t)?t:+t}static __isBigInt(t){return"object"==typeof t&&null!==t&&t.constructor===s}static __truncateToNBits(t,e){const r=0|(t+29)/30,n=new s(r,e.sign),o=r-1;for(let s=0;s<o;s++)n.__setDigit(s,e.__digit(s));let i=e.__digit(o);if(0!=t%30){const e=32-t%30;i=i<<e>>>e}return n.__setDigit(o,i),n.__trim()}static __truncateAndSubFromPowerOfTwo(t,e,r){var n=Math.min;const o=0|(t+29)/30,i=new s(o,r);let a=0;const c=o-1;let u=0;for(const s=n(c,e.length);a<s;a++){const t=0-e.__digit(a)-u;u=1&t>>>30,i.__setDigit(a,1073741823&t)}for(;a<c;a++)i.__setDigit(a,0|1073741823&-u);let l=c<e.length?e.__digit(c):0;const d=t%30;let h;if(0==d)h=0-l-u,h&=1073741823;else{const t=32-d;l=l<<t>>>t;const e=1<<32-t;h=e-l-u,h&=e-1}return i.__setDigit(c,h),i.__trim()}__digit(t){return this[t]}__unsignedDigit(t){return this[t]>>>0}__setDigit(t,e){this[t]=0|e}__setDigitGrow(t,e){this[t]=0|e}__halfDigitLength(){const t=this.length;return 32767>=this.__unsignedDigit(t-1)?2*t-1:2*t}__halfDigit(t){return 32767&this[t>>>1]>>>15*(1&t)}__setHalfDigit(t,e){const r=t>>>1,n=this.__digit(r),o=1&t?32767&n|e<<15:1073709056&n|32767&e;this.__setDigit(r,o)}static __digitPow(t,e){let r=1;for(;0<e;)1&e&&(r*=t),e>>>=1,t*=t;return r}static __isOneDigitInt(t){return(1073741823&t)===t}}return s.__kMaxLength=33554432,s.__kMaxLengthBits=s.__kMaxLength<<5,s.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],s.__kBitsPerCharTableShift=5,s.__kBitsPerCharTableMultiplier=1<<s.__kBitsPerCharTableShift,s.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],s.__kBitConversionBuffer=new ArrayBuffer(8),s.__kBitConversionDouble=new Float64Array(s.__kBitConversionBuffer),s.__kBitConversionInts=new Int32Array(s.__kBitConversionBuffer),s.__clz30=e?function(t){return e(t)-2}:function(t){var e=Math.LN2,r=Math.log;return 0===t?30:0|29-(0|r(t>>>0)/e)},s.__imul=t||function(t,e){return 0|t*e},s}()},185731:(t,e,r)=>{var n;if("object"===typeof globalThis)n=globalThis;else try{n=r(299742)}catch(a){}finally{if(n||"undefined"===typeof window||(n=window),!n)throw new Error("Could not determine global this")}var o=n.WebSocket||n.MozWebSocket,s=r(527755);function i(t,e){return e?new o(t,e):new o(t)}o&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(t){Object.defineProperty(i,t,{get:function(){return o[t]}})})),t.exports={w3cwebsocket:o?i:null,version:s}},527755:(t,e,r)=>{t.exports=r(884735).version},942156:t=>{"use strict";t.exports=JSON.parse('{"name":"js-conflux-sdk","description":"JavaScript Conflux Software Development Kit","version":"2.1.6","license":"LGPL-3.0","author":"pan.wang@confluxnetwork.org","repository":"https://github.com/Conflux-Chain/js-conflux-sdk.git","keywords":["conflux","sdk"],"main":"src/index.js","bin":{"cfxjs":"bin/cfxjs.js","sponsor":"bin/sponsor.js","rpc":"bin/rpc.js"},"types":"./dist/types/index.d.ts","browser":"dist/js-conflux-sdk.umd.min.js","browserify-browser":{"secp256k1":"secp256k1/elliptic","./src/util/jsbi":"jsbi"},"files":["dist","mock","src"],"scripts":{"eslint":"npx eslint ./src ./test ./mock","build":"node scripts/build-frontend.js && npm run gendts","gendts":"npx tsc && node scripts/deal-dts.js","document":"node scripts/document.js","jsdocToMd":"node scripts/jsdoc-to-md.js","jsdoc":"jsdoc -c jsdoc.json","prepublishOnly":"npm run build","test":"jest --coverage","react":"npm run build & cd react & yarn build & yarn start"},"browserslit":"cover 99.5%","dependencies":{"@conflux-dev/conflux-address-js":"^1.3.16","abi-util-lite":"^0.1.0","big.js":"^5.2.2","commander":"^8.0.0","keccak":"^2.0.0","lodash":"^4.17.19","rlp":"^2.2.7","scrypt-js":"^3.0.1","secp256k1":"^3.7.1","superagent":"^6.1.0","websocket":"^1.0.31"},"devDependencies":{"@babel/core":"^7.8.4","@babel/plugin-transform-runtime":"^7.8.3","@babel/preset-env":"^7.8.4","@babel/runtime":"^7.8.4","@conflux-dev/jsdoc-tsimport-plugin":"^1.0.5","@conflux-dev/jsonrpc-spec":"^0.0.5","@geekberry/jsdoc-to-md":"0.0.8","@types/node":"^14.0.23","babel-plugin-lodash":"^3.3.4","babelify":"^10.0.0","browserify":"^16.5.1","concurrently":"^5.1.0","eslint":"^7.12.0","eslint-config-airbnb-base":"^14.0.0","eslint-plugin-import":"^2.18.2","exorcist":"^1.0.1","fs-extra":"^8.1.0","jest":"26.6.0","jsbi":"^3.1.4","jsdoc-to-markdown":"^7.1.0","jsdoc-tsimport-plugin":"^1.0.5","minify-stream":"^2.0.1","mold-source-map":"^0.4.0","solc":"^0.6.10","tidy-jsdoc":"^1.4.1","typescript":"^4.6.4"},"resolutions":{"tinyify/acorn-node/acorn":"7.1.1","eslint/espree/acorn":"7.1.1","tinyify/unassertify/unassert/acorn":"7.1.1","**/minimist":"^1.2.3","**/kind-of":"^6.0.3","**/elliptic":"^6.5.3","**/lodash":"^4.17.20","**/babel-jest":"^26.6.0","jest/jest-cli/jest-config/jest-environment-jsdom/jsdom/acorn-globals/acorn":"6.4.1"}}')},884735:t=>{"use strict";t.exports=JSON.parse('{"name":"websocket","description":"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.","keywords":["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],"author":"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)","contributors":["I\xf1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],"version":"1.0.34","repository":{"type":"git","url":"https://github.com/theturtle32/WebSocket-Node.git"},"homepage":"https://github.com/theturtle32/WebSocket-Node","engines":{"node":">=4.0.0"},"dependencies":{"bufferutil":"^4.0.1","debug":"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2","yaeti":"^0.0.6"},"devDependencies":{"buffer-equal":"^1.0.0","gulp":"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1","jshint":"^2.0.0","tape":"^4.9.1"},"config":{"verbose":false},"scripts":{"test":"tape test/unit/*.js","gulp":"gulp"},"main":"index","directories":{"lib":"./lib"},"browser":"lib/browser.js","license":"Apache-2.0"}')}}]);